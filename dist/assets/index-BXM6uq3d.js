function v$(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(s,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $j={exports:{}},lp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BM;function j$(){if(BM)return lp;BM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:e,type:s,key:l,ref:i!==void 0?i:null,props:o}}return lp.Fragment=t,lp.jsx=n,lp.jsxs=n,lp}var $M;function S$(){return $M||($M=1,$j.exports=j$()),$j.exports}var r=S$(),Fj={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FM;function C$(){if(FM)return Ut;FM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function x(I){return I===null||typeof I!="object"?null:(I=m&&I[m]||I["@@iterator"],typeof I=="function"?I:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function S(I,ee,ae){this.props=I,this.context=ee,this.refs=C,this.updater=ae||y}S.prototype.isReactComponent={},S.prototype.setState=function(I,ee){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,ee,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function E(){}E.prototype=S.prototype;function k(I,ee,ae){this.props=I,this.context=ee,this.refs=C,this.updater=ae||y}var A=k.prototype=new E;A.constructor=k,b(A,S.prototype),A.isPureReactComponent=!0;var T=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function $(I,ee,ae,P,R,N){return ae=N.ref,{$$typeof:e,type:I,key:ee,ref:ae!==void 0?ae:null,props:N}}function W(I,ee){return $(I.type,ee,void 0,void 0,void 0,I.props)}function te(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function re(I){var ee={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ae){return ee[ae]})}var U=/\/+/g;function oe(I,ee){return typeof I=="object"&&I!==null&&I.key!=null?re(""+I.key):ee.toString(36)}function xe(){}function ie(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(xe,xe):(I.status="pending",I.then(function(ee){I.status==="pending"&&(I.status="fulfilled",I.value=ee)},function(ee){I.status==="pending"&&(I.status="rejected",I.reason=ee)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function H(I,ee,ae,P,R){var N=typeof I;(N==="undefined"||N==="boolean")&&(I=null);var Z=!1;if(I===null)Z=!0;else switch(N){case"bigint":case"string":case"number":Z=!0;break;case"object":switch(I.$$typeof){case e:case t:Z=!0;break;case p:return Z=I._init,H(Z(I._payload),ee,ae,P,R)}}if(Z)return R=R(I),Z=P===""?"."+oe(I,0):P,T(R)?(ae="",Z!=null&&(ae=Z.replace(U,"$&/")+"/"),H(R,ee,ae,"",function(je){return je})):R!=null&&(te(R)&&(R=W(R,ae+(R.key==null||I&&I.key===R.key?"":(""+R.key).replace(U,"$&/")+"/")+Z)),ee.push(R)),1;Z=0;var ke=P===""?".":P+":";if(T(I))for(var Te=0;Te<I.length;Te++)P=I[Te],N=ke+oe(P,Te),Z+=H(P,ee,ae,N,R);else if(Te=x(I),typeof Te=="function")for(I=Te.call(I),Te=0;!(P=I.next()).done;)P=P.value,N=ke+oe(P,Te++),Z+=H(P,ee,ae,N,R);else if(N==="object"){if(typeof I.then=="function")return H(ie(I),ee,ae,P,R);throw ee=String(I),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Z}function F(I,ee,ae){if(I==null)return I;var P=[],R=0;return H(I,P,"","",function(N){return ee.call(ae,N,R++)}),P}function _(I){if(I._status===-1){var ee=I._result;ee=ee(),ee.then(function(ae){(I._status===0||I._status===-1)&&(I._status=1,I._result=ae)},function(ae){(I._status===0||I._status===-1)&&(I._status=2,I._result=ae)}),I._status===-1&&(I._status=0,I._result=ee)}if(I._status===1)return I._result.default;throw I._result}var B=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function fe(){}return Ut.Children={map:F,forEach:function(I,ee,ae){F(I,function(){ee.apply(this,arguments)},ae)},count:function(I){var ee=0;return F(I,function(){ee++}),ee},toArray:function(I){return F(I,function(ee){return ee})||[]},only:function(I){if(!te(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ut.Component=S,Ut.Fragment=n,Ut.Profiler=i,Ut.PureComponent=k,Ut.StrictMode=s,Ut.Suspense=d,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(I){return M.H.useMemoCache(I)}},Ut.cache=function(I){return function(){return I.apply(null,arguments)}},Ut.cloneElement=function(I,ee,ae){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var P=b({},I.props),R=I.key,N=void 0;if(ee!=null)for(Z in ee.ref!==void 0&&(N=void 0),ee.key!==void 0&&(R=""+ee.key),ee)!D.call(ee,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&ee.ref===void 0||(P[Z]=ee[Z]);var Z=arguments.length-2;if(Z===1)P.children=ae;else if(1<Z){for(var ke=Array(Z),Te=0;Te<Z;Te++)ke[Te]=arguments[Te+2];P.children=ke}return $(I.type,R,void 0,void 0,N,P)},Ut.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},Ut.createElement=function(I,ee,ae){var P,R={},N=null;if(ee!=null)for(P in ee.key!==void 0&&(N=""+ee.key),ee)D.call(ee,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(R[P]=ee[P]);var Z=arguments.length-2;if(Z===1)R.children=ae;else if(1<Z){for(var ke=Array(Z),Te=0;Te<Z;Te++)ke[Te]=arguments[Te+2];R.children=ke}if(I&&I.defaultProps)for(P in Z=I.defaultProps,Z)R[P]===void 0&&(R[P]=Z[P]);return $(I,N,void 0,void 0,null,R)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(I){return{$$typeof:u,render:I}},Ut.isValidElement=te,Ut.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:_}},Ut.memo=function(I,ee){return{$$typeof:h,type:I,compare:ee===void 0?null:ee}},Ut.startTransition=function(I){var ee=M.T,ae={};M.T=ae;try{var P=I(),R=M.S;R!==null&&R(ae,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(fe,B)}catch(N){B(N)}finally{M.T=ee}},Ut.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ut.use=function(I){return M.H.use(I)},Ut.useActionState=function(I,ee,ae){return M.H.useActionState(I,ee,ae)},Ut.useCallback=function(I,ee){return M.H.useCallback(I,ee)},Ut.useContext=function(I){return M.H.useContext(I)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(I,ee){return M.H.useDeferredValue(I,ee)},Ut.useEffect=function(I,ee,ae){var P=M.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(I,ee)},Ut.useId=function(){return M.H.useId()},Ut.useImperativeHandle=function(I,ee,ae){return M.H.useImperativeHandle(I,ee,ae)},Ut.useInsertionEffect=function(I,ee){return M.H.useInsertionEffect(I,ee)},Ut.useLayoutEffect=function(I,ee){return M.H.useLayoutEffect(I,ee)},Ut.useMemo=function(I,ee){return M.H.useMemo(I,ee)},Ut.useOptimistic=function(I,ee){return M.H.useOptimistic(I,ee)},Ut.useReducer=function(I,ee,ae){return M.H.useReducer(I,ee,ae)},Ut.useRef=function(I){return M.H.useRef(I)},Ut.useState=function(I){return M.H.useState(I)},Ut.useSyncExternalStore=function(I,ee,ae){return M.H.useSyncExternalStore(I,ee,ae)},Ut.useTransition=function(){return M.H.useTransition()},Ut.version="19.1.1",Ut}var VM;function Km(){return VM||(VM=1,Fj.exports=C$()),Fj.exports}var j=Km();const Lt=tf(j),HM=v$({__proto__:null,default:Lt},[j]);var Vj={exports:{}},cp={},Hj={exports:{}},Uj={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UM;function w$(){return UM||(UM=1,(function(e){function t(F,_){var B=F.length;F.push(_);e:for(;0<B;){var fe=B-1>>>1,I=F[fe];if(0<i(I,_))F[fe]=_,F[B]=I,B=fe;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var _=F[0],B=F.pop();if(B!==_){F[0]=B;e:for(var fe=0,I=F.length,ee=I>>>1;fe<ee;){var ae=2*(fe+1)-1,P=F[ae],R=ae+1,N=F[R];if(0>i(P,B))R<I&&0>i(N,P)?(F[fe]=N,F[R]=B,fe=R):(F[fe]=P,F[ae]=B,fe=ae);else if(R<I&&0>i(N,B))F[fe]=N,F[R]=B,fe=R;else break e}}return _}function i(F,_){var B=F.sortIndex-_.sortIndex;return B!==0?B:F.id-_.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,x=3,y=!1,b=!1,C=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function T(F){for(var _=n(h);_!==null;){if(_.callback===null)s(h);else if(_.startTime<=F)s(h),_.sortIndex=_.expirationTime,t(d,_);else break;_=n(h)}}function M(F){if(C=!1,T(F),!b)if(n(d)!==null)b=!0,D||(D=!0,oe());else{var _=n(h);_!==null&&H(M,_.startTime-F)}}var D=!1,$=-1,W=5,te=-1;function re(){return S?!0:!(e.unstable_now()-te<W)}function U(){if(S=!1,D){var F=e.unstable_now();te=F;var _=!0;try{e:{b=!1,C&&(C=!1,k($),$=-1),y=!0;var B=x;try{t:{for(T(F),m=n(d);m!==null&&!(m.expirationTime>F&&re());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,x=m.priorityLevel;var I=fe(m.expirationTime<=F);if(F=e.unstable_now(),typeof I=="function"){m.callback=I,T(F),_=!0;break t}m===n(d)&&s(d),T(F)}else s(d);m=n(d)}if(m!==null)_=!0;else{var ee=n(h);ee!==null&&H(M,ee.startTime-F),_=!1}}break e}finally{m=null,x=B,y=!1}_=void 0}}finally{_?oe():D=!1}}}var oe;if(typeof A=="function")oe=function(){A(U)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ie=xe.port2;xe.port1.onmessage=U,oe=function(){ie.postMessage(null)}}else oe=function(){E(U,0)};function H(F,_){$=E(function(){F(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(F){switch(x){case 1:case 2:case 3:var _=3;break;default:_=x}var B=x;x=_;try{return F()}finally{x=B}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(F,_){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var B=x;x=F;try{return _()}finally{x=B}},e.unstable_scheduleCallback=function(F,_,B){var fe=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?fe+B:fe):B=fe,F){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=B+I,F={id:p++,callback:_,priorityLevel:F,startTime:B,expirationTime:I,sortIndex:-1},B>fe?(F.sortIndex=B,t(h,F),n(d)===null&&F===n(h)&&(C?(k($),$=-1):C=!0,H(M,B-fe))):(F.sortIndex=I,t(d,F),b||y||(b=!0,D||(D=!0,oe()))),F},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(F){var _=x;return function(){var B=x;x=_;try{return F.apply(this,arguments)}finally{x=B}}}})(Uj)),Uj}var WM;function E$(){return WM||(WM=1,Hj.exports=w$()),Hj.exports}var Wj={exports:{}},Ts={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM;function k$(){if(qM)return Ts;qM=1;var e=Km();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ts.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,p)},Ts.flushSync=function(d){var h=l.T,p=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=h,s.p=p,s.d.f()}},Ts.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},Ts.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Ts.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:y}):p==="script"&&s.d.X(d,{crossOrigin:m,integrity:x,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ts.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},Ts.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);s.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ts.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},Ts.requestFormReset=function(d){s.d.r(d)},Ts.unstable_batchedUpdates=function(d,h){return d(h)},Ts.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},Ts.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ts.version="19.1.1",Ts}var GM;function BP(){if(GM)return Wj.exports;GM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wj.exports=k$(),Wj.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YM;function A$(){if(YM)return cp;YM=1;var e=E$(),t=Km(),n=BP();function s(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function l(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function u(a){if(o(a)!==a)throw Error(s(188))}function d(a){var c=a.alternate;if(!c){if(c=o(a),c===null)throw Error(s(188));return c!==a?null:a}for(var f=a,g=c;;){var v=f.return;if(v===null)break;var w=v.alternate;if(w===null){if(g=v.return,g!==null){f=g;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===f)return u(v),a;if(w===g)return u(v),c;w=w.sibling}throw Error(s(188))}if(f.return!==g.return)f=v,g=w;else{for(var z=!1,V=v.child;V;){if(V===f){z=!0,f=v,g=w;break}if(V===g){z=!0,g=v,f=w;break}V=V.sibling}if(!z){for(V=w.child;V;){if(V===f){z=!0,f=w,g=v;break}if(V===g){z=!0,g=w,f=v;break}V=V.sibling}if(!z)throw Error(s(189))}}if(f.alternate!==g)throw Error(s(190))}if(f.tag!==3)throw Error(s(188));return f.stateNode.current===f?a:c}function h(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=h(a),c!==null)return c;a=a.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function oe(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var xe=Symbol.for("react.client.reference");function ie(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===xe?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case S:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case D:return"SuspenseList";case te:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case A:return(a.displayName||"Context")+".Provider";case k:return(a._context.displayName||"Context")+".Consumer";case T:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case $:return c=a.displayName||null,c!==null?c:ie(a.type)||"Memo";case W:c=a._payload,a=a._init;try{return ie(a(c))}catch{}}return null}var H=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},fe=[],I=-1;function ee(a){return{current:a}}function ae(a){0>I||(a.current=fe[I],fe[I]=null,I--)}function P(a,c){I++,fe[I]=a.current,a.current=c}var R=ee(null),N=ee(null),Z=ee(null),ke=ee(null);function Te(a,c){switch(P(Z,c),P(N,a),P(R,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?fM(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=fM(c),a=pM(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ae(R),P(R,a)}function je(){ae(R),ae(N),ae(Z)}function Ke(a){a.memoizedState!==null&&P(ke,a);var c=R.current,f=pM(c,a.type);c!==f&&(P(N,a),P(R,f))}function Xe(a){N.current===a&&(ae(R),ae(N)),ke.current===a&&(ae(ke),rp._currentValue=B)}var He=Object.prototype.hasOwnProperty,pt=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,Tt=e.unstable_shouldYield,ue=e.unstable_requestPaint,Ee=e.unstable_now,nt=e.unstable_getCurrentPriorityLevel,X=e.unstable_ImmediatePriority,le=e.unstable_UserBlockingPriority,Ve=e.unstable_NormalPriority,at=e.unstable_LowPriority,dn=e.unstable_IdlePriority,Fn=e.log,Oe=e.unstable_setDisableYieldValue,We=null,bt=null;function Be(a){if(typeof Fn=="function"&&Oe(a),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(We,a)}catch{}}var ot=Math.clz32?Math.clz32:ct,vn=Math.log,Le=Math.LN2;function ct(a){return a>>>=0,a===0?32:31-(vn(a)/Le|0)|0}var Ht=256,hn=4194304;function _t(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Sn(a,c,f){var g=a.pendingLanes;if(g===0)return 0;var v=0,w=a.suspendedLanes,z=a.pingedLanes;a=a.warmLanes;var V=g&134217727;return V!==0?(g=V&~w,g!==0?v=_t(g):(z&=V,z!==0?v=_t(z):f||(f=V&~a,f!==0&&(v=_t(f))))):(V=g&~w,V!==0?v=_t(V):z!==0?v=_t(z):f||(f=g&~a,f!==0&&(v=_t(f)))),v===0?0:c!==0&&c!==v&&(c&w)===0&&(w=v&-v,f=c&-c,w>=f||w===32&&(f&4194048)!==0)?c:v}function fn(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function yr(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(){var a=Ht;return Ht<<=1,(Ht&4194048)===0&&(Ht=256),a}function rs(){var a=hn;return hn<<=1,(hn&62914560)===0&&(hn=4194304),a}function jn(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function lr(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ss(a,c,f,g,v,w){var z=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var V=a.entanglements,se=a.expirationTimes,be=a.hiddenUpdates;for(f=z&~f;0<f;){var Ne=31-ot(f),_e=1<<Ne;V[Ne]=0,se[Ne]=-1;var ve=be[Ne];if(ve!==null)for(be[Ne]=null,Ne=0;Ne<ve.length;Ne++){var Se=ve[Ne];Se!==null&&(Se.lane&=-536870913)}f&=~_e}g!==0&&jl(a,g,0),w!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=w&~(z&~c))}function jl(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var g=31-ot(c);a.entangledLanes|=c,a.entanglements[g]=a.entanglements[g]|1073741824|f&4194090}function Sl(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var g=31-ot(f),v=1<<g;v&c|a[g]&c&&(a[g]|=c),f&=~v}}function lo(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function co(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Cl(){var a=_.p;return a!==0?a:(a=window.event,a===void 0?32:NM(a.type))}function zs(a,c){var f=_.p;try{return _.p=a,c()}finally{_.p=f}}var Xs=Math.random().toString(36).slice(2),Br="__reactFiber$"+Xs,Kr="__reactProps$"+Xs,hi="__reactContainer$"+Xs,Je="__reactEvents$"+Xs,Do="__reactListeners$"+Xs,ff="__reactHandles$"+Xs,wl="__reactResources$"+Xs,ma="__reactMarker$"+Xs;function Bc(a){delete a[Br],delete a[Kr],delete a[Je],delete a[Do],delete a[ff]}function Di(a){var c=a[Br];if(c)return c;for(var f=a.parentNode;f;){if(c=f[hi]||f[Br]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=yM(a);a!==null;){if(f=a[Br])return f;a=yM(a)}return c}a=f,f=a.parentNode}return null}function Is(a){if(a=a[Br]||a[hi]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Oo(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(s(33))}function Oi(a){var c=a[wl];return c||(c=a[wl]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function br(a){a[ma]=!0}var dd=new Set,El={};function uo(a,c){Js(a,c),Js(a+"Capture",c)}function Js(a,c){for(El[a]=c,a=0;a<c.length;a++)dd.add(c[a])}var hd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ga={},kl={};function fd(a){return He.call(kl,a)?!0:He.call(ga,a)?!1:hd.test(a)?kl[a]=!0:(ga[a]=!0,!1)}function ho(a,c,f){if(fd(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function xa(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function Ls(a,c,f,g){if(g===null)a.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+g)}}var $c,pd;function Ni(a){if($c===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);$c=c&&c[1]||"",pd=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$c+a+pd}var md=!1;function Fc(a,c){if(!a||md)return"";md=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(Se){var ve=Se}Reflect.construct(a,[],_e)}else{try{_e.call()}catch(Se){ve=Se}a.call(_e.prototype)}}else{try{throw Error()}catch(Se){ve=Se}(_e=a())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(Se){if(Se&&ve&&typeof Se.stack=="string")return[Se.stack,ve.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),z=w[0],V=w[1];if(z&&V){var se=z.split(`
`),be=V.split(`
`);for(v=g=0;g<se.length&&!se[g].includes("DetermineComponentFrameRoot");)g++;for(;v<be.length&&!be[v].includes("DetermineComponentFrameRoot");)v++;if(g===se.length||v===be.length)for(g=se.length-1,v=be.length-1;1<=g&&0<=v&&se[g]!==be[v];)v--;for(;1<=g&&0<=v;g--,v--)if(se[g]!==be[v]){if(g!==1||v!==1)do if(g--,v--,0>v||se[g]!==be[v]){var Ne=`
`+se[g].replace(" at new "," at ");return a.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",a.displayName)),Ne}while(1<=g&&0<=v);break}}}finally{md=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Ni(f):""}function pf(a){switch(a.tag){case 26:case 27:case 5:return Ni(a.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return Fc(a.type,!1);case 11:return Fc(a.type.render,!1);case 1:return Fc(a.type,!0);case 31:return Ni("Activity");default:return""}}function gn(a){try{var c="";do c+=pf(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function cr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function fo(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function gd(a){var c=fo(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),g=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,w=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return v.call(this)},set:function(z){g=""+z,w.call(this,z)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(z){g=""+z},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function ya(a){a._valueTracker||(a._valueTracker=gd(a))}function Al(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),g="";return a&&(g=fo(a)?a.checked?"true":"false":a.value),a=g,a!==f?(c.setValue(a),!0):!1}function ba(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var No=/[\n"\\]/g;function hr(a){return a.replace(No,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function po(a,c,f,g,v,w,z,V){a.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?a.type=z:a.removeAttribute("type"),c!=null?z==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+cr(c)):a.value!==""+cr(c)&&(a.value=""+cr(c)):z!=="submit"&&z!=="reset"||a.removeAttribute("value"),c!=null?Tl(a,z,cr(c)):f!=null?Tl(a,z,cr(f)):g!=null&&a.removeAttribute("value"),v==null&&w!=null&&(a.defaultChecked=!!w),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?a.name=""+cr(V):a.removeAttribute("name")}function va(a,c,f,g,v,w,z,V){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),c!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;f=f!=null?""+cr(f):"",c=c!=null?""+cr(c):f,V||c===a.value||(a.value=c),a.defaultValue=c}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=V?a.checked:!!g,a.defaultChecked=!!g,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(a.name=z)}function Tl(a,c,f){c==="number"&&ba(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function Pi(a,c,f,g){if(a=a.options,c){c={};for(var v=0;v<f.length;v++)c["$"+f[v]]=!0;for(f=0;f<a.length;f++)v=c.hasOwnProperty("$"+a[f].value),a[f].selected!==v&&(a[f].selected=v),v&&g&&(a[f].defaultSelected=!0)}else{for(f=""+cr(f),c=null,v=0;v<a.length;v++){if(a[v].value===f){a[v].selected=!0,g&&(a[v].defaultSelected=!0);return}c!==null||a[v].disabled||(c=a[v])}c!==null&&(c.selected=!0)}}function Vc(a,c,f){if(c!=null&&(c=""+cr(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+cr(f):""}function ja(a,c,f,g){if(c==null){if(g!=null){if(f!=null)throw Error(s(92));if(H(g)){if(1<g.length)throw Error(s(93));g=g[0]}f=g}f==null&&(f=""),c=f}f=cr(c),a.defaultValue=f,g=a.textContent,g===f&&g!==""&&g!==null&&(a.value=g)}function zi(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var mf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xd(a,c,f){var g=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":g?a.setProperty(c,f):typeof f!="number"||f===0||mf.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function gf(a,c,f){if(c!=null&&typeof c!="object")throw Error(s(62));if(a=a.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var v in c)g=c[v],c.hasOwnProperty(v)&&f[v]!==g&&xd(a,v,g)}else for(var w in c)c.hasOwnProperty(w)&&xd(a,w,c[w])}function Sa(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(a){return xf.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Po=null;function wa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var fi=null,rt=null;function ws(a){var c=Is(a);if(c&&(a=c.stateNode)){var f=a[Kr]||null;e:switch(a=c.stateNode,c.type){case"input":if(po(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+hr(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var g=f[c];if(g!==a&&g.form===a.form){var v=g[Kr]||null;if(!v)throw Error(s(90));po(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(c=0;c<f.length;c++)g=f[c],g.form===a.form&&Al(g)}break e;case"textarea":Vc(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Pi(a,!!f.multiple,c,!1)}}}var Ml=!1;function Rl(a,c,f){if(Ml)return a(c,f);Ml=!0;try{var g=a(c);return g}finally{if(Ml=!1,(fi!==null||rt!==null)&&(ex(),fi&&(c=fi,a=rt,rt=fi=null,ws(c),a)))for(c=0;c<a.length;c++)ws(a[c])}}function mo(a,c){var f=a.stateNode;if(f===null)return null;var g=f[Kr]||null;if(g===null)return null;f=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(s(231,c,typeof f));return f}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),go=!1;if($r)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){go=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{go=!1}var pi=null,Uc=null,Ea=null;function yd(){if(Ea)return Ea;var a,c=Uc,f=c.length,g,v="value"in pi?pi.value:pi.textContent,w=v.length;for(a=0;a<f&&c[a]===v[a];a++);var z=f-a;for(g=1;g<=z&&c[f-g]===v[w-g];g++);return Ea=v.slice(a,1<g?1-g:void 0)}function Dl(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function ka(){return!0}function bd(){return!1}function J(a){function c(f,g,v,w,z){this._reactName=f,this._targetInst=v,this.type=g,this.nativeEvent=w,this.target=z,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(f=a[V],this[V]=f?f(w):w[V]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ka:bd,this.isPropagationStopped=bd,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),c}var he={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ce=J(he),st=p({},he,{view:0,detail:0}),Xt=J(st),xn,En,Yt,Cn=p({},st,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ps,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Yt&&(Yt&&a.type==="mousemove"?(xn=a.screenX-Yt.screenX,En=a.screenY-Yt.screenY):En=xn=0,Yt=a),xn)},movementY:function(a){return"movementY"in a?a.movementY:En}}),Es=J(Cn),vr=p({},Cn,{dataTransfer:0}),Aa=J(vr),Wc=p({},st,{relatedTarget:0}),Ta=J(Wc),vd=p({},he,{animationName:0,elapsedTime:0,pseudoElement:0}),yf=J(vd),qb=p({},he,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Gb=J(qb),L=p({},he,{data:0}),K=J(L),Ye={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function on(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=jr[a])?!!c[a]:!1}function ps(){return on}var zo=p({},st,{key:function(a){if(a.key){var c=Ye[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Dl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Mt[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ps,charCode:function(a){return a.type==="keypress"?Dl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Dl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ks=J(zo),Io=p({},Cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=J(Io),Xr=p({},st,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ps}),bf=J(Xr),jd=p({},he,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yb=J(jd),$6=p({},Cn,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),F6=J($6),V6=p({},he,{newState:0,oldState:0}),H6=J(V6),U6=[9,13,27,32],Kb=$r&&"CompositionEvent"in window,vf=null;$r&&"documentMode"in document&&(vf=document.documentMode);var W6=$r&&"TextEvent"in window&&!vf,Sk=$r&&(!Kb||vf&&8<vf&&11>=vf),Ck=" ",wk=!1;function Ek(a,c){switch(a){case"keyup":return U6.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kk(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Sd=!1;function q6(a,c){switch(a){case"compositionend":return kk(c);case"keypress":return c.which!==32?null:(wk=!0,Ck);case"textInput":return a=c.data,a===Ck&&wk?null:a;default:return null}}function G6(a,c){if(Sd)return a==="compositionend"||!Kb&&Ek(a,c)?(a=yd(),Ea=Uc=pi=null,Sd=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Sk&&c.locale!=="ko"?null:c.data;default:return null}}var Y6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ak(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Y6[a.type]:c==="textarea"}function Tk(a,c,f,g){fi?rt?rt.push(g):rt=[g]:fi=g,c=ox(c,"onChange"),0<c.length&&(f=new Ce("onChange","change",null,f,g),a.push({event:f,listeners:c}))}var jf=null,Sf=null;function K6(a){lM(a,0)}function jg(a){var c=Oo(a);if(Al(c))return a}function Mk(a,c){if(a==="change")return c}var Rk=!1;if($r){var Xb;if($r){var Jb="oninput"in document;if(!Jb){var Dk=document.createElement("div");Dk.setAttribute("oninput","return;"),Jb=typeof Dk.oninput=="function"}Xb=Jb}else Xb=!1;Rk=Xb&&(!document.documentMode||9<document.documentMode)}function Ok(){jf&&(jf.detachEvent("onpropertychange",Nk),Sf=jf=null)}function Nk(a){if(a.propertyName==="value"&&jg(Sf)){var c=[];Tk(c,Sf,a,wa(a)),Rl(K6,c)}}function X6(a,c,f){a==="focusin"?(Ok(),jf=c,Sf=f,jf.attachEvent("onpropertychange",Nk)):a==="focusout"&&Ok()}function J6(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return jg(Sf)}function Q6(a,c){if(a==="click")return jg(c)}function Z6(a,c){if(a==="input"||a==="change")return jg(c)}function eB(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var mi=typeof Object.is=="function"?Object.is:eB;function Cf(a,c){if(mi(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var v=f[g];if(!He.call(c,v)||!mi(a[v],c[v]))return!1}return!0}function Pk(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function zk(a,c){var f=Pk(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=c&&g>=c)return{node:f,offset:c-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Pk(f)}}function Ik(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Ik(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Lk(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=ba(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=ba(a.document)}return c}function Qb(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var tB=$r&&"documentMode"in document&&11>=document.documentMode,Cd=null,Zb=null,wf=null,ev=!1;function _k(a,c,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ev||Cd==null||Cd!==ba(g)||(g=Cd,"selectionStart"in g&&Qb(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),wf&&Cf(wf,g)||(wf=g,g=ox(Zb,"onSelect"),0<g.length&&(c=new Ce("onSelect","select",null,c,f),a.push({event:c,listeners:g}),c.target=Cd)))}function qc(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var wd={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionrun:qc("Transition","TransitionRun"),transitionstart:qc("Transition","TransitionStart"),transitioncancel:qc("Transition","TransitionCancel"),transitionend:qc("Transition","TransitionEnd")},tv={},Bk={};$r&&(Bk=document.createElement("div").style,"AnimationEvent"in window||(delete wd.animationend.animation,delete wd.animationiteration.animation,delete wd.animationstart.animation),"TransitionEvent"in window||delete wd.transitionend.transition);function Gc(a){if(tv[a])return tv[a];if(!wd[a])return a;var c=wd[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in Bk)return tv[a]=c[f];return a}var $k=Gc("animationend"),Fk=Gc("animationiteration"),Vk=Gc("animationstart"),nB=Gc("transitionrun"),rB=Gc("transitionstart"),sB=Gc("transitioncancel"),Hk=Gc("transitionend"),Uk=new Map,nv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nv.push("scrollEnd");function yo(a,c){Uk.set(a,c),uo(c,[a])}var Wk=new WeakMap;function Ii(a,c){if(typeof a=="object"&&a!==null){var f=Wk.get(a);return f!==void 0?f:(c={value:a,source:c,stack:gn(c)},Wk.set(a,c),c)}return{value:a,source:c,stack:gn(c)}}var Li=[],Ed=0,rv=0;function Sg(){for(var a=Ed,c=rv=Ed=0;c<a;){var f=Li[c];Li[c++]=null;var g=Li[c];Li[c++]=null;var v=Li[c];Li[c++]=null;var w=Li[c];if(Li[c++]=null,g!==null&&v!==null){var z=g.pending;z===null?v.next=v:(v.next=z.next,z.next=v),g.pending=v}w!==0&&qk(f,v,w)}}function Cg(a,c,f,g){Li[Ed++]=a,Li[Ed++]=c,Li[Ed++]=f,Li[Ed++]=g,rv|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function sv(a,c,f,g){return Cg(a,c,f,g),wg(a)}function kd(a,c){return Cg(a,null,null,c),wg(a)}function qk(a,c,f){a.lanes|=f;var g=a.alternate;g!==null&&(g.lanes|=f);for(var v=!1,w=a.return;w!==null;)w.childLanes|=f,g=w.alternate,g!==null&&(g.childLanes|=f),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(v=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,v&&c!==null&&(v=31-ot(f),a=w.hiddenUpdates,g=a[v],g===null?a[v]=[c]:g.push(c),c.lane=f|536870912),w):null}function wg(a){if(50<Kf)throw Kf=0,uj=null,Error(s(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var Ad={};function iB(a,c,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(a,c,f,g){return new iB(a,c,f,g)}function iv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ma(a,c){var f=a.alternate;return f===null?(f=gi(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function Gk(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Eg(a,c,f,g,v,w){var z=0;if(g=a,typeof a=="function")iv(a)&&(z=1);else if(typeof a=="string")z=a$(a,f,R.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case te:return a=gi(31,f,c,v),a.elementType=te,a.lanes=w,a;case b:return Yc(f.children,v,w,c);case C:z=8,v|=24;break;case S:return a=gi(12,f,c,v|2),a.elementType=S,a.lanes=w,a;case M:return a=gi(13,f,c,v),a.elementType=M,a.lanes=w,a;case D:return a=gi(19,f,c,v),a.elementType=D,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case A:z=10;break e;case k:z=9;break e;case T:z=11;break e;case $:z=14;break e;case W:z=16,g=null;break e}z=29,f=Error(s(130,a===null?"null":typeof a,"")),g=null}return c=gi(z,f,c,v),c.elementType=a,c.type=g,c.lanes=w,c}function Yc(a,c,f,g){return a=gi(7,a,g,c),a.lanes=f,a}function ov(a,c,f){return a=gi(6,a,null,c),a.lanes=f,a}function av(a,c,f){return c=gi(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Td=[],Md=0,kg=null,Ag=0,_i=[],Bi=0,Kc=null,Ra=1,Da="";function Xc(a,c){Td[Md++]=Ag,Td[Md++]=kg,kg=a,Ag=c}function Yk(a,c,f){_i[Bi++]=Ra,_i[Bi++]=Da,_i[Bi++]=Kc,Kc=a;var g=Ra;a=Da;var v=32-ot(g)-1;g&=~(1<<v),f+=1;var w=32-ot(c)+v;if(30<w){var z=v-v%5;w=(g&(1<<z)-1).toString(32),g>>=z,v-=z,Ra=1<<32-ot(c)+v|f<<v|g,Da=w+a}else Ra=1<<w|f<<v|g,Da=a}function lv(a){a.return!==null&&(Xc(a,1),Yk(a,1,0))}function cv(a){for(;a===kg;)kg=Td[--Md],Td[Md]=null,Ag=Td[--Md],Td[Md]=null;for(;a===Kc;)Kc=_i[--Bi],_i[Bi]=null,Da=_i[--Bi],_i[Bi]=null,Ra=_i[--Bi],_i[Bi]=null}var _s=null,Sr=null,kn=!1,Jc=null,Lo=!1,uv=Error(s(519));function Qc(a){var c=Error(s(418,""));throw Af(Ii(c,a)),uv}function Kk(a){var c=a.stateNode,f=a.type,g=a.memoizedProps;switch(c[Br]=a,c[Kr]=g,f){case"dialog":tn("cancel",c),tn("close",c);break;case"iframe":case"object":case"embed":tn("load",c);break;case"video":case"audio":for(f=0;f<Jf.length;f++)tn(Jf[f],c);break;case"source":tn("error",c);break;case"img":case"image":case"link":tn("error",c),tn("load",c);break;case"details":tn("toggle",c);break;case"input":tn("invalid",c),va(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),ya(c);break;case"select":tn("invalid",c);break;case"textarea":tn("invalid",c),ja(c,g.value,g.defaultValue,g.children),ya(c)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||g.suppressHydrationWarning===!0||hM(c.textContent,f)?(g.popover!=null&&(tn("beforetoggle",c),tn("toggle",c)),g.onScroll!=null&&tn("scroll",c),g.onScrollEnd!=null&&tn("scrollend",c),g.onClick!=null&&(c.onclick=ax),c=!0):c=!1,c||Qc(a)}function Xk(a){for(_s=a.return;_s;)switch(_s.tag){case 5:case 13:Lo=!1;return;case 27:case 3:Lo=!0;return;default:_s=_s.return}}function Ef(a){if(a!==_s)return!1;if(!kn)return Xk(a),kn=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||kj(a.type,a.memoizedProps)),f=!f),f&&Sr&&Qc(a),Xk(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){Sr=vo(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}Sr=null}}else c===27?(c=Sr,Gl(a.type)?(a=Rj,Rj=null,Sr=a):Sr=c):Sr=_s?vo(a.stateNode.nextSibling):null;return!0}function kf(){Sr=_s=null,kn=!1}function Jk(){var a=Jc;return a!==null&&(ei===null?ei=a:ei.push.apply(ei,a),Jc=null),a}function Af(a){Jc===null?Jc=[a]:Jc.push(a)}var dv=ee(null),Zc=null,Oa=null;function Ol(a,c,f){P(dv,c._currentValue),c._currentValue=f}function Na(a){a._currentValue=dv.current,ae(dv)}function hv(a,c,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===f)break;a=a.return}}function fv(a,c,f,g){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var w=v.dependencies;if(w!==null){var z=v.child;w=w.firstContext;e:for(;w!==null;){var V=w;w=v;for(var se=0;se<c.length;se++)if(V.context===c[se]){w.lanes|=f,V=w.alternate,V!==null&&(V.lanes|=f),hv(w.return,f,a),g||(z=null);break e}w=V.next}}else if(v.tag===18){if(z=v.return,z===null)throw Error(s(341));z.lanes|=f,w=z.alternate,w!==null&&(w.lanes|=f),hv(z,f,a),z=null}else z=v.child;if(z!==null)z.return=v;else for(z=v;z!==null;){if(z===a){z=null;break}if(v=z.sibling,v!==null){v.return=z.return,z=v;break}z=z.return}v=z}}function Tf(a,c,f,g){a=null;for(var v=c,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var z=v.alternate;if(z===null)throw Error(s(387));if(z=z.memoizedProps,z!==null){var V=v.type;mi(v.pendingProps.value,z.value)||(a!==null?a.push(V):a=[V])}}else if(v===ke.current){if(z=v.alternate,z===null)throw Error(s(387));z.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(rp):a=[rp])}v=v.return}a!==null&&fv(c,a,f,g),c.flags|=262144}function Tg(a){for(a=a.firstContext;a!==null;){if(!mi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function eu(a){Zc=a,Oa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function As(a){return Qk(Zc,a)}function Mg(a,c){return Zc===null&&eu(a),Qk(a,c)}function Qk(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Oa===null){if(a===null)throw Error(s(308));Oa=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Oa=Oa.next=c;return f}var oB=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,g){a.push(g)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},aB=e.unstable_scheduleCallback,lB=e.unstable_NormalPriority,Jr={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pv(){return{controller:new oB,data:new Map,refCount:0}}function Mf(a){a.refCount--,a.refCount===0&&aB(lB,function(){a.controller.abort()})}var Rf=null,mv=0,Rd=0,Dd=null;function cB(a,c){if(Rf===null){var f=Rf=[];mv=0,Rd=xj(),Dd={status:"pending",value:void 0,then:function(g){f.push(g)}}}return mv++,c.then(Zk,Zk),c}function Zk(){if(--mv===0&&Rf!==null){Dd!==null&&(Dd.status="fulfilled");var a=Rf;Rf=null,Rd=0,Dd=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function uB(a,c){var f=[],g={status:"pending",value:null,reason:null,then:function(v){f.push(v)}};return a.then(function(){g.status="fulfilled",g.value=c;for(var v=0;v<f.length;v++)(0,f[v])(c)},function(v){for(g.status="rejected",g.reason=v,v=0;v<f.length;v++)(0,f[v])(void 0)}),g}var eA=F.S;F.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&cB(a,c),eA!==null&&eA(a,c)};var tu=ee(null);function gv(){var a=tu.current;return a!==null?a:Jn.pooledCache}function Rg(a,c){c===null?P(tu,tu.current):P(tu,c.pool)}function tA(){var a=gv();return a===null?null:{parent:Jr._currentValue,pool:a}}var Df=Error(s(460)),nA=Error(s(474)),Dg=Error(s(542)),xv={then:function(){}};function rA(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Og(){}function sA(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(Og,Og),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,oA(a),a;default:if(typeof c.status=="string")c.then(Og,Og);else{if(a=Jn,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=c,a.status="pending",a.then(function(g){if(c.status==="pending"){var v=c;v.status="fulfilled",v.value=g}},function(g){if(c.status==="pending"){var v=c;v.status="rejected",v.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,oA(a),a}throw Of=c,Df}}var Of=null;function iA(){if(Of===null)throw Error(s(459));var a=Of;return Of=null,a}function oA(a){if(a===Df||a===Dg)throw Error(s(483))}var Nl=!1;function yv(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bv(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Pl(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function zl(a,c,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(In&2)!==0){var v=g.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),g.pending=c,c=wg(a),qk(a,null,f),c}return Cg(a,g,c,f),wg(a)}function Nf(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,Sl(a,f)}}function vv(a,c){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var v=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var z={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?v=w=z:w=w.next=z,f=f.next}while(f!==null);w===null?v=w=c:w=w.next=c}else v=w=c;f={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var jv=!1;function Pf(){if(jv){var a=Dd;if(a!==null)throw a}}function zf(a,c,f,g){jv=!1;var v=a.updateQueue;Nl=!1;var w=v.firstBaseUpdate,z=v.lastBaseUpdate,V=v.shared.pending;if(V!==null){v.shared.pending=null;var se=V,be=se.next;se.next=null,z===null?w=be:z.next=be,z=se;var Ne=a.alternate;Ne!==null&&(Ne=Ne.updateQueue,V=Ne.lastBaseUpdate,V!==z&&(V===null?Ne.firstBaseUpdate=be:V.next=be,Ne.lastBaseUpdate=se))}if(w!==null){var _e=v.baseState;z=0,Ne=be=se=null,V=w;do{var ve=V.lane&-536870913,Se=ve!==V.lane;if(Se?(yn&ve)===ve:(g&ve)===ve){ve!==0&&ve===Rd&&(jv=!0),Ne!==null&&(Ne=Ne.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var It=a,Ot=V;ve=c;var Un=f;switch(Ot.tag){case 1:if(It=Ot.payload,typeof It=="function"){_e=It.call(Un,_e,ve);break e}_e=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Ot.payload,ve=typeof It=="function"?It.call(Un,_e,ve):It,ve==null)break e;_e=p({},_e,ve);break e;case 2:Nl=!0}}ve=V.callback,ve!==null&&(a.flags|=64,Se&&(a.flags|=8192),Se=v.callbacks,Se===null?v.callbacks=[ve]:Se.push(ve))}else Se={lane:ve,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ne===null?(be=Ne=Se,se=_e):Ne=Ne.next=Se,z|=ve;if(V=V.next,V===null){if(V=v.shared.pending,V===null)break;Se=V,V=Se.next,Se.next=null,v.lastBaseUpdate=Se,v.shared.pending=null}}while(!0);Ne===null&&(se=_e),v.baseState=se,v.firstBaseUpdate=be,v.lastBaseUpdate=Ne,w===null&&(v.shared.lanes=0),Hl|=z,a.lanes=z,a.memoizedState=_e}}function aA(a,c){if(typeof a!="function")throw Error(s(191,a));a.call(c)}function lA(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)aA(f[a],c)}var Od=ee(null),Ng=ee(0);function cA(a,c){a=$a,P(Ng,a),P(Od,c),$a=a|c.baseLanes}function Sv(){P(Ng,$a),P(Od,Od.current)}function Cv(){$a=Ng.current,ae(Od),ae(Ng)}var Il=0,Kt=null,Vn=null,Fr=null,Pg=!1,Nd=!1,nu=!1,zg=0,If=0,Pd=null,dB=0;function Dr(){throw Error(s(321))}function wv(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!mi(a[f],c[f]))return!1;return!0}function Ev(a,c,f,g,v,w){return Il=w,Kt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,F.H=a===null||a.memoizedState===null?qA:GA,nu=!1,w=f(g,v),nu=!1,Nd&&(w=dA(c,f,g,v)),uA(a),w}function uA(a){F.H=Fg;var c=Vn!==null&&Vn.next!==null;if(Il=0,Fr=Vn=Kt=null,Pg=!1,If=0,Pd=null,c)throw Error(s(300));a===null||is||(a=a.dependencies,a!==null&&Tg(a)&&(is=!0))}function dA(a,c,f,g){Kt=a;var v=0;do{if(Nd&&(Pd=null),If=0,Nd=!1,25<=v)throw Error(s(301));if(v+=1,Fr=Vn=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}F.H=yB,w=c(f,g)}while(Nd);return w}function hB(){var a=F.H,c=a.useState()[0];return c=typeof c.then=="function"?Lf(c):c,a=a.useState()[0],(Vn!==null?Vn.memoizedState:null)!==a&&(Kt.flags|=1024),c}function kv(){var a=zg!==0;return zg=0,a}function Av(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function Tv(a){if(Pg){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Pg=!1}Il=0,Fr=Vn=Kt=null,Nd=!1,If=zg=0,Pd=null}function Qs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Kt.memoizedState=Fr=a:Fr=Fr.next=a,Fr}function Vr(){if(Vn===null){var a=Kt.alternate;a=a!==null?a.memoizedState:null}else a=Vn.next;var c=Fr===null?Kt.memoizedState:Fr.next;if(c!==null)Fr=c,Vn=a;else{if(a===null)throw Kt.alternate===null?Error(s(467)):Error(s(310));Vn=a,a={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Fr===null?Kt.memoizedState=Fr=a:Fr=Fr.next=a}return Fr}function Mv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lf(a){var c=If;return If+=1,Pd===null&&(Pd=[]),a=sA(Pd,a,c),c=Kt,(Fr===null?c.memoizedState:Fr.next)===null&&(c=c.alternate,F.H=c===null||c.memoizedState===null?qA:GA),a}function Ig(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Lf(a);if(a.$$typeof===A)return As(a)}throw Error(s(438,String(a)))}function Rv(a){var c=null,f=Kt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var g=Kt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(v){return v.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Mv(),Kt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),g=0;g<a;g++)f[g]=re;return c.index++,f}function Pa(a,c){return typeof c=="function"?c(a):c}function Lg(a){var c=Vr();return Dv(c,Vn,a)}function Dv(a,c,f){var g=a.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=f;var v=a.baseQueue,w=g.pending;if(w!==null){if(v!==null){var z=v.next;v.next=w.next,w.next=z}c.baseQueue=v=w,g.pending=null}if(w=a.baseState,v===null)a.memoizedState=w;else{c=v.next;var V=z=null,se=null,be=c,Ne=!1;do{var _e=be.lane&-536870913;if(_e!==be.lane?(yn&_e)===_e:(Il&_e)===_e){var ve=be.revertLane;if(ve===0)se!==null&&(se=se.next={lane:0,revertLane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),_e===Rd&&(Ne=!0);else if((Il&ve)===ve){be=be.next,ve===Rd&&(Ne=!0);continue}else _e={lane:0,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},se===null?(V=se=_e,z=w):se=se.next=_e,Kt.lanes|=ve,Hl|=ve;_e=be.action,nu&&f(w,_e),w=be.hasEagerState?be.eagerState:f(w,_e)}else ve={lane:_e,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},se===null?(V=se=ve,z=w):se=se.next=ve,Kt.lanes|=_e,Hl|=_e;be=be.next}while(be!==null&&be!==c);if(se===null?z=w:se.next=V,!mi(w,a.memoizedState)&&(is=!0,Ne&&(f=Dd,f!==null)))throw f;a.memoizedState=w,a.baseState=z,a.baseQueue=se,g.lastRenderedState=w}return v===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Ov(a){var c=Vr(),f=c.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=a;var g=f.dispatch,v=f.pending,w=c.memoizedState;if(v!==null){f.pending=null;var z=v=v.next;do w=a(w,z.action),z=z.next;while(z!==v);mi(w,c.memoizedState)||(is=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),f.lastRenderedState=w}return[w,g]}function hA(a,c,f){var g=Kt,v=Vr(),w=kn;if(w){if(f===void 0)throw Error(s(407));f=f()}else f=c();var z=!mi((Vn||v).memoizedState,f);z&&(v.memoizedState=f,is=!0),v=v.queue;var V=mA.bind(null,g,v,a);if(_f(2048,8,V,[a]),v.getSnapshot!==c||z||Fr!==null&&Fr.memoizedState.tag&1){if(g.flags|=2048,zd(9,_g(),pA.bind(null,g,v,f,c),null),Jn===null)throw Error(s(349));w||(Il&124)!==0||fA(g,c,f)}return f}function fA(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=Kt.updateQueue,c===null?(c=Mv(),Kt.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function pA(a,c,f,g){c.value=f,c.getSnapshot=g,gA(c)&&xA(a)}function mA(a,c,f){return f(function(){gA(c)&&xA(a)})}function gA(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!mi(a,f)}catch{return!0}}function xA(a){var c=kd(a,2);c!==null&&ji(c,a,2)}function Nv(a){var c=Qs();if(typeof a=="function"){var f=a;if(a=f(),nu){Be(!0);try{f()}finally{Be(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:a},c}function yA(a,c,f,g){return a.baseState=f,Dv(a,Vn,typeof g=="function"?g:Pa)}function fB(a,c,f,g,v){if($g(a))throw Error(s(485));if(a=c.action,a!==null){var w={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){w.listeners.push(z)}};F.T!==null?f(!0):w.isTransition=!1,g(w),f=c.pending,f===null?(w.next=c.pending=w,bA(c,w)):(w.next=f.next,c.pending=f.next=w)}}function bA(a,c){var f=c.action,g=c.payload,v=a.state;if(c.isTransition){var w=F.T,z={};F.T=z;try{var V=f(v,g),se=F.S;se!==null&&se(z,V),vA(a,c,V)}catch(be){Pv(a,c,be)}finally{F.T=w}}else try{w=f(v,g),vA(a,c,w)}catch(be){Pv(a,c,be)}}function vA(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){jA(a,c,g)},function(g){return Pv(a,c,g)}):jA(a,c,f)}function jA(a,c,f){c.status="fulfilled",c.value=f,SA(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,bA(a,f)))}function Pv(a,c,f){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=f,SA(c),c=c.next;while(c!==g)}a.action=null}function SA(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function CA(a,c){return c}function wA(a,c){if(kn){var f=Jn.formState;if(f!==null){e:{var g=Kt;if(kn){if(Sr){t:{for(var v=Sr,w=Lo;v.nodeType!==8;){if(!w){v=null;break t}if(v=vo(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Sr=vo(v.nextSibling),g=v.data==="F!";break e}}Qc(g)}g=!1}g&&(c=f[0])}}return f=Qs(),f.memoizedState=f.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CA,lastRenderedState:c},f.queue=g,f=HA.bind(null,Kt,g),g.dispatch=f,g=Nv(!1),w=Bv.bind(null,Kt,!1,g.queue),g=Qs(),v={state:c,dispatch:null,action:a,pending:null},g.queue=v,f=fB.bind(null,Kt,v,w,f),v.dispatch=f,g.memoizedState=a,[c,f,!1]}function EA(a){var c=Vr();return kA(c,Vn,a)}function kA(a,c,f){if(c=Dv(a,c,CA)[0],a=Lg(Pa)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=Lf(c)}catch(z){throw z===Df?Dg:z}else g=c;c=Vr();var v=c.queue,w=v.dispatch;return f!==c.memoizedState&&(Kt.flags|=2048,zd(9,_g(),pB.bind(null,v,f),null)),[g,w,a]}function pB(a,c){a.action=c}function AA(a){var c=Vr(),f=Vn;if(f!==null)return kA(c,f,a);Vr(),c=c.memoizedState,f=Vr();var g=f.queue.dispatch;return f.memoizedState=a,[c,g,!1]}function zd(a,c,f,g){return a={tag:a,create:f,deps:g,inst:c,next:null},c=Kt.updateQueue,c===null&&(c=Mv(),Kt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,c.lastEffect=a),a}function _g(){return{destroy:void 0,resource:void 0}}function TA(){return Vr().memoizedState}function Bg(a,c,f,g){var v=Qs();g=g===void 0?null:g,Kt.flags|=a,v.memoizedState=zd(1|c,_g(),f,g)}function _f(a,c,f,g){var v=Vr();g=g===void 0?null:g;var w=v.memoizedState.inst;Vn!==null&&g!==null&&wv(g,Vn.memoizedState.deps)?v.memoizedState=zd(c,w,f,g):(Kt.flags|=a,v.memoizedState=zd(1|c,w,f,g))}function MA(a,c){Bg(8390656,8,a,c)}function RA(a,c){_f(2048,8,a,c)}function DA(a,c){return _f(4,2,a,c)}function OA(a,c){return _f(4,4,a,c)}function NA(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function PA(a,c,f){f=f!=null?f.concat([a]):null,_f(4,4,NA.bind(null,c,a),f)}function zv(){}function zA(a,c){var f=Vr();c=c===void 0?null:c;var g=f.memoizedState;return c!==null&&wv(c,g[1])?g[0]:(f.memoizedState=[a,c],a)}function IA(a,c){var f=Vr();c=c===void 0?null:c;var g=f.memoizedState;if(c!==null&&wv(c,g[1]))return g[0];if(g=a(),nu){Be(!0);try{a()}finally{Be(!1)}}return f.memoizedState=[g,c],g}function Iv(a,c,f){return f===void 0||(Il&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=BT(),Kt.lanes|=a,Hl|=a,f)}function LA(a,c,f,g){return mi(f,c)?f:Od.current!==null?(a=Iv(a,f,g),mi(a,c)||(is=!0),a):(Il&42)===0?(is=!0,a.memoizedState=f):(a=BT(),Kt.lanes|=a,Hl|=a,c)}function _A(a,c,f,g,v){var w=_.p;_.p=w!==0&&8>w?w:8;var z=F.T,V={};F.T=V,Bv(a,!1,c,f);try{var se=v(),be=F.S;if(be!==null&&be(V,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var Ne=uB(se,g);Bf(a,c,Ne,vi(a))}else Bf(a,c,g,vi(a))}catch(_e){Bf(a,c,{then:function(){},status:"rejected",reason:_e},vi())}finally{_.p=w,F.T=z}}function mB(){}function Lv(a,c,f,g){if(a.tag!==5)throw Error(s(476));var v=BA(a).queue;_A(a,v,c,B,f===null?mB:function(){return $A(a),f(g)})}function BA(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:B},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function $A(a){var c=BA(a).next.queue;Bf(a,c,{},vi())}function _v(){return As(rp)}function FA(){return Vr().memoizedState}function VA(){return Vr().memoizedState}function gB(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=vi();a=Pl(f);var g=zl(c,a,f);g!==null&&(ji(g,c,f),Nf(g,c,f)),c={cache:pv()},a.payload=c;return}c=c.return}}function xB(a,c,f){var g=vi();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},$g(a)?UA(c,f):(f=sv(a,c,f,g),f!==null&&(ji(f,a,g),WA(f,c,g)))}function HA(a,c,f){var g=vi();Bf(a,c,f,g)}function Bf(a,c,f,g){var v={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if($g(a))UA(c,v);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var z=c.lastRenderedState,V=w(z,f);if(v.hasEagerState=!0,v.eagerState=V,mi(V,z))return Cg(a,c,v,0),Jn===null&&Sg(),!1}catch{}finally{}if(f=sv(a,c,v,g),f!==null)return ji(f,a,g),WA(f,c,g),!0}return!1}function Bv(a,c,f,g){if(g={lane:2,revertLane:xj(),action:g,hasEagerState:!1,eagerState:null,next:null},$g(a)){if(c)throw Error(s(479))}else c=sv(a,f,g,2),c!==null&&ji(c,a,2)}function $g(a){var c=a.alternate;return a===Kt||c!==null&&c===Kt}function UA(a,c){Nd=Pg=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function WA(a,c,f){if((f&4194048)!==0){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,Sl(a,f)}}var Fg={readContext:As,use:Ig,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useLayoutEffect:Dr,useInsertionEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useSyncExternalStore:Dr,useId:Dr,useHostTransitionStatus:Dr,useFormState:Dr,useActionState:Dr,useOptimistic:Dr,useMemoCache:Dr,useCacheRefresh:Dr},qA={readContext:As,use:Ig,useCallback:function(a,c){return Qs().memoizedState=[a,c===void 0?null:c],a},useContext:As,useEffect:MA,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,Bg(4194308,4,NA.bind(null,c,a),f)},useLayoutEffect:function(a,c){return Bg(4194308,4,a,c)},useInsertionEffect:function(a,c){Bg(4,2,a,c)},useMemo:function(a,c){var f=Qs();c=c===void 0?null:c;var g=a();if(nu){Be(!0);try{a()}finally{Be(!1)}}return f.memoizedState=[g,c],g},useReducer:function(a,c,f){var g=Qs();if(f!==void 0){var v=f(c);if(nu){Be(!0);try{f(c)}finally{Be(!1)}}}else v=c;return g.memoizedState=g.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},g.queue=a,a=a.dispatch=xB.bind(null,Kt,a),[g.memoizedState,a]},useRef:function(a){var c=Qs();return a={current:a},c.memoizedState=a},useState:function(a){a=Nv(a);var c=a.queue,f=HA.bind(null,Kt,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:zv,useDeferredValue:function(a,c){var f=Qs();return Iv(f,a,c)},useTransition:function(){var a=Nv(!1);return a=_A.bind(null,Kt,a.queue,!0,!1),Qs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var g=Kt,v=Qs();if(kn){if(f===void 0)throw Error(s(407));f=f()}else{if(f=c(),Jn===null)throw Error(s(349));(yn&124)!==0||fA(g,c,f)}v.memoizedState=f;var w={value:f,getSnapshot:c};return v.queue=w,MA(mA.bind(null,g,w,a),[a]),g.flags|=2048,zd(9,_g(),pA.bind(null,g,w,f,c),null),f},useId:function(){var a=Qs(),c=Jn.identifierPrefix;if(kn){var f=Da,g=Ra;f=(g&~(1<<32-ot(g)-1)).toString(32)+f,c=""+c+"R"+f,f=zg++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=dB++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:_v,useFormState:wA,useActionState:wA,useOptimistic:function(a){var c=Qs();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=Bv.bind(null,Kt,!0,f),f.dispatch=c,[a,c]},useMemoCache:Rv,useCacheRefresh:function(){return Qs().memoizedState=gB.bind(null,Kt)}},GA={readContext:As,use:Ig,useCallback:zA,useContext:As,useEffect:RA,useImperativeHandle:PA,useInsertionEffect:DA,useLayoutEffect:OA,useMemo:IA,useReducer:Lg,useRef:TA,useState:function(){return Lg(Pa)},useDebugValue:zv,useDeferredValue:function(a,c){var f=Vr();return LA(f,Vn.memoizedState,a,c)},useTransition:function(){var a=Lg(Pa)[0],c=Vr().memoizedState;return[typeof a=="boolean"?a:Lf(a),c]},useSyncExternalStore:hA,useId:FA,useHostTransitionStatus:_v,useFormState:EA,useActionState:EA,useOptimistic:function(a,c){var f=Vr();return yA(f,Vn,a,c)},useMemoCache:Rv,useCacheRefresh:VA},yB={readContext:As,use:Ig,useCallback:zA,useContext:As,useEffect:RA,useImperativeHandle:PA,useInsertionEffect:DA,useLayoutEffect:OA,useMemo:IA,useReducer:Ov,useRef:TA,useState:function(){return Ov(Pa)},useDebugValue:zv,useDeferredValue:function(a,c){var f=Vr();return Vn===null?Iv(f,a,c):LA(f,Vn.memoizedState,a,c)},useTransition:function(){var a=Ov(Pa)[0],c=Vr().memoizedState;return[typeof a=="boolean"?a:Lf(a),c]},useSyncExternalStore:hA,useId:FA,useHostTransitionStatus:_v,useFormState:AA,useActionState:AA,useOptimistic:function(a,c){var f=Vr();return Vn!==null?yA(f,Vn,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Rv,useCacheRefresh:VA},Id=null,$f=0;function Vg(a){var c=$f;return $f+=1,Id===null&&(Id=[]),sA(Id,a,c)}function Ff(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Hg(a,c){throw c.$$typeof===m?Error(s(525)):(a=Object.prototype.toString.call(c),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function YA(a){var c=a._init;return c(a._payload)}function KA(a){function c(ge,ce){if(a){var ye=ge.deletions;ye===null?(ge.deletions=[ce],ge.flags|=16):ye.push(ce)}}function f(ge,ce){if(!a)return null;for(;ce!==null;)c(ge,ce),ce=ce.sibling;return null}function g(ge){for(var ce=new Map;ge!==null;)ge.key!==null?ce.set(ge.key,ge):ce.set(ge.index,ge),ge=ge.sibling;return ce}function v(ge,ce){return ge=Ma(ge,ce),ge.index=0,ge.sibling=null,ge}function w(ge,ce,ye){return ge.index=ye,a?(ye=ge.alternate,ye!==null?(ye=ye.index,ye<ce?(ge.flags|=67108866,ce):ye):(ge.flags|=67108866,ce)):(ge.flags|=1048576,ce)}function z(ge){return a&&ge.alternate===null&&(ge.flags|=67108866),ge}function V(ge,ce,ye,ze){return ce===null||ce.tag!==6?(ce=ov(ye,ge.mode,ze),ce.return=ge,ce):(ce=v(ce,ye),ce.return=ge,ce)}function se(ge,ce,ye,ze){var lt=ye.type;return lt===b?Ne(ge,ce,ye.props.children,ze,ye.key):ce!==null&&(ce.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===W&&YA(lt)===ce.type)?(ce=v(ce,ye.props),Ff(ce,ye),ce.return=ge,ce):(ce=Eg(ye.type,ye.key,ye.props,null,ge.mode,ze),Ff(ce,ye),ce.return=ge,ce)}function be(ge,ce,ye,ze){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ye.containerInfo||ce.stateNode.implementation!==ye.implementation?(ce=av(ye,ge.mode,ze),ce.return=ge,ce):(ce=v(ce,ye.children||[]),ce.return=ge,ce)}function Ne(ge,ce,ye,ze,lt){return ce===null||ce.tag!==7?(ce=Yc(ye,ge.mode,ze,lt),ce.return=ge,ce):(ce=v(ce,ye),ce.return=ge,ce)}function _e(ge,ce,ye){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=ov(""+ce,ge.mode,ye),ce.return=ge,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case x:return ye=Eg(ce.type,ce.key,ce.props,null,ge.mode,ye),Ff(ye,ce),ye.return=ge,ye;case y:return ce=av(ce,ge.mode,ye),ce.return=ge,ce;case W:var ze=ce._init;return ce=ze(ce._payload),_e(ge,ce,ye)}if(H(ce)||oe(ce))return ce=Yc(ce,ge.mode,ye,null),ce.return=ge,ce;if(typeof ce.then=="function")return _e(ge,Vg(ce),ye);if(ce.$$typeof===A)return _e(ge,Mg(ge,ce),ye);Hg(ge,ce)}return null}function ve(ge,ce,ye,ze){var lt=ce!==null?ce.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return lt!==null?null:V(ge,ce,""+ye,ze);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case x:return ye.key===lt?se(ge,ce,ye,ze):null;case y:return ye.key===lt?be(ge,ce,ye,ze):null;case W:return lt=ye._init,ye=lt(ye._payload),ve(ge,ce,ye,ze)}if(H(ye)||oe(ye))return lt!==null?null:Ne(ge,ce,ye,ze,null);if(typeof ye.then=="function")return ve(ge,ce,Vg(ye),ze);if(ye.$$typeof===A)return ve(ge,ce,Mg(ge,ye),ze);Hg(ge,ye)}return null}function Se(ge,ce,ye,ze,lt){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ge=ge.get(ye)||null,V(ce,ge,""+ze,lt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case x:return ge=ge.get(ze.key===null?ye:ze.key)||null,se(ce,ge,ze,lt);case y:return ge=ge.get(ze.key===null?ye:ze.key)||null,be(ce,ge,ze,lt);case W:var Jt=ze._init;return ze=Jt(ze._payload),Se(ge,ce,ye,ze,lt)}if(H(ze)||oe(ze))return ge=ge.get(ye)||null,Ne(ce,ge,ze,lt,null);if(typeof ze.then=="function")return Se(ge,ce,ye,Vg(ze),lt);if(ze.$$typeof===A)return Se(ge,ce,ye,Mg(ce,ze),lt);Hg(ce,ze)}return null}function It(ge,ce,ye,ze){for(var lt=null,Jt=null,St=ce,Pt=ce=0,ls=null;St!==null&&Pt<ye.length;Pt++){St.index>Pt?(ls=St,St=null):ls=St.sibling;var wn=ve(ge,St,ye[Pt],ze);if(wn===null){St===null&&(St=ls);break}a&&St&&wn.alternate===null&&c(ge,St),ce=w(wn,ce,Pt),Jt===null?lt=wn:Jt.sibling=wn,Jt=wn,St=ls}if(Pt===ye.length)return f(ge,St),kn&&Xc(ge,Pt),lt;if(St===null){for(;Pt<ye.length;Pt++)St=_e(ge,ye[Pt],ze),St!==null&&(ce=w(St,ce,Pt),Jt===null?lt=St:Jt.sibling=St,Jt=St);return kn&&Xc(ge,Pt),lt}for(St=g(St);Pt<ye.length;Pt++)ls=Se(St,ge,Pt,ye[Pt],ze),ls!==null&&(a&&ls.alternate!==null&&St.delete(ls.key===null?Pt:ls.key),ce=w(ls,ce,Pt),Jt===null?lt=ls:Jt.sibling=ls,Jt=ls);return a&&St.forEach(function(Ql){return c(ge,Ql)}),kn&&Xc(ge,Pt),lt}function Ot(ge,ce,ye,ze){if(ye==null)throw Error(s(151));for(var lt=null,Jt=null,St=ce,Pt=ce=0,ls=null,wn=ye.next();St!==null&&!wn.done;Pt++,wn=ye.next()){St.index>Pt?(ls=St,St=null):ls=St.sibling;var Ql=ve(ge,St,wn.value,ze);if(Ql===null){St===null&&(St=ls);break}a&&St&&Ql.alternate===null&&c(ge,St),ce=w(Ql,ce,Pt),Jt===null?lt=Ql:Jt.sibling=Ql,Jt=Ql,St=ls}if(wn.done)return f(ge,St),kn&&Xc(ge,Pt),lt;if(St===null){for(;!wn.done;Pt++,wn=ye.next())wn=_e(ge,wn.value,ze),wn!==null&&(ce=w(wn,ce,Pt),Jt===null?lt=wn:Jt.sibling=wn,Jt=wn);return kn&&Xc(ge,Pt),lt}for(St=g(St);!wn.done;Pt++,wn=ye.next())wn=Se(St,ge,Pt,wn.value,ze),wn!==null&&(a&&wn.alternate!==null&&St.delete(wn.key===null?Pt:wn.key),ce=w(wn,ce,Pt),Jt===null?lt=wn:Jt.sibling=wn,Jt=wn);return a&&St.forEach(function(b$){return c(ge,b$)}),kn&&Xc(ge,Pt),lt}function Un(ge,ce,ye,ze){if(typeof ye=="object"&&ye!==null&&ye.type===b&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case x:e:{for(var lt=ye.key;ce!==null;){if(ce.key===lt){if(lt=ye.type,lt===b){if(ce.tag===7){f(ge,ce.sibling),ze=v(ce,ye.props.children),ze.return=ge,ge=ze;break e}}else if(ce.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===W&&YA(lt)===ce.type){f(ge,ce.sibling),ze=v(ce,ye.props),Ff(ze,ye),ze.return=ge,ge=ze;break e}f(ge,ce);break}else c(ge,ce);ce=ce.sibling}ye.type===b?(ze=Yc(ye.props.children,ge.mode,ze,ye.key),ze.return=ge,ge=ze):(ze=Eg(ye.type,ye.key,ye.props,null,ge.mode,ze),Ff(ze,ye),ze.return=ge,ge=ze)}return z(ge);case y:e:{for(lt=ye.key;ce!==null;){if(ce.key===lt)if(ce.tag===4&&ce.stateNode.containerInfo===ye.containerInfo&&ce.stateNode.implementation===ye.implementation){f(ge,ce.sibling),ze=v(ce,ye.children||[]),ze.return=ge,ge=ze;break e}else{f(ge,ce);break}else c(ge,ce);ce=ce.sibling}ze=av(ye,ge.mode,ze),ze.return=ge,ge=ze}return z(ge);case W:return lt=ye._init,ye=lt(ye._payload),Un(ge,ce,ye,ze)}if(H(ye))return It(ge,ce,ye,ze);if(oe(ye)){if(lt=oe(ye),typeof lt!="function")throw Error(s(150));return ye=lt.call(ye),Ot(ge,ce,ye,ze)}if(typeof ye.then=="function")return Un(ge,ce,Vg(ye),ze);if(ye.$$typeof===A)return Un(ge,ce,Mg(ge,ye),ze);Hg(ge,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,ce!==null&&ce.tag===6?(f(ge,ce.sibling),ze=v(ce,ye),ze.return=ge,ge=ze):(f(ge,ce),ze=ov(ye,ge.mode,ze),ze.return=ge,ge=ze),z(ge)):f(ge,ce)}return function(ge,ce,ye,ze){try{$f=0;var lt=Un(ge,ce,ye,ze);return Id=null,lt}catch(St){if(St===Df||St===Dg)throw St;var Jt=gi(29,St,null,ge.mode);return Jt.lanes=ze,Jt.return=ge,Jt}finally{}}}var Ld=KA(!0),XA=KA(!1),$i=ee(null),_o=null;function Ll(a){var c=a.alternate;P(Qr,Qr.current&1),P($i,a),_o===null&&(c===null||Od.current!==null||c.memoizedState!==null)&&(_o=a)}function JA(a){if(a.tag===22){if(P(Qr,Qr.current),P($i,a),_o===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(_o=a)}}else _l()}function _l(){P(Qr,Qr.current),P($i,$i.current)}function za(a){ae($i),_o===a&&(_o=null),ae(Qr)}var Qr=ee(0);function Ug(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Mj(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function $v(a,c,f,g){c=a.memoizedState,f=f(g,c),f=f==null?c:p({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Fv={enqueueSetState:function(a,c,f){a=a._reactInternals;var g=vi(),v=Pl(g);v.payload=c,f!=null&&(v.callback=f),c=zl(a,v,g),c!==null&&(ji(c,a,g),Nf(c,a,g))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var g=vi(),v=Pl(g);v.tag=1,v.payload=c,f!=null&&(v.callback=f),c=zl(a,v,g),c!==null&&(ji(c,a,g),Nf(c,a,g))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=vi(),g=Pl(f);g.tag=2,c!=null&&(g.callback=c),c=zl(a,g,f),c!==null&&(ji(c,a,f),Nf(c,a,f))}};function QA(a,c,f,g,v,w,z){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,w,z):c.prototype&&c.prototype.isPureReactComponent?!Cf(f,g)||!Cf(v,w):!0}function ZA(a,c,f,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==a&&Fv.enqueueReplaceState(c,c.state,null)}function ru(a,c){var f=c;if("ref"in c){f={};for(var g in c)g!=="ref"&&(f[g]=c[g])}if(a=a.defaultProps){f===c&&(f=p({},f));for(var v in a)f[v]===void 0&&(f[v]=a[v])}return f}var Wg=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function eT(a){Wg(a)}function tT(a){console.error(a)}function nT(a){Wg(a)}function qg(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function rT(a,c,f){try{var g=a.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Vv(a,c,f){return f=Pl(f),f.tag=3,f.payload={element:null},f.callback=function(){qg(a,c)},f}function sT(a){return a=Pl(a),a.tag=3,a}function iT(a,c,f,g){var v=f.type.getDerivedStateFromError;if(typeof v=="function"){var w=g.value;a.payload=function(){return v(w)},a.callback=function(){rT(c,f,g)}}var z=f.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(a.callback=function(){rT(c,f,g),typeof v!="function"&&(Ul===null?Ul=new Set([this]):Ul.add(this));var V=g.stack;this.componentDidCatch(g.value,{componentStack:V!==null?V:""})})}function bB(a,c,f,g,v){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=f.alternate,c!==null&&Tf(c,f,v,!0),f=$i.current,f!==null){switch(f.tag){case 13:return _o===null?hj():f.alternate===null&&Cr===0&&(Cr=3),f.flags&=-257,f.flags|=65536,f.lanes=v,g===xv?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([g]):c.add(g),pj(a,g,v)),!1;case 22:return f.flags|=65536,g===xv?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([g]):f.add(g)),pj(a,g,v)),!1}throw Error(s(435,f.tag))}return pj(a,g,v),hj(),!1}if(kn)return c=$i.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=v,g!==uv&&(a=Error(s(422),{cause:g}),Af(Ii(a,f)))):(g!==uv&&(c=Error(s(423),{cause:g}),Af(Ii(c,f))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,g=Ii(g,f),v=Vv(a.stateNode,g,v),vv(a,v),Cr!==4&&(Cr=2)),!1;var w=Error(s(520),{cause:g});if(w=Ii(w,f),Yf===null?Yf=[w]:Yf.push(w),Cr!==4&&(Cr=2),c===null)return!0;g=Ii(g,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=v&-v,f.lanes|=a,a=Vv(f.stateNode,g,a),vv(f,a),!1;case 1:if(c=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ul===null||!Ul.has(w))))return f.flags|=65536,v&=-v,f.lanes|=v,v=sT(v),iT(v,a,f,g),vv(f,v),!1}f=f.return}while(f!==null);return!1}var oT=Error(s(461)),is=!1;function ms(a,c,f,g){c.child=a===null?XA(c,null,f,g):Ld(c,a.child,f,g)}function aT(a,c,f,g,v){f=f.render;var w=c.ref;if("ref"in g){var z={};for(var V in g)V!=="ref"&&(z[V]=g[V])}else z=g;return eu(c),g=Ev(a,c,f,z,w,v),V=kv(),a!==null&&!is?(Av(a,c,v),Ia(a,c,v)):(kn&&V&&lv(c),c.flags|=1,ms(a,c,g,v),c.child)}function lT(a,c,f,g,v){if(a===null){var w=f.type;return typeof w=="function"&&!iv(w)&&w.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=w,cT(a,c,w,g,v)):(a=Eg(f.type,null,g,c,c.mode,v),a.ref=c.ref,a.return=c,c.child=a)}if(w=a.child,!Xv(a,v)){var z=w.memoizedProps;if(f=f.compare,f=f!==null?f:Cf,f(z,g)&&a.ref===c.ref)return Ia(a,c,v)}return c.flags|=1,a=Ma(w,g),a.ref=c.ref,a.return=c,c.child=a}function cT(a,c,f,g,v){if(a!==null){var w=a.memoizedProps;if(Cf(w,g)&&a.ref===c.ref)if(is=!1,c.pendingProps=g=w,Xv(a,v))(a.flags&131072)!==0&&(is=!0);else return c.lanes=a.lanes,Ia(a,c,v)}return Hv(a,c,f,g,v)}function uT(a,c,f){var g=c.pendingProps,v=g.children,w=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((c.flags&128)!==0){if(g=w!==null?w.baseLanes|f:f,a!==null){for(v=c.child=a.child,w=0;v!==null;)w=w|v.lanes|v.childLanes,v=v.sibling;c.childLanes=w&~g}else c.childLanes=0,c.child=null;return dT(a,c,g,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Rg(c,w!==null?w.cachePool:null),w!==null?cA(c,w):Sv(),JA(c);else return c.lanes=c.childLanes=536870912,dT(a,c,w!==null?w.baseLanes|f:f,f)}else w!==null?(Rg(c,w.cachePool),cA(c,w),_l(),c.memoizedState=null):(a!==null&&Rg(c,null),Sv(),_l());return ms(a,c,v,f),c.child}function dT(a,c,f,g){var v=gv();return v=v===null?null:{parent:Jr._currentValue,pool:v},c.memoizedState={baseLanes:f,cachePool:v},a!==null&&Rg(c,null),Sv(),JA(c),a!==null&&Tf(a,c,g,!0),null}function Gg(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(s(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function Hv(a,c,f,g,v){return eu(c),f=Ev(a,c,f,g,void 0,v),g=kv(),a!==null&&!is?(Av(a,c,v),Ia(a,c,v)):(kn&&g&&lv(c),c.flags|=1,ms(a,c,f,v),c.child)}function hT(a,c,f,g,v,w){return eu(c),c.updateQueue=null,f=dA(c,g,f,v),uA(a),g=kv(),a!==null&&!is?(Av(a,c,w),Ia(a,c,w)):(kn&&g&&lv(c),c.flags|=1,ms(a,c,f,w),c.child)}function fT(a,c,f,g,v){if(eu(c),c.stateNode===null){var w=Ad,z=f.contextType;typeof z=="object"&&z!==null&&(w=As(z)),w=new f(g,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Fv,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=g,w.state=c.memoizedState,w.refs={},yv(c),z=f.contextType,w.context=typeof z=="object"&&z!==null?As(z):Ad,w.state=c.memoizedState,z=f.getDerivedStateFromProps,typeof z=="function"&&($v(c,f,z,g),w.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(z=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),z!==w.state&&Fv.enqueueReplaceState(w,w.state,null),zf(c,g,w,v),Pf(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(a===null){w=c.stateNode;var V=c.memoizedProps,se=ru(f,V);w.props=se;var be=w.context,Ne=f.contextType;z=Ad,typeof Ne=="object"&&Ne!==null&&(z=As(Ne));var _e=f.getDerivedStateFromProps;Ne=typeof _e=="function"||typeof w.getSnapshotBeforeUpdate=="function",V=c.pendingProps!==V,Ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(V||be!==z)&&ZA(c,w,g,z),Nl=!1;var ve=c.memoizedState;w.state=ve,zf(c,g,w,v),Pf(),be=c.memoizedState,V||ve!==be||Nl?(typeof _e=="function"&&($v(c,f,_e,g),be=c.memoizedState),(se=Nl||QA(c,f,se,g,ve,be,z))?(Ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=be),w.props=g,w.state=be,w.context=z,g=se):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{w=c.stateNode,bv(a,c),z=c.memoizedProps,Ne=ru(f,z),w.props=Ne,_e=c.pendingProps,ve=w.context,be=f.contextType,se=Ad,typeof be=="object"&&be!==null&&(se=As(be)),V=f.getDerivedStateFromProps,(be=typeof V=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(z!==_e||ve!==se)&&ZA(c,w,g,se),Nl=!1,ve=c.memoizedState,w.state=ve,zf(c,g,w,v),Pf();var Se=c.memoizedState;z!==_e||ve!==Se||Nl||a!==null&&a.dependencies!==null&&Tg(a.dependencies)?(typeof V=="function"&&($v(c,f,V,g),Se=c.memoizedState),(Ne=Nl||QA(c,f,Ne,g,ve,Se,se)||a!==null&&a.dependencies!==null&&Tg(a.dependencies))?(be||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,Se,se),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,Se,se)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||z===a.memoizedProps&&ve===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&ve===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Se),w.props=g,w.state=Se,w.context=se,g=Ne):(typeof w.componentDidUpdate!="function"||z===a.memoizedProps&&ve===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&ve===a.memoizedState||(c.flags|=1024),g=!1)}return w=g,Gg(a,c),g=(c.flags&128)!==0,w||g?(w=c.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,a!==null&&g?(c.child=Ld(c,a.child,null,v),c.child=Ld(c,null,f,v)):ms(a,c,f,v),c.memoizedState=w.state,a=c.child):a=Ia(a,c,v),a}function pT(a,c,f,g){return kf(),c.flags|=256,ms(a,c,f,g),c.child}var Uv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wv(a){return{baseLanes:a,cachePool:tA()}}function qv(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=Fi),a}function mT(a,c,f){var g=c.pendingProps,v=!1,w=(c.flags&128)!==0,z;if((z=w)||(z=a!==null&&a.memoizedState===null?!1:(Qr.current&2)!==0),z&&(v=!0,c.flags&=-129),z=(c.flags&32)!==0,c.flags&=-33,a===null){if(kn){if(v?Ll(c):_l(),kn){var V=Sr,se;if(se=V){e:{for(se=V,V=Lo;se.nodeType!==8;){if(!V){V=null;break e}if(se=vo(se.nextSibling),se===null){V=null;break e}}V=se}V!==null?(c.memoizedState={dehydrated:V,treeContext:Kc!==null?{id:Ra,overflow:Da}:null,retryLane:536870912,hydrationErrors:null},se=gi(18,null,null,0),se.stateNode=V,se.return=c,c.child=se,_s=c,Sr=null,se=!0):se=!1}se||Qc(c)}if(V=c.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return Mj(V)?c.lanes=32:c.lanes=536870912,null;za(c)}return V=g.children,g=g.fallback,v?(_l(),v=c.mode,V=Yg({mode:"hidden",children:V},v),g=Yc(g,v,f,null),V.return=c,g.return=c,V.sibling=g,c.child=V,v=c.child,v.memoizedState=Wv(f),v.childLanes=qv(a,z,f),c.memoizedState=Uv,g):(Ll(c),Gv(c,V))}if(se=a.memoizedState,se!==null&&(V=se.dehydrated,V!==null)){if(w)c.flags&256?(Ll(c),c.flags&=-257,c=Yv(a,c,f)):c.memoizedState!==null?(_l(),c.child=a.child,c.flags|=128,c=null):(_l(),v=g.fallback,V=c.mode,g=Yg({mode:"visible",children:g.children},V),v=Yc(v,V,f,null),v.flags|=2,g.return=c,v.return=c,g.sibling=v,c.child=g,Ld(c,a.child,null,f),g=c.child,g.memoizedState=Wv(f),g.childLanes=qv(a,z,f),c.memoizedState=Uv,c=v);else if(Ll(c),Mj(V)){if(z=V.nextSibling&&V.nextSibling.dataset,z)var be=z.dgst;z=be,g=Error(s(419)),g.stack="",g.digest=z,Af({value:g,source:null,stack:null}),c=Yv(a,c,f)}else if(is||Tf(a,c,f,!1),z=(f&a.childLanes)!==0,is||z){if(z=Jn,z!==null&&(g=f&-f,g=(g&42)!==0?1:lo(g),g=(g&(z.suspendedLanes|f))!==0?0:g,g!==0&&g!==se.retryLane))throw se.retryLane=g,kd(a,g),ji(z,a,g),oT;V.data==="$?"||hj(),c=Yv(a,c,f)}else V.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=se.treeContext,Sr=vo(V.nextSibling),_s=c,kn=!0,Jc=null,Lo=!1,a!==null&&(_i[Bi++]=Ra,_i[Bi++]=Da,_i[Bi++]=Kc,Ra=a.id,Da=a.overflow,Kc=c),c=Gv(c,g.children),c.flags|=4096);return c}return v?(_l(),v=g.fallback,V=c.mode,se=a.child,be=se.sibling,g=Ma(se,{mode:"hidden",children:g.children}),g.subtreeFlags=se.subtreeFlags&65011712,be!==null?v=Ma(be,v):(v=Yc(v,V,f,null),v.flags|=2),v.return=c,g.return=c,g.sibling=v,c.child=g,g=v,v=c.child,V=a.child.memoizedState,V===null?V=Wv(f):(se=V.cachePool,se!==null?(be=Jr._currentValue,se=se.parent!==be?{parent:be,pool:be}:se):se=tA(),V={baseLanes:V.baseLanes|f,cachePool:se}),v.memoizedState=V,v.childLanes=qv(a,z,f),c.memoizedState=Uv,g):(Ll(c),f=a.child,a=f.sibling,f=Ma(f,{mode:"visible",children:g.children}),f.return=c,f.sibling=null,a!==null&&(z=c.deletions,z===null?(c.deletions=[a],c.flags|=16):z.push(a)),c.child=f,c.memoizedState=null,f)}function Gv(a,c){return c=Yg({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function Yg(a,c){return a=gi(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Yv(a,c,f){return Ld(c,a.child,null,f),a=Gv(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function gT(a,c,f){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),hv(a.return,c,f)}function Kv(a,c,f,g,v){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:v}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=f,w.tailMode=v)}function xT(a,c,f){var g=c.pendingProps,v=g.revealOrder,w=g.tail;if(ms(a,c,g.children,f),g=Qr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&gT(a,f,c);else if(a.tag===19)gT(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(P(Qr,g),v){case"forwards":for(f=c.child,v=null;f!==null;)a=f.alternate,a!==null&&Ug(a)===null&&(v=f),f=f.sibling;f=v,f===null?(v=c.child,c.child=null):(v=f.sibling,f.sibling=null),Kv(c,!1,v,f,w);break;case"backwards":for(f=null,v=c.child,c.child=null;v!==null;){if(a=v.alternate,a!==null&&Ug(a)===null){c.child=v;break}a=v.sibling,v.sibling=f,f=v,v=a}Kv(c,!0,f,null,w);break;case"together":Kv(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ia(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Hl|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(Tf(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(s(153));if(c.child!==null){for(a=c.child,f=Ma(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=Ma(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function Xv(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&Tg(a)))}function vB(a,c,f){switch(c.tag){case 3:Te(c,c.stateNode.containerInfo),Ol(c,Jr,a.memoizedState.cache),kf();break;case 27:case 5:Ke(c);break;case 4:Te(c,c.stateNode.containerInfo);break;case 10:Ol(c,c.type,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(Ll(c),c.flags|=128,null):(f&c.child.childLanes)!==0?mT(a,c,f):(Ll(c),a=Ia(a,c,f),a!==null?a.sibling:null);Ll(c);break;case 19:var v=(a.flags&128)!==0;if(g=(f&c.childLanes)!==0,g||(Tf(a,c,f,!1),g=(f&c.childLanes)!==0),v){if(g)return xT(a,c,f);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),P(Qr,Qr.current),g)break;return null;case 22:case 23:return c.lanes=0,uT(a,c,f);case 24:Ol(c,Jr,a.memoizedState.cache)}return Ia(a,c,f)}function yT(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)is=!0;else{if(!Xv(a,f)&&(c.flags&128)===0)return is=!1,vB(a,c,f);is=(a.flags&131072)!==0}else is=!1,kn&&(c.flags&1048576)!==0&&Yk(c,Ag,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var g=c.elementType,v=g._init;if(g=v(g._payload),c.type=g,typeof g=="function")iv(g)?(a=ru(g,a),c.tag=1,c=fT(null,c,g,a,f)):(c.tag=0,c=Hv(null,c,g,a,f));else{if(g!=null){if(v=g.$$typeof,v===T){c.tag=11,c=aT(null,c,g,a,f);break e}else if(v===$){c.tag=14,c=lT(null,c,g,a,f);break e}}throw c=ie(g)||g,Error(s(306,c,""))}}return c;case 0:return Hv(a,c,c.type,c.pendingProps,f);case 1:return g=c.type,v=ru(g,c.pendingProps),fT(a,c,g,v,f);case 3:e:{if(Te(c,c.stateNode.containerInfo),a===null)throw Error(s(387));g=c.pendingProps;var w=c.memoizedState;v=w.element,bv(a,c),zf(c,g,null,f);var z=c.memoizedState;if(g=z.cache,Ol(c,Jr,g),g!==w.cache&&fv(c,[Jr],f,!0),Pf(),g=z.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:z.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=pT(a,c,g,f);break e}else if(g!==v){v=Ii(Error(s(424)),c),Af(v),c=pT(a,c,g,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Sr=vo(a.firstChild),_s=c,kn=!0,Jc=null,Lo=!0,f=XA(c,null,g,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(kf(),g===v){c=Ia(a,c,f);break e}ms(a,c,g,f)}c=c.child}return c;case 26:return Gg(a,c),a===null?(f=SM(c.type,null,c.pendingProps,null))?c.memoizedState=f:kn||(f=c.type,a=c.pendingProps,g=lx(Z.current).createElement(f),g[Br]=c,g[Kr]=a,xs(g,f,a),br(g),c.stateNode=g):c.memoizedState=SM(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Ke(c),a===null&&kn&&(g=c.stateNode=bM(c.type,c.pendingProps,Z.current),_s=c,Lo=!0,v=Sr,Gl(c.type)?(Rj=v,Sr=vo(g.firstChild)):Sr=v),ms(a,c,c.pendingProps.children,f),Gg(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&kn&&((v=g=Sr)&&(g=YB(g,c.type,c.pendingProps,Lo),g!==null?(c.stateNode=g,_s=c,Sr=vo(g.firstChild),Lo=!1,v=!0):v=!1),v||Qc(c)),Ke(c),v=c.type,w=c.pendingProps,z=a!==null?a.memoizedProps:null,g=w.children,kj(v,w)?g=null:z!==null&&kj(v,z)&&(c.flags|=32),c.memoizedState!==null&&(v=Ev(a,c,hB,null,null,f),rp._currentValue=v),Gg(a,c),ms(a,c,g,f),c.child;case 6:return a===null&&kn&&((a=f=Sr)&&(f=KB(f,c.pendingProps,Lo),f!==null?(c.stateNode=f,_s=c,Sr=null,a=!0):a=!1),a||Qc(c)),null;case 13:return mT(a,c,f);case 4:return Te(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=Ld(c,null,g,f):ms(a,c,g,f),c.child;case 11:return aT(a,c,c.type,c.pendingProps,f);case 7:return ms(a,c,c.pendingProps,f),c.child;case 8:return ms(a,c,c.pendingProps.children,f),c.child;case 12:return ms(a,c,c.pendingProps.children,f),c.child;case 10:return g=c.pendingProps,Ol(c,c.type,g.value),ms(a,c,g.children,f),c.child;case 9:return v=c.type._context,g=c.pendingProps.children,eu(c),v=As(v),g=g(v),c.flags|=1,ms(a,c,g,f),c.child;case 14:return lT(a,c,c.type,c.pendingProps,f);case 15:return cT(a,c,c.type,c.pendingProps,f);case 19:return xT(a,c,f);case 31:return g=c.pendingProps,f=c.mode,g={mode:g.mode,children:g.children},a===null?(f=Yg(g,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Ma(a.child,g),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return uT(a,c,f);case 24:return eu(c),g=As(Jr),a===null?(v=gv(),v===null&&(v=Jn,w=pv(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=f),v=w),c.memoizedState={parent:g,cache:v},yv(c),Ol(c,Jr,v)):((a.lanes&f)!==0&&(bv(a,c),zf(c,null,null,f),Pf()),v=a.memoizedState,w=c.memoizedState,v.parent!==g?(v={parent:g,cache:g},c.memoizedState=v,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=v),Ol(c,Jr,g)):(g=w.cache,Ol(c,Jr,g),g!==v.cache&&fv(c,[Jr],f,!0))),ms(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function La(a){a.flags|=4}function bT(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!AM(c)){if(c=$i.current,c!==null&&((yn&4194048)===yn?_o!==null:(yn&62914560)!==yn&&(yn&536870912)===0||c!==_o))throw Of=xv,nA;a.flags|=8192}}function Kg(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?rs():536870912,a.lanes|=c,Fd|=c)}function Vf(a,c){if(!kn)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function fr(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(c)for(var v=a.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=g,a.childLanes=f,c}function jB(a,c,f){var g=c.pendingProps;switch(cv(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fr(c),null;case 1:return fr(c),null;case 3:return f=c.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),Na(Jr),je(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Ef(c)?La(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Jk())),fr(c),null;case 26:return f=c.memoizedState,a===null?(La(c),f!==null?(fr(c),bT(c,f)):(fr(c),c.flags&=-16777217)):f?f!==a.memoizedState?(La(c),fr(c),bT(c,f)):(fr(c),c.flags&=-16777217):(a.memoizedProps!==g&&La(c),fr(c),c.flags&=-16777217),null;case 27:Xe(c),f=Z.current;var v=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==g&&La(c);else{if(!g){if(c.stateNode===null)throw Error(s(166));return fr(c),null}a=R.current,Ef(c)?Kk(c):(a=bM(v,g,f),c.stateNode=a,La(c))}return fr(c),null;case 5:if(Xe(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==g&&La(c);else{if(!g){if(c.stateNode===null)throw Error(s(166));return fr(c),null}if(a=R.current,Ef(c))Kk(c);else{switch(v=lx(Z.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?v.createElement(f,{is:g.is}):v.createElement(f)}}a[Br]=c,a[Kr]=g;e:for(v=c.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break e;for(;v.sibling===null;){if(v.return===null||v.return===c)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}c.stateNode=a;e:switch(xs(a,f,g),f){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&La(c)}}return fr(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==g&&La(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(s(166));if(a=Z.current,Ef(c)){if(a=c.stateNode,f=c.memoizedProps,g=null,v=_s,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}a[Br]=c,a=!!(a.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||hM(a.nodeValue,f)),a||Qc(c)}else a=lx(a).createTextNode(g),a[Br]=c,c.stateNode=a}return fr(c),null;case 13:if(g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Ef(c),g!==null&&g.dehydrated!==null){if(a===null){if(!v)throw Error(s(318));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Br]=c}else kf(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;fr(c),v=!1}else v=Jk(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return c.flags&256?(za(c),c):(za(c),null)}if(za(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=g!==null,a=a!==null&&a.memoizedState!==null,f){g=c.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var w=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==v&&(g.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),Kg(c,c.updateQueue),fr(c),null;case 4:return je(),a===null&&jj(c.stateNode.containerInfo),fr(c),null;case 10:return Na(c.type),fr(c),null;case 19:if(ae(Qr),v=c.memoizedState,v===null)return fr(c),null;if(g=(c.flags&128)!==0,w=v.rendering,w===null)if(g)Vf(v,!1);else{if(Cr!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(w=Ug(a),w!==null){for(c.flags|=128,Vf(v,!1),a=w.updateQueue,c.updateQueue=a,Kg(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)Gk(f,a),f=f.sibling;return P(Qr,Qr.current&1|2),c.child}a=a.sibling}v.tail!==null&&Ee()>Qg&&(c.flags|=128,g=!0,Vf(v,!1),c.lanes=4194304)}else{if(!g)if(a=Ug(w),a!==null){if(c.flags|=128,g=!0,a=a.updateQueue,c.updateQueue=a,Kg(c,a),Vf(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!kn)return fr(c),null}else 2*Ee()-v.renderingStartTime>Qg&&f!==536870912&&(c.flags|=128,g=!0,Vf(v,!1),c.lanes=4194304);v.isBackwards?(w.sibling=c.child,c.child=w):(a=v.last,a!==null?a.sibling=w:c.child=w,v.last=w)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=Ee(),c.sibling=null,a=Qr.current,P(Qr,g?a&1|2:a&1),c):(fr(c),null);case 22:case 23:return za(c),Cv(),g=c.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(f&536870912)!==0&&(c.flags&128)===0&&(fr(c),c.subtreeFlags&6&&(c.flags|=8192)):fr(c),f=c.updateQueue,f!==null&&Kg(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048),a!==null&&ae(tu),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Na(Jr),fr(c),null;case 25:return null;case 30:return null}throw Error(s(156,c.tag))}function SB(a,c){switch(cv(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Na(Jr),je(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Xe(c),null;case 13:if(za(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(s(340));kf()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ae(Qr),null;case 4:return je(),null;case 10:return Na(c.type),null;case 22:case 23:return za(c),Cv(),a!==null&&ae(tu),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Na(Jr),null;case 25:return null;default:return null}}function vT(a,c){switch(cv(c),c.tag){case 3:Na(Jr),je();break;case 26:case 27:case 5:Xe(c);break;case 4:je();break;case 13:za(c);break;case 19:ae(Qr);break;case 10:Na(c.type);break;case 22:case 23:za(c),Cv(),a!==null&&ae(tu);break;case 24:Na(Jr)}}function Hf(a,c){try{var f=c.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var v=g.next;f=v;do{if((f.tag&a)===a){g=void 0;var w=f.create,z=f.inst;g=w(),z.destroy=g}f=f.next}while(f!==v)}}catch(V){Gn(c,c.return,V)}}function Bl(a,c,f){try{var g=c.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var w=v.next;g=w;do{if((g.tag&a)===a){var z=g.inst,V=z.destroy;if(V!==void 0){z.destroy=void 0,v=c;var se=f,be=V;try{be()}catch(Ne){Gn(v,se,Ne)}}}g=g.next}while(g!==w)}}catch(Ne){Gn(c,c.return,Ne)}}function jT(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{lA(c,f)}catch(g){Gn(a,a.return,g)}}}function ST(a,c,f){f.props=ru(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(g){Gn(a,c,g)}}function Uf(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof f=="function"?a.refCleanup=f(g):f.current=g}}catch(v){Gn(a,c,v)}}function Bo(a,c){var f=a.ref,g=a.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(v){Gn(a,c,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(v){Gn(a,c,v)}else f.current=null}function CT(a){var c=a.type,f=a.memoizedProps,g=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(v){Gn(a,a.return,v)}}function Jv(a,c,f){try{var g=a.stateNode;HB(g,a.type,f,c),g[Kr]=c}catch(v){Gn(a,a.return,v)}}function wT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Gl(a.type)||a.tag===4}function Qv(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||wT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Gl(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Zv(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=ax));else if(g!==4&&(g===27&&Gl(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(Zv(a,c,f),a=a.sibling;a!==null;)Zv(a,c,f),a=a.sibling}function Xg(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(g!==4&&(g===27&&Gl(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(Xg(a,c,f),a=a.sibling;a!==null;)Xg(a,c,f),a=a.sibling}function ET(a){var c=a.stateNode,f=a.memoizedProps;try{for(var g=a.type,v=c.attributes;v.length;)c.removeAttributeNode(v[0]);xs(c,g,f),c[Br]=a,c[Kr]=f}catch(w){Gn(a,a.return,w)}}var _a=!1,Or=!1,ej=!1,kT=typeof WeakSet=="function"?WeakSet:Set,as=null;function CB(a,c){if(a=a.containerInfo,wj=px,a=Lk(a),Qb(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var v=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var z=0,V=-1,se=-1,be=0,Ne=0,_e=a,ve=null;t:for(;;){for(var Se;_e!==f||v!==0&&_e.nodeType!==3||(V=z+v),_e!==w||g!==0&&_e.nodeType!==3||(se=z+g),_e.nodeType===3&&(z+=_e.nodeValue.length),(Se=_e.firstChild)!==null;)ve=_e,_e=Se;for(;;){if(_e===a)break t;if(ve===f&&++be===v&&(V=z),ve===w&&++Ne===g&&(se=z),(Se=_e.nextSibling)!==null)break;_e=ve,ve=_e.parentNode}_e=Se}f=V===-1||se===-1?null:{start:V,end:se}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ej={focusedElem:a,selectionRange:f},px=!1,as=c;as!==null;)if(c=as,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,as=a;else for(;as!==null;){switch(c=as,w=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,f=c,v=w.memoizedProps,w=w.memoizedState,g=f.stateNode;try{var It=ru(f.type,v,f.elementType===f.type);a=g.getSnapshotBeforeUpdate(It,w),g.__reactInternalSnapshotBeforeUpdate=a}catch(Ot){Gn(f,f.return,Ot)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)Tj(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Tj(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=c.sibling,a!==null){a.return=c.return,as=a;break}as=c.return}}function AT(a,c,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:$l(a,f),g&4&&Hf(5,f);break;case 1:if($l(a,f),g&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(z){Gn(f,f.return,z)}else{var v=ru(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(v,c,a.__reactInternalSnapshotBeforeUpdate)}catch(z){Gn(f,f.return,z)}}g&64&&jT(f),g&512&&Uf(f,f.return);break;case 3:if($l(a,f),g&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{lA(a,c)}catch(z){Gn(f,f.return,z)}}break;case 27:c===null&&g&4&&ET(f);case 26:case 5:$l(a,f),c===null&&g&4&&CT(f),g&512&&Uf(f,f.return);break;case 12:$l(a,f);break;case 13:$l(a,f),g&4&&RT(a,f),g&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=OB.bind(null,f),XB(a,f))));break;case 22:if(g=f.memoizedState!==null||_a,!g){c=c!==null&&c.memoizedState!==null||Or,v=_a;var w=Or;_a=g,(Or=c)&&!w?Fl(a,f,(f.subtreeFlags&8772)!==0):$l(a,f),_a=v,Or=w}break;case 30:break;default:$l(a,f)}}function TT(a){var c=a.alternate;c!==null&&(a.alternate=null,TT(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Bc(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ur=null,Zs=!1;function Ba(a,c,f){for(f=f.child;f!==null;)MT(a,c,f),f=f.sibling}function MT(a,c,f){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(We,f)}catch{}switch(f.tag){case 26:Or||Bo(f,c),Ba(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Or||Bo(f,c);var g=ur,v=Zs;Gl(f.type)&&(ur=f.stateNode,Zs=!1),Ba(a,c,f),Zf(f.stateNode),ur=g,Zs=v;break;case 5:Or||Bo(f,c);case 6:if(g=ur,v=Zs,ur=null,Ba(a,c,f),ur=g,Zs=v,ur!==null)if(Zs)try{(ur.nodeType===9?ur.body:ur.nodeName==="HTML"?ur.ownerDocument.body:ur).removeChild(f.stateNode)}catch(w){Gn(f,c,w)}else try{ur.removeChild(f.stateNode)}catch(w){Gn(f,c,w)}break;case 18:ur!==null&&(Zs?(a=ur,xM(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),ap(a)):xM(ur,f.stateNode));break;case 4:g=ur,v=Zs,ur=f.stateNode.containerInfo,Zs=!0,Ba(a,c,f),ur=g,Zs=v;break;case 0:case 11:case 14:case 15:Or||Bl(2,f,c),Or||Bl(4,f,c),Ba(a,c,f);break;case 1:Or||(Bo(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"&&ST(f,c,g)),Ba(a,c,f);break;case 21:Ba(a,c,f);break;case 22:Or=(g=Or)||f.memoizedState!==null,Ba(a,c,f),Or=g;break;default:Ba(a,c,f)}}function RT(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ap(a)}catch(f){Gn(c,c.return,f)}}function wB(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new kT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new kT),c;default:throw Error(s(435,a.tag))}}function tj(a,c){var f=wB(a);c.forEach(function(g){var v=NB.bind(null,a,g);f.has(g)||(f.add(g),g.then(v,v))})}function xi(a,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var v=f[g],w=a,z=c,V=z;e:for(;V!==null;){switch(V.tag){case 27:if(Gl(V.type)){ur=V.stateNode,Zs=!1;break e}break;case 5:ur=V.stateNode,Zs=!1;break e;case 3:case 4:ur=V.stateNode.containerInfo,Zs=!0;break e}V=V.return}if(ur===null)throw Error(s(160));MT(w,z,v),ur=null,Zs=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)DT(c,a),c=c.sibling}var bo=null;function DT(a,c){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:xi(c,a),yi(a),g&4&&(Bl(3,a,a.return),Hf(3,a),Bl(5,a,a.return));break;case 1:xi(c,a),yi(a),g&512&&(Or||f===null||Bo(f,f.return)),g&64&&_a&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var v=bo;if(xi(c,a),yi(a),g&512&&(Or||f===null||Bo(f,f.return)),g&4){var w=f!==null?f.memoizedState:null;if(g=a.memoizedState,f===null)if(g===null)if(a.stateNode===null){e:{g=a.type,f=a.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":w=v.getElementsByTagName("title")[0],(!w||w[ma]||w[Br]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(g),v.head.insertBefore(w,v.querySelector("head > title"))),xs(w,g,f),w[Br]=a,br(w),g=w;break e;case"link":var z=EM("link","href",v).get(g+(f.href||""));if(z){for(var V=0;V<z.length;V++)if(w=z[V],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){z.splice(V,1);break t}}w=v.createElement(g),xs(w,g,f),v.head.appendChild(w);break;case"meta":if(z=EM("meta","content",v).get(g+(f.content||""))){for(V=0;V<z.length;V++)if(w=z[V],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){z.splice(V,1);break t}}w=v.createElement(g),xs(w,g,f),v.head.appendChild(w);break;default:throw Error(s(468,g))}w[Br]=a,br(w),g=w}a.stateNode=g}else kM(v,a.type,a.stateNode);else a.stateNode=wM(v,g,a.memoizedProps);else w!==g?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,g===null?kM(v,a.type,a.stateNode):wM(v,g,a.memoizedProps)):g===null&&a.stateNode!==null&&Jv(a,a.memoizedProps,f.memoizedProps)}break;case 27:xi(c,a),yi(a),g&512&&(Or||f===null||Bo(f,f.return)),f!==null&&g&4&&Jv(a,a.memoizedProps,f.memoizedProps);break;case 5:if(xi(c,a),yi(a),g&512&&(Or||f===null||Bo(f,f.return)),a.flags&32){v=a.stateNode;try{zi(v,"")}catch(Se){Gn(a,a.return,Se)}}g&4&&a.stateNode!=null&&(v=a.memoizedProps,Jv(a,v,f!==null?f.memoizedProps:v)),g&1024&&(ej=!0);break;case 6:if(xi(c,a),yi(a),g&4){if(a.stateNode===null)throw Error(s(162));g=a.memoizedProps,f=a.stateNode;try{f.nodeValue=g}catch(Se){Gn(a,a.return,Se)}}break;case 3:if(dx=null,v=bo,bo=cx(c.containerInfo),xi(c,a),bo=v,yi(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{ap(c.containerInfo)}catch(Se){Gn(a,a.return,Se)}ej&&(ej=!1,OT(a));break;case 4:g=bo,bo=cx(a.stateNode.containerInfo),xi(c,a),yi(a),bo=g;break;case 12:xi(c,a),yi(a);break;case 13:xi(c,a),yi(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(aj=Ee()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,tj(a,g)));break;case 22:v=a.memoizedState!==null;var se=f!==null&&f.memoizedState!==null,be=_a,Ne=Or;if(_a=be||v,Or=Ne||se,xi(c,a),Or=Ne,_a=be,yi(a),g&8192)e:for(c=a.stateNode,c._visibility=v?c._visibility&-2:c._visibility|1,v&&(f===null||se||_a||Or||su(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){se=f=c;try{if(w=se.stateNode,v)z=w.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{V=se.stateNode;var _e=se.memoizedProps.style,ve=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;V.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(Se){Gn(se,se.return,Se)}}}else if(c.tag===6){if(f===null){se=c;try{se.stateNode.nodeValue=v?"":se.memoizedProps}catch(Se){Gn(se,se.return,Se)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=a.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,tj(a,f))));break;case 19:xi(c,a),yi(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,tj(a,g)));break;case 30:break;case 21:break;default:xi(c,a),yi(a)}}function yi(a){var c=a.flags;if(c&2){try{for(var f,g=a.return;g!==null;){if(wT(g)){f=g;break}g=g.return}if(f==null)throw Error(s(160));switch(f.tag){case 27:var v=f.stateNode,w=Qv(a);Xg(a,w,v);break;case 5:var z=f.stateNode;f.flags&32&&(zi(z,""),f.flags&=-33);var V=Qv(a);Xg(a,V,z);break;case 3:case 4:var se=f.stateNode.containerInfo,be=Qv(a);Zv(a,be,se);break;default:throw Error(s(161))}}catch(Ne){Gn(a,a.return,Ne)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function OT(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;OT(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function $l(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)AT(a,c.alternate,c),c=c.sibling}function su(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Bl(4,c,c.return),su(c);break;case 1:Bo(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&ST(c,c.return,f),su(c);break;case 27:Zf(c.stateNode);case 26:case 5:Bo(c,c.return),su(c);break;case 22:c.memoizedState===null&&su(c);break;case 30:su(c);break;default:su(c)}a=a.sibling}}function Fl(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,v=a,w=c,z=w.flags;switch(w.tag){case 0:case 11:case 15:Fl(v,w,f),Hf(4,w);break;case 1:if(Fl(v,w,f),g=w,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(be){Gn(g,g.return,be)}if(g=w,v=g.updateQueue,v!==null){var V=g.stateNode;try{var se=v.shared.hiddenCallbacks;if(se!==null)for(v.shared.hiddenCallbacks=null,v=0;v<se.length;v++)aA(se[v],V)}catch(be){Gn(g,g.return,be)}}f&&z&64&&jT(w),Uf(w,w.return);break;case 27:ET(w);case 26:case 5:Fl(v,w,f),f&&g===null&&z&4&&CT(w),Uf(w,w.return);break;case 12:Fl(v,w,f);break;case 13:Fl(v,w,f),f&&z&4&&RT(v,w);break;case 22:w.memoizedState===null&&Fl(v,w,f),Uf(w,w.return);break;case 30:break;default:Fl(v,w,f)}c=c.sibling}}function nj(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Mf(f))}function rj(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Mf(a))}function $o(a,c,f,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)NT(a,c,f,g),c=c.sibling}function NT(a,c,f,g){var v=c.flags;switch(c.tag){case 0:case 11:case 15:$o(a,c,f,g),v&2048&&Hf(9,c);break;case 1:$o(a,c,f,g);break;case 3:$o(a,c,f,g),v&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Mf(a)));break;case 12:if(v&2048){$o(a,c,f,g),a=c.stateNode;try{var w=c.memoizedProps,z=w.id,V=w.onPostCommit;typeof V=="function"&&V(z,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(se){Gn(c,c.return,se)}}else $o(a,c,f,g);break;case 13:$o(a,c,f,g);break;case 23:break;case 22:w=c.stateNode,z=c.alternate,c.memoizedState!==null?w._visibility&2?$o(a,c,f,g):Wf(a,c):w._visibility&2?$o(a,c,f,g):(w._visibility|=2,_d(a,c,f,g,(c.subtreeFlags&10256)!==0)),v&2048&&nj(z,c);break;case 24:$o(a,c,f,g),v&2048&&rj(c.alternate,c);break;default:$o(a,c,f,g)}}function _d(a,c,f,g,v){for(v=v&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=a,z=c,V=f,se=g,be=z.flags;switch(z.tag){case 0:case 11:case 15:_d(w,z,V,se,v),Hf(8,z);break;case 23:break;case 22:var Ne=z.stateNode;z.memoizedState!==null?Ne._visibility&2?_d(w,z,V,se,v):Wf(w,z):(Ne._visibility|=2,_d(w,z,V,se,v)),v&&be&2048&&nj(z.alternate,z);break;case 24:_d(w,z,V,se,v),v&&be&2048&&rj(z.alternate,z);break;default:_d(w,z,V,se,v)}c=c.sibling}}function Wf(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,g=c,v=g.flags;switch(g.tag){case 22:Wf(f,g),v&2048&&nj(g.alternate,g);break;case 24:Wf(f,g),v&2048&&rj(g.alternate,g);break;default:Wf(f,g)}c=c.sibling}}var qf=8192;function Bd(a){if(a.subtreeFlags&qf)for(a=a.child;a!==null;)PT(a),a=a.sibling}function PT(a){switch(a.tag){case 26:Bd(a),a.flags&qf&&a.memoizedState!==null&&c$(bo,a.memoizedState,a.memoizedProps);break;case 5:Bd(a);break;case 3:case 4:var c=bo;bo=cx(a.stateNode.containerInfo),Bd(a),bo=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=qf,qf=16777216,Bd(a),qf=c):Bd(a));break;default:Bd(a)}}function zT(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Gf(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];as=g,LT(g,a)}zT(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)IT(a),a=a.sibling}function IT(a){switch(a.tag){case 0:case 11:case 15:Gf(a),a.flags&2048&&Bl(9,a,a.return);break;case 3:Gf(a);break;case 12:Gf(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,Jg(a)):Gf(a);break;default:Gf(a)}}function Jg(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];as=g,LT(g,a)}zT(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Bl(8,c,c.return),Jg(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,Jg(c));break;default:Jg(c)}a=a.sibling}}function LT(a,c){for(;as!==null;){var f=as;switch(f.tag){case 0:case 11:case 15:Bl(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Mf(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,as=g;else e:for(f=a;as!==null;){g=as;var v=g.sibling,w=g.return;if(TT(g),g===f){as=null;break e}if(v!==null){v.return=w,as=v;break e}as=w}}}var EB={getCacheForType:function(a){var c=As(Jr),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},kB=typeof WeakMap=="function"?WeakMap:Map,In=0,Jn=null,en=null,yn=0,Ln=0,bi=null,Vl=!1,$d=!1,sj=!1,$a=0,Cr=0,Hl=0,iu=0,ij=0,Fi=0,Fd=0,Yf=null,ei=null,oj=!1,aj=0,Qg=1/0,Zg=null,Ul=null,gs=0,Wl=null,Vd=null,Hd=0,lj=0,cj=null,_T=null,Kf=0,uj=null;function vi(){if((In&2)!==0&&yn!==0)return yn&-yn;if(F.T!==null){var a=Rd;return a!==0?a:xj()}return Cl()}function BT(){Fi===0&&(Fi=(yn&536870912)===0||kn?ar():536870912);var a=$i.current;return a!==null&&(a.flags|=32),Fi}function ji(a,c,f){(a===Jn&&(Ln===2||Ln===9)||a.cancelPendingCommit!==null)&&(Ud(a,0),ql(a,yn,Fi,!1)),lr(a,f),((In&2)===0||a!==Jn)&&(a===Jn&&((In&2)===0&&(iu|=f),Cr===4&&ql(a,yn,Fi,!1)),Fo(a))}function $T(a,c,f){if((In&6)!==0)throw Error(s(327));var g=!f&&(c&124)===0&&(c&a.expiredLanes)===0||fn(a,c),v=g?MB(a,c):fj(a,c,!0),w=g;do{if(v===0){$d&&!g&&ql(a,c,0,!1);break}else{if(f=a.current.alternate,w&&!AB(f)){v=fj(a,c,!1),w=!1;continue}if(v===2){if(w=c,a.errorRecoveryDisabledLanes&w)var z=0;else z=a.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){c=z;e:{var V=a;v=Yf;var se=V.current.memoizedState.isDehydrated;if(se&&(Ud(V,z).flags|=256),z=fj(V,z,!1),z!==2){if(sj&&!se){V.errorRecoveryDisabledLanes|=w,iu|=w,v=4;break e}w=ei,ei=v,w!==null&&(ei===null?ei=w:ei.push.apply(ei,w))}v=z}if(w=!1,v!==2)continue}}if(v===1){Ud(a,0),ql(a,c,0,!0);break}e:{switch(g=a,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((c&4194048)!==c)break;case 6:ql(g,c,Fi,!Vl);break e;case 2:ei=null;break;case 3:case 5:break;default:throw Error(s(329))}if((c&62914560)===c&&(v=aj+300-Ee(),10<v)){if(ql(g,c,Fi,!Vl),Sn(g,0,!0)!==0)break e;g.timeoutHandle=mM(FT.bind(null,g,f,ei,Zg,oj,c,Fi,iu,Fd,Vl,w,2,-0,0),v);break e}FT(g,f,ei,Zg,oj,c,Fi,iu,Fd,Vl,w,0,-0,0)}}break}while(!0);Fo(a)}function FT(a,c,f,g,v,w,z,V,se,be,Ne,_e,ve,Se){if(a.timeoutHandle=-1,_e=c.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(np={stylesheets:null,count:0,unsuspend:l$},PT(c),_e=u$(),_e!==null)){a.cancelPendingCommit=_e(YT.bind(null,a,c,w,f,g,v,z,V,se,Ne,1,ve,Se)),ql(a,w,z,!be);return}YT(a,c,w,f,g,v,z,V,se)}function AB(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var v=f[g],w=v.getSnapshot;v=v.value;try{if(!mi(w(),v))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ql(a,c,f,g){c&=~ij,c&=~iu,a.suspendedLanes|=c,a.pingedLanes&=~c,g&&(a.warmLanes|=c),g=a.expirationTimes;for(var v=c;0<v;){var w=31-ot(v),z=1<<w;g[w]=-1,v&=~z}f!==0&&jl(a,f,c)}function ex(){return(In&6)===0?(Xf(0),!1):!0}function dj(){if(en!==null){if(Ln===0)var a=en.return;else a=en,Oa=Zc=null,Tv(a),Id=null,$f=0,a=en;for(;a!==null;)vT(a.alternate,a),a=a.return;en=null}}function Ud(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,WB(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),dj(),Jn=a,en=f=Ma(a.current,null),yn=c,Ln=0,bi=null,Vl=!1,$d=fn(a,c),sj=!1,Fd=Fi=ij=iu=Hl=Cr=0,ei=Yf=null,oj=!1,(c&8)!==0&&(c|=c&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=c;0<g;){var v=31-ot(g),w=1<<v;c|=a[v],g&=~w}return $a=c,Sg(),f}function VT(a,c){Kt=null,F.H=Fg,c===Df||c===Dg?(c=iA(),Ln=3):c===nA?(c=iA(),Ln=4):Ln=c===oT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,bi=c,en===null&&(Cr=1,qg(a,Ii(c,a.current)))}function HT(){var a=F.H;return F.H=Fg,a===null?Fg:a}function UT(){var a=F.A;return F.A=EB,a}function hj(){Cr=4,Vl||(yn&4194048)!==yn&&$i.current!==null||($d=!0),(Hl&134217727)===0&&(iu&134217727)===0||Jn===null||ql(Jn,yn,Fi,!1)}function fj(a,c,f){var g=In;In|=2;var v=HT(),w=UT();(Jn!==a||yn!==c)&&(Zg=null,Ud(a,c)),c=!1;var z=Cr;e:do try{if(Ln!==0&&en!==null){var V=en,se=bi;switch(Ln){case 8:dj(),z=6;break e;case 3:case 2:case 9:case 6:$i.current===null&&(c=!0);var be=Ln;if(Ln=0,bi=null,Wd(a,V,se,be),f&&$d){z=0;break e}break;default:be=Ln,Ln=0,bi=null,Wd(a,V,se,be)}}TB(),z=Cr;break}catch(Ne){VT(a,Ne)}while(!0);return c&&a.shellSuspendCounter++,Oa=Zc=null,In=g,F.H=v,F.A=w,en===null&&(Jn=null,yn=0,Sg()),z}function TB(){for(;en!==null;)WT(en)}function MB(a,c){var f=In;In|=2;var g=HT(),v=UT();Jn!==a||yn!==c?(Zg=null,Qg=Ee()+500,Ud(a,c)):$d=fn(a,c);e:do try{if(Ln!==0&&en!==null){c=en;var w=bi;t:switch(Ln){case 1:Ln=0,bi=null,Wd(a,c,w,1);break;case 2:case 9:if(rA(w)){Ln=0,bi=null,qT(c);break}c=function(){Ln!==2&&Ln!==9||Jn!==a||(Ln=7),Fo(a)},w.then(c,c);break e;case 3:Ln=7;break e;case 4:Ln=5;break e;case 7:rA(w)?(Ln=0,bi=null,qT(c)):(Ln=0,bi=null,Wd(a,c,w,7));break;case 5:var z=null;switch(en.tag){case 26:z=en.memoizedState;case 5:case 27:var V=en;if(!z||AM(z)){Ln=0,bi=null;var se=V.sibling;if(se!==null)en=se;else{var be=V.return;be!==null?(en=be,tx(be)):en=null}break t}}Ln=0,bi=null,Wd(a,c,w,5);break;case 6:Ln=0,bi=null,Wd(a,c,w,6);break;case 8:dj(),Cr=6;break e;default:throw Error(s(462))}}RB();break}catch(Ne){VT(a,Ne)}while(!0);return Oa=Zc=null,F.H=g,F.A=v,In=f,en!==null?0:(Jn=null,yn=0,Sg(),Cr)}function RB(){for(;en!==null&&!Tt();)WT(en)}function WT(a){var c=yT(a.alternate,a,$a);a.memoizedProps=a.pendingProps,c===null?tx(a):en=c}function qT(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=hT(f,c,c.pendingProps,c.type,void 0,yn);break;case 11:c=hT(f,c,c.pendingProps,c.type.render,c.ref,yn);break;case 5:Tv(c);default:vT(f,c),c=en=Gk(c,$a),c=yT(f,c,$a)}a.memoizedProps=a.pendingProps,c===null?tx(a):en=c}function Wd(a,c,f,g){Oa=Zc=null,Tv(c),Id=null,$f=0;var v=c.return;try{if(bB(a,v,c,f,yn)){Cr=1,qg(a,Ii(f,a.current)),en=null;return}}catch(w){if(v!==null)throw en=v,w;Cr=1,qg(a,Ii(f,a.current)),en=null;return}c.flags&32768?(kn||g===1?a=!0:$d||(yn&536870912)!==0?a=!1:(Vl=a=!0,(g===2||g===9||g===3||g===6)&&(g=$i.current,g!==null&&g.tag===13&&(g.flags|=16384))),GT(c,a)):tx(c)}function tx(a){var c=a;do{if((c.flags&32768)!==0){GT(c,Vl);return}a=c.return;var f=jB(c.alternate,c,$a);if(f!==null){en=f;return}if(c=c.sibling,c!==null){en=c;return}en=c=a}while(c!==null);Cr===0&&(Cr=5)}function GT(a,c){do{var f=SB(a.alternate,a);if(f!==null){f.flags&=32767,en=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){en=a;return}en=a=f}while(a!==null);Cr=6,en=null}function YT(a,c,f,g,v,w,z,V,se){a.cancelPendingCommit=null;do nx();while(gs!==0);if((In&6)!==0)throw Error(s(327));if(c!==null){if(c===a.current)throw Error(s(177));if(w=c.lanes|c.childLanes,w|=rv,ss(a,f,w,z,V,se),a===Jn&&(en=Jn=null,yn=0),Vd=c,Wl=a,Hd=f,lj=w,cj=v,_T=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,PB(Ve,function(){return ZT(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=F.T,F.T=null,v=_.p,_.p=2,z=In,In|=4;try{CB(a,c,f)}finally{In=z,_.p=v,F.T=g}}gs=1,KT(),XT(),JT()}}function KT(){if(gs===1){gs=0;var a=Wl,c=Vd,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=F.T,F.T=null;var g=_.p;_.p=2;var v=In;In|=4;try{DT(c,a);var w=Ej,z=Lk(a.containerInfo),V=w.focusedElem,se=w.selectionRange;if(z!==V&&V&&V.ownerDocument&&Ik(V.ownerDocument.documentElement,V)){if(se!==null&&Qb(V)){var be=se.start,Ne=se.end;if(Ne===void 0&&(Ne=be),"selectionStart"in V)V.selectionStart=be,V.selectionEnd=Math.min(Ne,V.value.length);else{var _e=V.ownerDocument||document,ve=_e&&_e.defaultView||window;if(ve.getSelection){var Se=ve.getSelection(),It=V.textContent.length,Ot=Math.min(se.start,It),Un=se.end===void 0?Ot:Math.min(se.end,It);!Se.extend&&Ot>Un&&(z=Un,Un=Ot,Ot=z);var ge=zk(V,Ot),ce=zk(V,Un);if(ge&&ce&&(Se.rangeCount!==1||Se.anchorNode!==ge.node||Se.anchorOffset!==ge.offset||Se.focusNode!==ce.node||Se.focusOffset!==ce.offset)){var ye=_e.createRange();ye.setStart(ge.node,ge.offset),Se.removeAllRanges(),Ot>Un?(Se.addRange(ye),Se.extend(ce.node,ce.offset)):(ye.setEnd(ce.node,ce.offset),Se.addRange(ye))}}}}for(_e=[],Se=V;Se=Se.parentNode;)Se.nodeType===1&&_e.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<_e.length;V++){var ze=_e[V];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}px=!!wj,Ej=wj=null}finally{In=v,_.p=g,F.T=f}}a.current=c,gs=2}}function XT(){if(gs===2){gs=0;var a=Wl,c=Vd,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=F.T,F.T=null;var g=_.p;_.p=2;var v=In;In|=4;try{AT(a,c.alternate,c)}finally{In=v,_.p=g,F.T=f}}gs=3}}function JT(){if(gs===4||gs===3){gs=0,ue();var a=Wl,c=Vd,f=Hd,g=_T;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?gs=5:(gs=0,Vd=Wl=null,QT(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Ul=null),co(f),c=c.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(We,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=F.T,v=_.p,_.p=2,F.T=null;try{for(var w=a.onRecoverableError,z=0;z<g.length;z++){var V=g[z];w(V.value,{componentStack:V.stack})}}finally{F.T=c,_.p=v}}(Hd&3)!==0&&nx(),Fo(a),v=a.pendingLanes,(f&4194090)!==0&&(v&42)!==0?a===uj?Kf++:(Kf=0,uj=a):Kf=0,Xf(0)}}function QT(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Mf(c)))}function nx(a){return KT(),XT(),JT(),ZT()}function ZT(){if(gs!==5)return!1;var a=Wl,c=lj;lj=0;var f=co(Hd),g=F.T,v=_.p;try{_.p=32>f?32:f,F.T=null,f=cj,cj=null;var w=Wl,z=Hd;if(gs=0,Vd=Wl=null,Hd=0,(In&6)!==0)throw Error(s(331));var V=In;if(In|=4,IT(w.current),NT(w,w.current,z,f),In=V,Xf(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(We,w)}catch{}return!0}finally{_.p=v,F.T=g,QT(a,c)}}function eM(a,c,f){c=Ii(f,c),c=Vv(a.stateNode,c,2),a=zl(a,c,2),a!==null&&(lr(a,2),Fo(a))}function Gn(a,c,f){if(a.tag===3)eM(a,a,f);else for(;c!==null;){if(c.tag===3){eM(c,a,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ul===null||!Ul.has(g))){a=Ii(f,a),f=sT(2),g=zl(c,f,2),g!==null&&(iT(f,g,c,a),lr(g,2),Fo(g));break}}c=c.return}}function pj(a,c,f){var g=a.pingCache;if(g===null){g=a.pingCache=new kB;var v=new Set;g.set(c,v)}else v=g.get(c),v===void 0&&(v=new Set,g.set(c,v));v.has(f)||(sj=!0,v.add(f),a=DB.bind(null,a,c,f),c.then(a,a))}function DB(a,c,f){var g=a.pingCache;g!==null&&g.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,Jn===a&&(yn&f)===f&&(Cr===4||Cr===3&&(yn&62914560)===yn&&300>Ee()-aj?(In&2)===0&&Ud(a,0):ij|=f,Fd===yn&&(Fd=0)),Fo(a)}function tM(a,c){c===0&&(c=rs()),a=kd(a,c),a!==null&&(lr(a,c),Fo(a))}function OB(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),tM(a,f)}function NB(a,c){var f=0;switch(a.tag){case 13:var g=a.stateNode,v=a.memoizedState;v!==null&&(f=v.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(c),tM(a,f)}function PB(a,c){return pt(a,c)}var rx=null,qd=null,mj=!1,sx=!1,gj=!1,ou=0;function Fo(a){a!==qd&&a.next===null&&(qd===null?rx=qd=a:qd=qd.next=a),sx=!0,mj||(mj=!0,IB())}function Xf(a,c){if(!gj&&sx){gj=!0;do for(var f=!1,g=rx;g!==null;){if(a!==0){var v=g.pendingLanes;if(v===0)var w=0;else{var z=g.suspendedLanes,V=g.pingedLanes;w=(1<<31-ot(42|a)+1)-1,w&=v&~(z&~V),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,iM(g,w))}else w=yn,w=Sn(g,g===Jn?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||fn(g,w)||(f=!0,iM(g,w));g=g.next}while(f);gj=!1}}function zB(){nM()}function nM(){sx=mj=!1;var a=0;ou!==0&&(UB()&&(a=ou),ou=0);for(var c=Ee(),f=null,g=rx;g!==null;){var v=g.next,w=rM(g,c);w===0?(g.next=null,f===null?rx=v:f.next=v,v===null&&(qd=f)):(f=g,(a!==0||(w&3)!==0)&&(sx=!0)),g=v}Xf(a)}function rM(a,c){for(var f=a.suspendedLanes,g=a.pingedLanes,v=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var z=31-ot(w),V=1<<z,se=v[z];se===-1?((V&f)===0||(V&g)!==0)&&(v[z]=yr(V,c)):se<=c&&(a.expiredLanes|=V),w&=~V}if(c=Jn,f=yn,f=Sn(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,f===0||a===c&&(Ln===2||Ln===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&De(g),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||fn(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(g!==null&&De(g),co(f)){case 2:case 8:f=le;break;case 32:f=Ve;break;case 268435456:f=dn;break;default:f=Ve}return g=sM.bind(null,a),f=pt(f,g),a.callbackPriority=c,a.callbackNode=f,c}return g!==null&&g!==null&&De(g),a.callbackPriority=2,a.callbackNode=null,2}function sM(a,c){if(gs!==0&&gs!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(nx()&&a.callbackNode!==f)return null;var g=yn;return g=Sn(a,a===Jn?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:($T(a,g,c),rM(a,Ee()),a.callbackNode!=null&&a.callbackNode===f?sM.bind(null,a):null)}function iM(a,c){if(nx())return null;$T(a,c,!0)}function IB(){qB(function(){(In&6)!==0?pt(X,zB):nM()})}function xj(){return ou===0&&(ou=ar()),ou}function oM(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ca(""+a)}function aM(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function LB(a,c,f,g,v){if(c==="submit"&&f&&f.stateNode===v){var w=oM((v[Kr]||null).action),z=g.submitter;z&&(c=(c=z[Kr]||null)?oM(c.formAction):z.getAttribute("formAction"),c!==null&&(w=c,z=null));var V=new Ce("action","action",null,g,v);a.push({event:V,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ou!==0){var se=z?aM(v,z):new FormData(v);Lv(f,{pending:!0,data:se,method:v.method,action:w},null,se)}}else typeof w=="function"&&(V.preventDefault(),se=z?aM(v,z):new FormData(v),Lv(f,{pending:!0,data:se,method:v.method,action:w},w,se))},currentTarget:v}]})}}for(var yj=0;yj<nv.length;yj++){var bj=nv[yj],_B=bj.toLowerCase(),BB=bj[0].toUpperCase()+bj.slice(1);yo(_B,"on"+BB)}yo($k,"onAnimationEnd"),yo(Fk,"onAnimationIteration"),yo(Vk,"onAnimationStart"),yo("dblclick","onDoubleClick"),yo("focusin","onFocus"),yo("focusout","onBlur"),yo(nB,"onTransitionRun"),yo(rB,"onTransitionStart"),yo(sB,"onTransitionCancel"),yo(Hk,"onTransitionEnd"),Js("onMouseEnter",["mouseout","mouseover"]),Js("onMouseLeave",["mouseout","mouseover"]),Js("onPointerEnter",["pointerout","pointerover"]),Js("onPointerLeave",["pointerout","pointerover"]),uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),uo("onBeforeInput",["compositionend","keypress","textInput","paste"]),uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$B=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jf));function lM(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],v=g.event;g=g.listeners;e:{var w=void 0;if(c)for(var z=g.length-1;0<=z;z--){var V=g[z],se=V.instance,be=V.currentTarget;if(V=V.listener,se!==w&&v.isPropagationStopped())break e;w=V,v.currentTarget=be;try{w(v)}catch(Ne){Wg(Ne)}v.currentTarget=null,w=se}else for(z=0;z<g.length;z++){if(V=g[z],se=V.instance,be=V.currentTarget,V=V.listener,se!==w&&v.isPropagationStopped())break e;w=V,v.currentTarget=be;try{w(v)}catch(Ne){Wg(Ne)}v.currentTarget=null,w=se}}}}function tn(a,c){var f=c[Je];f===void 0&&(f=c[Je]=new Set);var g=a+"__bubble";f.has(g)||(cM(c,a,2,!1),f.add(g))}function vj(a,c,f){var g=0;c&&(g|=4),cM(f,a,g,c)}var ix="_reactListening"+Math.random().toString(36).slice(2);function jj(a){if(!a[ix]){a[ix]=!0,dd.forEach(function(f){f!=="selectionchange"&&($B.has(f)||vj(f,!1,a),vj(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[ix]||(c[ix]=!0,vj("selectionchange",!1,c))}}function cM(a,c,f,g){switch(NM(c)){case 2:var v=f$;break;case 8:v=p$;break;default:v=zj}f=v.bind(null,c,f,a),v=void 0,!go||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),g?v!==void 0?a.addEventListener(c,f,{capture:!0,passive:v}):a.addEventListener(c,f,!0):v!==void 0?a.addEventListener(c,f,{passive:v}):a.addEventListener(c,f,!1)}function Sj(a,c,f,g,v){var w=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var V=g.stateNode.containerInfo;if(V===v)break;if(z===4)for(z=g.return;z!==null;){var se=z.tag;if((se===3||se===4)&&z.stateNode.containerInfo===v)return;z=z.return}for(;V!==null;){if(z=Di(V),z===null)return;if(se=z.tag,se===5||se===6||se===26||se===27){g=w=z;continue e}V=V.parentNode}}g=g.return}Rl(function(){var be=w,Ne=wa(f),_e=[];e:{var ve=Uk.get(a);if(ve!==void 0){var Se=Ce,It=a;switch(a){case"keypress":if(Dl(f)===0)break e;case"keydown":case"keyup":Se=ks;break;case"focusin":It="focus",Se=Ta;break;case"focusout":It="blur",Se=Ta;break;case"beforeblur":case"afterblur":Se=Ta;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Es;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Aa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=bf;break;case $k:case Fk:case Vk:Se=yf;break;case Hk:Se=Yb;break;case"scroll":case"scrollend":Se=Xt;break;case"wheel":Se=F6;break;case"copy":case"cut":case"paste":Se=Gb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=zn;break;case"toggle":case"beforetoggle":Se=H6}var Ot=(c&4)!==0,Un=!Ot&&(a==="scroll"||a==="scrollend"),ge=Ot?ve!==null?ve+"Capture":null:ve;Ot=[];for(var ce=be,ye;ce!==null;){var ze=ce;if(ye=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||ye===null||ge===null||(ze=mo(ce,ge),ze!=null&&Ot.push(Qf(ce,ze,ye))),Un)break;ce=ce.return}0<Ot.length&&(ve=new Se(ve,It,null,f,Ne),_e.push({event:ve,listeners:Ot}))}}if((c&7)===0){e:{if(ve=a==="mouseover"||a==="pointerover",Se=a==="mouseout"||a==="pointerout",ve&&f!==Po&&(It=f.relatedTarget||f.fromElement)&&(Di(It)||It[hi]))break e;if((Se||ve)&&(ve=Ne.window===Ne?Ne:(ve=Ne.ownerDocument)?ve.defaultView||ve.parentWindow:window,Se?(It=f.relatedTarget||f.toElement,Se=be,It=It?Di(It):null,It!==null&&(Un=o(It),Ot=It.tag,It!==Un||Ot!==5&&Ot!==27&&Ot!==6)&&(It=null)):(Se=null,It=be),Se!==It)){if(Ot=Es,ze="onMouseLeave",ge="onMouseEnter",ce="mouse",(a==="pointerout"||a==="pointerover")&&(Ot=zn,ze="onPointerLeave",ge="onPointerEnter",ce="pointer"),Un=Se==null?ve:Oo(Se),ye=It==null?ve:Oo(It),ve=new Ot(ze,ce+"leave",Se,f,Ne),ve.target=Un,ve.relatedTarget=ye,ze=null,Di(Ne)===be&&(Ot=new Ot(ge,ce+"enter",It,f,Ne),Ot.target=ye,Ot.relatedTarget=Un,ze=Ot),Un=ze,Se&&It)t:{for(Ot=Se,ge=It,ce=0,ye=Ot;ye;ye=Gd(ye))ce++;for(ye=0,ze=ge;ze;ze=Gd(ze))ye++;for(;0<ce-ye;)Ot=Gd(Ot),ce--;for(;0<ye-ce;)ge=Gd(ge),ye--;for(;ce--;){if(Ot===ge||ge!==null&&Ot===ge.alternate)break t;Ot=Gd(Ot),ge=Gd(ge)}Ot=null}else Ot=null;Se!==null&&uM(_e,ve,Se,Ot,!1),It!==null&&Un!==null&&uM(_e,Un,It,Ot,!0)}}e:{if(ve=be?Oo(be):window,Se=ve.nodeName&&ve.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ve.type==="file")var lt=Mk;else if(Ak(ve))if(Rk)lt=Z6;else{lt=J6;var Jt=X6}else Se=ve.nodeName,!Se||Se.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?be&&Sa(be.elementType)&&(lt=Mk):lt=Q6;if(lt&&(lt=lt(a,be))){Tk(_e,lt,f,Ne);break e}Jt&&Jt(a,ve,be),a==="focusout"&&be&&ve.type==="number"&&be.memoizedProps.value!=null&&Tl(ve,"number",ve.value)}switch(Jt=be?Oo(be):window,a){case"focusin":(Ak(Jt)||Jt.contentEditable==="true")&&(Cd=Jt,Zb=be,wf=null);break;case"focusout":wf=Zb=Cd=null;break;case"mousedown":ev=!0;break;case"contextmenu":case"mouseup":case"dragend":ev=!1,_k(_e,f,Ne);break;case"selectionchange":if(tB)break;case"keydown":case"keyup":_k(_e,f,Ne)}var St;if(Kb)e:{switch(a){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Sd?Ek(a,f)&&(Pt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Pt="onCompositionStart");Pt&&(Sk&&f.locale!=="ko"&&(Sd||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Sd&&(St=yd()):(pi=Ne,Uc="value"in pi?pi.value:pi.textContent,Sd=!0)),Jt=ox(be,Pt),0<Jt.length&&(Pt=new K(Pt,a,null,f,Ne),_e.push({event:Pt,listeners:Jt}),St?Pt.data=St:(St=kk(f),St!==null&&(Pt.data=St)))),(St=W6?q6(a,f):G6(a,f))&&(Pt=ox(be,"onBeforeInput"),0<Pt.length&&(Jt=new K("onBeforeInput","beforeinput",null,f,Ne),_e.push({event:Jt,listeners:Pt}),Jt.data=St)),LB(_e,a,be,f,Ne)}lM(_e,c)})}function Qf(a,c,f){return{instance:a,listener:c,currentTarget:f}}function ox(a,c){for(var f=c+"Capture",g=[];a!==null;){var v=a,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=mo(a,f),v!=null&&g.unshift(Qf(a,v,w)),v=mo(a,c),v!=null&&g.push(Qf(a,v,w))),a.tag===3)return g;a=a.return}return[]}function Gd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function uM(a,c,f,g,v){for(var w=c._reactName,z=[];f!==null&&f!==g;){var V=f,se=V.alternate,be=V.stateNode;if(V=V.tag,se!==null&&se===g)break;V!==5&&V!==26&&V!==27||be===null||(se=be,v?(be=mo(f,w),be!=null&&z.unshift(Qf(f,be,se))):v||(be=mo(f,w),be!=null&&z.push(Qf(f,be,se)))),f=f.return}z.length!==0&&a.push({event:c,listeners:z})}var FB=/\r\n?/g,VB=/\u0000|\uFFFD/g;function dM(a){return(typeof a=="string"?a:""+a).replace(FB,`
`).replace(VB,"")}function hM(a,c){return c=dM(c),dM(a)===c}function ax(){}function Hn(a,c,f,g,v,w){switch(f){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||zi(a,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&zi(a,""+g);break;case"className":xa(a,"class",g);break;case"tabIndex":xa(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":xa(a,f,g);break;case"style":gf(a,g,w);break;case"data":if(c!=="object"){xa(a,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=Ca(""+g),a.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(c!=="input"&&Hn(a,c,"name",v.name,v,null),Hn(a,c,"formEncType",v.formEncType,v,null),Hn(a,c,"formMethod",v.formMethod,v,null),Hn(a,c,"formTarget",v.formTarget,v,null)):(Hn(a,c,"encType",v.encType,v,null),Hn(a,c,"method",v.method,v,null),Hn(a,c,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=Ca(""+g),a.setAttribute(f,g);break;case"onClick":g!=null&&(a.onclick=ax);break;case"onScroll":g!=null&&tn("scroll",a);break;case"onScrollEnd":g!=null&&tn("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(f=g.__html,f!=null){if(v.children!=null)throw Error(s(60));a.innerHTML=f}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}f=Ca(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""+g):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":g===!0?a.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,g):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(f,g):a.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(f):a.setAttribute(f,g);break;case"popover":tn("beforetoggle",a),tn("toggle",a),ho(a,"popover",g);break;case"xlinkActuate":Ls(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ls(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ls(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ls(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ls(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ls(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ls(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ls(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ls(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ho(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Hc.get(f)||f,ho(a,f,g))}}function Cj(a,c,f,g,v,w){switch(f){case"style":gf(a,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(f=g.__html,f!=null){if(v.children!=null)throw Error(s(60));a.innerHTML=f}}break;case"children":typeof g=="string"?zi(a,g):(typeof g=="number"||typeof g=="bigint")&&zi(a,""+g);break;case"onScroll":g!=null&&tn("scroll",a);break;case"onScrollEnd":g!=null&&tn("scrollend",a);break;case"onClick":g!=null&&(a.onclick=ax);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!El.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(v=f.endsWith("Capture"),c=f.slice(2,v?f.length-7:void 0),w=a[Kr]||null,w=w!=null?w[f]:null,typeof w=="function"&&a.removeEventListener(c,w,v),typeof g=="function")){typeof w!="function"&&w!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,g,v);break e}f in a?a[f]=g:g===!0?a.setAttribute(f,""):ho(a,f,g)}}}function xs(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tn("error",a),tn("load",a);var g=!1,v=!1,w;for(w in f)if(f.hasOwnProperty(w)){var z=f[w];if(z!=null)switch(w){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:Hn(a,c,w,z,f,null)}}v&&Hn(a,c,"srcSet",f.srcSet,f,null),g&&Hn(a,c,"src",f.src,f,null);return;case"input":tn("invalid",a);var V=w=z=v=null,se=null,be=null;for(g in f)if(f.hasOwnProperty(g)){var Ne=f[g];if(Ne!=null)switch(g){case"name":v=Ne;break;case"type":z=Ne;break;case"checked":se=Ne;break;case"defaultChecked":be=Ne;break;case"value":w=Ne;break;case"defaultValue":V=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(s(137,c));break;default:Hn(a,c,g,Ne,f,null)}}va(a,w,V,se,be,z,v,!1),ya(a);return;case"select":tn("invalid",a),g=z=w=null;for(v in f)if(f.hasOwnProperty(v)&&(V=f[v],V!=null))switch(v){case"value":w=V;break;case"defaultValue":z=V;break;case"multiple":g=V;default:Hn(a,c,v,V,f,null)}c=w,f=z,a.multiple=!!g,c!=null?Pi(a,!!g,c,!1):f!=null&&Pi(a,!!g,f,!0);return;case"textarea":tn("invalid",a),w=v=g=null;for(z in f)if(f.hasOwnProperty(z)&&(V=f[z],V!=null))switch(z){case"value":g=V;break;case"defaultValue":v=V;break;case"children":w=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(91));break;default:Hn(a,c,z,V,f,null)}ja(a,g,v,w),ya(a);return;case"option":for(se in f)if(f.hasOwnProperty(se)&&(g=f[se],g!=null))switch(se){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Hn(a,c,se,g,f,null)}return;case"dialog":tn("beforetoggle",a),tn("toggle",a),tn("cancel",a),tn("close",a);break;case"iframe":case"object":tn("load",a);break;case"video":case"audio":for(g=0;g<Jf.length;g++)tn(Jf[g],a);break;case"image":tn("error",a),tn("load",a);break;case"details":tn("toggle",a);break;case"embed":case"source":case"link":tn("error",a),tn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in f)if(f.hasOwnProperty(be)&&(g=f[be],g!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:Hn(a,c,be,g,f,null)}return;default:if(Sa(c)){for(Ne in f)f.hasOwnProperty(Ne)&&(g=f[Ne],g!==void 0&&Cj(a,c,Ne,g,f,void 0));return}}for(V in f)f.hasOwnProperty(V)&&(g=f[V],g!=null&&Hn(a,c,V,g,f,null))}function HB(a,c,f,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,z=null,V=null,se=null,be=null,Ne=null;for(Se in f){var _e=f[Se];if(f.hasOwnProperty(Se)&&_e!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":se=_e;default:g.hasOwnProperty(Se)||Hn(a,c,Se,null,g,_e)}}for(var ve in g){var Se=g[ve];if(_e=f[ve],g.hasOwnProperty(ve)&&(Se!=null||_e!=null))switch(ve){case"type":w=Se;break;case"name":v=Se;break;case"checked":be=Se;break;case"defaultChecked":Ne=Se;break;case"value":z=Se;break;case"defaultValue":V=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(s(137,c));break;default:Se!==_e&&Hn(a,c,ve,Se,g,_e)}}po(a,z,V,se,be,Ne,w,v);return;case"select":Se=z=V=ve=null;for(w in f)if(se=f[w],f.hasOwnProperty(w)&&se!=null)switch(w){case"value":break;case"multiple":Se=se;default:g.hasOwnProperty(w)||Hn(a,c,w,null,g,se)}for(v in g)if(w=g[v],se=f[v],g.hasOwnProperty(v)&&(w!=null||se!=null))switch(v){case"value":ve=w;break;case"defaultValue":V=w;break;case"multiple":z=w;default:w!==se&&Hn(a,c,v,w,g,se)}c=V,f=z,g=Se,ve!=null?Pi(a,!!f,ve,!1):!!g!=!!f&&(c!=null?Pi(a,!!f,c,!0):Pi(a,!!f,f?[]:"",!1));return;case"textarea":Se=ve=null;for(V in f)if(v=f[V],f.hasOwnProperty(V)&&v!=null&&!g.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Hn(a,c,V,null,g,v)}for(z in g)if(v=g[z],w=f[z],g.hasOwnProperty(z)&&(v!=null||w!=null))switch(z){case"value":ve=v;break;case"defaultValue":Se=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&Hn(a,c,z,v,g,w)}Vc(a,ve,Se);return;case"option":for(var It in f)if(ve=f[It],f.hasOwnProperty(It)&&ve!=null&&!g.hasOwnProperty(It))switch(It){case"selected":a.selected=!1;break;default:Hn(a,c,It,null,g,ve)}for(se in g)if(ve=g[se],Se=f[se],g.hasOwnProperty(se)&&ve!==Se&&(ve!=null||Se!=null))switch(se){case"selected":a.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:Hn(a,c,se,ve,g,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in f)ve=f[Ot],f.hasOwnProperty(Ot)&&ve!=null&&!g.hasOwnProperty(Ot)&&Hn(a,c,Ot,null,g,ve);for(be in g)if(ve=g[be],Se=f[be],g.hasOwnProperty(be)&&ve!==Se&&(ve!=null||Se!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(s(137,c));break;default:Hn(a,c,be,ve,g,Se)}return;default:if(Sa(c)){for(var Un in f)ve=f[Un],f.hasOwnProperty(Un)&&ve!==void 0&&!g.hasOwnProperty(Un)&&Cj(a,c,Un,void 0,g,ve);for(Ne in g)ve=g[Ne],Se=f[Ne],!g.hasOwnProperty(Ne)||ve===Se||ve===void 0&&Se===void 0||Cj(a,c,Ne,ve,g,Se);return}}for(var ge in f)ve=f[ge],f.hasOwnProperty(ge)&&ve!=null&&!g.hasOwnProperty(ge)&&Hn(a,c,ge,null,g,ve);for(_e in g)ve=g[_e],Se=f[_e],!g.hasOwnProperty(_e)||ve===Se||ve==null&&Se==null||Hn(a,c,_e,ve,g,Se)}var wj=null,Ej=null;function lx(a){return a.nodeType===9?a:a.ownerDocument}function fM(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pM(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function kj(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Aj=null;function UB(){var a=window.event;return a&&a.type==="popstate"?a===Aj?!1:(Aj=a,!0):(Aj=null,!1)}var mM=typeof setTimeout=="function"?setTimeout:void 0,WB=typeof clearTimeout=="function"?clearTimeout:void 0,gM=typeof Promise=="function"?Promise:void 0,qB=typeof queueMicrotask=="function"?queueMicrotask:typeof gM<"u"?function(a){return gM.resolve(null).then(a).catch(GB)}:mM;function GB(a){setTimeout(function(){throw a})}function Gl(a){return a==="head"}function xM(a,c){var f=c,g=0,v=0;do{var w=f.nextSibling;if(a.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(0<g&&8>g){f=g;var z=a.ownerDocument;if(f&1&&Zf(z.documentElement),f&2&&Zf(z.body),f&4)for(f=z.head,Zf(f),z=f.firstChild;z;){var V=z.nextSibling,se=z.nodeName;z[ma]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&z.rel.toLowerCase()==="stylesheet"||f.removeChild(z),z=V}}if(v===0){a.removeChild(w),ap(c);return}v--}else f==="$"||f==="$?"||f==="$!"?v++:g=f.charCodeAt(0)-48;else g=0;f=w}while(f);ap(c)}function Tj(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Tj(f),Bc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function YB(a,c,f,g){for(;a.nodeType===1;){var v=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[ma])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=vo(a.nextSibling),a===null)break}return null}function KB(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=vo(a.nextSibling),a===null))return null;return a}function Mj(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function XB(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var g=function(){c(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function vo(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var Rj=null;function yM(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function bM(a,c,f){switch(c=lx(f),a){case"html":if(a=c.documentElement,!a)throw Error(s(452));return a;case"head":if(a=c.head,!a)throw Error(s(453));return a;case"body":if(a=c.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function Zf(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Bc(a)}var Vi=new Map,vM=new Set;function cx(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Fa=_.d;_.d={f:JB,r:QB,D:ZB,C:e$,L:t$,m:n$,X:s$,S:r$,M:i$};function JB(){var a=Fa.f(),c=ex();return a||c}function QB(a){var c=Is(a);c!==null&&c.tag===5&&c.type==="form"?$A(c):Fa.r(a)}var Yd=typeof document>"u"?null:document;function jM(a,c,f){var g=Yd;if(g&&typeof c=="string"&&c){var v=hr(c);v='link[rel="'+a+'"][href="'+v+'"]',typeof f=="string"&&(v+='[crossorigin="'+f+'"]'),vM.has(v)||(vM.add(v),a={rel:a,crossOrigin:f,href:c},g.querySelector(v)===null&&(c=g.createElement("link"),xs(c,"link",a),br(c),g.head.appendChild(c)))}}function ZB(a){Fa.D(a),jM("dns-prefetch",a,null)}function e$(a,c){Fa.C(a,c),jM("preconnect",a,c)}function t$(a,c,f){Fa.L(a,c,f);var g=Yd;if(g&&a&&c){var v='link[rel="preload"][as="'+hr(c)+'"]';c==="image"&&f&&f.imageSrcSet?(v+='[imagesrcset="'+hr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(v+='[imagesizes="'+hr(f.imageSizes)+'"]')):v+='[href="'+hr(a)+'"]';var w=v;switch(c){case"style":w=Kd(a);break;case"script":w=Xd(a)}Vi.has(w)||(a=p({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),Vi.set(w,a),g.querySelector(v)!==null||c==="style"&&g.querySelector(ep(w))||c==="script"&&g.querySelector(tp(w))||(c=g.createElement("link"),xs(c,"link",a),br(c),g.head.appendChild(c)))}}function n$(a,c){Fa.m(a,c);var f=Yd;if(f&&a){var g=c&&typeof c.as=="string"?c.as:"script",v='link[rel="modulepreload"][as="'+hr(g)+'"][href="'+hr(a)+'"]',w=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Xd(a)}if(!Vi.has(w)&&(a=p({rel:"modulepreload",href:a},c),Vi.set(w,a),f.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(tp(w)))return}g=f.createElement("link"),xs(g,"link",a),br(g),f.head.appendChild(g)}}}function r$(a,c,f){Fa.S(a,c,f);var g=Yd;if(g&&a){var v=Oi(g).hoistableStyles,w=Kd(a);c=c||"default";var z=v.get(w);if(!z){var V={loading:0,preload:null};if(z=g.querySelector(ep(w)))V.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":c},f),(f=Vi.get(w))&&Dj(a,f);var se=z=g.createElement("link");br(se),xs(se,"link",a),se._p=new Promise(function(be,Ne){se.onload=be,se.onerror=Ne}),se.addEventListener("load",function(){V.loading|=1}),se.addEventListener("error",function(){V.loading|=2}),V.loading|=4,ux(z,c,g)}z={type:"stylesheet",instance:z,count:1,state:V},v.set(w,z)}}}function s$(a,c){Fa.X(a,c);var f=Yd;if(f&&a){var g=Oi(f).hoistableScripts,v=Xd(a),w=g.get(v);w||(w=f.querySelector(tp(v)),w||(a=p({src:a,async:!0},c),(c=Vi.get(v))&&Oj(a,c),w=f.createElement("script"),br(w),xs(w,"link",a),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(v,w))}}function i$(a,c){Fa.M(a,c);var f=Yd;if(f&&a){var g=Oi(f).hoistableScripts,v=Xd(a),w=g.get(v);w||(w=f.querySelector(tp(v)),w||(a=p({src:a,async:!0,type:"module"},c),(c=Vi.get(v))&&Oj(a,c),w=f.createElement("script"),br(w),xs(w,"link",a),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(v,w))}}function SM(a,c,f,g){var v=(v=Z.current)?cx(v):null;if(!v)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Kd(f.href),f=Oi(v).hoistableStyles,g=f.get(c),g||(g={type:"style",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=Kd(f.href);var w=Oi(v).hoistableStyles,z=w.get(a);if(z||(v=v.ownerDocument||v,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,z),(w=v.querySelector(ep(a)))&&!w._p&&(z.instance=w,z.state.loading=5),Vi.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Vi.set(a,f),w||o$(v,a,f,z.state))),c&&g===null)throw Error(s(528,""));return z}if(c&&g!==null)throw Error(s(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Xd(f),f=Oi(v).hoistableScripts,g=f.get(c),g||(g={type:"script",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function Kd(a){return'href="'+hr(a)+'"'}function ep(a){return'link[rel="stylesheet"]['+a+"]"}function CM(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function o$(a,c,f,g){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=a.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),xs(c,"link",f),br(c),a.head.appendChild(c))}function Xd(a){return'[src="'+hr(a)+'"]'}function tp(a){return"script[async]"+a}function wM(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var g=a.querySelector('style[data-href~="'+hr(f.href)+'"]');if(g)return c.instance=g,br(g),g;var v=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),br(g),xs(g,"style",v),ux(g,f.precedence,a),c.instance=g;case"stylesheet":v=Kd(f.href);var w=a.querySelector(ep(v));if(w)return c.state.loading|=4,c.instance=w,br(w),w;g=CM(f),(v=Vi.get(v))&&Dj(g,v),w=(a.ownerDocument||a).createElement("link"),br(w);var z=w;return z._p=new Promise(function(V,se){z.onload=V,z.onerror=se}),xs(w,"link",g),c.state.loading|=4,ux(w,f.precedence,a),c.instance=w;case"script":return w=Xd(f.src),(v=a.querySelector(tp(w)))?(c.instance=v,br(v),v):(g=f,(v=Vi.get(w))&&(g=p({},f),Oj(g,v)),a=a.ownerDocument||a,v=a.createElement("script"),br(v),xs(v,"link",g),a.head.appendChild(v),c.instance=v);case"void":return null;default:throw Error(s(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,ux(g,f.precedence,a));return c.instance}function ux(a,c,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,w=v,z=0;z<g.length;z++){var V=g[z];if(V.dataset.precedence===c)w=V;else if(w!==v)break}w?w.parentNode.insertBefore(a,w.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function Dj(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function Oj(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var dx=null;function EM(a,c,f){if(dx===null){var g=new Map,v=dx=new Map;v.set(f,g)}else v=dx,g=v.get(f),g||(g=new Map,v.set(f,g));if(g.has(a))return g;for(g.set(a,null),f=f.getElementsByTagName(a),v=0;v<f.length;v++){var w=f[v];if(!(w[ma]||w[Br]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var z=w.getAttribute(c)||"";z=a+z;var V=g.get(z);V?V.push(w):g.set(z,[w])}}return g}function kM(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function a$(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function AM(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var np=null;function l$(){}function c$(a,c,f){if(np===null)throw Error(s(475));var g=np;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Kd(f.href),w=a.querySelector(ep(v));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=hx.bind(g),a.then(g,g)),c.state.loading|=4,c.instance=w,br(w);return}w=a.ownerDocument||a,f=CM(f),(v=Vi.get(v))&&Dj(f,v),w=w.createElement("link"),br(w);var z=w;z._p=new Promise(function(V,se){z.onload=V,z.onerror=se}),xs(w,"link",f),c.instance=w}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(g.count++,c=hx.bind(g),a.addEventListener("load",c),a.addEventListener("error",c))}}function u$(){if(np===null)throw Error(s(475));var a=np;return a.stylesheets&&a.count===0&&Nj(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&Nj(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function hx(){if(this.count--,this.count===0){if(this.stylesheets)Nj(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var fx=null;function Nj(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,fx=new Map,c.forEach(d$,a),fx=null,hx.call(a))}function d$(a,c){if(!(c.state.loading&4)){var f=fx.get(a);if(f)var g=f.get(null);else{f=new Map,fx.set(a,f);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var z=v[w];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(f.set(z.dataset.precedence,z),g=z)}g&&f.set(null,g)}v=c.instance,z=v.getAttribute("data-precedence"),w=f.get(z)||g,w===g&&f.set(null,v),f.set(z,v),this.count++,g=hx.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),w?w.parentNode.insertBefore(v,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),c.state.loading|=4}}var rp={$$typeof:A,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function h$(a,c,f,g,v,w,z,V){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jn(0),this.hiddenUpdates=jn(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function TM(a,c,f,g,v,w,z,V,se,be,Ne,_e){return a=new h$(a,c,f,z,V,se,be,_e),c=1,w===!0&&(c|=24),w=gi(3,null,null,c),a.current=w,w.stateNode=a,c=pv(),c.refCount++,a.pooledCache=c,c.refCount++,w.memoizedState={element:g,isDehydrated:f,cache:c},yv(w),a}function MM(a){return a?(a=Ad,a):Ad}function RM(a,c,f,g,v,w){v=MM(v),g.context===null?g.context=v:g.pendingContext=v,g=Pl(c),g.payload={element:f},w=w===void 0?null:w,w!==null&&(g.callback=w),f=zl(a,g,c),f!==null&&(ji(f,a,c),Nf(f,a,c))}function DM(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function Pj(a,c){DM(a,c),(a=a.alternate)&&DM(a,c)}function OM(a){if(a.tag===13){var c=kd(a,67108864);c!==null&&ji(c,a,67108864),Pj(a,67108864)}}var px=!0;function f$(a,c,f,g){var v=F.T;F.T=null;var w=_.p;try{_.p=2,zj(a,c,f,g)}finally{_.p=w,F.T=v}}function p$(a,c,f,g){var v=F.T;F.T=null;var w=_.p;try{_.p=8,zj(a,c,f,g)}finally{_.p=w,F.T=v}}function zj(a,c,f,g){if(px){var v=Ij(g);if(v===null)Sj(a,c,g,mx,f),PM(a,g);else if(g$(v,a,c,f,g))g.stopPropagation();else if(PM(a,g),c&4&&-1<m$.indexOf(a)){for(;v!==null;){var w=Is(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var z=_t(w.pendingLanes);if(z!==0){var V=w;for(V.pendingLanes|=2,V.entangledLanes|=2;z;){var se=1<<31-ot(z);V.entanglements[1]|=se,z&=~se}Fo(w),(In&6)===0&&(Qg=Ee()+500,Xf(0))}}break;case 13:V=kd(w,2),V!==null&&ji(V,w,2),ex(),Pj(w,2)}if(w=Ij(g),w===null&&Sj(a,c,g,mx,f),w===v)break;v=w}v!==null&&g.stopPropagation()}else Sj(a,c,g,null,f)}}function Ij(a){return a=wa(a),Lj(a)}var mx=null;function Lj(a){if(mx=null,a=Di(a),a!==null){var c=o(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=l(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return mx=a,null}function NM(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case X:return 2;case le:return 8;case Ve:case at:return 32;case dn:return 268435456;default:return 32}default:return 32}}var _j=!1,Yl=null,Kl=null,Xl=null,sp=new Map,ip=new Map,Jl=[],m$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function PM(a,c){switch(a){case"focusin":case"focusout":Yl=null;break;case"dragenter":case"dragleave":Kl=null;break;case"mouseover":case"mouseout":Xl=null;break;case"pointerover":case"pointerout":sp.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ip.delete(c.pointerId)}}function op(a,c,f,g,v,w){return a===null||a.nativeEvent!==w?(a={blockedOn:c,domEventName:f,eventSystemFlags:g,nativeEvent:w,targetContainers:[v]},c!==null&&(c=Is(c),c!==null&&OM(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),a)}function g$(a,c,f,g,v){switch(c){case"focusin":return Yl=op(Yl,a,c,f,g,v),!0;case"dragenter":return Kl=op(Kl,a,c,f,g,v),!0;case"mouseover":return Xl=op(Xl,a,c,f,g,v),!0;case"pointerover":var w=v.pointerId;return sp.set(w,op(sp.get(w)||null,a,c,f,g,v)),!0;case"gotpointercapture":return w=v.pointerId,ip.set(w,op(ip.get(w)||null,a,c,f,g,v)),!0}return!1}function zM(a){var c=Di(a.target);if(c!==null){var f=o(c);if(f!==null){if(c=f.tag,c===13){if(c=l(f),c!==null){a.blockedOn=c,zs(a.priority,function(){if(f.tag===13){var g=vi();g=lo(g);var v=kd(f,g);v!==null&&ji(v,f,g),Pj(f,g)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function gx(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Ij(a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);Po=g,f.target.dispatchEvent(g),Po=null}else return c=Is(f),c!==null&&OM(c),a.blockedOn=f,!1;c.shift()}return!0}function IM(a,c,f){gx(a)&&f.delete(c)}function x$(){_j=!1,Yl!==null&&gx(Yl)&&(Yl=null),Kl!==null&&gx(Kl)&&(Kl=null),Xl!==null&&gx(Xl)&&(Xl=null),sp.forEach(IM),ip.forEach(IM)}function xx(a,c){a.blockedOn===c&&(a.blockedOn=null,_j||(_j=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,x$)))}var yx=null;function LM(a){yx!==a&&(yx=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){yx===a&&(yx=null);for(var c=0;c<a.length;c+=3){var f=a[c],g=a[c+1],v=a[c+2];if(typeof g!="function"){if(Lj(g||f)===null)continue;break}var w=Is(f);w!==null&&(a.splice(c,3),c-=3,Lv(w,{pending:!0,data:v,method:f.method,action:g},g,v))}}))}function ap(a){function c(se){return xx(se,a)}Yl!==null&&xx(Yl,a),Kl!==null&&xx(Kl,a),Xl!==null&&xx(Xl,a),sp.forEach(c),ip.forEach(c);for(var f=0;f<Jl.length;f++){var g=Jl[f];g.blockedOn===a&&(g.blockedOn=null)}for(;0<Jl.length&&(f=Jl[0],f.blockedOn===null);)zM(f),f.blockedOn===null&&Jl.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var v=f[g],w=f[g+1],z=v[Kr]||null;if(typeof w=="function")z||LM(f);else if(z){var V=null;if(w&&w.hasAttribute("formAction")){if(v=w,z=w[Kr]||null)V=z.formAction;else if(Lj(v)!==null)continue}else V=z.action;typeof V=="function"?f[g+1]=V:(f.splice(g,3),g-=3),LM(f)}}}function Bj(a){this._internalRoot=a}bx.prototype.render=Bj.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(s(409));var f=c.current,g=vi();RM(f,g,a,c,null,null)},bx.prototype.unmount=Bj.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;RM(a.current,2,null,a,null,null),ex(),c[hi]=null}};function bx(a){this._internalRoot=a}bx.prototype.unstable_scheduleHydration=function(a){if(a){var c=Cl();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Jl.length&&c!==0&&c<Jl[f].priority;f++);Jl.splice(f,0,a),f===0&&zM(a)}};var _M=t.version;if(_M!=="19.1.1")throw Error(s(527,_M,"19.1.1"));_.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=d(c),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var y$={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vx.isDisabled&&vx.supportsFiber)try{We=vx.inject(y$),bt=vx}catch{}}return cp.createRoot=function(a,c){if(!i(a))throw Error(s(299));var f=!1,g="",v=eT,w=tT,z=nT,V=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(z=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(V=c.unstable_transitionCallbacks)),c=TM(a,1,!1,null,null,f,g,v,w,z,V,null),a[hi]=c.current,jj(a),new Bj(c)},cp.hydrateRoot=function(a,c,f){if(!i(a))throw Error(s(299));var g=!1,v="",w=eT,z=tT,V=nT,se=null,be=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(z=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(se=f.unstable_transitionCallbacks),f.formState!==void 0&&(be=f.formState)),c=TM(a,1,!0,c,f??null,g,v,w,z,V,se,be),c.context=MM(null),f=c.current,g=vi(),g=lo(g),v=Pl(g),v.callback=null,zl(f,v,g),f=g,c.current.lanes=f,lr(c,f),Fo(c),a[hi]=c.current,jj(a),new bx(c)},cp.version="19.1.1",cp}var KM;function T$(){if(KM)return Vj.exports;KM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Vj.exports=A$(),Vj.exports}var M$=T$();const R$=tf(M$);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var XM="popstate";function D$(e={}){function t(s,i){let{pathname:o,search:l,hash:u}=s.location;return _S("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:gm(i)}return N$(t,n,null,e)}function dr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ro(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function O$(){return Math.random().toString(36).substring(2,10)}function JM(e,t){return{usr:e.state,key:e.key,idx:t}}function _S(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?nf(t):t,state:n,key:t&&t.key||s||O$()}}function gm({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function nf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function N$(e,t,n,s={}){let{window:i=document.defaultView,v5Compat:o=!1}=s,l=i.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let S=p(),E=S==null?null:S-h;h=S,d&&d({action:u,location:C.location,delta:E})}function x(S,E){u="PUSH";let k=_S(C.location,S,E);h=p()+1;let A=JM(k,h),T=C.createHref(k);try{l.pushState(A,"",T)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(T)}o&&d&&d({action:u,location:C.location,delta:1})}function y(S,E){u="REPLACE";let k=_S(C.location,S,E);h=p();let A=JM(k,h),T=C.createHref(k);l.replaceState(A,"",T),o&&d&&d({action:u,location:C.location,delta:0})}function b(S){return P$(S)}let C={get action(){return u},get location(){return e(i,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(XM,m),d=S,()=>{i.removeEventListener(XM,m),d=null}},createHref(S){return t(i,S)},createURL:b,encodeLocation(S){let E=b(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:x,replace:y,go(S){return l.go(S)}};return C}function P$(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dr(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:gm(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function $P(e,t,n="/"){return z$(e,t,n,!1)}function z$(e,t,n,s){let i=typeof t=="string"?nf(t):t,o=dl(i.pathname||"/",n);if(o==null)return null;let l=FP(e);I$(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=G$(o);u=W$(l[d],h,s)}return u}function FP(e,t=[],n=[],s="",i=!1){let o=(l,u,d=i,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&d)return;dr(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let m=il([s,p.relativePath]),x=n.concat(p);l.children&&l.children.length>0&&(dr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),FP(l.children,t,x,m,d)),!(l.path==null&&!l.index)&&t.push({path:m,score:H$(m,l.index),routesMeta:x})};return e.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of VP(l.path))o(l,u,!0,d)}),t}function VP(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return i?[o,""]:[o];let l=VP(s.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function I$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:U$(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var L$=/^:[\w-]+$/,_$=3,B$=2,$$=1,F$=10,V$=-2,QM=e=>e==="*";function H$(e,t){let n=e.split("/"),s=n.length;return n.some(QM)&&(s+=V$),t&&(s+=B$),n.filter(i=>!QM(i)).reduce((i,o)=>i+(L$.test(o)?_$:o===""?$$:F$),s)}function U$(e,t){return e.length===t.length&&e.slice(0,-1).every((s,i)=>s===t[i])?e[e.length-1]-t[t.length-1]:0}function W$(e,t,n=!1){let{routesMeta:s}=e,i={},o="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],h=u===s.length-1,p=o==="/"?t:t.slice(o.length)||"/",m=L0({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),x=d.route;if(!m&&h&&n&&!s[s.length-1].route.index&&(m=L0({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:il([o,m.pathname]),pathnameBase:J$(il([o,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(o=il([o,m.pathnameBase]))}return l}function L0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=q$(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:s.reduce((h,{paramName:p,isOptional:m},x)=>{if(p==="*"){let b=u[x]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const y=u[x];return m&&!y?h[p]=void 0:h[p]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:e}}function q$(e,t=!1,n=!0){ro(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function G$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ro(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function dl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function Y$(e,t="/"){let{pathname:n,search:s="",hash:i=""}=typeof e=="string"?nf(e):e;return{pathname:n?n.startsWith("/")?n:K$(n,t):t,search:Q$(s),hash:Z$(i)}}function K$(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function qj(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function X$(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ow(e){let t=X$(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function Nw(e,t,n,s=!1){let i;typeof e=="string"?i=nf(e):(i={...e},dr(!i.pathname||!i.pathname.includes("?"),qj("?","pathname","search",i)),dr(!i.pathname||!i.pathname.includes("#"),qj("#","pathname","hash",i)),dr(!i.search||!i.search.includes("#"),qj("#","search","hash",i)));let o=e===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let m=t.length-1;if(!s&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),m-=1;i.pathname=x.join("/")}u=m>=0?t[m]:"/"}let d=Y$(i,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var il=e=>e.join("/").replace(/\/\/+/g,"/"),J$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function eF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var HP=["POST","PUT","PATCH","DELETE"];new Set(HP);var tF=["GET",...HP];new Set(tF);var rf=j.createContext(null);rf.displayName="DataRouter";var Xy=j.createContext(null);Xy.displayName="DataRouterState";j.createContext(!1);var UP=j.createContext({isTransitioning:!1});UP.displayName="ViewTransition";var nF=j.createContext(new Map);nF.displayName="Fetchers";var rF=j.createContext(null);rF.displayName="Await";var Ao=j.createContext(null);Ao.displayName="Navigation";var Xm=j.createContext(null);Xm.displayName="Location";var To=j.createContext({outlet:null,matches:[],isDataRoute:!1});To.displayName="Route";var Pw=j.createContext(null);Pw.displayName="RouteError";function sF(e,{relative:t}={}){dr(sf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=j.useContext(Ao),{hash:i,pathname:o,search:l}=Jm(e,{relative:t}),u=o;return n!=="/"&&(u=o==="/"?n:il([n,o])),s.createHref({pathname:u,search:l,hash:i})}function sf(){return j.useContext(Xm)!=null}function Mo(){return dr(sf(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Xm).location}var WP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qP(e){j.useContext(Ao).static||j.useLayoutEffect(e)}function ha(){let{isDataRoute:e}=j.useContext(To);return e?xF():iF()}function iF(){dr(sf(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(rf),{basename:t,navigator:n}=j.useContext(Ao),{matches:s}=j.useContext(To),{pathname:i}=Mo(),o=JSON.stringify(Ow(s)),l=j.useRef(!1);return qP(()=>{l.current=!0}),j.useCallback((d,h={})=>{if(ro(l.current,WP),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=Nw(d,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:il([t,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[t,n,o,i,e])}j.createContext(null);function Jy(){let{matches:e}=j.useContext(To),t=e[e.length-1];return t?t.params:{}}function Jm(e,{relative:t}={}){let{matches:n}=j.useContext(To),{pathname:s}=Mo(),i=JSON.stringify(Ow(n));return j.useMemo(()=>Nw(e,JSON.parse(i),s,t==="path"),[e,i,s,t])}function oF(e,t){return GP(e,t)}function GP(e,t,n,s,i){dr(sf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(Ao),{matches:l}=j.useContext(To),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let k=m&&m.path||"";YP(h,!m||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let x=Mo(),y;if(t){let k=typeof t=="string"?nf(t):t;dr(p==="/"||k.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${k.pathname}" was given in the \`location\` prop.`),y=k}else y=x;let b=y.pathname||"/",C=b;if(p!=="/"){let k=p.replace(/^\//,"").split("/");C="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=$P(e,{pathname:C});ro(m||S!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),ro(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=dF(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:il([p,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:il([p,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),l,n,s,i);return t&&E?j.createElement(Xm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},E):E}function aF(){let e=gF(),t=eF(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,l)}var lF=j.createElement(aF,null),cF=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?j.createElement(To.Provider,{value:this.props.routeContext},j.createElement(Pw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uF({routeContext:e,match:t,children:n}){let s=j.useContext(rf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(To.Provider,{value:e},n)}function dF(e,t=[],n=null,s=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=n?.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);dr(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:x}=n,y=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||y){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let x,y=!1,b=null,C=null;n&&(x=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||lF,u&&(d<0&&m===0?(YP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,C=null):d===m&&(y=!0,C=p.route.hydrateFallbackElement||null)));let S=t.concat(o.slice(0,m+1)),E=()=>{let k;return x?k=b:y?k=C:p.route.Component?k=j.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,j.createElement(uF,{match:p,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?j.createElement(cF,{location:n.location,revalidation:n.revalidation,component:b,error:x,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:s}):E()},null)}function zw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hF(e){let t=j.useContext(rf);return dr(t,zw(e)),t}function fF(e){let t=j.useContext(Xy);return dr(t,zw(e)),t}function pF(e){let t=j.useContext(To);return dr(t,zw(e)),t}function Iw(e){let t=pF(e),n=t.matches[t.matches.length-1];return dr(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function mF(){return Iw("useRouteId")}function gF(){let e=j.useContext(Pw),t=fF("useRouteError"),n=Iw("useRouteError");return e!==void 0?e:t.errors?.[n]}function xF(){let{router:e}=hF("useNavigate"),t=Iw("useNavigate"),n=j.useRef(!1);return qP(()=>{n.current=!0}),j.useCallback(async(i,o={})=>{ro(n.current,WP),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var ZM={};function YP(e,t,n){!t&&!ZM[e]&&(ZM[e]=!0,ro(!1,n))}j.memo(yF);function yF({routes:e,future:t,state:n,unstable_onError:s}){return GP(e,void 0,n,s,t)}function c0({to:e,replace:t,state:n,relative:s}){dr(sf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=j.useContext(Ao);ro(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=j.useContext(To),{pathname:l}=Mo(),u=ha(),d=Nw(e,Ow(o),l,s==="path"),h=JSON.stringify(d);return j.useEffect(()=>{u(JSON.parse(h),{replace:t,state:n,relative:s})},[u,h,s,t,n]),null}function Nn(e){dr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bF({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:i,static:o=!1}){dr(!sf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof n=="string"&&(n=nf(n));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:x="default"}=n,y=j.useMemo(()=>{let b=dl(d,l);return b==null?null:{location:{pathname:b,search:h,hash:p,state:m,key:x},navigationType:s}},[l,d,h,p,m,x,s]);return ro(y!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:j.createElement(Ao.Provider,{value:u},j.createElement(Xm.Provider,{children:t,value:y}))}function vF({children:e,location:t}){return oF(BS(e),t)}function BS(e,t=[]){let n=[];return j.Children.forEach(e,(s,i)=>{if(!j.isValidElement(s))return;let o=[...t,i];if(s.type===j.Fragment){n.push.apply(n,BS(s.props.children,o));return}dr(s.type===Nn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dr(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=BS(s.props.children,o)),n.push(l)}),n}var u0="get",d0="application/x-www-form-urlencoded";function Qy(e){return e!=null&&typeof e.tagName=="string"}function jF(e){return Qy(e)&&e.tagName.toLowerCase()==="button"}function SF(e){return Qy(e)&&e.tagName.toLowerCase()==="form"}function CF(e){return Qy(e)&&e.tagName.toLowerCase()==="input"}function wF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EF(e,t){return e.button===0&&(!t||t==="_self")&&!wF(e)}function $S(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function kF(e,t){let n=$S(e);return t&&t.forEach((s,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}var Sx=null;function AF(){if(Sx===null)try{new FormData(document.createElement("form"),0),Sx=!1}catch{Sx=!0}return Sx}var TF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gj(e){return e!=null&&!TF.has(e)?(ro(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${d0}"`),null):e}function MF(e,t){let n,s,i,o,l;if(SF(e)){let u=e.getAttribute("action");s=u?dl(u,t):null,n=e.getAttribute("method")||u0,i=Gj(e.getAttribute("enctype"))||d0,o=new FormData(e)}else if(jF(e)||CF(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(s=d?dl(d,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||u0,i=Gj(e.getAttribute("formenctype"))||Gj(u.getAttribute("enctype"))||d0,o=new FormData(u,e),!AF()){let{name:h,type:p,value:m}=e;if(p==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,m)}}else{if(Qy(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=u0,s=null,i=d0,l=e}return o&&i==="text/plain"&&(l=o,o=void 0),{action:s,method:n.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function RF(e,t,n){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&dl(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function DF(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OF(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function NF(e,t,n){let s=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let l=await DF(o,n);return l.links?l.links():[]}return[]}));return LF(s.flat(1).filter(OF).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function eR(e,t,n,s,i,o){let l=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,u=(d,h)=>n[h].pathname!==d.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?t.filter((d,h)=>{let p=s.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function PF(e,t,{includeHydrateFallback:n}={}){return zF(e.map(s=>{let i=t.routes[s.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function zF(e){return[...new Set(e)]}function IF(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function LF(e,t){let n=new Set;return new Set(t),e.reduce((s,i)=>{let o=JSON.stringify(IF(i));return n.has(o)||(n.add(o),s.push({key:o,link:i})),s},[])}function KP(){let e=j.useContext(rf);return Lw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _F(){let e=j.useContext(Xy);return Lw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _w=j.createContext(void 0);_w.displayName="FrameworkContext";function XP(){let e=j.useContext(_w);return Lw(e,"You must render this element inside a <HydratedRouter> element"),e}function BF(e,t){let n=j.useContext(_w),[s,i]=j.useState(!1),[o,l]=j.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=t,x=j.useRef(null);j.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let C=E=>{E.forEach(k=>{l(k.isIntersecting)})},S=new IntersectionObserver(C,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[e]),j.useEffect(()=>{if(s){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[s]);let y=()=>{i(!0)},b=()=>{i(!1),l(!1)};return n?e!=="intent"?[o,x,{}]:[o,x,{onFocus:up(u,y),onBlur:up(d,b),onMouseEnter:up(h,y),onMouseLeave:up(p,b),onTouchStart:up(m,y)}]:[!1,x,{}]}function up(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $F({page:e,...t}){let{router:n}=KP(),s=j.useMemo(()=>$P(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?j.createElement(VF,{page:e,matches:s,...t}):null}function FF(e){let{manifest:t,routeModules:n}=XP(),[s,i]=j.useState([]);return j.useEffect(()=>{let o=!1;return NF(e,t,n).then(l=>{o||i(l)}),()=>{o=!0}},[e,t,n]),s}function VF({page:e,matches:t,...n}){let s=Mo(),{manifest:i,routeModules:o}=XP(),{basename:l}=KP(),{loaderData:u,matches:d}=_F(),h=j.useMemo(()=>eR(e,t,d,i,s,"data"),[e,t,d,i,s]),p=j.useMemo(()=>eR(e,t,d,i,s,"assets"),[e,t,d,i,s]),m=j.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let b=new Set,C=!1;if(t.forEach(E=>{let k=i.routes[E.route.id];!k||!k.hasLoader||(!h.some(A=>A.route.id===E.route.id)&&E.route.id in u&&o[E.route.id]?.shouldRevalidate||k.hasClientLoader?C=!0:b.add(E.route.id))}),b.size===0)return[];let S=RF(e,l,"data");return C&&b.size>0&&S.searchParams.set("_routes",t.filter(E=>b.has(E.route.id)).map(E=>E.route.id).join(",")),[S.pathname+S.search]},[l,u,s,i,h,t,e,o]),x=j.useMemo(()=>PF(p,i),[p,i]),y=FF(p);return j.createElement(j.Fragment,null,m.map(b=>j.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),x.map(b=>j.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),y.map(({key:b,link:C})=>j.createElement("link",{key:b,nonce:n.nonce,...C})))}function HF(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var JP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JP&&(window.__reactRouterVersion="7.8.2")}catch{}function UF({basename:e,children:t,window:n}){let s=j.useRef();s.current==null&&(s.current=D$({window:n,v5Compat:!0}));let i=s.current,[o,l]=j.useState({action:i.action,location:i.location}),u=j.useCallback(d=>{j.startTransition(()=>l(d))},[l]);return j.useLayoutEffect(()=>i.listen(u),[i,u]),j.createElement(bF,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var QP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$n=j.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:i,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:m,...x},y){let{basename:b}=j.useContext(Ao),C=typeof h=="string"&&QP.test(h),S,E=!1;if(typeof h=="string"&&C&&(S=h,JP))try{let te=new URL(window.location.href),re=h.startsWith("//")?new URL(te.protocol+h):new URL(h),U=dl(re.pathname,b);re.origin===te.origin&&U!=null?h=U+re.search+re.hash:E=!0}catch{ro(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=sF(h,{relative:i}),[A,T,M]=BF(s,x),D=YF(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:i,viewTransition:m});function $(te){t&&t(te),te.defaultPrevented||D(te)}let W=j.createElement("a",{...x,...M,href:S||k,onClick:E||o?t:$,ref:HF(y,T),target:d,"data-discover":!C&&n==="render"?"true":void 0});return A&&!C?j.createElement(j.Fragment,null,W,j.createElement($F,{page:k})):W});$n.displayName="Link";var WF=j.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:i=!1,style:o,to:l,viewTransition:u,children:d,...h},p){let m=Jm(l,{relative:h.relative}),x=Mo(),y=j.useContext(Xy),{navigator:b,basename:C}=j.useContext(Ao),S=y!=null&&e8(m)&&u===!0,E=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,k=x.pathname,A=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(k=k.toLowerCase(),A=A?A.toLowerCase():null,E=E.toLowerCase()),A&&C&&(A=dl(A,C)||A);const T=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let M=k===E||!i&&k.startsWith(E)&&k.charAt(T)==="/",D=A!=null&&(A===E||!i&&A.startsWith(E)&&A.charAt(E.length)==="/"),$={isActive:M,isPending:D,isTransitioning:S},W=M?t:void 0,te;typeof s=="function"?te=s($):te=[s,M?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let re=typeof o=="function"?o($):o;return j.createElement($n,{...h,"aria-current":W,className:te,ref:p,style:re,to:l,viewTransition:u},typeof d=="function"?d($):d)});WF.displayName="NavLink";var qF=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:i,state:o,method:l=u0,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,...x},y)=>{let b=QF(),C=ZF(u,{relative:h}),S=l.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&QP.test(u),k=A=>{if(d&&d(A),A.defaultPrevented)return;A.preventDefault();let T=A.nativeEvent.submitter,M=T?.getAttribute("formmethod")||l;b(T||A.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:i,state:o,relative:h,preventScrollReset:p,viewTransition:m})};return j.createElement("form",{ref:y,method:S,action:C,onSubmit:s?d:k,...x,"data-discover":!E&&e==="render"?"true":void 0})});qF.displayName="Form";function GF(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZP(e){let t=j.useContext(rf);return dr(t,GF(e)),t}function YF(e,{target:t,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}={}){let u=ha(),d=Mo(),h=Jm(e,{relative:o});return j.useCallback(p=>{if(EF(p,t)){p.preventDefault();let m=n!==void 0?n:gm(d)===gm(h);u(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,h,n,s,t,e,i,o,l])}function KF(e){ro(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=j.useRef($S(e)),n=j.useRef(!1),s=Mo(),i=j.useMemo(()=>kF(s.search,n.current?null:t.current),[s.search]),o=ha(),l=j.useCallback((u,d)=>{const h=$S(typeof u=="function"?u(new URLSearchParams(i)):u);n.current=!0,o("?"+h,d)},[o,i]);return[i,l]}var XF=0,JF=()=>`__${String(++XF)}__`;function QF(){let{router:e}=ZP("useSubmit"),{basename:t}=j.useContext(Ao),n=mF();return j.useCallback(async(s,i={})=>{let{action:o,method:l,encType:u,formData:d,body:h}=MF(s,t);if(i.navigate===!1){let p=i.fetcherKey||JF();await e.fetch(p,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||l,formEncType:i.encType||u,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||l,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function ZF(e,{relative:t}={}){let{basename:n}=j.useContext(Ao),s=j.useContext(To);dr(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),o={...Jm(e||".",{relative:t})},l=Mo();if(e==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:il([n,o.pathname])),gm(o)}function e8(e,{relative:t}={}){let n=j.useContext(UP);dr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ZP("useViewTransitionState"),i=Jm(e,{relative:t});if(!n.isTransitioning)return!1;let o=dl(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=dl(n.nextLocation.pathname,s)||n.nextLocation.pathname;return L0(i.pathname,l)!=null||L0(i.pathname,o)!=null}var Bw=BP();const t8=tf(Bw);function Zy(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function n8(){return!!globalThis?.document}function ez(e){return e.parentElement&&ez(e.parentElement)?!0:e.hidden}function r8(e){const t=e.getAttribute("contenteditable");return t!=="false"&&t!=null}function s8(e){return!!e.getAttribute("disabled")||!!e.getAttribute("aria-disabled")}function i8(e){return tz(e)?.defaultView??window}function tz(e){return Zy(e)?e.ownerDocument:document}function o8(e){return tz(e).activeElement}function a8(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const s of t)if(s!=null)for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(i in n&&delete n[i],n[i]=s[i]);return n}const Qt=e=>e?"":void 0,Au=e=>e?!0:void 0;function FS(e){return Array.isArray(e)}function ts(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!FS(e)}function l8(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function c8(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function VS(e){if(e==null)return e;const{unitless:t}=c8(e);return t||typeof e=="number"?`${e}px`:e}const nz=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,$w=e=>Object.fromEntries(Object.entries(e).sort(nz));function tR(e){const t=$w(e);return Object.assign(Object.values(t),t)}function u8(e){const t=Object.keys($w(e));return new Set(t)}function nR(e){if(!e)return e;e=VS(e)??e;const t=-.02;return typeof e=="number"?`${e+t}`:e.replace(/(\d+\.?\d*)/u,n=>`${parseFloat(n)+t}`)}function kp(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${VS(e)})`),t&&n.push("and",`(max-width: ${VS(t)})`),n.join(" ")}function d8(e){if(!e)return null;e.base=e.base??"0px";const t=tR(e),n=Object.entries(e).sort(nz).map(([o,l],u,d)=>{let[,h]=d[u+1]??[];return h=parseFloat(h)>0?nR(h):void 0,{_minW:nR(l),breakpoint:o,minW:l,maxW:h,maxWQuery:kp(null,h),minWQuery:kp(l),minMaxQuery:kp(l,h)}}),s=u8(e),i=Array.from(s.values());return{keys:s,normalized:t,isResponsive(o){const l=Object.keys(o);return l.length>0&&l.every(u=>s.has(u))},asObject:$w(e),asArray:tR(e),details:n,get(o){return n.find(l=>l.breakpoint===o)},media:[null,...t.map(o=>kp(o)).slice(1)],toArrayValue(o){if(!ts(o))throw new Error("toArrayValue: value must be an object");const l=i.map(u=>o[u]??null);for(;l8(l)===null;)l.pop();return l},toObjectValue(o){if(!Array.isArray(o))throw new Error("toObjectValue: value must be an array");return o.reduce((l,u,d)=>{const h=i[d];return h!=null&&u!=null&&(l[h]=u),l},{})}}}function Fw(...e){return function(...n){e.forEach(s=>s?.(...n))}}function wt(...e){return function(n){e.some(s=>(s?.(n),n?.defaultPrevented))}}function od(e){return j.Children.toArray(e).filter(t=>j.isValidElement(t))}function Qm(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function h8(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function un(e={}){const{name:t,strict:n=!0,hookName:s="useContext",providerName:i="Provider",errorMessage:o,defaultValue:l}=e,u=j.createContext(l);u.displayName=t;function d(){const h=j.useContext(u);if(!h&&n){const p=new Error(o??h8(s,i));throw p.name="ContextError",Error.captureStackTrace?.(p,d),p}return h}return[u.Provider,d,u]}const Ze=(...e)=>e.filter(Boolean).join(" "),rz=e=>e.hasAttribute("tabindex"),f8=e=>rz(e)&&e.tabIndex===-1;function _0(e){if(!Zy(e)||ez(e)||s8(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const s={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in s?s[t]():r8(e)?!0:rz(e)}function p8(e){return e?Zy(e)&&_0(e)&&!f8(e):!1}const m8=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],g8=m8.join(),x8=e=>e.offsetWidth>0&&e.offsetHeight>0;function sz(e){const t=Array.from(e.querySelectorAll(g8));return t.unshift(e),t.filter(n=>_0(n)&&x8(n))}function y8(e,t,n,s){const i=typeof t=="string"?t.split("."):[t];for(s=0;s<i.length&&e;s+=1)e=e[i[s]];return e===void 0?n:e}const b8=e=>{const t=new WeakMap;return(s,i,o,l)=>{if(typeof s>"u")return e(s,i,o);t.has(s)||t.set(s,new Map);const u=t.get(s);if(u.has(i))return u.get(i);const d=e(s,i,o,l);return u.set(i,d),d}},iz=b8(y8),v8=e=>e.default||e;function Vw(e){const{wasSelected:t,enabled:n,isSelected:s,mode:i="unmount"}=e;return!!(!n||s||i==="keepMounted"&&t)}function j8(e){const t=parseFloat(e);return typeof t!="number"||Number.isNaN(t)?0:t}function oz(e,t){let n=j8(e);const s=10**(t??10);return n=Math.round(n*s)/s,t?n.toFixed(t):n.toString()}function rR(e){if(!Number.isFinite(e))return 0;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n+=1;return n}function S8(e,t,n){return e==null?e:(n<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(e,t),n))}function Zm(e,t=[]){const n=Object.assign({},e);for(const s of t)s in n&&delete n[s];return n}function az(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}const lz=Object.freeze(["base","sm","md","lg","xl","2xl"]);function eb(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):ts(e)?Object.keys(e).reduce((n,s)=>(n[s]=t(e[s]),n),{}):e!=null?t(e):null}function C8(e,t=lz){const n={};return e.forEach((s,i)=>{const o=t[i];s!=null&&(n[o]=s)}),n}const w8=e=>typeof e=="function";function ii(e,...t){return w8(e)?e(...t):e}function E8(e){const t=e.ownerDocument.defaultView||window,{overflow:n,overflowX:s,overflowY:i}=t.getComputedStyle(e);return/auto|scroll|overlay|hidden/.test(n+i+s)}function k8(e){return e.localName==="html"?e:e.assignedSlot||e.parentElement||e.ownerDocument.documentElement}function cz(e){return["html","body","#document"].includes(e.localName)?e.ownerDocument.body:Zy(e)&&E8(e)?e:cz(k8(e))}function A8(e,t){const n={},s={};for(const[i,o]of Object.entries(e))t.includes(i)?n[i]=o:s[i]=o;return[n,s]}function T8(e,...t){const n=Object.getOwnPropertyDescriptors(e),s=Object.keys(n),i=l=>{const u={};for(let d=0;d<l.length;d++){const h=l[d];n[h]&&(Object.defineProperty(u,h,n[h]),delete n[h])}return u},o=l=>i(Array.isArray(l)?l:s.filter(l));return t.map(o).concat(i(s))}function sR(e,t,n={}){const{stop:s,getKey:i}=n;function o(l,u=[]){if(ts(l)||Array.isArray(l)){const d={};for(const[h,p]of Object.entries(l)){const m=i?.(h)??h,x=[...u,m];if(s?.(l,x))return t(l,u);d[m]=o(p,x)}return d}return t(l,u)}return o(e)}const eg=e=>{const{condition:t,message:n}=e};var Ap={exports:{}};Ap.exports;var iR;function M8(){return iR||(iR=1,(function(e,t){var n=200,s="__lodash_hash_undefined__",i=800,o=16,l=9007199254740991,u="[object Arguments]",d="[object Array]",h="[object AsyncFunction]",p="[object Boolean]",m="[object Date]",x="[object Error]",y="[object Function]",b="[object GeneratorFunction]",C="[object Map]",S="[object Number]",E="[object Null]",k="[object Object]",A="[object Proxy]",T="[object RegExp]",M="[object Set]",D="[object String]",$="[object Undefined]",W="[object WeakMap]",te="[object ArrayBuffer]",re="[object DataView]",U="[object Float32Array]",oe="[object Float64Array]",xe="[object Int8Array]",ie="[object Int16Array]",H="[object Int32Array]",F="[object Uint8Array]",_="[object Uint8ClampedArray]",B="[object Uint16Array]",fe="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,ee=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,P={};P[U]=P[oe]=P[xe]=P[ie]=P[H]=P[F]=P[_]=P[B]=P[fe]=!0,P[u]=P[d]=P[te]=P[p]=P[re]=P[m]=P[x]=P[y]=P[C]=P[S]=P[k]=P[T]=P[M]=P[D]=P[W]=!1;var R=typeof jx=="object"&&jx&&jx.Object===Object&&jx,N=typeof self=="object"&&self&&self.Object===Object&&self,Z=R||N||Function("return this")(),ke=t&&!t.nodeType&&t,Te=ke&&!0&&e&&!e.nodeType&&e,je=Te&&Te.exports===ke,Ke=je&&R.process,Xe=(function(){try{var J=Te&&Te.require&&Te.require("util").types;return J||Ke&&Ke.binding&&Ke.binding("util")}catch{}})(),He=Xe&&Xe.isTypedArray;function pt(J,he,Ce){switch(Ce.length){case 0:return J.call(he);case 1:return J.call(he,Ce[0]);case 2:return J.call(he,Ce[0],Ce[1]);case 3:return J.call(he,Ce[0],Ce[1],Ce[2])}return J.apply(he,Ce)}function De(J,he){for(var Ce=-1,st=Array(J);++Ce<J;)st[Ce]=he(Ce);return st}function Tt(J){return function(he){return J(he)}}function ue(J,he){return J?.[he]}function Ee(J,he){return function(Ce){return J(he(Ce))}}var nt=Array.prototype,X=Function.prototype,le=Object.prototype,Ve=Z["__core-js_shared__"],at=X.toString,dn=le.hasOwnProperty,Fn=(function(){var J=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),Oe=le.toString,We=at.call(Object),bt=RegExp("^"+at.call(dn).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=je?Z.Buffer:void 0,ot=Z.Symbol,vn=Z.Uint8Array;Be&&Be.allocUnsafe;var Le=Ee(Object.getPrototypeOf,Object),ct=Object.create,Ht=le.propertyIsEnumerable,hn=nt.splice,_t=ot?ot.toStringTag:void 0,Sn=(function(){try{var J=hr(Object,"defineProperty");return J({},"",{}),J}catch{}})(),fn=Be?Be.isBuffer:void 0,yr=Math.max,ar=Date.now,rs=hr(Z,"Map"),jn=hr(Object,"create"),lr=(function(){function J(){}return function(he){if(!$r(he))return{};if(ct)return ct(he);J.prototype=he;var Ce=new J;return J.prototype=void 0,Ce}})();function ss(J){var he=-1,Ce=J==null?0:J.length;for(this.clear();++he<Ce;){var st=J[he];this.set(st[0],st[1])}}function jl(){this.__data__=jn?jn(null):{},this.size=0}function Sl(J){var he=this.has(J)&&delete this.__data__[J];return this.size-=he?1:0,he}function lo(J){var he=this.__data__;if(jn){var Ce=he[J];return Ce===s?void 0:Ce}return dn.call(he,J)?he[J]:void 0}function co(J){var he=this.__data__;return jn?he[J]!==void 0:dn.call(he,J)}function Cl(J,he){var Ce=this.__data__;return this.size+=this.has(J)?0:1,Ce[J]=jn&&he===void 0?s:he,this}ss.prototype.clear=jl,ss.prototype.delete=Sl,ss.prototype.get=lo,ss.prototype.has=co,ss.prototype.set=Cl;function zs(J){var he=-1,Ce=J==null?0:J.length;for(this.clear();++he<Ce;){var st=J[he];this.set(st[0],st[1])}}function Xs(){this.__data__=[],this.size=0}function Br(J){var he=this.__data__,Ce=ga(he,J);if(Ce<0)return!1;var st=he.length-1;return Ce==st?he.pop():hn.call(he,Ce,1),--this.size,!0}function Kr(J){var he=this.__data__,Ce=ga(he,J);return Ce<0?void 0:he[Ce][1]}function hi(J){return ga(this.__data__,J)>-1}function Je(J,he){var Ce=this.__data__,st=ga(Ce,J);return st<0?(++this.size,Ce.push([J,he])):Ce[st][1]=he,this}zs.prototype.clear=Xs,zs.prototype.delete=Br,zs.prototype.get=Kr,zs.prototype.has=hi,zs.prototype.set=Je;function Do(J){var he=-1,Ce=J==null?0:J.length;for(this.clear();++he<Ce;){var st=J[he];this.set(st[0],st[1])}}function ff(){this.size=0,this.__data__={hash:new ss,map:new(rs||zs),string:new ss}}function wl(J){var he=No(this,J).delete(J);return this.size-=he?1:0,he}function ma(J){return No(this,J).get(J)}function Bc(J){return No(this,J).has(J)}function Di(J,he){var Ce=No(this,J),st=Ce.size;return Ce.set(J,he),this.size+=Ce.size==st?0:1,this}Do.prototype.clear=ff,Do.prototype.delete=wl,Do.prototype.get=ma,Do.prototype.has=Bc,Do.prototype.set=Di;function Is(J){var he=this.__data__=new zs(J);this.size=he.size}function Oo(){this.__data__=new zs,this.size=0}function Oi(J){var he=this.__data__,Ce=he.delete(J);return this.size=he.size,Ce}function br(J){return this.__data__.get(J)}function dd(J){return this.__data__.has(J)}function El(J,he){var Ce=this.__data__;if(Ce instanceof zs){var st=Ce.__data__;if(!rs||st.length<n-1)return st.push([J,he]),this.size=++Ce.size,this;Ce=this.__data__=new Do(st)}return Ce.set(J,he),this.size=Ce.size,this}Is.prototype.clear=Oo,Is.prototype.delete=Oi,Is.prototype.get=br,Is.prototype.has=dd,Is.prototype.set=El;function uo(J,he){var Ce=fi(J),st=!Ce&&wa(J),Xt=!Ce&&!st&&Ml(J),xn=!Ce&&!st&&!Xt&&pi(J),En=Ce||st||Xt||xn,Yt=En?De(J.length,String):[],Cn=Yt.length;for(var Es in J)En&&(Es=="length"||Xt&&(Es=="offset"||Es=="parent")||xn&&(Es=="buffer"||Es=="byteLength"||Es=="byteOffset")||Tl(Es,Cn))||Yt.push(Es);return Yt}function Js(J,he,Ce){(Ce!==void 0&&!Po(J[he],Ce)||Ce===void 0&&!(he in J))&&kl(J,he,Ce)}function hd(J,he,Ce){var st=J[he];(!(dn.call(J,he)&&Po(st,Ce))||Ce===void 0&&!(he in J))&&kl(J,he,Ce)}function ga(J,he){for(var Ce=J.length;Ce--;)if(Po(J[Ce][0],he))return Ce;return-1}function kl(J,he,Ce){he=="__proto__"&&Sn?Sn(J,he,{configurable:!0,enumerable:!0,value:Ce,writable:!0}):J[he]=Ce}var fd=ba();function ho(J){return J==null?J===void 0?$:E:_t&&_t in Object(J)?po(J):xd(J)}function xa(J){return go(J)&&ho(J)==u}function Ls(J){if(!$r(J)||ja(J))return!1;var he=Rl(J)?bt:ee;return he.test(Ca(J))}function $c(J){return go(J)&&mo(J.length)&&!!P[ho(J)]}function pd(J){if(!$r(J))return mf(J);var he=zi(J),Ce=[];for(var st in J)st=="constructor"&&(he||!dn.call(J,st))||Ce.push(st);return Ce}function Ni(J,he,Ce,st,Xt){J!==he&&fd(he,function(xn,En){if(Xt||(Xt=new Is),$r(xn))md(J,he,En,Ce,Ni,st,Xt);else{var Yt=st?st(Sa(J,En),xn,En+"",J,he,Xt):void 0;Yt===void 0&&(Yt=xn),Js(J,En,Yt)}},Ea)}function md(J,he,Ce,st,Xt,xn,En){var Yt=Sa(J,Ce),Cn=Sa(he,Ce),Es=En.get(Cn);if(Es){Js(J,Ce,Es);return}var vr=xn?xn(Yt,Cn,Ce+"",J,he,En):void 0,Aa=vr===void 0;if(Aa){var Wc=fi(Cn),Ta=!Wc&&Ml(Cn),vd=!Wc&&!Ta&&pi(Cn);vr=Cn,Wc||Ta||vd?fi(Yt)?vr=Yt:ws(Yt)?vr=gd(Yt):Ta?(Aa=!1,vr=gn(Cn)):vd?(Aa=!1,vr=fo(Cn)):vr=[]:xo(Cn)||wa(Cn)?(vr=Yt,wa(Yt)?vr=Uc(Yt):(!$r(Yt)||Rl(Yt))&&(vr=va(Cn))):Aa=!1}Aa&&(En.set(Cn,vr),Xt(vr,Cn,st,xn,En),En.delete(Cn)),Js(J,Ce,vr)}function Fc(J,he){return Hc(gf(J,he,ka),J+"")}var pf=Sn?function(J,he){return Sn(J,"toString",{configurable:!0,enumerable:!1,value:Dl(he),writable:!0})}:ka;function gn(J,he){return J.slice()}function cr(J){var he=new J.constructor(J.byteLength);return new vn(he).set(new vn(J)),he}function fo(J,he){var Ce=cr(J.buffer);return new J.constructor(Ce,J.byteOffset,J.length)}function gd(J,he){var Ce=-1,st=J.length;for(he||(he=Array(st));++Ce<st;)he[Ce]=J[Ce];return he}function ya(J,he,Ce,st){var Xt=!Ce;Ce||(Ce={});for(var xn=-1,En=he.length;++xn<En;){var Yt=he[xn],Cn=void 0;Cn===void 0&&(Cn=J[Yt]),Xt?kl(Ce,Yt,Cn):hd(Ce,Yt,Cn)}return Ce}function Al(J){return Fc(function(he,Ce){var st=-1,Xt=Ce.length,xn=Xt>1?Ce[Xt-1]:void 0,En=Xt>2?Ce[2]:void 0;for(xn=J.length>3&&typeof xn=="function"?(Xt--,xn):void 0,En&&Pi(Ce[0],Ce[1],En)&&(xn=Xt<3?void 0:xn,Xt=1),he=Object(he);++st<Xt;){var Yt=Ce[st];Yt&&J(he,Yt,st,xn)}return he})}function ba(J){return function(he,Ce,st){for(var Xt=-1,xn=Object(he),En=st(he),Yt=En.length;Yt--;){var Cn=En[++Xt];if(Ce(xn[Cn],Cn,xn)===!1)break}return he}}function No(J,he){var Ce=J.__data__;return Vc(he)?Ce[typeof he=="string"?"string":"hash"]:Ce.map}function hr(J,he){var Ce=ue(J,he);return Ls(Ce)?Ce:void 0}function po(J){var he=dn.call(J,_t),Ce=J[_t];try{J[_t]=void 0;var st=!0}catch{}var Xt=Oe.call(J);return st&&(he?J[_t]=Ce:delete J[_t]),Xt}function va(J){return typeof J.constructor=="function"&&!zi(J)?lr(Le(J)):{}}function Tl(J,he){var Ce=typeof J;return he=he??l,!!he&&(Ce=="number"||Ce!="symbol"&&ae.test(J))&&J>-1&&J%1==0&&J<he}function Pi(J,he,Ce){if(!$r(Ce))return!1;var st=typeof he;return(st=="number"?rt(Ce)&&Tl(he,Ce.length):st=="string"&&he in Ce)?Po(Ce[he],J):!1}function Vc(J){var he=typeof J;return he=="string"||he=="number"||he=="symbol"||he=="boolean"?J!=="__proto__":J===null}function ja(J){return!!Fn&&Fn in J}function zi(J){var he=J&&J.constructor,Ce=typeof he=="function"&&he.prototype||le;return J===Ce}function mf(J){var he=[];if(J!=null)for(var Ce in Object(J))he.push(Ce);return he}function xd(J){return Oe.call(J)}function gf(J,he,Ce){return he=yr(he===void 0?J.length-1:he,0),function(){for(var st=arguments,Xt=-1,xn=yr(st.length-he,0),En=Array(xn);++Xt<xn;)En[Xt]=st[he+Xt];Xt=-1;for(var Yt=Array(he+1);++Xt<he;)Yt[Xt]=st[Xt];return Yt[he]=Ce(En),pt(J,this,Yt)}}function Sa(J,he){if(!(he==="constructor"&&typeof J[he]=="function")&&he!="__proto__")return J[he]}var Hc=xf(pf);function xf(J){var he=0,Ce=0;return function(){var st=ar(),Xt=o-(st-Ce);if(Ce=st,Xt>0){if(++he>=i)return arguments[0]}else he=0;return J.apply(void 0,arguments)}}function Ca(J){if(J!=null){try{return at.call(J)}catch{}try{return J+""}catch{}}return""}function Po(J,he){return J===he||J!==J&&he!==he}var wa=xa((function(){return arguments})())?xa:function(J){return go(J)&&dn.call(J,"callee")&&!Ht.call(J,"callee")},fi=Array.isArray;function rt(J){return J!=null&&mo(J.length)&&!Rl(J)}function ws(J){return go(J)&&rt(J)}var Ml=fn||bd;function Rl(J){if(!$r(J))return!1;var he=ho(J);return he==y||he==b||he==h||he==A}function mo(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=l}function $r(J){var he=typeof J;return J!=null&&(he=="object"||he=="function")}function go(J){return J!=null&&typeof J=="object"}function xo(J){if(!go(J)||ho(J)!=k)return!1;var he=Le(J);if(he===null)return!0;var Ce=dn.call(he,"constructor")&&he.constructor;return typeof Ce=="function"&&Ce instanceof Ce&&at.call(Ce)==We}var pi=He?Tt(He):$c;function Uc(J){return ya(J,Ea(J))}function Ea(J){return rt(J)?uo(J):pd(J)}var yd=Al(function(J,he,Ce,st){Ni(J,he,Ce,st)});function Dl(J){return function(){return J}}function ka(J){return J}function bd(){return!1}e.exports=yd})(Ap,Ap.exports)),Ap.exports}var R8=M8();const Zi=tf(R8);function es(e,t=[]){const n=j.useRef(e);return j.useEffect(()=>{n.current=e}),j.useCallback((...s)=>n.current?.(...s),t)}function Tu(e,t,n,s){const i=es(n);return j.useEffect(()=>{const o=typeof e=="function"?e():e??document;if(!(!n||!o))return o.addEventListener(t,i,s),()=>{o.removeEventListener(t,i,s)}},[t,e,s,i,n]),()=>{(typeof e=="function"?e():e??document)?.removeEventListener(t,i,s)}}function uz(e){const{isOpen:t,ref:n}=e,[s,i]=j.useState(t),[o,l]=j.useState(!1);return j.useEffect(()=>{o||(i(t),l(!0))},[t,o,s]),Tu(()=>n.current,"animationend",()=>{i(t)}),{present:!(t?!1:!s),onComplete(){const d=i8(n.current),h=new d.CustomEvent("animationend",{bubbles:!0});n.current?.dispatchEvent(h)}}}function tb(e){const{value:t,defaultValue:n,onChange:s,shouldUpdate:i=(x,y)=>x!==y}=e,o=es(s),l=es(i),[u,d]=j.useState(n),h=t!==void 0,p=h?t:u,m=es(x=>{const b=typeof x=="function"?x(p):x;l(p,b)&&(h||d(b),o(b))},[h,o,p,l]);return[p,m]}function D8(e={}){const{onChange:t,precision:n,defaultValue:s,value:i,step:o=1,min:l=Number.MIN_SAFE_INTEGER,max:u=Number.MAX_SAFE_INTEGER,keepWithinRange:d=!0}=e,h=es(t),[p,m]=j.useState(()=>s==null?"":Yj(s,o,n)??""),x=typeof i<"u",y=x?i:p,b=dz(sc(y),o),C=n??b,S=j.useCallback(re=>{re!==y&&(x||m(re.toString()),h?.(re.toString(),sc(re)))},[h,x,y]),E=j.useCallback(re=>{let U=re;return d&&(U=S8(U,l,u)),oz(U,C)},[C,d,u,l]),k=j.useCallback((re=o)=>{let U;y===""?U=sc(re):U=sc(y)+re,U=E(U),S(U)},[E,o,S,y]),A=j.useCallback((re=o)=>{let U;y===""?U=sc(-re):U=sc(y)-re,U=E(U),S(U)},[E,o,S,y]),T=j.useCallback(()=>{let re;s==null?re="":re=Yj(s,o,n)??l,S(re)},[s,n,o,S,l]),M=j.useCallback(re=>{const U=Yj(re,o,C)??l;S(U)},[C,o,S,l]),D=sc(y);return{isOutOfRange:D>u||D<l,isAtMax:D===u,isAtMin:D===l,precision:C,value:y,valueAsNumber:D,update:S,reset:T,increment:k,decrement:A,clamp:E,cast:M,setValue:m}}function sc(e){return parseFloat(e.toString().replace(/[^\w.-]+/g,""))}function dz(e,t){return Math.max(rR(t),rR(e))}function Yj(e,t,n){const s=sc(e);if(Number.isNaN(s))return;const i=dz(s,t);return oz(s,n??i)}function jt(e={}){const{onClose:t,onOpen:n,isOpen:s,id:i}=e,o=es(n),l=es(t),[u,d]=j.useState(e.defaultIsOpen||!1),h=s!==void 0?s:u,p=s!==void 0,m=j.useId(),x=i??`disclosure-${m}`,y=j.useCallback(()=>{p||d(!1),l?.()},[p,l]),b=j.useCallback(()=>{p||d(!0),o?.()},[p,o]),C=j.useCallback(()=>{h?y():b()},[h,b,y]);function S(k={}){return{...k,"aria-expanded":h,"aria-controls":x,onClick(A){k.onClick?.(A),C()}}}function E(k={}){return{...k,hidden:!h,id:x}}return{isOpen:h,onOpen:b,onClose:y,onToggle:C,isControlled:p,getButtonProps:S,getDisclosureProps:E}}const ea=globalThis?.document?j.useLayoutEffect:j.useEffect,wc=(e,t)=>{const n=j.useRef(!1),s=j.useRef(!1);j.useEffect(()=>{if(n.current&&s.current)return e();s.current=!0},t),j.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])};function O8(e){const t=e.current;if(!t)return!1;const n=o8(t);return!n||t.contains(n)?!1:!!p8(n)}function hz(e,t){const{shouldFocus:n,visible:s,focusRef:i}=t,o=n&&!s;wc(()=>{if(!o||O8(e))return;const l=i?.current||e.current;let u;if(l)return u=requestAnimationFrame(()=>{l.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(u)}},[o,e,i])}const N8={preventScroll:!0,shouldFocus:!1};function P8(e,t=N8){const{focusRef:n,preventScroll:s,shouldFocus:i,visible:o}=t,l=z8(e)?e.current:e,u=i&&o,d=j.useRef(u),h=j.useRef(o);ea(()=>{!h.current&&o&&(d.current=u),h.current=o},[o,u]);const p=j.useCallback(()=>{if(!(!o||!l||!d.current)&&(d.current=!1,!l.contains(document.activeElement)))if(n?.current)requestAnimationFrame(()=>{n.current?.focus({preventScroll:s})});else{const m=sz(l);m.length>0&&requestAnimationFrame(()=>{m[0].focus({preventScroll:s})})}},[o,s,l,n]);wc(()=>{p()},[p]),Tu(l,"transitionend",p)}function z8(e){return"current"in e}function I8(e){return"current"in e}const fz=()=>typeof window<"u";function L8(){return navigator.userAgentData?.platform??navigator.platform}const _8=e=>fz()&&e.test(navigator.vendor),B8=e=>fz()&&e.test(L8()),$8=()=>B8(/mac|iphone|ipad|ipod/i),F8=()=>$8()&&_8(/apple/i);function V8(e){const{ref:t,elements:n,enabled:s}=e,i=()=>t.current?.ownerDocument??document;Tu(i,"pointerdown",o=>{if(!F8()||!s)return;const l=o.composedPath?.()?.[0]??o.target,d=(n??[t]).some(h=>{const p=I8(h)?h.current:h;return p?.contains(l)||p===l});i().activeElement!==l&&d&&(o.preventDefault(),l.focus())})}function H8(e,t){const n=j.useId();return j.useMemo(()=>e||[t,n].filter(Boolean).join("-"),[e,t,n])}function U8(e,...t){const n=H8(e);return j.useMemo(()=>t.map(s=>`${s}-${n}`),[n,t])}function W8(e,t){const n=es(e);j.useEffect(()=>{let s=null;const i=()=>n();return t!==null&&(s=window.setInterval(i,t)),()=>{s&&window.clearInterval(s)}},[t,n])}function q8(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function er(...e){return t=>{e.forEach(n=>{q8(n,t)})}}function G8(...e){return j.useMemo(()=>er(...e),e)}function pz(e){const{ref:t,handler:n,enabled:s=!0}=e,i=es(n),l=j.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;j.useEffect(()=>{if(!s)return;const u=m=>{Kj(m,t)&&(l.isPointerDown=!0)},d=m=>{if(l.ignoreEmulatedMouseEvents){l.ignoreEmulatedMouseEvents=!1;return}l.isPointerDown&&n&&Kj(m,t)&&(l.isPointerDown=!1,i(m))},h=m=>{l.ignoreEmulatedMouseEvents=!0,n&&l.isPointerDown&&Kj(m,t)&&(l.isPointerDown=!1,i(m))},p=mz(t.current);return p.addEventListener("mousedown",u,!0),p.addEventListener("mouseup",d,!0),p.addEventListener("touchstart",u,!0),p.addEventListener("touchend",h,!0),()=>{p.removeEventListener("mousedown",u,!0),p.removeEventListener("mouseup",d,!0),p.removeEventListener("touchstart",u,!0),p.removeEventListener("touchend",h,!0)}},[n,t,i,l,s])}function Kj(e,t){const n=e.composedPath?.()[0]??e.target;return n&&!mz(n).contains(n)?!1:!t.current?.contains(n)}function mz(e){return e?.ownerDocument??document}function Y8(e,t){const n=es(e);j.useEffect(()=>{if(t==null)return;let s=null;return s=window.setTimeout(()=>{n()},t),()=>{s&&window.clearTimeout(s)}},[t,n])}const Zr={open:(e,t)=>`${e}[data-open], ${e}[open], ${e}[data-state=open] ${t}`,closed:(e,t)=>`${e}[data-closed], ${e}[data-state=closed] ${t}`,hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},Vo=e=>gz(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Va=e=>gz(t=>e(t,"~ &"),"[data-peer]",".peer"),gz=(e,...t)=>t.map(e).join(", "),nb={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within, &[data-focus-within]",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty, &[data-empty]",_expanded:"&[aria-expanded=true], &[data-expanded], &[data-state=expanded]",_checked:"&[aria-checked=true], &[data-checked], &[data-state=checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate], &[data-state=indeterminate]",_groupOpen:Vo(Zr.open),_groupClosed:Vo(Zr.closed),_groupHover:Vo(Zr.hover),_peerHover:Va(Zr.hover),_groupFocus:Vo(Zr.focus),_peerFocus:Va(Zr.focus),_groupFocusVisible:Vo(Zr.focusVisible),_peerFocusVisible:Va(Zr.focusVisible),_groupActive:Vo(Zr.active),_peerActive:Va(Zr.active),_groupDisabled:Vo(Zr.disabled),_peerDisabled:Va(Zr.disabled),_groupInvalid:Vo(Zr.invalid),_peerInvalid:Va(Zr.invalid),_groupChecked:Vo(Zr.checked),_peerChecked:Va(Zr.checked),_groupFocusWithin:Vo(Zr.focusWithin),_peerFocusWithin:Va(Zr.focusWithin),_peerPlaceholderShown:Va(Zr.placeholderShown),_placeholder:"&::placeholder, &[data-placeholder]",_placeholderShown:"&:placeholder-shown, &[data-placeholder-shown]",_fullScreen:"&:fullscreen, &[data-fullscreen]",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]",_open:"&[data-open], &[open], &[data-state=open]",_closed:"&[data-closed], &[data-state=closed]",_complete:"&[data-complete]",_incomplete:"&[data-incomplete]",_current:"&[data-current]"},xz=Object.keys(nb),K8=e=>/!(important)?$/.test(e),oR=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,X8=(e,t)=>n=>{const s=String(t),i=K8(s),o=oR(s),l=e?`${e}.${o}`:o;let u=ts(n.__cssMap)&&l in n.__cssMap?n.__cssMap[l].varRef:t;return u=oR(u),i?`${u} !important`:u};function Hw(e){const{scale:t,transform:n,compose:s}=e;return(o,l)=>{const u=X8(t,o)(l);let d=n?.(u,l)??u;return s&&(d=s(d,l)),d}}const Cx=(...e)=>t=>e.reduce((n,s)=>s(n),t);function Hi(e,t){return n=>{const s={property:n,scale:e};return s.transform=Hw({scale:e,transform:t}),s}}const J8=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function Q8(e){const{property:t,scale:n,transform:s}=e;return{scale:n,property:J8(t),transform:n?Hw({scale:n,compose:s}):s}}const yz=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function Z8(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...yz].join(" ")}function eV(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...yz].join(" ")}const tV={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},nV={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function rV(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}const sV={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},HS={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},iV=new Set(Object.values(HS)),US=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),oV=e=>e.trim();function aV(e,t){if(e==null||US.has(e))return e;if(!(WS(e)||US.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),o=i?.[1],l=i?.[2];if(!o||!l)return e;const u=o.includes("-gradient")?o:`${o}-gradient`,[d,...h]=l.split(",").map(oV).filter(Boolean);if(h?.length===0)return e;const p=d in HS?HS[d]:d;h.unshift(p);const m=h.map(x=>{if(iV.has(x))return x;const y=x.indexOf(" "),[b,C]=y!==-1?[x.substr(0,y),x.substr(y+1)]:[x],S=WS(C)?C:C&&C.split(" "),E=`colors.${b}`,k=E in t.__cssMap?t.__cssMap[E].varRef:b;return S?[k,...Array.isArray(S)?S:[S]].join(" "):k});return`${u}(${m.join(", ")})`}const WS=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),lV=(e,t)=>aV(e,t??{});function cV(e){return/^var\(--.+\)$/.test(e)}const uV=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},Ho=e=>t=>`${e}(${t})`,pn={filter(e){return e!=="auto"?e:tV},backdropFilter(e){return e!=="auto"?e:nV},ring(e){return rV(pn.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?Z8():e==="auto-gpu"?eV():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=uV(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(cV(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:lV,blur:Ho("blur"),opacity:Ho("opacity"),brightness:Ho("brightness"),contrast:Ho("contrast"),dropShadow:Ho("drop-shadow"),grayscale:Ho("grayscale"),hueRotate:e=>Ho("hue-rotate")(pn.degree(e)),invert:Ho("invert"),saturate:Ho("saturate"),sepia:Ho("sepia"),bgImage(e){return e==null||WS(e)||US.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){const{space:t,divide:n}=sV[e]??{},s={flexDirection:e};return t&&(s[t]=1),n&&(s[n]=1),s}},me={borderWidths:Hi("borderWidths"),borderStyles:Hi("borderStyles"),colors:Hi("colors"),borders:Hi("borders"),gradients:Hi("gradients",pn.gradient),radii:Hi("radii",pn.px),space:Hi("space",Cx(pn.vh,pn.px)),spaceT:Hi("space",Cx(pn.vh,pn.px)),degreeT(e){return{property:e,transform:pn.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:Hw({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:Hi("sizes",Cx(pn.vh,pn.px)),sizesT:Hi("sizes",Cx(pn.vh,pn.fraction)),shadows:Hi("shadows"),logical:Q8,blur:Hi("blur",pn.blur)},h0={background:me.colors("background"),backgroundColor:me.colors("backgroundColor"),backgroundImage:me.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:pn.bgClip},bgSize:me.prop("backgroundSize"),bgPosition:me.prop("backgroundPosition"),bg:me.colors("background"),bgColor:me.colors("backgroundColor"),bgPos:me.prop("backgroundPosition"),bgRepeat:me.prop("backgroundRepeat"),bgAttachment:me.prop("backgroundAttachment"),bgGradient:me.gradients("backgroundImage"),bgClip:{transform:pn.bgClip}};Object.assign(h0,{bgImage:h0.backgroundImage,bgImg:h0.backgroundImage});const An={border:me.borders("border"),borderWidth:me.borderWidths("borderWidth"),borderStyle:me.borderStyles("borderStyle"),borderColor:me.colors("borderColor"),borderRadius:me.radii("borderRadius"),borderTop:me.borders("borderTop"),borderBlockStart:me.borders("borderBlockStart"),borderTopLeftRadius:me.radii("borderTopLeftRadius"),borderStartStartRadius:me.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:me.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:me.radii("borderTopRightRadius"),borderStartEndRadius:me.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:me.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:me.borders("borderRight"),borderInlineEnd:me.borders("borderInlineEnd"),borderBottom:me.borders("borderBottom"),borderBlockEnd:me.borders("borderBlockEnd"),borderBottomLeftRadius:me.radii("borderBottomLeftRadius"),borderBottomRightRadius:me.radii("borderBottomRightRadius"),borderLeft:me.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:me.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:me.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:me.borders(["borderLeft","borderRight"]),borderInline:me.borders("borderInline"),borderY:me.borders(["borderTop","borderBottom"]),borderBlock:me.borders("borderBlock"),borderTopWidth:me.borderWidths("borderTopWidth"),borderBlockStartWidth:me.borderWidths("borderBlockStartWidth"),borderTopColor:me.colors("borderTopColor"),borderBlockStartColor:me.colors("borderBlockStartColor"),borderTopStyle:me.borderStyles("borderTopStyle"),borderBlockStartStyle:me.borderStyles("borderBlockStartStyle"),borderBottomWidth:me.borderWidths("borderBottomWidth"),borderBlockEndWidth:me.borderWidths("borderBlockEndWidth"),borderBottomColor:me.colors("borderBottomColor"),borderBlockEndColor:me.colors("borderBlockEndColor"),borderBottomStyle:me.borderStyles("borderBottomStyle"),borderBlockEndStyle:me.borderStyles("borderBlockEndStyle"),borderLeftWidth:me.borderWidths("borderLeftWidth"),borderInlineStartWidth:me.borderWidths("borderInlineStartWidth"),borderLeftColor:me.colors("borderLeftColor"),borderInlineStartColor:me.colors("borderInlineStartColor"),borderLeftStyle:me.borderStyles("borderLeftStyle"),borderInlineStartStyle:me.borderStyles("borderInlineStartStyle"),borderRightWidth:me.borderWidths("borderRightWidth"),borderInlineEndWidth:me.borderWidths("borderInlineEndWidth"),borderRightColor:me.colors("borderRightColor"),borderInlineEndColor:me.colors("borderInlineEndColor"),borderRightStyle:me.borderStyles("borderRightStyle"),borderInlineEndStyle:me.borderStyles("borderInlineEndStyle"),borderTopRadius:me.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:me.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:me.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:me.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(An,{rounded:An.borderRadius,roundedTop:An.borderTopRadius,roundedTopLeft:An.borderTopLeftRadius,roundedTopRight:An.borderTopRightRadius,roundedTopStart:An.borderStartStartRadius,roundedTopEnd:An.borderStartEndRadius,roundedBottom:An.borderBottomRadius,roundedBottomLeft:An.borderBottomLeftRadius,roundedBottomRight:An.borderBottomRightRadius,roundedBottomStart:An.borderEndStartRadius,roundedBottomEnd:An.borderEndEndRadius,roundedLeft:An.borderLeftRadius,roundedRight:An.borderRightRadius,roundedStart:An.borderInlineStartRadius,roundedEnd:An.borderInlineEndRadius,borderStart:An.borderInlineStart,borderEnd:An.borderInlineEnd,borderTopStartRadius:An.borderStartStartRadius,borderTopEndRadius:An.borderStartEndRadius,borderBottomStartRadius:An.borderEndStartRadius,borderBottomEndRadius:An.borderEndEndRadius,borderStartRadius:An.borderInlineStartRadius,borderEndRadius:An.borderInlineEndRadius,borderStartWidth:An.borderInlineStartWidth,borderEndWidth:An.borderInlineEndWidth,borderStartColor:An.borderInlineStartColor,borderEndColor:An.borderInlineEndColor,borderStartStyle:An.borderInlineStartStyle,borderEndStyle:An.borderInlineEndStyle});const dV={color:me.colors("color"),textColor:me.colors("color"),fill:me.colors("fill"),stroke:me.colors("stroke"),accentColor:me.colors("accentColor"),textFillColor:me.colors("textFillColor")},B0={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:pn.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:me.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:me.space("gap"),rowGap:me.space("rowGap"),columnGap:me.space("columnGap")};Object.assign(B0,{flexDir:B0.flexDirection});const Gi={width:me.sizesT("width"),inlineSize:me.sizesT("inlineSize"),height:me.sizes("height"),blockSize:me.sizes("blockSize"),boxSize:me.sizes(["width","height"]),minWidth:me.sizes("minWidth"),minInlineSize:me.sizes("minInlineSize"),minHeight:me.sizes("minHeight"),minBlockSize:me.sizes("minBlockSize"),maxWidth:me.sizes("maxWidth"),maxInlineSize:me.sizes("maxInlineSize"),maxHeight:me.sizes("maxHeight"),maxBlockSize:me.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>({[`@media screen and (min-width: ${t.__breakpoints?.get(e)?.minW??e})`]:{display:"none"}})},hideBelow:{scale:"breakpoints",transform:(e,t)=>({[`@media screen and (max-width: ${t.__breakpoints?.get(e)?._minW??e})`]:{display:"none"}})},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:me.propT("float",pn.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Gi,{w:Gi.width,h:Gi.height,minW:Gi.minWidth,maxW:Gi.maxWidth,minH:Gi.minHeight,maxH:Gi.maxHeight,overscroll:Gi.overscrollBehavior,overscrollX:Gi.overscrollBehaviorX,overscrollY:Gi.overscrollBehaviorY});const hV={filter:{transform:pn.filter},blur:me.blur("--chakra-blur"),brightness:me.propT("--chakra-brightness",pn.brightness),contrast:me.propT("--chakra-contrast",pn.contrast),hueRotate:me.propT("--chakra-hue-rotate",pn.hueRotate),invert:me.propT("--chakra-invert",pn.invert),saturate:me.propT("--chakra-saturate",pn.saturate),dropShadow:me.propT("--chakra-drop-shadow",pn.dropShadow),backdropFilter:{transform:pn.backdropFilter},backdropBlur:me.blur("--chakra-backdrop-blur"),backdropBrightness:me.propT("--chakra-backdrop-brightness",pn.brightness),backdropContrast:me.propT("--chakra-backdrop-contrast",pn.contrast),backdropHueRotate:me.propT("--chakra-backdrop-hue-rotate",pn.hueRotate),backdropInvert:me.propT("--chakra-backdrop-invert",pn.invert),backdropSaturate:me.propT("--chakra-backdrop-saturate",pn.saturate)},fV={ring:{transform:pn.ring},ringColor:me.colors("--chakra-ring-color"),ringOffset:me.prop("--chakra-ring-offset-width"),ringOffsetColor:me.colors("--chakra-ring-offset-color"),ringInset:me.prop("--chakra-ring-inset")},pV={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:pn.outline},outlineOffset:!0,outlineColor:me.colors("outlineColor")},bz={gridGap:me.space("gridGap"),gridColumnGap:me.space("gridColumnGap"),gridRowGap:me.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0};function mV(e,t,n,s){const i=typeof t=="string"?t.split("."):[t];for(s=0;s<i.length&&e;s+=1)e=e[i[s]];return e===void 0?n:e}const gV=e=>{const t=new WeakMap;return(s,i,o,l)=>{if(typeof s>"u")return e(s,i,o);t.has(s)||t.set(s,new Map);const u=t.get(s);if(u.has(i))return u.get(i);const d=e(s,i,o,l);return u.set(i,d),d}},xV=gV(mV),yV={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},bV={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},Xj=(e,t,n)=>{const s={},i=xV(e,t,{});for(const o in i)o in n&&n[o]!=null||(s[o]=i[o]);return s},vV={srOnly:{transform(e){return e===!0?yV:e==="focusable"?bV:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>Xj(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>Xj(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>Xj(t,e,n)}},qp={position:!0,pos:me.prop("position"),zIndex:me.prop("zIndex","zIndices"),inset:me.spaceT("inset"),insetX:me.spaceT(["left","right"]),insetInline:me.spaceT("insetInline"),insetY:me.spaceT(["top","bottom"]),insetBlock:me.spaceT("insetBlock"),top:me.spaceT("top"),insetBlockStart:me.spaceT("insetBlockStart"),bottom:me.spaceT("bottom"),insetBlockEnd:me.spaceT("insetBlockEnd"),left:me.spaceT("left"),insetInlineStart:me.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:me.spaceT("right"),insetInlineEnd:me.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(qp,{insetStart:qp.insetInlineStart,insetEnd:qp.insetInlineEnd});const qS={boxShadow:me.shadows("boxShadow"),mixBlendMode:!0,blendMode:me.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:me.prop("backgroundBlendMode"),opacity:!0};Object.assign(qS,{shadow:qS.boxShadow});const nr={margin:me.spaceT("margin"),marginTop:me.spaceT("marginTop"),marginBlockStart:me.spaceT("marginBlockStart"),marginRight:me.spaceT("marginRight"),marginInlineEnd:me.spaceT("marginInlineEnd"),marginBottom:me.spaceT("marginBottom"),marginBlockEnd:me.spaceT("marginBlockEnd"),marginLeft:me.spaceT("marginLeft"),marginInlineStart:me.spaceT("marginInlineStart"),marginX:me.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:me.spaceT("marginInline"),marginY:me.spaceT(["marginTop","marginBottom"]),marginBlock:me.spaceT("marginBlock"),padding:me.space("padding"),paddingTop:me.space("paddingTop"),paddingBlockStart:me.space("paddingBlockStart"),paddingRight:me.space("paddingRight"),paddingBottom:me.space("paddingBottom"),paddingBlockEnd:me.space("paddingBlockEnd"),paddingLeft:me.space("paddingLeft"),paddingInlineStart:me.space("paddingInlineStart"),paddingInlineEnd:me.space("paddingInlineEnd"),paddingX:me.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:me.space("paddingInline"),paddingY:me.space(["paddingTop","paddingBottom"]),paddingBlock:me.space("paddingBlock")};Object.assign(nr,{m:nr.margin,mt:nr.marginTop,mr:nr.marginRight,me:nr.marginInlineEnd,marginEnd:nr.marginInlineEnd,mb:nr.marginBottom,ml:nr.marginLeft,ms:nr.marginInlineStart,marginStart:nr.marginInlineStart,mx:nr.marginX,my:nr.marginY,p:nr.padding,pt:nr.paddingTop,py:nr.paddingY,px:nr.paddingX,pb:nr.paddingBottom,pl:nr.paddingLeft,ps:nr.paddingInlineStart,paddingStart:nr.paddingInlineStart,pr:nr.paddingRight,pe:nr.paddingInlineEnd,paddingEnd:nr.paddingInlineEnd});const jV={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:me.spaceT("scrollMargin"),scrollMarginTop:me.spaceT("scrollMarginTop"),scrollMarginBottom:me.spaceT("scrollMarginBottom"),scrollMarginLeft:me.spaceT("scrollMarginLeft"),scrollMarginRight:me.spaceT("scrollMarginRight"),scrollMarginX:me.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:me.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:me.spaceT("scrollPadding"),scrollPaddingTop:me.spaceT("scrollPaddingTop"),scrollPaddingBottom:me.spaceT("scrollPaddingBottom"),scrollPaddingLeft:me.spaceT("scrollPaddingLeft"),scrollPaddingRight:me.spaceT("scrollPaddingRight"),scrollPaddingX:me.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:me.spaceT(["scrollPaddingTop","scrollPaddingBottom"])},SV={fontFamily:me.prop("fontFamily","fonts"),fontSize:me.prop("fontSize","fontSizes",pn.px),fontWeight:me.prop("fontWeight","fontWeights"),lineHeight:me.prop("lineHeight","lineHeights"),letterSpacing:me.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},CV={textDecorationColor:me.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:me.shadows("textShadow")},wV={clipPath:!0,transform:me.propT("transform",pn.transform),transformOrigin:!0,translateX:me.spaceT("--chakra-translate-x"),translateY:me.spaceT("--chakra-translate-y"),skewX:me.degreeT("--chakra-skew-x"),skewY:me.degreeT("--chakra-skew-y"),scaleX:me.prop("--chakra-scale-x"),scaleY:me.prop("--chakra-scale-y"),scale:me.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:me.degreeT("--chakra-rotate")},EV={listStyleType:!0,listStylePosition:!0,listStylePos:me.prop("listStylePosition"),listStyleImage:!0,listStyleImg:me.prop("listStyleImage")},kV={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:me.prop("transitionDuration","transition.duration"),transitionProperty:me.prop("transitionProperty","transition.property"),transitionTimingFunction:me.prop("transitionTimingFunction","transition.easing")},Uw=Zi({},h0,An,dV,B0,Gi,hV,fV,pV,bz,vV,qp,qS,nr,jV,SV,CV,wV,EV,kV),AV=Object.assign({},nr,Gi,B0,bz,qp),TV=Object.keys(AV),MV=[...Object.keys(Uw),...xz],RV={...Uw,...nb},DV=e=>e in RV,OV=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:s,media:i}=t.__breakpoints,o={};for(const l in e){let u=ii(e[l],t);if(u==null)continue;if(u=ts(u)&&n(u)?s(u):u,!Array.isArray(u)){o[l]=u;continue}const d=u.slice(0,i.length).length;for(let h=0;h<d;h+=1){const p=i?.[h];if(!p){o[l]=u[h];continue}o[p]=o[p]||{},u[h]!=null&&(o[p][l]=u[h])}}return o};function NV(e){const t=[];let n="",s=!1;for(let i=0;i<e.length;i++){const o=e[i];o==="("?(s=!0,n+=o):o===")"?(s=!1,n+=o):o===","&&!s?(t.push(n),n=""):n+=o}return n=n.trim(),n&&t.push(n),t}function PV(e){return/^var\(--.+\)$/.test(e)}const zV=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!PV(t),IV=(e,t)=>{if(t==null)return t;const n=l=>e.__cssMap?.[l]?.varRef,s=l=>n(l)??l,[i,o]=NV(t);return t=n(i)??s(o)??s(t),t};function LV(e){const{configs:t={},pseudos:n={},theme:s}=e,i=(o,l=!1)=>{const u=ii(o,s),d=OV(u)(s);let h={};for(let p in d){const m=d[p];let x=ii(m,s);p in n&&(p=n[p]),zV(p,x)&&(x=IV(s,x));let y=t[p];if(y===!0&&(y={property:p}),ts(x)){h[p]=h[p]??{},h[p]=Zi({},h[p],i(x,!0));continue}let b=y?.transform?.(x,s,u)??x;b=y?.processResult?i(b,!0):b;const C=ii(y?.property,s);if(!l&&y?.static){const S=ii(y.static,s);h=Zi({},h,S)}if(C&&Array.isArray(C)){for(const S of C)h[S]=b;continue}if(C){C==="&"&&ts(b)?h=Zi({},h,b):h[C]=b;continue}if(ts(b)){h=Zi({},h,b);continue}h[p]=b}return h};return i}const vz=e=>t=>LV({theme:t,pseudos:nb,configs:Uw})(e);function tr(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function _V(e,t,n){return e.__cssMap?.[`${t}.${n}`]?.varRef??n}function BV(e,t){if(Array.isArray(e))return e;if(ts(e))return t(e);if(e!=null)return[e]}function $V(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function FV(e){const t=e.__breakpoints;return function(s,i,o,l){if(!t)return;const u={},d=BV(o,t.toArrayValue);if(!d)return u;const h=d.length,p=h===1,m=!!s.parts;for(let x=0;x<h;x++){const y=t.details[x],b=t.details[$V(d,x)],C=kp(y.minW,b?._minW),S=ii(s[i]?.[d[x]],l);if(S){if(m){s.parts?.forEach(E=>{Zi(u,{[E]:p?S[E]:{[C]:S[E]}})});continue}if(!m){p?Zi(u,S):u[C]=S;continue}u[C]=S}}return u}}function VV(e){return t=>{const{variant:n,size:s,theme:i}=t,o=FV(i);return Zi({},ii(e.baseStyle??{},t),o(e,"sizes",s,t),o(e,"variants",n,t))}}function bn(e){return Zm(e,["styleConfig","size","variant","colorScheme"])}function jz(e){return ts(e)&&e.reference?e.reference:String(e)}const rb=(e,...t)=>t.map(jz).join(` ${e} `).replace(/calc/g,""),aR=(...e)=>`calc(${rb("+",...e)})`,lR=(...e)=>`calc(${rb("-",...e)})`,GS=(...e)=>`calc(${rb("*",...e)})`,cR=(...e)=>`calc(${rb("/",...e)})`,uR=e=>{const t=jz(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:GS(t,-1)},Xa=Object.assign(e=>({add:(...t)=>Xa(aR(e,...t)),subtract:(...t)=>Xa(lR(e,...t)),multiply:(...t)=>Xa(GS(e,...t)),divide:(...t)=>Xa(cR(e,...t)),negate:()=>Xa(uR(e)),toString:()=>e.toString()}),{add:aR,subtract:lR,multiply:GS,divide:cR,negate:uR});function HV(e,t="-"){return e.replace(/\s+/g,t)}function UV(e){const t=HV(e.toString());return qV(WV(t))}function WV(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function qV(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function GV(e,t=""){return[t,e].filter(Boolean).join("-")}function YV(e,t){return`var(${e}${t?`, ${t}`:""})`}function KV(e,t=""){return UV(`--${GV(e,t)}`)}function Dt(e,t,n){const s=KV(e,n);return{variable:s,reference:YV(s,t)}}function XV(e,t){const n={};for(const s of t){if(Array.isArray(s)){const[i,o]=s;n[i]=Dt(`${e}-${i}`,o);continue}n[s]=Dt(`${e}-${s}`)}return n}const JV=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function QV(e){return az(e,JV)}function ZV(e){return e.semanticTokens}function e9(e){const{__cssMap:t,__cssVars:n,__breakpoints:s,...i}=e;return i}function t9(e){const t=QV(e),n=ZV(e),s=o=>xz.includes(o)||o==="default",i={};return sR(t,(o,l)=>{o!=null&&(i[l.join(".")]={isSemantic:!1,value:o})}),sR(n,(o,l)=>{o!=null&&(i[l.join(".")]={isSemantic:!0,value:o})},{stop:o=>Object.keys(o).every(s)}),i}function dR(e,t){return Dt(String(e).replace(/\./g,"-"),void 0,t)}function n9(e){const t=t9(e),n=e.config?.cssVarPrefix;let s={};const i={};function o(l,u){const h=[String(l).split(".")[0],u].join(".");if(!t[h])return u;const{reference:m}=dR(h,n);return m}for(const[l,u]of Object.entries(t)){const{isSemantic:d,value:h}=u,{variable:p,reference:m}=dR(l,n);if(!d){if(l.startsWith("space")){const y=l.split("."),[b,...C]=y,S=`${b}.-${C.join(".")}`,E=Xa.negate(h),k=Xa.negate(m);i[S]={value:E,var:p,varRef:k}}s[p]=h,i[l]={value:h,var:p,varRef:m};continue}const x=ts(h)?h:{default:h};s=Zi(s,Object.entries(x).reduce((y,[b,C])=>{if(!C)return y;const S=o(l,`${C}`);if(b==="default")return y[p]=S,y;const E=nb?.[b]??b;return y[E]={[p]:S},y},{})),i[l]={value:m,var:p,varRef:m}}return{cssVars:s,cssMap:i}}function r9(e){const t=e9(e),{cssMap:n,cssVars:s}=n9(t);return Object.assign(t,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...s},__cssMap:n,__breakpoints:d8(t.breakpoints)}),t}function Dn(e,t={}){let n=!1;function s(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...p){s();for(const m of p)t[m]=d(m);return Dn(e,t)}function o(...p){for(const m of p)m in t||(t[m]=d(m));return Dn(e,t)}function l(){return Object.fromEntries(Object.entries(t).map(([m,x])=>[m,x.selector]))}function u(){return Object.fromEntries(Object.entries(t).map(([m,x])=>[m,x.className]))}function d(p){const y=`chakra-${(["container","root"].includes(p??"")?[e]:[e,p]).filter(Boolean).join("__")}`;return{className:y,selector:`.${y}`,toString:()=>p}}return{parts:i,toPart:d,extend:o,selectors:l,classnames:u,get keys(){return Object.keys(t)},__type:{}}}const s9=Dn("accordion").parts("root","container","button","panel","icon"),i9=Dn("alert").parts("title","description","container","icon","spinner"),o9=Dn("avatar").parts("label","badge","container","excessLabel","group"),a9=Dn("breadcrumb").parts("link","item","container","separator");Dn("button").parts();const l9=Dn("checkbox").parts("control","icon","container","label");Dn("progress").parts("track","filledTrack","label");const c9=Dn("drawer").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),u9=Dn("editable").parts("preview","input","textarea"),d9=Dn("form").parts("container","requiredIndicator","helperText"),h9=Dn("formError").parts("text","icon"),f9=Dn("input").parts("addon","field","element","group"),p9=Dn("list").parts("container","item","icon"),m9=Dn("menu").parts("button","list","item","groupTitle","icon","command","divider"),g9=Dn("modal").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),x9=Dn("numberinput").parts("root","field","stepperGroup","stepper");Dn("pininput").parts("field");const y9=Dn("popover").parts("content","header","body","footer","popper","arrow","closeButton"),b9=Dn("progress").parts("label","filledTrack","track"),v9=Dn("radio").parts("container","control","label"),j9=Dn("select").parts("field","icon"),S9=Dn("slider").parts("container","track","thumb","filledTrack","mark"),C9=Dn("stat").parts("container","label","helpText","number","icon"),w9=Dn("switch").parts("container","track","thumb","label"),E9=Dn("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),k9=Dn("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),A9=Dn("tag").parts("container","label","closeButton"),T9=Dn("card").parts("container","header","body","footer");Dn("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");const{definePartsStyle:M9,defineMultiStyleConfig:R9}=tr(s9.keys),D9={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},O9={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},N9={pt:"2",px:"4",pb:"5"},P9={fontSize:"1.25em"},z9=M9({container:D9,button:O9,panel:N9,icon:P9}),I9=R9({baseStyle:z9});function yu(e,t,n){return Math.min(Math.max(e,n),t)}class L9 extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var Tp=L9;function Ww(e){if(typeof e!="string")throw new Tp(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=W9.test(e)?$9(e):e;const n=F9.exec(t);if(n){const l=Array.from(n).slice(1);return[...l.slice(0,3).map(u=>parseInt(xm(u,2),16)),parseInt(xm(l[3]||"f",2),16)/255]}const s=V9.exec(t);if(s){const l=Array.from(s).slice(1);return[...l.slice(0,3).map(u=>parseInt(u,16)),parseInt(l[3]||"ff",16)/255]}const i=H9.exec(t);if(i){const l=Array.from(i).slice(1);return[...l.slice(0,3).map(u=>parseInt(u,10)),parseFloat(l[3]||"1")]}const o=U9.exec(t);if(o){const[l,u,d,h]=Array.from(o).slice(1).map(parseFloat);if(yu(0,100,u)!==u)throw new Tp(e);if(yu(0,100,d)!==d)throw new Tp(e);return[...q9(l,u,d),Number.isNaN(h)?1:h]}throw new Tp(e)}function _9(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const hR=e=>parseInt(e.replace(/_/g,""),36),B9="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=hR(t.substring(0,3)),s=hR(t.substring(3)).toString(16);let i="";for(let o=0;o<6-s.length;o++)i+="0";return e[n]=`${i}${s}`,e},{});function $9(e){const t=e.toLowerCase().trim(),n=B9[_9(t)];if(!n)throw new Tp(e);return`#${n}`}const xm=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),F9=new RegExp(`^#${xm("([a-f0-9])",3)}([a-f0-9])?$`,"i"),V9=new RegExp(`^#${xm("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),H9=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${xm(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),U9=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,W9=/^[a-z]+$/i,fR=e=>Math.round(e*255),q9=(e,t,n)=>{let s=n/100;if(t===0)return[s,s,s].map(fR);const i=(e%360+360)%360/60,o=(1-Math.abs(2*s-1))*(t/100),l=o*(1-Math.abs(i%2-1));let u=0,d=0,h=0;i>=0&&i<1?(u=o,d=l):i>=1&&i<2?(u=l,d=o):i>=2&&i<3?(d=o,h=l):i>=3&&i<4?(d=l,h=o):i>=4&&i<5?(u=l,h=o):i>=5&&i<6&&(u=o,h=l);const p=s-o/2,m=u+p,x=d+p,y=h+p;return[m,x,y].map(fR)};function G9(e,t,n,s){return`rgba(${yu(0,255,e).toFixed()}, ${yu(0,255,t).toFixed()}, ${yu(0,255,n).toFixed()}, ${parseFloat(yu(0,1,s).toFixed(3))})`}function Y9(e,t){const[n,s,i,o]=Ww(e);return G9(n,s,i,o-t)}function K9(e){const[t,n,s,i]=Ww(e);let o=l=>{const u=yu(0,255,l).toString(16);return u.length===1?`0${u}`:u};return`#${o(t)}${o(n)}${o(s)}${i<1?o(Math.round(i*255)):""}`}const X9=e=>Object.keys(e).length===0;function J9(e,t,n,s,i){for(t=t.split?t.split("."):t,s=0;s<t.length;s++)e=e?e[t[s]]:i;return e===i?n:e}const Vs=(e,t,n)=>{const s=J9(e,`colors.${t}`,t);try{return K9(s),s}catch{return n??"#000000"}},Q9=e=>{const[t,n,s]=Ww(e);return(t*299+n*587+s*114)/1e3},Z9=e=>t=>{const n=Vs(t,e);return Q9(n)<128?"dark":"light"},eH=e=>t=>Z9(e)(t)==="dark",_h=(e,t)=>n=>{const s=Vs(n,e);return Y9(s,1-t)};function pR(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}const tH=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function nH(e){const t=tH();return!e||X9(e)?t:e.string&&e.colors?sH(e.string,e.colors):e.string&&!e.colors?rH(e.string):e.colors&&!e.string?iH(e.colors):t}function rH(e){let t=0;if(e.length===0)return t.toString();for(let s=0;s<e.length;s+=1)t=e.charCodeAt(s)+((t<<5)-t),t=t&t;let n="#";for(let s=0;s<3;s+=1){const i=t>>s*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function sH(e,t){let n=0;if(e.length===0)return t[0];for(let s=0;s<e.length;s+=1)n=e.charCodeAt(s)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function iH(e){return e[Math.floor(Math.random()*e.length)]}function Rt(e,t){return n=>n.colorMode==="dark"?t:e}function qw(e){const{orientation:t,vertical:n,horizontal:s}=e;return t?t==="vertical"?n:s:{}}function Sz(e){return ts(e)&&e.reference?e.reference:String(e)}const sb=(e,...t)=>t.map(Sz).join(` ${e} `).replace(/calc/g,""),mR=(...e)=>`calc(${sb("+",...e)})`,gR=(...e)=>`calc(${sb("-",...e)})`,YS=(...e)=>`calc(${sb("*",...e)})`,xR=(...e)=>`calc(${sb("/",...e)})`,yR=e=>{const t=Sz(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:YS(t,-1)},Ja=Object.assign(e=>({add:(...t)=>Ja(mR(e,...t)),subtract:(...t)=>Ja(gR(e,...t)),multiply:(...t)=>Ja(YS(e,...t)),divide:(...t)=>Ja(xR(e,...t)),negate:()=>Ja(yR(e)),toString:()=>e.toString()}),{add:mR,subtract:gR,multiply:YS,divide:xR,negate:yR});function oH(e){return!Number.isInteger(parseFloat(e.toString()))}function aH(e,t="-"){return e.replace(/\s+/g,t)}function Cz(e){const t=aH(e.toString());return t.includes("\\.")?e:oH(e)?t.replace(".","\\."):e}function lH(e,t=""){return[t,Cz(e)].filter(Boolean).join("-")}function cH(e,t){return`var(${Cz(e)}${t?`, ${t}`:""})`}function uH(e,t=""){return`--${lH(e,t)}`}function ns(e,t){const n=uH(e,t?.prefix);return{variable:n,reference:cH(n,dH(t?.fallback))}}function dH(e){return e?.reference}const{definePartsStyle:tg,defineMultiStyleConfig:hH}=tr(i9.keys),Ei=Dt("alert-fg"),hl=Dt("alert-bg"),fH=tg({container:{bg:hl.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Ei.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Ei.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function Gw(e){const{theme:t,colorScheme:n}=e,s=_h(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:s}}const pH=tg(e=>{const{colorScheme:t}=e,n=Gw(e);return{container:{[Ei.variable]:`colors.${t}.600`,[hl.variable]:n.light,_dark:{[Ei.variable]:`colors.${t}.200`,[hl.variable]:n.dark}}}}),mH=tg(e=>{const{colorScheme:t}=e,n=Gw(e);return{container:{[Ei.variable]:`colors.${t}.600`,[hl.variable]:n.light,_dark:{[Ei.variable]:`colors.${t}.200`,[hl.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Ei.reference}}}),gH=tg(e=>{const{colorScheme:t}=e,n=Gw(e);return{container:{[Ei.variable]:`colors.${t}.600`,[hl.variable]:n.light,_dark:{[Ei.variable]:`colors.${t}.200`,[hl.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Ei.reference}}}),xH=tg(e=>{const{colorScheme:t}=e;return{container:{[Ei.variable]:"colors.white",[hl.variable]:`colors.${t}.600`,_dark:{[Ei.variable]:"colors.gray.900",[hl.variable]:`colors.${t}.200`},color:Ei.reference}}}),yH={subtle:pH,"left-accent":mH,"top-accent":gH,solid:xH},bH=hH({baseStyle:fH,variants:yH,defaultProps:{variant:"subtle",colorScheme:"blue"}}),wz={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},vH={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},jH={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},Ez={...wz,...vH,container:jH},SH=e=>typeof e=="function";function Us(e,...t){return SH(e)?e(...t):e}const{definePartsStyle:kz,defineMultiStyleConfig:CH}=tr(o9.keys),kh=Dt("avatar-border-color"),Gp=Dt("avatar-bg"),ym=Dt("avatar-font-size"),Bh=Dt("avatar-size"),wH={borderRadius:"full",border:"0.2em solid",borderColor:kh.reference,[kh.variable]:"white",_dark:{[kh.variable]:"colors.gray.800"}},EH={bg:Gp.reference,fontSize:ym.reference,width:Bh.reference,height:Bh.reference,lineHeight:"1",[Gp.variable]:"colors.gray.200",_dark:{[Gp.variable]:"colors.whiteAlpha.400"}},kH=e=>{const{name:t,theme:n}=e,s=t?nH({string:t}):"colors.gray.400",i=eH(s)(n);let o="white";return i||(o="gray.800"),{bg:Gp.reference,fontSize:ym.reference,color:o,borderColor:kh.reference,verticalAlign:"top",width:Bh.reference,height:Bh.reference,"&:not([data-loaded])":{[Gp.variable]:s},[kh.variable]:"colors.white",_dark:{[kh.variable]:"colors.gray.800"}}},AH={fontSize:ym.reference,lineHeight:"1"},TH=kz(e=>({badge:Us(wH,e),excessLabel:Us(EH,e),container:Us(kH,e),label:AH}));function Zl(e){const t=e!=="100%"?Ez[e]:void 0;return kz({container:{[Bh.variable]:t??e,[ym.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[Bh.variable]:t??e,[ym.variable]:`calc(${t??e} / 2.5)`}})}const MH={"2xs":Zl(4),xs:Zl(6),sm:Zl(8),md:Zl(12),lg:Zl(16),xl:Zl(24),"2xl":Zl(32),full:Zl("100%")},RH=CH({baseStyle:TH,sizes:MH,defaultProps:{size:"md"}}),Lr=XV("badge",["bg","color","shadow"]),DH={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Lr.bg.reference,color:Lr.color.reference,boxShadow:Lr.shadow.reference},OH=e=>{const{colorScheme:t,theme:n}=e,s=_h(`${t}.500`,.6)(n);return{[Lr.bg.variable]:`colors.${t}.500`,[Lr.color.variable]:"colors.white",_dark:{[Lr.bg.variable]:s,[Lr.color.variable]:"colors.whiteAlpha.800"}}},NH=e=>{const{colorScheme:t,theme:n}=e,s=_h(`${t}.200`,.16)(n);return{[Lr.bg.variable]:`colors.${t}.100`,[Lr.color.variable]:`colors.${t}.800`,_dark:{[Lr.bg.variable]:s,[Lr.color.variable]:`colors.${t}.200`}}},PH=e=>{const{colorScheme:t,theme:n}=e,s=_h(`${t}.200`,.8)(n);return{[Lr.color.variable]:`colors.${t}.500`,_dark:{[Lr.color.variable]:s},[Lr.shadow.variable]:`inset 0 0 0px 1px ${Lr.color.reference}`}},zH={solid:OH,subtle:NH,outline:PH},Yp={baseStyle:DH,variants:zH,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:IH,definePartsStyle:LH}=tr(a9.keys),Jj=Dt("breadcrumb-link-decor"),_H={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:Jj.reference,[Jj.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[Jj.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},BH=LH({link:_H}),$H=IH({baseStyle:BH}),FH={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},Az=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:Rt("gray.800","whiteAlpha.900")(e),_hover:{bg:Rt("gray.100","whiteAlpha.200")(e)},_active:{bg:Rt("gray.200","whiteAlpha.300")(e)}};const s=_h(`${t}.200`,.12)(n),i=_h(`${t}.200`,.24)(n);return{color:Rt(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:Rt(`${t}.50`,s)(e)},_active:{bg:Rt(`${t}.100`,i)(e)}}},VH=e=>{const{colorScheme:t}=e,n=Rt("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Us(Az,e)}},HH={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},UH=e=>{const{colorScheme:t}=e;if(t==="gray"){const u=Rt("gray.100","whiteAlpha.200")(e);return{bg:u,color:Rt("gray.800","whiteAlpha.900")(e),_hover:{bg:Rt("gray.200","whiteAlpha.300")(e),_disabled:{bg:u}},_active:{bg:Rt("gray.300","whiteAlpha.400")(e)}}}const{bg:n=`${t}.500`,color:s="white",hoverBg:i=`${t}.600`,activeBg:o=`${t}.700`}=HH[t]??{},l=Rt(n,`${t}.200`)(e);return{bg:l,color:Rt(s,"gray.800")(e),_hover:{bg:Rt(i,`${t}.300`)(e),_disabled:{bg:l}},_active:{bg:Rt(o,`${t}.400`)(e)}}},WH=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Rt(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Rt(`${t}.700`,`${t}.500`)(e)}}},qH={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},GH={ghost:Az,outline:VH,solid:UH,link:WH,unstyled:qH},YH={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},KH={baseStyle:FH,variants:GH,sizes:YH,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Mu,defineMultiStyleConfig:XH}=tr(T9.keys),$0=Dt("card-bg"),ol=Dt("card-padding"),Tz=Dt("card-shadow"),f0=Dt("card-radius"),Mz=Dt("card-border-width","0"),Rz=Dt("card-border-color"),JH=Mu({container:{[$0.variable]:"colors.chakra-body-bg",backgroundColor:$0.reference,boxShadow:Tz.reference,borderRadius:f0.reference,color:"chakra-body-text",borderWidth:Mz.reference,borderColor:Rz.reference},body:{padding:ol.reference,flex:"1 1 0%"},header:{padding:ol.reference},footer:{padding:ol.reference}}),QH={sm:Mu({container:{[f0.variable]:"radii.base",[ol.variable]:"space.3"}}),md:Mu({container:{[f0.variable]:"radii.md",[ol.variable]:"space.5"}}),lg:Mu({container:{[f0.variable]:"radii.xl",[ol.variable]:"space.7"}})},ZH={elevated:Mu({container:{[Tz.variable]:"shadows.base",_dark:{[$0.variable]:"colors.gray.700"}}}),outline:Mu({container:{[Mz.variable]:"1px",[Rz.variable]:"colors.chakra-border-color"}}),filled:Mu({container:{[$0.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[ol.variable]:0},header:{[ol.variable]:0},footer:{[ol.variable]:0}}},e7=XH({baseStyle:JH,variants:ZH,sizes:QH,defaultProps:{variant:"elevated",size:"md"}}),{definePartsStyle:p0,defineMultiStyleConfig:t7}=tr(l9.keys),Kp=Dt("checkbox-size"),n7=e=>{const{colorScheme:t}=e;return{w:Kp.reference,h:Kp.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Rt(`${t}.500`,`${t}.200`)(e),borderColor:Rt(`${t}.500`,`${t}.200`)(e),color:Rt("white","gray.900")(e),_hover:{bg:Rt(`${t}.600`,`${t}.300`)(e),borderColor:Rt(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:Rt("gray.200","transparent")(e),bg:Rt("gray.200","whiteAlpha.300")(e),color:Rt("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Rt(`${t}.500`,`${t}.200`)(e),borderColor:Rt(`${t}.500`,`${t}.200`)(e),color:Rt("white","gray.900")(e)},_disabled:{bg:Rt("gray.100","whiteAlpha.100")(e),borderColor:Rt("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Rt("red.500","red.300")(e)}}},r7={_disabled:{cursor:"not-allowed"}},s7={userSelect:"none",_disabled:{opacity:.4}},i7={transitionProperty:"transform",transitionDuration:"normal"},o7=p0(e=>({icon:i7,container:r7,control:Us(n7,e),label:s7})),a7={sm:p0({control:{[Kp.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:p0({control:{[Kp.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:p0({control:{[Kp.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},F0=t7({baseStyle:o7,sizes:a7,defaultProps:{size:"md",colorScheme:"blue"}}),Xp=ns("close-button-size"),dp=ns("close-button-bg"),l7={w:[Xp.reference],h:[Xp.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[dp.variable]:"colors.blackAlpha.100",_dark:{[dp.variable]:"colors.whiteAlpha.100"}},_active:{[dp.variable]:"colors.blackAlpha.200",_dark:{[dp.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:dp.reference},c7={lg:{[Xp.variable]:"sizes.10",fontSize:"md"},md:{[Xp.variable]:"sizes.8",fontSize:"xs"},sm:{[Xp.variable]:"sizes.6",fontSize:"2xs"}},u7={baseStyle:l7,sizes:c7,defaultProps:{size:"md"}},{variants:d7,defaultProps:h7}=Yp,f7={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Lr.bg.reference,color:Lr.color.reference,boxShadow:Lr.shadow.reference},p7={baseStyle:f7,variants:d7,defaultProps:h7},m7={w:"100%",mx:"auto",maxW:"prose",px:"4"},g7={baseStyle:m7},x7={opacity:.6,borderColor:"inherit"},y7={borderStyle:"solid"},b7={borderStyle:"dashed"},v7={solid:y7,dashed:b7},j7={baseStyle:x7,variants:v7,defaultProps:{variant:"solid"}},{definePartsStyle:KS,defineMultiStyleConfig:S7}=tr(c9.keys),Qj=Dt("drawer-bg"),Zj=Dt("drawer-box-shadow");function Jd(e){return KS(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}const C7={bg:"blackAlpha.600",zIndex:"modal"},w7={display:"flex",zIndex:"modal",justifyContent:"center"},E7=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[Qj.variable]:"colors.white",[Zj.variable]:"shadows.lg",_dark:{[Qj.variable]:"colors.gray.700",[Zj.variable]:"shadows.dark-lg"},bg:Qj.reference,boxShadow:Zj.reference}},k7={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},A7={position:"absolute",top:"2",insetEnd:"3"},T7={px:"6",py:"2",flex:"1",overflow:"auto"},M7={px:"6",py:"4"},R7=KS(e=>({overlay:C7,dialogContainer:w7,dialog:Us(E7,e),header:k7,closeButton:A7,body:T7,footer:M7})),D7={xs:Jd("xs"),sm:Jd("md"),md:Jd("lg"),lg:Jd("2xl"),xl:Jd("4xl"),full:Jd("full")},O7=S7({baseStyle:R7,sizes:D7,defaultProps:{size:"xs"}}),{definePartsStyle:N7,defineMultiStyleConfig:P7}=tr(u9.keys),z7={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},I7={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},L7={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},_7=N7({preview:z7,input:I7,textarea:L7}),B7=P7({baseStyle:_7}),{definePartsStyle:$7,defineMultiStyleConfig:F7}=tr(d9.keys),Ah=Dt("form-control-color"),V7={marginStart:"1",[Ah.variable]:"colors.red.500",_dark:{[Ah.variable]:"colors.red.300"},color:Ah.reference},H7={mt:"2",[Ah.variable]:"colors.gray.600",_dark:{[Ah.variable]:"colors.whiteAlpha.600"},color:Ah.reference,lineHeight:"normal",fontSize:"sm"},U7=$7({container:{width:"100%",position:"relative"},requiredIndicator:V7,helperText:H7}),W7=F7({baseStyle:U7}),{definePartsStyle:q7,defineMultiStyleConfig:G7}=tr(h9.keys),Th=Dt("form-error-color"),Y7={[Th.variable]:"colors.red.500",_dark:{[Th.variable]:"colors.red.300"},color:Th.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},K7={marginEnd:"0.5em",[Th.variable]:"colors.red.500",_dark:{[Th.variable]:"colors.red.300"},color:Th.reference},X7=q7({text:Y7,icon:K7}),J7=G7({baseStyle:X7}),Q7={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Z7={baseStyle:Q7},eU={fontFamily:"heading",fontWeight:"bold"},tU={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},nU={baseStyle:eU,sizes:tU,defaultProps:{size:"xl"}},{definePartsStyle:tl,defineMultiStyleConfig:rU}=tr(f9.keys),hh=Dt("input-height"),fh=Dt("input-font-size"),ph=Dt("input-padding"),mh=Dt("input-border-radius"),sU=tl({addon:{height:hh.reference,fontSize:fh.reference,px:ph.reference,borderRadius:mh.reference},field:{width:"100%",height:hh.reference,fontSize:fh.reference,px:ph.reference,borderRadius:mh.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),ec={lg:{[fh.variable]:"fontSizes.lg",[ph.variable]:"space.4",[mh.variable]:"radii.md",[hh.variable]:"sizes.12"},md:{[fh.variable]:"fontSizes.md",[ph.variable]:"space.4",[mh.variable]:"radii.md",[hh.variable]:"sizes.10"},sm:{[fh.variable]:"fontSizes.sm",[ph.variable]:"space.3",[mh.variable]:"radii.sm",[hh.variable]:"sizes.8"},xs:{[fh.variable]:"fontSizes.xs",[ph.variable]:"space.2",[mh.variable]:"radii.sm",[hh.variable]:"sizes.6"}},iU={lg:tl({field:ec.lg,group:ec.lg}),md:tl({field:ec.md,group:ec.md}),sm:tl({field:ec.sm,group:ec.sm}),xs:tl({field:ec.xs,group:ec.xs})};function Yw(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||Rt("blue.500","blue.300")(e),errorBorderColor:n||Rt("red.500","red.300")(e)}}const oU=tl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:s}=Yw(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Rt("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Vs(t,s),boxShadow:`0 0 0 1px ${Vs(t,s)}`},_focusVisible:{zIndex:1,borderColor:Vs(t,n),boxShadow:`0 0 0 1px ${Vs(t,n)}`}},addon:{border:"1px solid",borderColor:Rt("inherit","whiteAlpha.50")(e),bg:Rt("gray.100","whiteAlpha.300")(e)}}}),aU=tl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:s}=Yw(e);return{field:{border:"2px solid",borderColor:"transparent",bg:Rt("gray.100","whiteAlpha.50")(e),_hover:{bg:Rt("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Vs(t,s)},_focusVisible:{bg:"transparent",borderColor:Vs(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Rt("gray.100","whiteAlpha.50")(e)}}}),lU=tl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:s}=Yw(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Vs(t,s),boxShadow:`0px 1px 0px 0px ${Vs(t,s)}`},_focusVisible:{borderColor:Vs(t,n),boxShadow:`0px 1px 0px 0px ${Vs(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),cU=tl({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),uU={outline:oU,filled:aU,flushed:lU,unstyled:cU},Rn=rU({baseStyle:sU,sizes:iU,variants:uU,defaultProps:{size:"md",variant:"outline"}}),e1=Dt("kbd-bg"),dU={[e1.variable]:"colors.gray.100",_dark:{[e1.variable]:"colors.whiteAlpha.100"},bg:e1.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},hU={baseStyle:dU},fU={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},pU={baseStyle:fU},{defineMultiStyleConfig:mU,definePartsStyle:gU}=tr(p9.keys),xU={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},yU=gU({icon:xU}),bU=mU({baseStyle:yU}),{defineMultiStyleConfig:vU,definePartsStyle:jU}=tr(m9.keys),Ko=Dt("menu-bg"),t1=Dt("menu-shadow"),SU={[Ko.variable]:"#fff",[t1.variable]:"shadows.sm",_dark:{[Ko.variable]:"colors.gray.700",[t1.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:"dropdown",borderRadius:"md",borderWidth:"1px",bg:Ko.reference,boxShadow:t1.reference},CU={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Ko.variable]:"colors.gray.100",_dark:{[Ko.variable]:"colors.whiteAlpha.100"}},_active:{[Ko.variable]:"colors.gray.200",_dark:{[Ko.variable]:"colors.whiteAlpha.200"}},_expanded:{[Ko.variable]:"colors.gray.100",_dark:{[Ko.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Ko.reference},wU={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},EU={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},kU={opacity:.6},AU={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},TU={transitionProperty:"common",transitionDuration:"normal"},MU=jU({button:TU,list:SU,item:CU,groupTitle:wU,icon:EU,command:kU,divider:AU}),RU=vU({baseStyle:MU}),{defineMultiStyleConfig:DU,definePartsStyle:XS}=tr(g9.keys),n1=Dt("modal-bg"),r1=Dt("modal-shadow"),OU={bg:"blackAlpha.600",zIndex:"modal"},NU=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},PU=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[n1.variable]:"colors.white",[r1.variable]:"shadows.lg",_dark:{[n1.variable]:"colors.gray.700",[r1.variable]:"shadows.dark-lg"},bg:n1.reference,boxShadow:r1.reference}},zU={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},IU={position:"absolute",top:"2",insetEnd:"3"},LU=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},_U={px:"6",py:"4"},BU=XS(e=>({overlay:OU,dialogContainer:Us(NU,e),dialog:Us(PU,e),header:zU,closeButton:IU,body:Us(LU,e),footer:_U}));function jo(e){return XS(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}const $U={xs:jo("xs"),sm:jo("sm"),md:jo("md"),lg:jo("lg"),xl:jo("xl"),"2xl":jo("2xl"),"3xl":jo("3xl"),"4xl":jo("4xl"),"5xl":jo("5xl"),"6xl":jo("6xl"),full:jo("full")},FU=DU({baseStyle:BU,sizes:$U,defaultProps:{size:"md"}}),Dz={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},{defineMultiStyleConfig:VU,definePartsStyle:Oz}=tr(x9.keys),Kw=ns("number-input-stepper-width"),Nz=ns("number-input-input-padding"),HU=Ja(Kw).add("0.5rem").toString(),s1=ns("number-input-bg"),i1=ns("number-input-color"),o1=ns("number-input-border-color"),UU={[Kw.variable]:"sizes.6",[Nz.variable]:HU},WU=e=>Us(Rn.baseStyle,e)?.field??{},qU={width:Kw.reference},GU={borderStart:"1px solid",borderStartColor:o1.reference,color:i1.reference,bg:s1.reference,[i1.variable]:"colors.chakra-body-text",[o1.variable]:"colors.chakra-border-color",_dark:{[i1.variable]:"colors.whiteAlpha.800",[o1.variable]:"colors.whiteAlpha.300"},_active:{[s1.variable]:"colors.gray.200",_dark:{[s1.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},YU=Oz(e=>({root:UU,field:Us(WU,e)??{},stepperGroup:qU,stepper:GU}));function wx(e){const t=Rn.sizes?.[e],n={lg:"md",md:"md",sm:"sm",xs:"sm"},s=t.field?.fontSize??"md",i=Dz.fontSizes[s];return Oz({field:{...t.field,paddingInlineEnd:Nz.reference,verticalAlign:"top"},stepper:{fontSize:Ja(i).multiply(.75).toString(),_first:{borderTopEndRadius:n[e]},_last:{borderBottomEndRadius:n[e],mt:"-1px",borderTopWidth:1}}})}const KU={xs:wx("xs"),sm:wx("sm"),md:wx("md"),lg:wx("lg")},XU=VU({baseStyle:YU,sizes:KU,variants:Rn.variants,defaultProps:Rn.defaultProps}),JU={...Rn.baseStyle?.field,textAlign:"center"},QU={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},ZU={outline:e=>Us(Rn.variants?.outline,e)?.field??{},flushed:e=>Us(Rn.variants?.flushed,e)?.field??{},filled:e=>Us(Rn.variants?.filled,e)?.field??{},unstyled:Rn.variants?.unstyled.field??{}},eW={baseStyle:JU,sizes:QU,variants:ZU,defaultProps:Rn.defaultProps},{defineMultiStyleConfig:tW,definePartsStyle:nW}=tr(y9.keys),Ex=ns("popper-bg"),rW=ns("popper-arrow-bg"),bR=ns("popper-arrow-shadow-color"),sW={zIndex:"popover"},iW={[Ex.variable]:"colors.white",bg:Ex.reference,[rW.variable]:Ex.reference,[bR.variable]:"colors.gray.200",_dark:{[Ex.variable]:"colors.gray.700",[bR.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},oW={px:3,py:2,borderBottomWidth:"1px"},aW={px:3,py:2},lW={px:3,py:2,borderTopWidth:"1px"},cW={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},uW=nW({popper:sW,content:iW,header:oW,body:aW,footer:lW,closeButton:cW}),dW=tW({baseStyle:uW}),{defineMultiStyleConfig:hW,definePartsStyle:Mp}=tr(b9.keys),fW=e=>{const{colorScheme:t,theme:n,isIndeterminate:s,hasStripe:i}=e,o=Rt(pR(),pR("1rem","rgba(0,0,0,0.1)"))(e),l=Rt(`${t}.500`,`${t}.200`)(e),u=`linear-gradient(
    to right,
    transparent 0%,
    ${Vs(n,l)} 50%,
    transparent 100%
  )`;return{...!s&&i&&o,...s?{bgImage:u}:{bgColor:l}}},pW={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},mW=e=>({bg:Rt("gray.100","whiteAlpha.300")(e)}),gW=e=>({transitionProperty:"common",transitionDuration:"slow",...fW(e)}),xW=Mp(e=>({label:pW,filledTrack:gW(e),track:mW(e)})),yW={xs:Mp({track:{h:"1"}}),sm:Mp({track:{h:"2"}}),md:Mp({track:{h:"3"}}),lg:Mp({track:{h:"4"}})},bW=hW({sizes:yW,baseStyle:xW,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:vW,definePartsStyle:m0}=tr(v9.keys),jW=e=>{const t=Us(F0.baseStyle,e)?.control;return{...t,borderRadius:"full",_checked:{...t?._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},SW=m0(e=>({label:F0.baseStyle?.(e).label,container:F0.baseStyle?.(e).container,control:jW(e)})),CW={md:m0({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:m0({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:m0({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},wW=vW({baseStyle:SW,sizes:CW,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:EW,definePartsStyle:kW}=tr(j9.keys),kx=Dt("select-bg"),AW={...Rn.baseStyle?.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:kx.reference,[kx.variable]:"colors.white",_dark:{[kx.variable]:"colors.gray.700"},"> option, > optgroup":{bg:kx.reference}},TW={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},MW=kW({field:AW,icon:TW}),Ax={paddingInlineEnd:"8"},RW={lg:{...Rn.sizes?.lg,field:{...Rn.sizes?.lg.field,...Ax}},md:{...Rn.sizes?.md,field:{...Rn.sizes?.md.field,...Ax}},sm:{...Rn.sizes?.sm,field:{...Rn.sizes?.sm.field,...Ax}},xs:{...Rn.sizes?.xs,field:{...Rn.sizes?.xs.field,...Ax},icon:{insetEnd:"1"}}},DW=EW({baseStyle:MW,sizes:RW,variants:Rn.variants,defaultProps:Rn.defaultProps}),a1=Dt("skeleton-start-color"),l1=Dt("skeleton-end-color"),OW={[a1.variable]:"colors.gray.100",[l1.variable]:"colors.gray.400",_dark:{[a1.variable]:"colors.gray.800",[l1.variable]:"colors.gray.600"},background:a1.reference,borderColor:l1.reference,opacity:.7,borderRadius:"sm"},NW={baseStyle:OW},c1=Dt("skip-link-bg"),PW={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[c1.variable]:"colors.white",_dark:{[c1.variable]:"colors.gray.700"},bg:c1.reference}},zW={baseStyle:PW},{defineMultiStyleConfig:IW,definePartsStyle:ib}=tr(S9.keys),Hu=Dt("slider-thumb-size"),bm=Dt("slider-track-size"),uc=Dt("slider-bg"),LW=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...qw({orientation:t,vertical:{h:"100%",px:Xa(Hu.reference).divide(2).toString()},horizontal:{w:"100%",py:Xa(Hu.reference).divide(2).toString()}})}},_W=e=>({...qw({orientation:e.orientation,horizontal:{h:bm.reference},vertical:{w:bm.reference}}),overflow:"hidden",borderRadius:"sm",[uc.variable]:"colors.gray.200",_dark:{[uc.variable]:"colors.whiteAlpha.200"},_disabled:{[uc.variable]:"colors.gray.300",_dark:{[uc.variable]:"colors.whiteAlpha.300"}},bg:uc.reference}),BW=e=>{const{orientation:t}=e;return{...qw({orientation:t,vertical:{left:"50%"},horizontal:{top:"50%"}}),w:Hu.reference,h:Hu.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_active:{"--slider-thumb-scale":"1.15"},_disabled:{bg:"gray.300"}}},$W=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[uc.variable]:`colors.${t}.500`,_dark:{[uc.variable]:`colors.${t}.200`},bg:uc.reference}},FW=ib(e=>({container:LW(e),track:_W(e),thumb:BW(e),filledTrack:$W(e)})),VW=ib({container:{[Hu.variable]:"sizes.4",[bm.variable]:"sizes.1"}}),HW=ib({container:{[Hu.variable]:"sizes.3.5",[bm.variable]:"sizes.1"}}),UW=ib({container:{[Hu.variable]:"sizes.2.5",[bm.variable]:"sizes.0.5"}}),WW={lg:VW,md:HW,sm:UW},qW=IW({baseStyle:FW,sizes:WW,defaultProps:{size:"md",colorScheme:"blue"}}),pu=ns("spinner-size"),GW={width:[pu.reference],height:[pu.reference]},YW={xs:{[pu.variable]:"sizes.3"},sm:{[pu.variable]:"sizes.4"},md:{[pu.variable]:"sizes.6"},lg:{[pu.variable]:"sizes.8"},xl:{[pu.variable]:"sizes.12"}},KW={baseStyle:GW,sizes:YW,defaultProps:{size:"md"}},{defineMultiStyleConfig:XW,definePartsStyle:Pz}=tr(C9.keys),JW={fontWeight:"medium"},QW={opacity:.8,marginBottom:"2"},ZW={verticalAlign:"baseline",fontWeight:"semibold"},eq={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},tq=Pz({container:{},label:JW,helpText:QW,number:ZW,icon:eq}),nq={md:Pz({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},rq=XW({baseStyle:tq,sizes:nq,defaultProps:{size:"md"}}),{defineMultiStyleConfig:sq,definePartsStyle:Rp}=tr(["stepper","step","title","description","indicator","separator","icon","number"]),Qa=Dt("stepper-indicator-size"),gh=Dt("stepper-icon-size"),xh=Dt("stepper-title-font-size"),Dp=Dt("stepper-description-font-size"),hp=Dt("stepper-accent-color"),iq=Rp(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[hp.variable]:`colors.${e}.500`,_dark:{[hp.variable]:`colors.${e}.200`}},title:{fontSize:xh.reference,fontWeight:"medium"},description:{fontSize:Dp.reference,color:"chakra-subtle-text"},number:{fontSize:xh.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:gh.reference,height:gh.reference},indicator:{flexShrink:0,borderRadius:"full",width:Qa.reference,height:Qa.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:hp.reference},"&[data-status=complete]":{bg:hp.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:hp.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Qa.reference} - 8px)`,top:`calc(${Qa.reference} + 4px)`,insetStart:`calc(${Qa.reference} / 2 - 1px)`}}})),oq=sq({baseStyle:iq,sizes:{xs:Rp({stepper:{[Qa.variable]:"sizes.4",[gh.variable]:"sizes.3",[xh.variable]:"fontSizes.xs",[Dp.variable]:"fontSizes.xs"}}),sm:Rp({stepper:{[Qa.variable]:"sizes.6",[gh.variable]:"sizes.4",[xh.variable]:"fontSizes.sm",[Dp.variable]:"fontSizes.xs"}}),md:Rp({stepper:{[Qa.variable]:"sizes.8",[gh.variable]:"sizes.5",[xh.variable]:"fontSizes.md",[Dp.variable]:"fontSizes.sm"}}),lg:Rp({stepper:{[Qa.variable]:"sizes.10",[gh.variable]:"sizes.6",[xh.variable]:"fontSizes.lg",[Dp.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:aq,definePartsStyle:g0}=tr(w9.keys),Jp=ns("switch-track-width"),Ru=ns("switch-track-height"),u1=ns("switch-track-diff"),lq=Ja.subtract(Jp,Ru),JS=ns("switch-thumb-x"),fp=ns("switch-bg"),cq=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[Jp.reference],height:[Ru.reference],transitionProperty:"common",transitionDuration:"fast",[fp.variable]:"colors.gray.300",_dark:{[fp.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[fp.variable]:`colors.${t}.500`,_dark:{[fp.variable]:`colors.${t}.200`}},bg:fp.reference}},uq={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Ru.reference],height:[Ru.reference],_checked:{transform:`translateX(${JS.reference})`}},dq=g0(e=>({container:{[u1.variable]:lq,[JS.variable]:u1.reference,_rtl:{[JS.variable]:Ja(u1).negate().toString()}},track:cq(e),thumb:uq})),hq={sm:g0({container:{[Jp.variable]:"1.375rem",[Ru.variable]:"sizes.3"}}),md:g0({container:{[Jp.variable]:"1.875rem",[Ru.variable]:"sizes.4"}}),lg:g0({container:{[Jp.variable]:"2.875rem",[Ru.variable]:"sizes.6"}})},fq=aq({baseStyle:dq,sizes:hq,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:pq,definePartsStyle:Mh}=tr(E9.keys),mq=Mh({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),V0={"&[data-is-numeric=true]":{textAlign:"end"}},gq=Mh(e=>{const{colorScheme:t}=e;return{th:{color:Rt("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Rt(`${t}.100`,`${t}.700`)(e),...V0},td:{borderBottom:"1px",borderColor:Rt(`${t}.100`,`${t}.700`)(e),...V0},caption:{color:Rt("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),xq=Mh(e=>{const{colorScheme:t}=e;return{th:{color:Rt("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Rt(`${t}.100`,`${t}.700`)(e),...V0},td:{borderBottom:"1px",borderColor:Rt(`${t}.100`,`${t}.700`)(e),...V0},caption:{color:Rt("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Rt(`${t}.100`,`${t}.700`)(e)},td:{background:Rt(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),yq={simple:gq,striped:xq,unstyled:{}},bq={sm:Mh({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Mh({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Mh({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},vq=pq({baseStyle:mq,variants:yq,sizes:bq,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),ri=Dt("tabs-color"),Co=Dt("tabs-bg"),Tx=Dt("tabs-border-color"),{defineMultiStyleConfig:jq,definePartsStyle:ta}=tr(k9.keys),Sq=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},Cq=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},wq=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},Eq={p:4},kq=ta(e=>({root:Sq(e),tab:Cq(e),tablist:wq(e),tabpanel:Eq})),Aq={sm:ta({tab:{py:1,px:4,fontSize:"sm"}}),md:ta({tab:{fontSize:"md",py:2,px:4}}),lg:ta({tab:{fontSize:"lg",py:3,px:4}})},Tq=ta(e=>{const{colorScheme:t,orientation:n}=e,s=n==="vertical",i=s?"borderStart":"borderBottom",o=s?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[ri.variable]:`colors.${t}.600`,_dark:{[ri.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[Co.variable]:"colors.gray.200",_dark:{[Co.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:ri.reference,bg:Co.reference}}}),Mq=ta(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Tx.variable]:"transparent",_selected:{[ri.variable]:`colors.${t}.600`,[Tx.variable]:"colors.white",_dark:{[ri.variable]:`colors.${t}.300`,[Tx.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Tx.reference},color:ri.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Rq=ta(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[Co.variable]:"colors.gray.50",_dark:{[Co.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Co.variable]:"colors.white",[ri.variable]:`colors.${t}.600`,_dark:{[Co.variable]:"colors.gray.800",[ri.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:ri.reference,bg:Co.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Dq=ta(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Vs(n,`${t}.700`),bg:Vs(n,`${t}.100`)}}}}),Oq=ta(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[ri.variable]:"colors.gray.600",_dark:{[ri.variable]:"inherit"},_selected:{[ri.variable]:"colors.white",[Co.variable]:`colors.${t}.600`,_dark:{[ri.variable]:"colors.gray.800",[Co.variable]:`colors.${t}.300`}},color:ri.reference,bg:Co.reference}}}),Nq=ta({}),Pq={line:Tq,enclosed:Mq,"enclosed-colored":Rq,"soft-rounded":Dq,"solid-rounded":Oq,unstyled:Nq},zq=jq({baseStyle:kq,sizes:Aq,variants:Pq,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),{defineMultiStyleConfig:Iq,definePartsStyle:Du}=tr(A9.keys),vR=Dt("tag-bg"),jR=Dt("tag-color"),d1=Dt("tag-shadow"),x0=Dt("tag-min-height"),y0=Dt("tag-min-width"),b0=Dt("tag-font-size"),v0=Dt("tag-padding-inline"),Lq={fontWeight:"medium",lineHeight:1.2,outline:0,[jR.variable]:Lr.color.reference,[vR.variable]:Lr.bg.reference,[d1.variable]:Lr.shadow.reference,color:jR.reference,bg:vR.reference,boxShadow:d1.reference,borderRadius:"md",minH:x0.reference,minW:y0.reference,fontSize:b0.reference,px:v0.reference,_focusVisible:{[d1.variable]:"shadows.outline"}},_q={lineHeight:1.2,overflow:"visible"},Bq={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},$q=Du({container:Lq,label:_q,closeButton:Bq}),Fq={sm:Du({container:{[x0.variable]:"sizes.5",[y0.variable]:"sizes.5",[b0.variable]:"fontSizes.xs",[v0.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Du({container:{[x0.variable]:"sizes.6",[y0.variable]:"sizes.6",[b0.variable]:"fontSizes.sm",[v0.variable]:"space.2"}}),lg:Du({container:{[x0.variable]:"sizes.8",[y0.variable]:"sizes.8",[b0.variable]:"fontSizes.md",[v0.variable]:"space.3"}})},Vq={subtle:Du(e=>({container:Yp.variants?.subtle(e)})),solid:Du(e=>({container:Yp.variants?.solid(e)})),outline:Du(e=>({container:Yp.variants?.outline(e)}))},Hq=Iq({variants:Vq,baseStyle:$q,sizes:Fq,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),Uq={...Rn.baseStyle?.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},Wq={outline:e=>Rn.variants?.outline(e).field??{},flushed:e=>Rn.variants?.flushed(e).field??{},filled:e=>Rn.variants?.filled(e).field??{},unstyled:Rn.variants?.unstyled.field??{}},qq={xs:Rn.sizes?.xs.field??{},sm:Rn.sizes?.sm.field??{},md:Rn.sizes?.md.field??{},lg:Rn.sizes?.lg.field??{}},Gq={baseStyle:Uq,sizes:qq,variants:Wq,defaultProps:{size:"md",variant:"outline"}},Mx=ns("tooltip-bg"),h1=ns("tooltip-fg"),Yq=ns("popper-arrow-bg"),Kq={bg:Mx.reference,color:h1.reference,[Mx.variable]:"colors.gray.700",[h1.variable]:"colors.whiteAlpha.900",_dark:{[Mx.variable]:"colors.gray.300",[h1.variable]:"colors.gray.900"},[Yq.variable]:Mx.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},Xq={baseStyle:Kq},Jq={Accordion:I9,Alert:bH,Avatar:RH,Badge:Yp,Breadcrumb:$H,Button:KH,Checkbox:F0,CloseButton:u7,Code:p7,Container:g7,Divider:j7,Drawer:O7,Editable:B7,Form:W7,FormError:J7,FormLabel:Z7,Heading:nU,Input:Rn,Kbd:hU,Link:pU,List:bU,Menu:RU,Modal:FU,NumberInput:XU,PinInput:eW,Popover:dW,Progress:bW,Radio:wW,Select:DW,Skeleton:NW,SkipLink:zW,Slider:qW,Spinner:KW,Stat:rq,Switch:fq,Table:vq,Tabs:zq,Tag:Hq,Textarea:Gq,Tooltip:Xq,Card:e7,Stepper:oq},Qq={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},Zq={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},eG={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"}},tG={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},nG={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},rG={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},sG={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},iG={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},oG={property:rG,easing:sG,duration:iG},aG={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},lG={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},cG={breakpoints:Zq,zIndices:aG,radii:tG,blur:lG,colors:eG,...Dz,sizes:Ez,shadows:nG,space:wz,borders:Qq,transition:oG},uG={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},dG={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},hG=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function fG(e){return ts(e)?hG.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}const pG="ltr",mG={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},zz={semanticTokens:uG,direction:pG,...cG,components:Jq,styles:dG,config:mG};function gG(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function xG(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var yG=(function(){function e(n){var s=this;this._insertTag=function(i){var o;s.tags.length===0?s.insertionPoint?o=s.insertionPoint.nextSibling:s.prepend?o=s.container.firstChild:o=s.before:o=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(i,o),s.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(xG(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=gG(i);try{o.insertRule(s,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var i;return(i=s.parentNode)==null?void 0:i.removeChild(s)}),this.tags=[],this.ctr=0},e})(),Ms="-ms-",H0="-moz-",Tn="-webkit-",Iz="comm",Xw="rule",Jw="decl",bG="@import",Lz="@keyframes",vG="@layer",jG=Math.abs,ob=String.fromCharCode,SG=Object.assign;function CG(e,t){return vs(e,0)^45?(((t<<2^vs(e,0))<<2^vs(e,1))<<2^vs(e,2))<<2^vs(e,3):0}function _z(e){return e.trim()}function wG(e,t){return(e=t.exec(e))?e[0]:e}function Mn(e,t,n){return e.replace(t,n)}function QS(e,t){return e.indexOf(t)}function vs(e,t){return e.charCodeAt(t)|0}function vm(e,t,n){return e.slice(t,n)}function Xo(e){return e.length}function Qw(e){return e.length}function Rx(e,t){return t.push(e),e}function EG(e,t){return e.map(t).join("")}var ab=1,$h=1,Bz=0,ci=0,Wr=0,of="";function lb(e,t,n,s,i,o,l){return{value:e,root:t,parent:n,type:s,props:i,children:o,line:ab,column:$h,length:l,return:""}}function pp(e,t){return SG(lb("",null,null,"",null,null,0),e,{length:-e.length},t)}function kG(){return Wr}function AG(){return Wr=ci>0?vs(of,--ci):0,$h--,Wr===10&&($h=1,ab--),Wr}function ki(){return Wr=ci<Bz?vs(of,ci++):0,$h++,Wr===10&&($h=1,ab++),Wr}function na(){return vs(of,ci)}function j0(){return ci}function ng(e,t){return vm(of,e,t)}function jm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $z(e){return ab=$h=1,Bz=Xo(of=e),ci=0,[]}function Fz(e){return of="",e}function S0(e){return _z(ng(ci-1,ZS(e===91?e+2:e===40?e+1:e)))}function TG(e){for(;(Wr=na())&&Wr<33;)ki();return jm(e)>2||jm(Wr)>3?"":" "}function MG(e,t){for(;--t&&ki()&&!(Wr<48||Wr>102||Wr>57&&Wr<65||Wr>70&&Wr<97););return ng(e,j0()+(t<6&&na()==32&&ki()==32))}function ZS(e){for(;ki();)switch(Wr){case e:return ci;case 34:case 39:e!==34&&e!==39&&ZS(Wr);break;case 40:e===41&&ZS(e);break;case 92:ki();break}return ci}function RG(e,t){for(;ki()&&e+Wr!==57;)if(e+Wr===84&&na()===47)break;return"/*"+ng(t,ci-1)+"*"+ob(e===47?e:ki())}function DG(e){for(;!jm(na());)ki();return ng(e,ci)}function OG(e){return Fz(C0("",null,null,null,[""],e=$z(e),0,[0],e))}function C0(e,t,n,s,i,o,l,u,d){for(var h=0,p=0,m=l,x=0,y=0,b=0,C=1,S=1,E=1,k=0,A="",T=i,M=o,D=s,$=A;S;)switch(b=k,k=ki()){case 40:if(b!=108&&vs($,m-1)==58){QS($+=Mn(S0(k),"&","&\f"),"&\f")!=-1&&(E=-1);break}case 34:case 39:case 91:$+=S0(k);break;case 9:case 10:case 13:case 32:$+=TG(b);break;case 92:$+=MG(j0()-1,7);continue;case 47:switch(na()){case 42:case 47:Rx(NG(RG(ki(),j0()),t,n),d);break;default:$+="/"}break;case 123*C:u[h++]=Xo($)*E;case 125*C:case 59:case 0:switch(k){case 0:case 125:S=0;case 59+p:E==-1&&($=Mn($,/\f/g,"")),y>0&&Xo($)-m&&Rx(y>32?CR($+";",s,n,m-1):CR(Mn($," ","")+";",s,n,m-2),d);break;case 59:$+=";";default:if(Rx(D=SR($,t,n,h,p,i,u,A,T=[],M=[],m),o),k===123)if(p===0)C0($,t,D,D,T,o,m,u,M);else switch(x===99&&vs($,3)===110?100:x){case 100:case 108:case 109:case 115:C0(e,D,D,s&&Rx(SR(e,D,D,0,0,i,u,A,i,T=[],m),M),i,M,m,u,s?T:M);break;default:C0($,D,D,D,[""],M,0,u,M)}}h=p=y=0,C=E=1,A=$="",m=l;break;case 58:m=1+Xo($),y=b;default:if(C<1){if(k==123)--C;else if(k==125&&C++==0&&AG()==125)continue}switch($+=ob(k),k*C){case 38:E=p>0?1:($+="\f",-1);break;case 44:u[h++]=(Xo($)-1)*E,E=1;break;case 64:na()===45&&($+=S0(ki())),x=na(),p=m=Xo(A=$+=DG(j0())),k++;break;case 45:b===45&&Xo($)==2&&(C=0)}}return o}function SR(e,t,n,s,i,o,l,u,d,h,p){for(var m=i-1,x=i===0?o:[""],y=Qw(x),b=0,C=0,S=0;b<s;++b)for(var E=0,k=vm(e,m+1,m=jG(C=l[b])),A=e;E<y;++E)(A=_z(C>0?x[E]+" "+k:Mn(k,/&\f/g,x[E])))&&(d[S++]=A);return lb(e,t,n,i===0?Xw:u,d,h,p)}function NG(e,t,n){return lb(e,t,n,Iz,ob(kG()),vm(e,2,-2),0)}function CR(e,t,n,s){return lb(e,t,n,Jw,vm(e,0,s),vm(e,s+1,-1),s)}function Rh(e,t){for(var n="",s=Qw(e),i=0;i<s;i++)n+=t(e[i],i,e,t)||"";return n}function PG(e,t,n,s){switch(e.type){case vG:if(e.children.length)break;case bG:case Jw:return e.return=e.return||e.value;case Iz:return"";case Lz:return e.return=e.value+"{"+Rh(e.children,s)+"}";case Xw:e.value=e.props.join(",")}return Xo(n=Rh(e.children,s))?e.return=e.value+"{"+n+"}":""}function zG(e){var t=Qw(e);return function(n,s,i,o){for(var l="",u=0;u<t;u++)l+=e[u](n,s,i,o)||"";return l}}function IG(e){return function(t){t.root||(t=t.return)&&e(t)}}var wR=function(t){var n=new WeakMap;return function(s){if(n.has(s))return n.get(s);var i=t(s);return n.set(s,i),i}};function Vz(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var LG=function(t,n,s){for(var i=0,o=0;i=o,o=na(),i===38&&o===12&&(n[s]=1),!jm(o);)ki();return ng(t,ci)},_G=function(t,n){var s=-1,i=44;do switch(jm(i)){case 0:i===38&&na()===12&&(n[s]=1),t[s]+=LG(ci-1,n,s);break;case 2:t[s]+=S0(i);break;case 4:if(i===44){t[++s]=na()===58?"&\f":"",n[s]=t[s].length;break}default:t[s]+=ob(i)}while(i=ki());return t},BG=function(t,n){return Fz(_G($z(t),n))},ER=new WeakMap,$G=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,s=t.parent,i=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!ER.get(s))&&!i){ER.set(t,!0);for(var o=[],l=BG(n,o),u=s.props,d=0,h=0;d<l.length;d++)for(var p=0;p<u.length;p++,h++)t.props[h]=o[d]?l[d].replace(/&\f/g,u[p]):u[p]+" "+l[d]}}},FG=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Hz(e,t){switch(CG(e,t)){case 5103:return Tn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Tn+e+H0+e+Ms+e+e;case 6828:case 4268:return Tn+e+Ms+e+e;case 6165:return Tn+e+Ms+"flex-"+e+e;case 5187:return Tn+e+Mn(e,/(\w+).+(:[^]+)/,Tn+"box-$1$2"+Ms+"flex-$1$2")+e;case 5443:return Tn+e+Ms+"flex-item-"+Mn(e,/flex-|-self/,"")+e;case 4675:return Tn+e+Ms+"flex-line-pack"+Mn(e,/align-content|flex-|-self/,"")+e;case 5548:return Tn+e+Ms+Mn(e,"shrink","negative")+e;case 5292:return Tn+e+Ms+Mn(e,"basis","preferred-size")+e;case 6060:return Tn+"box-"+Mn(e,"-grow","")+Tn+e+Ms+Mn(e,"grow","positive")+e;case 4554:return Tn+Mn(e,/([^-])(transform)/g,"$1"+Tn+"$2")+e;case 6187:return Mn(Mn(Mn(e,/(zoom-|grab)/,Tn+"$1"),/(image-set)/,Tn+"$1"),e,"")+e;case 5495:case 3959:return Mn(e,/(image-set\([^]*)/,Tn+"$1$`$1");case 4968:return Mn(Mn(e,/(.+:)(flex-)?(.*)/,Tn+"box-pack:$3"+Ms+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tn+e+e;case 4095:case 3583:case 4068:case 2532:return Mn(e,/(.+)-inline(.+)/,Tn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xo(e)-1-t>6)switch(vs(e,t+1)){case 109:if(vs(e,t+4)!==45)break;case 102:return Mn(e,/(.+:)(.+)-([^]+)/,"$1"+Tn+"$2-$3$1"+H0+(vs(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~QS(e,"stretch")?Hz(Mn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(vs(e,t+1)!==115)break;case 6444:switch(vs(e,Xo(e)-3-(~QS(e,"!important")&&10))){case 107:return Mn(e,":",":"+Tn)+e;case 101:return Mn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tn+(vs(e,14)===45?"inline-":"")+"box$3$1"+Tn+"$2$3$1"+Ms+"$2box$3")+e}break;case 5936:switch(vs(e,t+11)){case 114:return Tn+e+Ms+Mn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Tn+e+Ms+Mn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Tn+e+Ms+Mn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Tn+e+Ms+e+e}return e}var VG=function(t,n,s,i){if(t.length>-1&&!t.return)switch(t.type){case Jw:t.return=Hz(t.value,t.length);break;case Lz:return Rh([pp(t,{value:Mn(t.value,"@","@"+Tn)})],i);case Xw:if(t.length)return EG(t.props,function(o){switch(wG(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Rh([pp(t,{props:[Mn(o,/:(read-\w+)/,":"+H0+"$1")]})],i);case"::placeholder":return Rh([pp(t,{props:[Mn(o,/:(plac\w+)/,":"+Tn+"input-$1")]}),pp(t,{props:[Mn(o,/:(plac\w+)/,":"+H0+"$1")]}),pp(t,{props:[Mn(o,/:(plac\w+)/,Ms+"input-$1")]})],i)}return""})}},HG=[VG],UG=function(t){var n=t.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(C){var S=C.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(C),C.setAttribute("data-s",""))})}var i=t.stylisPlugins||HG,o={},l,u=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(C){for(var S=C.getAttribute("data-emotion").split(" "),E=1;E<S.length;E++)o[S[E]]=!0;u.push(C)});var d,h=[$G,FG];{var p,m=[PG,IG(function(C){p.insert(C)})],x=zG(h.concat(i,m)),y=function(S){return Rh(OG(S),x)};d=function(S,E,k,A){p=k,y(S?S+"{"+E.styles+"}":E.styles),A&&(b.inserted[E.name]=!0)}}var b={key:n,sheet:new yG({key:n,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:d};return b.sheet.hydrate(u),b};function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Uu.apply(null,arguments)}var f1={exports:{}},On={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function WG(){if(kR)return On;kR=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,h=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,x=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,b=e?Symbol.for("react.lazy"):60116,C=e?Symbol.for("react.block"):60121,S=e?Symbol.for("react.fundamental"):60117,E=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function A(M){if(typeof M=="object"&&M!==null){var D=M.$$typeof;switch(D){case t:switch(M=M.type,M){case d:case h:case s:case o:case i:case m:return M;default:switch(M=M&&M.$$typeof,M){case u:case p:case b:case y:case l:return M;default:return D}}case n:return D}}}function T(M){return A(M)===h}return On.AsyncMode=d,On.ConcurrentMode=h,On.ContextConsumer=u,On.ContextProvider=l,On.Element=t,On.ForwardRef=p,On.Fragment=s,On.Lazy=b,On.Memo=y,On.Portal=n,On.Profiler=o,On.StrictMode=i,On.Suspense=m,On.isAsyncMode=function(M){return T(M)||A(M)===d},On.isConcurrentMode=T,On.isContextConsumer=function(M){return A(M)===u},On.isContextProvider=function(M){return A(M)===l},On.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},On.isForwardRef=function(M){return A(M)===p},On.isFragment=function(M){return A(M)===s},On.isLazy=function(M){return A(M)===b},On.isMemo=function(M){return A(M)===y},On.isPortal=function(M){return A(M)===n},On.isProfiler=function(M){return A(M)===o},On.isStrictMode=function(M){return A(M)===i},On.isSuspense=function(M){return A(M)===m},On.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===s||M===h||M===o||M===i||M===m||M===x||typeof M=="object"&&M!==null&&(M.$$typeof===b||M.$$typeof===y||M.$$typeof===l||M.$$typeof===u||M.$$typeof===p||M.$$typeof===S||M.$$typeof===E||M.$$typeof===k||M.$$typeof===C)},On.typeOf=A,On}var AR;function qG(){return AR||(AR=1,f1.exports=WG()),f1.exports}var p1,TR;function GG(){if(TR)return p1;TR=1;var e=qG(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=s,o[e.Memo]=i;function l(b){return e.isMemo(b)?i:o[b.$$typeof]||t}var u=Object.defineProperty,d=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,x=Object.prototype;function y(b,C,S){if(typeof C!="string"){if(x){var E=m(C);E&&E!==x&&y(b,E,S)}var k=d(C);h&&(k=k.concat(h(C)));for(var A=l(b),T=l(C),M=0;M<k.length;++M){var D=k[M];if(!n[D]&&!(S&&S[D])&&!(T&&T[D])&&!(A&&A[D])){var $=p(C,D);try{u(b,D,$)}catch{}}}}return b}return p1=y,p1}GG();var YG=!0;function Uz(e,t,n){var s="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(s+=i+" ")}),s}var Zw=function(t,n,s){var i=t.key+"-"+n.name;(s===!1||YG===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},e2=function(t,n,s){Zw(t,n,s);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function KG(e){for(var t=0,n,s=0,i=e.length;i>=4;++s,i-=4)n=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var XG={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},JG=/[A-Z]|^ms/g,QG=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wz=function(t){return t.charCodeAt(1)===45},MR=function(t){return t!=null&&typeof t!="boolean"},m1=Vz(function(e){return Wz(e)?e:e.replace(JG,"-$&").toLowerCase()}),RR=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(QG,function(s,i,o){return Jo={name:i,styles:o,next:Jo},i})}return XG[t]!==1&&!Wz(t)&&typeof n=="number"&&n!==0?n+"px":n};function Sm(e,t,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Jo={name:i.name,styles:i.styles,next:Jo},i.name;var o=n;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)Jo={name:l.name,styles:l.styles,next:Jo},l=l.next;var u=o.styles+";";return u}return ZG(e,t,n)}case"function":{if(e!==void 0){var d=Jo,h=n(e);return Jo=d,Sm(e,t,h)}break}}var p=n;if(t==null)return p;var m=t[p];return m!==void 0?m:p}function ZG(e,t,n){var s="";if(Array.isArray(n))for(var i=0;i<n.length;i++)s+=Sm(e,t,n[i])+";";else for(var o in n){var l=n[o];if(typeof l!="object"){var u=l;t!=null&&t[u]!==void 0?s+=o+"{"+t[u]+"}":MR(u)&&(s+=m1(o)+":"+RR(o,u)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var d=0;d<l.length;d++)MR(l[d])&&(s+=m1(o)+":"+RR(o,l[d])+";");else{var h=Sm(e,t,l);switch(o){case"animation":case"animationName":{s+=m1(o)+":"+h+";";break}default:s+=o+"{"+h+"}"}}}return s}var DR=/label:\s*([^\s;{]+)\s*(;|$)/g,Jo;function cb(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,i="";Jo=void 0;var o=e[0];if(o==null||o.raw===void 0)s=!1,i+=Sm(n,t,o);else{var l=o;i+=l[0]}for(var u=1;u<e.length;u++)if(i+=Sm(n,t,e[u]),s){var d=o;i+=d[u]}DR.lastIndex=0;for(var h="",p;(p=DR.exec(i))!==null;)h+="-"+p[1];var m=KG(i)+h;return{name:m,styles:i,next:Jo}}var eY=function(t){return t()},qz=HM.useInsertionEffect?HM.useInsertionEffect:!1,Gz=qz||eY,OR=qz||j.useLayoutEffect,t2=j.createContext(typeof HTMLElement<"u"?UG({key:"css"}):null);t2.Provider;var tY=function(){return j.useContext(t2)},n2=function(t){return j.forwardRef(function(n,s){var i=j.useContext(t2);return t(n,i,s)})},Fh=j.createContext({}),nY=function(t,n){if(typeof n=="function"){var s=n(t);return s}return Uu({},t,n)},rY=wR(function(e){return wR(function(t){return nY(e,t)})}),sY=function(t){var n=j.useContext(Fh);return t.theme!==n&&(n=rY(n)(t.theme)),j.createElement(Fh.Provider,{value:n},t.children)},r2={}.hasOwnProperty,eC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",iY=function(t,n){var s={};for(var i in n)r2.call(n,i)&&(s[i]=n[i]);return s[eC]=t,s},oY=function(t){var n=t.cache,s=t.serialized,i=t.isStringTag;return Zw(n,s,i),Gz(function(){return e2(n,s,i)}),null},aY=n2(function(e,t,n){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var i=e[eC],o=[s],l="";typeof e.className=="string"?l=Uz(t.registered,o,e.className):e.className!=null&&(l=e.className+" ");var u=cb(o,void 0,j.useContext(Fh));l+=t.key+"-"+u.name;var d={};for(var h in e)r2.call(e,h)&&h!=="css"&&h!==eC&&(d[h]=e[h]);return d.className=l,n&&(d.ref=n),j.createElement(j.Fragment,null,j.createElement(oY,{cache:t,serialized:u,isStringTag:typeof i=="string"}),j.createElement(i,d))}),lY=aY,NR=function(t,n){var s=arguments;if(n==null||!r2.call(n,"css"))return j.createElement.apply(void 0,s);var i=s.length,o=new Array(i);o[0]=lY,o[1]=iY(t,n);for(var l=2;l<i;l++)o[l]=s[l];return j.createElement.apply(null,o)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(NR||(NR={}));var ub=n2(function(e,t){var n=e.styles,s=cb([n],void 0,j.useContext(Fh)),i=j.useRef();return OR(function(){var o=t.key+"-global",l=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,d=document.querySelector('style[data-emotion="'+o+" "+s.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),d!==null&&(u=!0,d.setAttribute("data-emotion",o),l.hydrate([d])),i.current=[l,u],function(){l.flush()}},[t]),OR(function(){var o=i.current,l=o[0],u=o[1];if(u){o[1]=!1;return}if(s.next!==void 0&&e2(t,s.next,!0),l.tags.length){var d=l.tags[l.tags.length-1].nextElementSibling;l.before=d,l.flush()}t.insert("",s,l,!1)},[t,s.name]),null});function cY(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cb(t)}function Oc(){var e=cY.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const s2=j.createContext({});s2.displayName="ColorModeContext";function db(){const e=j.useContext(s2);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function ir(e,t){const{colorMode:n}=db();return n==="dark"?t:e}const Dx={light:"chakra-ui-light",dark:"chakra-ui-dark"};function uY(e={}){const{preventTransition:t=!0,nonce:n}=e,s={setDataset:i=>{const o=t?s.preventTransition():void 0;document.documentElement.dataset.theme=i,document.documentElement.style.colorScheme=i,o?.()},setClassName(i){document.body.classList.add(i?Dx.dark:Dx.light),document.body.classList.remove(i?Dx.light:Dx.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(i){return s.query().matches??i==="dark"?"dark":"light"},addListener(i){const o=s.query(),l=u=>{i(u.matches?"dark":"light")};return typeof o.addListener=="function"?o.addListener(l):o.addEventListener("change",l),()=>{typeof o.removeListener=="function"?o.removeListener(l):o.removeEventListener("change",l)}},preventTransition(){const i=document.createElement("style");return i.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),n!==void 0&&(i.nonce=n),document.head.appendChild(i),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(i)})})}}};return s}const dY="chakra-ui-color-mode";function hY(e){return{ssr:!1,type:"localStorage",get(t){if(!globalThis?.document)return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}const fY=hY(dY),PR=()=>{},pY=n8()?j.useLayoutEffect:j.useEffect;function zR(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}const Yz=function(t){const{value:n,children:s,options:{useSystemColorMode:i,initialColorMode:o,disableTransitionOnChange:l}={},colorModeManager:u=fY}=t,d=tY(),h=o==="dark"?"dark":"light",[p,m]=j.useState(()=>zR(u,h)),[x,y]=j.useState(()=>zR(u)),{getSystemTheme:b,setClassName:C,setDataset:S,addListener:E}=j.useMemo(()=>uY({preventTransition:l,nonce:d?.nonce}),[l,d?.nonce]),k=o==="system"&&!p?x:p,A=j.useCallback(D=>{const $=D==="system"?b():D;m($),C($==="dark"),S($),u.set($)},[u,b,C,S]);pY(()=>{o==="system"&&y(b())},[]),j.useEffect(()=>{const D=u.get();if(D){A(D);return}if(o==="system"){A("system");return}A(h)},[u,h,o,A]);const T=j.useCallback(()=>{A(k==="dark"?"light":"dark")},[k,A]);j.useEffect(()=>{if(i)return E(A)},[i,E,A]);const M=j.useMemo(()=>({colorMode:n??k,toggleColorMode:n?PR:T,setColorMode:n?PR:A,forced:n!==void 0}),[k,T,A,n]);return r.jsx(s2.Provider,{value:M,children:s})};Yz.displayName="ColorModeProvider";const Kz=String.raw,Xz=Kz`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,mY=()=>r.jsx(ub,{styles:Xz}),gY=({scope:e=""})=>r.jsx(ub,{styles:Kz`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${Xz}
    `});function xY(e){const{cssVarsRoot:t,theme:n,children:s}=e,i=j.useMemo(()=>r9(n),[n]);return r.jsxs(sY,{theme:i,children:[r.jsx(yY,{root:t}),s]})}function yY({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return r.jsx(ub,{styles:n=>({[t]:n.__cssVars})})}un({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function bY(e){return un({name:`${e}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${e} />" `})}function vY(){const{colorMode:e}=db();return r.jsx(ub,{styles:t=>{const n=iz(t,"styles.global"),s=ii(n,{theme:t,colorMode:e});return s?vz(s)(t):void 0}})}const[jY,SY]=un({strict:!1,name:"PortalManagerContext"});function Jz(e){const{children:t,zIndex:n}=e;return r.jsx(jY,{value:{zIndex:n},children:t})}Jz.displayName="PortalManager";const i2=j.createContext({getDocument(){return document},getWindow(){return window}});i2.displayName="EnvironmentContext";function CY({defer:e}={}){const[,t]=j.useReducer(n=>n+1,0);return ea(()=>{e&&t()},[e]),j.useContext(i2)}function Qz(e){const{children:t,environment:n,disabled:s}=e,i=j.useRef(null),o=j.useMemo(()=>n||{getDocument:()=>i.current?.ownerDocument??document,getWindow:()=>i.current?.ownerDocument.defaultView??window},[n]),l=!s||!n;return r.jsxs(i2.Provider,{value:o,children:[t,l&&r.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}Qz.displayName="EnvironmentProvider";const wY=e=>{const{children:t,colorModeManager:n,portalZIndex:s,resetScope:i,resetCSS:o=!0,theme:l={},environment:u,cssVarsRoot:d,disableEnvironment:h,disableGlobalStyle:p}=e,m=r.jsx(Qz,{environment:u,disabled:h,children:t});return r.jsx(xY,{theme:l,cssVarsRoot:d,children:r.jsxs(Yz,{colorModeManager:n,options:l.config,children:[o?r.jsx(gY,{scope:i}):r.jsx(mY,{}),!p&&r.jsx(vY,{}),s?r.jsx(Jz,{zIndex:s,children:m}):m]})})},o2=j.createContext({});function a2(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const rg=j.createContext(null),l2=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class EY extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function kY({children:e,isPresent:t}){const n=j.useId(),s=j.useRef(null),i=j.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=j.useContext(l2);return j.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:h}=i.current;if(t||!s.current||!l||!u)return;s.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            top: ${d}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[t]),r.jsx(EY,{isPresent:t,childRef:s,sizeRef:i,children:j.cloneElement(e,{ref:s})})}const AY=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l})=>{const u=a2(TY),d=j.useId(),h=j.useCallback(m=>{u.set(m,!0);for(const x of u.values())if(!x)return;s&&s()},[u,s]),p=j.useMemo(()=>({id:d,initial:t,isPresent:n,custom:i,onExitComplete:h,register:m=>(u.set(m,!1),()=>u.delete(m))}),o?[Math.random(),h]:[n,h]);return j.useMemo(()=>{u.forEach((m,x)=>u.set(x,!1))},[n]),j.useEffect(()=>{!n&&!u.size&&s&&s()},[n]),l==="popLayout"&&(e=r.jsx(kY,{isPresent:n,children:e})),r.jsx(rg.Provider,{value:p,children:e})};function TY(){return new Map}function c2(e=!0){const t=j.useContext(rg);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=t,o=j.useId();j.useEffect(()=>{e&&i(o)},[e]);const l=j.useCallback(()=>e&&s&&s(o),[o,s,e]);return!n&&s?[!1,l]:[!0]}function MY(){return RY(j.useContext(rg))}function RY(e){return e===null?!0:e.isPresent}const Ox=e=>e.key||"";function IR(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const u2=typeof window<"u",Zz=u2?j.useLayoutEffect:j.useEffect,Nc=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1})=>{const[u,d]=c2(l),h=j.useMemo(()=>IR(e),[e]),p=l&&!u?[]:h.map(Ox),m=j.useRef(!0),x=j.useRef(h),y=a2(()=>new Map),[b,C]=j.useState(h),[S,E]=j.useState(h);Zz(()=>{m.current=!1,x.current=h;for(let T=0;T<S.length;T++){const M=Ox(S[T]);p.includes(M)?y.delete(M):y.get(M)!==!0&&y.set(M,!1)}},[S,p.length,p.join("-")]);const k=[];if(h!==b){let T=[...h];for(let M=0;M<S.length;M++){const D=S[M],$=Ox(D);p.includes($)||(T.splice(M,0,D),k.push(D))}o==="wait"&&k.length&&(T=k),E(IR(T)),C(h);return}const{forceRender:A}=j.useContext(o2);return r.jsx(r.Fragment,{children:S.map(T=>{const M=Ox(T),D=l&&!u?!1:h===S||p.includes(M),$=()=>{if(y.has(M))y.set(M,!0);else return;let W=!0;y.forEach(te=>{te||(W=!1)}),W&&(A?.(),E(x.current),l&&d?.(),s&&s())};return r.jsx(AY,{isPresent:D,initial:!m.current||n?void 0:!1,custom:D?void 0:t,presenceAffectsLayout:i,mode:o,onExitComplete:D?void 0:$,children:T},M)})})},Ai=e=>e;let eI=Ai;function d2(e){let t;return()=>(t===void 0&&(t=e()),t)}const Vh=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},al=e=>e*1e3,ll=e=>e/1e3,DY={useManualTiming:!1};function OY(e){let t=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(l)}const d={schedule:(h,p=!1,m=!1)=>{const y=m&&s?t:n;return p&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(l=h,s){i=!0;return}s=!0,[t,n]=[n,t],t.forEach(u),t.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const Nx=["read","resolveKeyframes","update","preRender","render","postRender"],NY=40;function tI(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Nx.reduce((E,k)=>(E[k]=OY(o),E),{}),{read:u,resolveKeyframes:d,update:h,preRender:p,render:m,postRender:x}=l,y=()=>{const E=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(E-i.timestamp,NY),1),i.timestamp=E,i.isProcessing=!0,u.process(i),d.process(i),h.process(i),p.process(i),m.process(i),x.process(i),i.isProcessing=!1,n&&t&&(s=!1,e(y))},b=()=>{n=!0,s=!0,i.isProcessing||e(y)};return{schedule:Nx.reduce((E,k)=>{const A=l[k];return E[k]=(T,M=!1,D=!1)=>(n||b(),A.schedule(T,M,D)),E},{}),cancel:E=>{for(let k=0;k<Nx.length;k++)l[Nx[k]].cancel(E)},state:i,steps:l}}const{schedule:or,cancel:Ec,state:bs,steps:g1}=tI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ai,!0),nI=j.createContext({strict:!1}),LR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hh={};for(const e in LR)Hh[e]={isEnabled:t=>LR[e].some(n=>!!t[n])};function PY(e){for(const t in e)Hh[t]={...Hh[t],...e[t]}}const zY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function U0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||zY.has(e)}let rI=e=>!U0(e);function IY(e){e&&(rI=t=>t.startsWith("on")?!U0(t):e(t))}try{IY(require("@emotion/is-prop-valid").default)}catch{}function LY(e,t,n){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(rI(i)||n===!0&&U0(i)||!t&&!U0(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}function _Y(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const hb=j.createContext({});function Cm(e){return typeof e=="string"||Array.isArray(e)}function fb(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const h2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],f2=["initial",...h2];function pb(e){return fb(e.animate)||f2.some(t=>Cm(e[t]))}function sI(e){return!!(pb(e)||e.variants)}function BY(e,t){if(pb(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Cm(n)?n:void 0,animate:Cm(s)?s:void 0}}return e.inherit!==!1?t:{}}function $Y(e){const{initial:t,animate:n}=BY(e,j.useContext(hb));return j.useMemo(()=>({initial:t,animate:n}),[_R(t),_R(n)])}function _R(e){return Array.isArray(e)?e.join(" "):e}const FY=Symbol.for("motionComponentSymbol");function yh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function VY(e,t,n){return j.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):yh(n)&&(n.current=s))},[t])}const p2=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HY="framerAppearId",iI="data-"+p2(HY),{schedule:m2}=tI(queueMicrotask,!1),oI=j.createContext({});function UY(e,t,n,s,i){var o,l;const{visualElement:u}=j.useContext(hb),d=j.useContext(nI),h=j.useContext(rg),p=j.useContext(l2).reducedMotion,m=j.useRef(null);s=s||d.renderer,!m.current&&s&&(m.current=s(e,{visualState:t,parent:u,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p}));const x=m.current,y=j.useContext(oI);x&&!x.projection&&i&&(x.type==="html"||x.type==="svg")&&WY(m.current,n,i,y);const b=j.useRef(!1);j.useInsertionEffect(()=>{x&&b.current&&x.update(n,h)});const C=n[iI],S=j.useRef(!!C&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,C))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,C)));return Zz(()=>{x&&(b.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),m2.render(x.render),S.current&&x.animationState&&x.animationState.animateChanges())}),j.useEffect(()=>{x&&(!S.current&&x.animationState&&x.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)===null||E===void 0||E.call(window,C)}),S.current=!1))}),x}function WY(e,t,n,s){const{layoutId:i,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:aI(e.parent)),e.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||u&&yh(u),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:d,layoutRoot:h})}function aI(e){if(e)return e.options.allowProjection!==!1?e.projection:aI(e.parent)}function qY({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:i}){var o,l;e&&PY(e);function u(h,p){let m;const x={...j.useContext(l2),...h,layoutId:GY(h)},{isStatic:y}=x,b=$Y(h),C=s(h,y);if(!y&&u2){YY();const S=KY(x);m=S.MeasureLayout,b.visualElement=UY(i,C,x,t,S.ProjectionNode)}return r.jsxs(hb.Provider,{value:b,children:[m&&b.visualElement?r.jsx(m,{visualElement:b.visualElement,...x}):null,n(i,h,VY(C,b.visualElement,p),C,y,b.visualElement)]})}u.displayName=`motion.${typeof i=="string"?i:`create(${(l=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&l!==void 0?l:""})`}`;const d=j.forwardRef(u);return d[FY]=i,d}function GY({layoutId:e}){const t=j.useContext(o2).id;return t&&e!==void 0?t+"-"+e:e}function YY(e,t){j.useContext(nI).strict}function KY(e){const{drag:t,layout:n}=Hh;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const XY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function g2(e){return typeof e!="string"||e.includes("-")?!1:!!(XY.indexOf(e)>-1||/[A-Z]/u.test(e))}function BR(e){const t=[{},{}];return e?.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function x2(e,t,n,s){if(typeof t=="function"){const[i,o]=BR(s);t=t(n!==void 0?n:e.custom,i,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,o]=BR(s);t=t(n!==void 0?n:e.custom,i,o)}return t}const tC=e=>Array.isArray(e),JY=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),QY=e=>tC(e)?e[e.length-1]||0:e,Os=e=>!!(e&&e.getVelocity);function w0(e){const t=Os(e)?e.get():e;return JY(t)?t.toValue():t}function ZY({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},s,i,o){const l={latestValues:eK(s,i,o,e),renderState:t()};return n&&(l.onMount=u=>n({props:s,current:u,...l}),l.onUpdate=u=>n(u)),l}const lI=e=>(t,n)=>{const s=j.useContext(hb),i=j.useContext(rg),o=()=>ZY(e,t,s,i);return n?o():a2(o)};function eK(e,t,n,s){const i={},o=s(e,{});for(const x in o)i[x]=w0(o[x]);let{initial:l,animate:u}=e;const d=pb(e),h=sI(e);t&&h&&!d&&e.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const m=p?u:l;if(m&&typeof m!="boolean"&&!fb(m)){const x=Array.isArray(m)?m:[m];for(let y=0;y<x.length;y++){const b=x2(e,x[y]);if(b){const{transitionEnd:C,transition:S,...E}=b;for(const k in E){let A=E[k];if(Array.isArray(A)){const T=p?A.length-1:0;A=A[T]}A!==null&&(i[k]=A)}for(const k in C)i[k]=C[k]}}}return i}const af=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ad=new Set(af),cI=e=>t=>typeof t=="string"&&t.startsWith(e),uI=cI("--"),tK=cI("var(--"),y2=e=>tK(e)?nK.test(e.split("/*")[0].trim()):!1,nK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dI=(e,t)=>t&&typeof e=="number"?t.transform(e):e,fl=(e,t,n)=>n>t?t:n<e?e:n,lf={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wm={...lf,transform:e=>fl(0,1,e)},Px={...lf,default:1},sg=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ic=sg("deg"),ra=sg("%"),zt=sg("px"),rK=sg("vh"),sK=sg("vw"),$R={...ra,parse:e=>ra.parse(e)/100,transform:e=>ra.transform(e*100)},iK={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,radius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,backgroundPositionX:zt,backgroundPositionY:zt},oK={rotate:ic,rotateX:ic,rotateY:ic,rotateZ:ic,scale:Px,scaleX:Px,scaleY:Px,scaleZ:Px,skew:ic,skewX:ic,skewY:ic,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:wm,originX:$R,originY:$R,originZ:zt},FR={...lf,transform:Math.round},b2={...iK,...oK,zIndex:FR,size:zt,fillOpacity:wm,strokeOpacity:wm,numOctaves:FR},aK={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lK=af.length;function cK(e,t,n){let s="",i=!0;for(let o=0;o<lK;o++){const l=af[o],u=e[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const h=dI(u,b2[l]);if(!d){i=!1;const p=aK[l]||l;s+=`${p}(${h}) `}n&&(t[l]=h)}}return s=s.trim(),n?s=n(t,i?"":s):i&&(s="none"),s}function v2(e,t,n){const{style:s,vars:i,transformOrigin:o}=e;let l=!1,u=!1;for(const d in t){const h=t[d];if(ad.has(d)){l=!0;continue}else if(uI(d)){i[d]=h;continue}else{const p=dI(h,b2[d]);d.startsWith("origin")?(u=!0,o[d]=p):s[d]=p}}if(t.transform||(l||n?s.transform=cK(t,e.transform,n):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:h="50%",originZ:p=0}=o;s.transformOrigin=`${d} ${h} ${p}`}}const uK={offset:"stroke-dashoffset",array:"stroke-dasharray"},dK={offset:"strokeDashoffset",array:"strokeDasharray"};function hK(e,t,n=1,s=0,i=!0){e.pathLength=1;const o=i?uK:dK;e[o.offset]=zt.transform(-s);const l=zt.transform(t),u=zt.transform(n);e[o.array]=`${l} ${u}`}function VR(e,t,n){return typeof e=="string"?e:zt.transform(t+n*e)}function fK(e,t,n){const s=VR(t,e.x,e.width),i=VR(n,e.y,e.height);return`${s} ${i}`}function j2(e,{attrX:t,attrY:n,attrScale:s,originX:i,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:d=0,...h},p,m){if(v2(e,h,m),p){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:y,dimensions:b}=e;x.transform&&(b&&(y.transform=x.transform),delete x.transform),b&&(i!==void 0||o!==void 0||y.transform)&&(y.transformOrigin=fK(b,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(x.x=t),n!==void 0&&(x.y=n),s!==void 0&&(x.scale=s),l!==void 0&&hK(x,l,u,d,!1)}const S2=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),hI=()=>({...S2(),attrs:{}}),C2=e=>typeof e=="string"&&e.toLowerCase()==="svg";function fI(e,{style:t,vars:n},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const o in n)e.style.setProperty(o,n[o])}const pI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mI(e,t,n,s){fI(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(pI.has(i)?i:p2(i),t.attrs[i])}const W0={};function pK(e){Object.assign(W0,e)}function gI(e,{layout:t,layoutId:n}){return ad.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!W0[e]||e==="opacity")}function w2(e,t,n){var s;const{style:i}=e,o={};for(const l in i)(Os(i[l])||t.style&&Os(t.style[l])||gI(l,e)||((s=n?.getValue(l))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[l]=i[l]);return o}function xI(e,t,n){const s=w2(e,t,n);for(const i in e)if(Os(e[i])||Os(t[i])){const o=af.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[o]=e[i]}return s}function mK(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const HR=["x","y","width","height","cx","cy","r"],gK={useVisualState:lI({scrapeMotionValuesFromProps:xI,createRenderState:hI,onUpdate:({props:e,prevProps:t,current:n,renderState:s,latestValues:i})=>{if(!n)return;let o=!!e.drag;if(!o){for(const u in i)if(ad.has(u)){o=!0;break}}if(!o)return;let l=!t;if(t)for(let u=0;u<HR.length;u++){const d=HR[u];e[d]!==t[d]&&(l=!0)}l&&or.read(()=>{mK(n,s),or.render(()=>{j2(s,i,C2(n.tagName),e.transformTemplate),mI(n,s)})})}})},xK={useVisualState:lI({scrapeMotionValuesFromProps:w2,createRenderState:S2})};function yI(e,t,n){for(const s in t)!Os(t[s])&&!gI(s,n)&&(e[s]=t[s])}function yK({transformTemplate:e},t){return j.useMemo(()=>{const n=S2();return v2(n,t,e),Object.assign({},n.vars,n.style)},[t])}function bK(e,t){const n=e.style||{},s={};return yI(s,n,e),Object.assign(s,yK(e,t)),s}function vK(e,t){const n={},s=bK(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}function jK(e,t,n,s){const i=j.useMemo(()=>{const o=hI();return j2(o,t,C2(s),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};yI(o,e.style,e),i.style={...o,...i.style}}return i}function SK(e=!1){return(n,s,i,{latestValues:o},l)=>{const d=(g2(n)?jK:vK)(s,o,l,n),h=LY(s,typeof n=="string",e),p=n!==j.Fragment?{...h,...d,ref:i}:{},{children:m}=s,x=j.useMemo(()=>Os(m)?m.get():m,[m]);return j.createElement(n,{...p,children:x})}}function CK(e,t){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...g2(s)?gK:xK,preloadedFeatures:e,useRender:SK(i),createVisualElement:t,Component:s};return qY(l)}}function bI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function mb(e,t,n){const s=e.getProps();return x2(s,t,n!==void 0?n:s.custom,e)}const wK=d2(()=>window.ScrollTimeline!==void 0);class EK{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(i=>{if(wK()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{s.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class kK extends EK{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function E2(e,t){return e?e[t]||e.default||e:void 0}const nC=2e4;function vI(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<nC;)t+=n,s=e.next(t);return t>=nC?1/0:t}function k2(e){return typeof e=="function"}function UR(e,t){e.timeline=t,e.onfinish=null}const A2=e=>Array.isArray(e)&&typeof e[0]=="number",AK={linearEasing:void 0};function TK(e,t){const n=d2(e);return()=>{var s;return(s=AK[t])!==null&&s!==void 0?s:n()}}const q0=TK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jI=(e,t,n=10)=>{let s="";const i=Math.max(Math.round(t/n),2);for(let o=0;o<i;o++)s+=e(Vh(0,i-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function SI(e){return!!(typeof e=="function"&&q0()||!e||typeof e=="string"&&(e in rC||q0())||A2(e)||Array.isArray(e)&&e.every(SI))}const Op=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,rC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Op([0,.65,.55,1]),circOut:Op([.55,0,1,.45]),backIn:Op([.31,.01,.66,-.59]),backOut:Op([.33,1.53,.69,.99])};function CI(e,t){if(e)return typeof e=="function"&&q0()?jI(e,t):A2(e)?Op(e):Array.isArray(e)?e.map(n=>CI(n,t)||rC.easeOut):rC[e]}const So={x:!1,y:!1};function wI(){return So.x||So.y}function MK(e,t,n){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const o=(s=void 0)!==null&&s!==void 0?s:i.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}function EI(e,t){const n=MK(e),s=new AbortController,i={passive:!0,...t,signal:s.signal};return[n,i,()=>s.abort()]}function WR(e){return t=>{t.pointerType==="touch"||wI()||e(t)}}function RK(e,t,n={}){const[s,i,o]=EI(e,n),l=WR(u=>{const{target:d}=u,h=t(u);if(typeof h!="function"||!d)return;const p=WR(m=>{h(m),d.removeEventListener("pointerleave",p)});d.addEventListener("pointerleave",p,i)});return s.forEach(u=>{u.addEventListener("pointerenter",l,i)}),o}const kI=(e,t)=>t?e===t?!0:kI(e,t.parentElement):!1,T2=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,DK=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OK(e){return DK.has(e.tagName)||e.tabIndex!==-1}const Np=new WeakSet;function qR(e){return t=>{t.key==="Enter"&&e(t)}}function x1(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const NK=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=qR(()=>{if(Np.has(n))return;x1(n,"down");const i=qR(()=>{x1(n,"up")}),o=()=>x1(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function GR(e){return T2(e)&&!wI()}function PK(e,t,n={}){const[s,i,o]=EI(e,n),l=u=>{const d=u.currentTarget;if(!GR(u)||Np.has(d))return;Np.add(d);const h=t(u),p=(y,b)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),!(!GR(y)||!Np.has(d))&&(Np.delete(d),typeof h=="function"&&h(y,{success:b}))},m=y=>{p(y,n.useGlobalTarget||kI(d,y.target))},x=y=>{p(y,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",x,i)};return s.forEach(u=>{!OK(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,i),u.addEventListener("focus",h=>NK(h,i),i)}),o}function zK(e){return e==="x"||e==="y"?So[e]?null:(So[e]=!0,()=>{So[e]=!1}):So.x||So.y?null:(So.x=So.y=!0,()=>{So.x=So.y=!1})}const AI=new Set(["width","height","top","left","right","bottom",...af]);let E0;function IK(){E0=void 0}const sa={now:()=>(E0===void 0&&sa.set(bs.isProcessing||DY.useManualTiming?bs.timestamp:performance.now()),E0),set:e=>{E0=e,queueMicrotask(IK)}};function M2(e,t){e.indexOf(t)===-1&&e.push(t)}function R2(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class D2{constructor(){this.subscriptions=[]}add(t){return M2(this.subscriptions,t),()=>R2(this.subscriptions,t)}notify(t,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,s);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function TI(e,t){return t?e*(1e3/t):0}const YR=30,LK=e=>!isNaN(parseFloat(e));class _K{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const o=sa.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=sa.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=LK(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new D2);const s=this.events[t].add(n);return t==="change"?()=>{s(),or.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=sa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>YR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,YR);return TI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Em(e,t){return new _K(e,t)}function BK(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Em(n))}function $K(e,t){const n=mb(e,t);let{transitionEnd:s={},transition:i={},...o}=n||{};o={...o,...s};for(const l in o){const u=QY(o[l]);BK(e,l,u)}}function FK(e){return!!(Os(e)&&e.add)}function sC(e,t){const n=e.getValue("willChange");if(FK(n))return n.add(t)}function MI(e){return e.props[iI]}const RI=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,VK=1e-7,HK=12;function UK(e,t,n,s,i){let o,l,u=0;do l=t+(n-t)/2,o=RI(l,s,i)-e,o>0?n=l:t=l;while(Math.abs(o)>VK&&++u<HK);return l}function ig(e,t,n,s){if(e===t&&n===s)return Ai;const i=o=>UK(o,0,1,e,n);return o=>o===0||o===1?o:RI(i(o),t,s)}const DI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,OI=e=>t=>1-e(1-t),NI=ig(.33,1.53,.69,.99),O2=OI(NI),PI=DI(O2),zI=e=>(e*=2)<1?.5*O2(e):.5*(2-Math.pow(2,-10*(e-1))),N2=e=>1-Math.sin(Math.acos(e)),II=OI(N2),LI=DI(N2),_I=e=>/^0[^.\s]+$/u.test(e);function WK(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||_I(e):!0}const Qp=e=>Math.round(e*1e5)/1e5,P2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qK(e){return e==null}const GK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,z2=(e,t)=>n=>!!(typeof n=="string"&&GK.test(n)&&n.startsWith(e)||t&&!qK(n)&&Object.prototype.hasOwnProperty.call(n,t)),BI=(e,t,n)=>s=>{if(typeof s!="string")return s;const[i,o,l,u]=s.match(P2);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},YK=e=>fl(0,255,e),y1={...lf,transform:e=>Math.round(YK(e))},bu={test:z2("rgb","red"),parse:BI("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+y1.transform(e)+", "+y1.transform(t)+", "+y1.transform(n)+", "+Qp(wm.transform(s))+")"};function KK(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const iC={test:z2("#"),parse:KK,transform:bu.transform},bh={test:z2("hsl","hue"),parse:BI("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+ra.transform(Qp(t))+", "+ra.transform(Qp(n))+", "+Qp(wm.transform(s))+")"},Rs={test:e=>bu.test(e)||iC.test(e)||bh.test(e),parse:e=>bu.test(e)?bu.parse(e):bh.test(e)?bh.parse(e):iC.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?bu.transform(e):bh.transform(e)},XK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function JK(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(P2))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(XK))===null||n===void 0?void 0:n.length)||0)>0}const $I="number",FI="color",QK="var",ZK="var(",KR="${}",eX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function km(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},i=[];let o=0;const u=t.replace(eX,d=>(Rs.test(d)?(s.color.push(o),i.push(FI),n.push(Rs.parse(d))):d.startsWith(ZK)?(s.var.push(o),i.push(QK),n.push(d)):(s.number.push(o),i.push($I),n.push(parseFloat(d))),++o,KR)).split(KR);return{values:n,split:u,indexes:s,types:i}}function VI(e){return km(e).values}function HI(e){const{split:t,types:n}=km(e),s=t.length;return i=>{let o="";for(let l=0;l<s;l++)if(o+=t[l],i[l]!==void 0){const u=n[l];u===$I?o+=Qp(i[l]):u===FI?o+=Rs.transform(i[l]):o+=i[l]}return o}}const tX=e=>typeof e=="number"?0:e;function nX(e){const t=VI(e);return HI(e)(t.map(tX))}const kc={test:JK,parse:VI,createTransformer:HI,getAnimatableNone:nX},rX=new Set(["brightness","contrast","saturate","opacity"]);function sX(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(P2)||[];if(!s)return e;const i=n.replace(s,"");let o=rX.has(t)?1:0;return s!==n&&(o*=100),t+"("+o+i+")"}const iX=/\b([a-z-]*)\(.*?\)/gu,oC={...kc,getAnimatableNone:e=>{const t=e.match(iX);return t?t.map(sX).join(" "):e}},oX={...b2,color:Rs,backgroundColor:Rs,outlineColor:Rs,fill:Rs,stroke:Rs,borderColor:Rs,borderTopColor:Rs,borderRightColor:Rs,borderBottomColor:Rs,borderLeftColor:Rs,filter:oC,WebkitFilter:oC},I2=e=>oX[e];function UI(e,t){let n=I2(e);return n!==oC&&(n=kc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const aX=new Set(["auto","none","0"]);function lX(e,t,n){let s=0,i;for(;s<e.length&&!i;){const o=e[s];typeof o=="string"&&!aX.has(o)&&km(o).values.length&&(i=e[s]),s++}if(i&&n)for(const o of t)e[o]=UI(n,i)}const XR=e=>e===lf||e===zt,JR=(e,t)=>parseFloat(e.split(", ")[t]),QR=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return JR(i[1],t);{const o=s.match(/^matrix\((.+)\)$/u);return o?JR(o[1],e):0}},cX=new Set(["x","y","z"]),uX=af.filter(e=>!cX.has(e));function dX(e){const t=[];return uX.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Uh={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:QR(4,13),y:QR(5,14)};Uh.translateX=Uh.x;Uh.translateY=Uh.y;const Ou=new Set;let aC=!1,lC=!1;function WI(){if(lC){const e=Array.from(Ou).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const i=dX(s);i.length&&(n.set(s,i),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([o,l])=>{var u;(u=s.getValue(o))===null||u===void 0||u.set(l)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}lC=!1,aC=!1,Ou.forEach(e=>e.complete()),Ou.clear()}function qI(){Ou.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lC=!0)})}function hX(){qI(),WI()}class L2{constructor(t,n,s,i,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ou.add(this),aC||(aC=!0,or.read(qI),or.resolveKeyframes(WI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:i}=this;for(let o=0;o<t.length;o++)if(t[o]===null)if(o===0){const l=i?.get(),u=t[t.length-1];if(l!==void 0)t[0]=l;else if(s&&n){const d=s.readValue(n,u);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=u),i&&l===void 0&&i.set(t[0])}else t[o]=t[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ou.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ou.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const GI=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),fX=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pX(e){const t=fX.exec(e);if(!t)return[,];const[,n,s,i]=t;return[`--${n??s}`,i]}function YI(e,t,n=1){const[s,i]=pX(e);if(!s)return;const o=window.getComputedStyle(t).getPropertyValue(s);if(o){const l=o.trim();return GI(l)?parseFloat(l):l}return y2(i)?YI(i,t,n+1):i}const KI=e=>t=>t.test(e),mX={test:e=>e==="auto",parse:e=>e},XI=[lf,zt,ra,ic,sK,rK,mX],ZR=e=>XI.find(KI(e));class JI extends L2{constructor(t,n,s,i,o){super(t,n,s,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),y2(h))){const p=YI(h,n.current);p!==void 0&&(t[d]=p),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!AI.has(s)||t.length!==2)return;const[i,o]=t,l=ZR(i),u=ZR(o);if(l!==u)if(XR(l)&&XR(u))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let i=0;i<t.length;i++)WK(t[i])&&s.push(i);s.length&&lX(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Uh[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(s);o&&o.jump(this.measuredOrigin,!1);const l=i.length-1,u=i[l];i[l]=Uh[s](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([d,h])=>{n.getValue(d).set(h)}),this.resolveNoneKeyframes()}}const eD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(kc.test(e)||e==="0")&&!e.startsWith("url("));function gX(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function xX(e,t,n,s){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],l=eD(i,t),u=eD(o,t);return!l||!u?!1:gX(e)||(n==="spring"||k2(n))&&s}const yX=e=>e!==null;function gb(e,{repeat:t,repeatType:n="loop"},s){const i=e.filter(yX),o=t&&n!=="loop"&&t%2===1?0:i.length-1;return!o||s===void 0?i[o]:s}const bX=40;class QI{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=sa.now(),this.options={autoplay:t,delay:n,type:s,repeat:i,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>bX?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&hX(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=sa.now(),this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:o,delay:l,onComplete:u,onUpdate:d,isGenerator:h}=this.options;if(!h&&!xX(t,s,i,o))if(l)this.options.duration=0;else{d&&d(gb(t,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const p=this.initPlayback(t,n);p!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const gr=(e,t,n)=>e+(t-e)*n;function b1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function vX({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let i=0,o=0,l=0;if(!t)i=o=l=n;else{const u=n<.5?n*(1+t):n+t-n*t,d=2*n-u;i=b1(d,u,e+1/3),o=b1(d,u,e),l=b1(d,u,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}function G0(e,t){return n=>n>0?t:e}const v1=(e,t,n)=>{const s=e*e,i=n*(t*t-s)+s;return i<0?0:Math.sqrt(i)},jX=[iC,bu,bh],SX=e=>jX.find(t=>t.test(e));function tD(e){const t=SX(e);if(!t)return!1;let n=t.parse(e);return t===bh&&(n=vX(n)),n}const nD=(e,t)=>{const n=tD(e),s=tD(t);if(!n||!s)return G0(e,t);const i={...n};return o=>(i.red=v1(n.red,s.red,o),i.green=v1(n.green,s.green,o),i.blue=v1(n.blue,s.blue,o),i.alpha=gr(n.alpha,s.alpha,o),bu.transform(i))},CX=(e,t)=>n=>t(e(n)),og=(...e)=>e.reduce(CX),cC=new Set(["none","hidden"]);function wX(e,t){return cC.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function EX(e,t){return n=>gr(e,t,n)}function _2(e){return typeof e=="number"?EX:typeof e=="string"?y2(e)?G0:Rs.test(e)?nD:TX:Array.isArray(e)?ZI:typeof e=="object"?Rs.test(e)?nD:kX:G0}function ZI(e,t){const n=[...e],s=n.length,i=e.map((o,l)=>_2(o)(o,t[l]));return o=>{for(let l=0;l<s;l++)n[l]=i[l](o);return n}}function kX(e,t){const n={...e,...t},s={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(s[i]=_2(e[i])(e[i],t[i]));return i=>{for(const o in s)n[o]=s[o](i);return n}}function AX(e,t){var n;const s=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const l=t.types[o],u=e.indexes[l][i[l]],d=(n=e.values[u])!==null&&n!==void 0?n:0;s[o]=d,i[l]++}return s}const TX=(e,t)=>{const n=kc.createTransformer(t),s=km(e),i=km(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?cC.has(e)&&!i.values.length||cC.has(t)&&!s.values.length?wX(e,t):og(ZI(AX(s,i),i.values),n):G0(e,t)};function e3(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?gr(e,t,n):_2(e)(e,t)}const MX=5;function t3(e,t,n){const s=Math.max(t-MX,0);return TI(n-e(s),t-s)}const Ar={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},j1=.001;function RX({duration:e=Ar.duration,bounce:t=Ar.bounce,velocity:n=Ar.velocity,mass:s=Ar.mass}){let i,o,l=1-t;l=fl(Ar.minDamping,Ar.maxDamping,l),e=fl(Ar.minDuration,Ar.maxDuration,ll(e)),l<1?(i=h=>{const p=h*l,m=p*e,x=p-n,y=uC(h,l),b=Math.exp(-m);return j1-x/y*b},o=h=>{const m=h*l*e,x=m*n+n,y=Math.pow(l,2)*Math.pow(h,2)*e,b=Math.exp(-m),C=uC(Math.pow(h,2),l);return(-i(h)+j1>0?-1:1)*((x-y)*b)/C}):(i=h=>{const p=Math.exp(-h*e),m=(h-n)*e+1;return-j1+p*m},o=h=>{const p=Math.exp(-h*e),m=(n-h)*(e*e);return p*m});const u=5/e,d=OX(i,o,u);if(e=al(e),isNaN(d))return{stiffness:Ar.stiffness,damping:Ar.damping,duration:e};{const h=Math.pow(d,2)*s;return{stiffness:h,damping:l*2*Math.sqrt(s*h),duration:e}}}const DX=12;function OX(e,t,n){let s=n;for(let i=1;i<DX;i++)s=s-e(s)/t(s);return s}function uC(e,t){return e*Math.sqrt(1-t*t)}const NX=["duration","bounce"],PX=["stiffness","damping","mass"];function rD(e,t){return t.some(n=>e[n]!==void 0)}function zX(e){let t={velocity:Ar.velocity,stiffness:Ar.stiffness,damping:Ar.damping,mass:Ar.mass,isResolvedFromDuration:!1,...e};if(!rD(e,PX)&&rD(e,NX))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,o=2*fl(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Ar.mass,stiffness:i,damping:o}}else{const n=RX(e);t={...t,...n,mass:Ar.mass},t.isResolvedFromDuration=!0}return t}function n3(e=Ar.visualDuration,t=Ar.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:i}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:h,mass:p,duration:m,velocity:x,isResolvedFromDuration:y}=zX({...n,velocity:-ll(n.velocity||0)}),b=x||0,C=h/(2*Math.sqrt(d*p)),S=l-o,E=ll(Math.sqrt(d/p)),k=Math.abs(S)<5;s||(s=k?Ar.restSpeed.granular:Ar.restSpeed.default),i||(i=k?Ar.restDelta.granular:Ar.restDelta.default);let A;if(C<1){const M=uC(E,C);A=D=>{const $=Math.exp(-C*E*D);return l-$*((b+C*E*S)/M*Math.sin(M*D)+S*Math.cos(M*D))}}else if(C===1)A=M=>l-Math.exp(-E*M)*(S+(b+E*S)*M);else{const M=E*Math.sqrt(C*C-1);A=D=>{const $=Math.exp(-C*E*D),W=Math.min(M*D,300);return l-$*((b+C*E*S)*Math.sinh(W)+M*S*Math.cosh(W))/M}}const T={calculatedDuration:y&&m||null,next:M=>{const D=A(M);if(y)u.done=M>=m;else{let $=0;C<1&&($=M===0?al(b):t3(A,M,D));const W=Math.abs($)<=s,te=Math.abs(l-D)<=i;u.done=W&&te}return u.value=u.done?l:D,u},toString:()=>{const M=Math.min(vI(T),nC),D=jI($=>T.next(M*$).value,M,30);return M+"ms "+D}};return T}function sD({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:h=.5,restSpeed:p}){const m=e[0],x={done:!1,value:m},y=W=>u!==void 0&&W<u||d!==void 0&&W>d,b=W=>u===void 0?d:d===void 0||Math.abs(u-W)<Math.abs(d-W)?u:d;let C=n*t;const S=m+C,E=l===void 0?S:l(S);E!==S&&(C=E-m);const k=W=>-C*Math.exp(-W/s),A=W=>E+k(W),T=W=>{const te=k(W),re=A(W);x.done=Math.abs(te)<=h,x.value=x.done?E:re};let M,D;const $=W=>{y(x.value)&&(M=W,D=n3({keyframes:[x.value,b(x.value)],velocity:t3(A,W,x.value),damping:i,stiffness:o,restDelta:h,restSpeed:p}))};return $(0),{calculatedDuration:null,next:W=>{let te=!1;return!D&&M===void 0&&(te=!0,T(W),$(W)),M!==void 0&&W>=M?D.next(W-M):(!te&&T(W),x)}}}const IX=ig(.42,0,1,1),LX=ig(0,0,.58,1),r3=ig(.42,0,.58,1),_X=e=>Array.isArray(e)&&typeof e[0]!="number",BX={linear:Ai,easeIn:IX,easeInOut:r3,easeOut:LX,circIn:N2,circInOut:LI,circOut:II,backIn:O2,backInOut:PI,backOut:NI,anticipate:zI},iD=e=>{if(A2(e)){eI(e.length===4);const[t,n,s,i]=e;return ig(t,n,s,i)}else if(typeof e=="string")return BX[e];return e};function $X(e,t,n){const s=[],i=n||e3,o=e.length-1;for(let l=0;l<o;l++){let u=i(e[l],e[l+1]);if(t){const d=Array.isArray(t)?t[l]||Ai:t;u=og(d,u)}s.push(u)}return s}function FX(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const o=e.length;if(eI(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const l=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const u=$X(t,s,i),d=u.length,h=p=>{if(l&&p<e[0])return t[0];let m=0;if(d>1)for(;m<e.length-2&&!(p<e[m+1]);m++);const x=Vh(e[m],e[m+1],p);return u[m](x)};return n?p=>h(fl(e[0],e[o-1],p)):h}function VX(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=Vh(0,t,s);e.push(gr(n,1,i))}}function HX(e){const t=[0];return VX(t,e.length-1),t}function UX(e,t){return e.map(n=>n*t)}function WX(e,t){return e.map(()=>t||r3).splice(0,e.length-1)}function Y0({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=_X(s)?s.map(iD):iD(s),o={done:!1,value:t[0]},l=UX(n&&n.length===t.length?n:HX(t),e),u=FX(l,t,{ease:Array.isArray(i)?i:WX(t,i)});return{calculatedDuration:e,next:d=>(o.value=u(d),o.done=d>=e,o)}}const qX=e=>{const t=({timestamp:n})=>e(n);return{start:()=>or.update(t,!0),stop:()=>Ec(t),now:()=>bs.isProcessing?bs.timestamp:sa.now()}},GX={decay:sD,inertia:sD,tween:Y0,keyframes:Y0,spring:n3},YX=e=>e/100;class B2 extends QI{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:s,element:i,keyframes:o}=this.options,l=i?.KeyframeResolver||L2,u=(d,h)=>this.onKeyframesResolved(d,h);this.resolver=new l(o,u,n,s,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=this.options,u=k2(n)?n:GX[n]||Y0;let d,h;u!==Y0&&typeof t[0]!="number"&&(d=og(YX,e3(t[0],t[1])),t=[0,100]);const p=u({...this.options,keyframes:t});o==="mirror"&&(h=u({...this.options,keyframes:[...t].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=vI(p));const{calculatedDuration:m}=p,x=m+i,y=x*(s+1)-i;return{generator:p,mirroredGenerator:h,mapPercentToKeyframes:d,calculatedDuration:m,resolvedDuration:x,totalDuration:y}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:W}=this.options;return{done:!0,value:W[W.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:d,calculatedDuration:h,totalDuration:p,resolvedDuration:m}=s;if(this.startTime===null)return o.next(0);const{delay:x,repeat:y,repeatType:b,repeatDelay:C,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-p/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const E=this.currentTime-x*(this.speed>=0?1:-1),k=this.speed>=0?E<0:E>p;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let A=this.currentTime,T=o;if(y){const W=Math.min(this.currentTime,p)/m;let te=Math.floor(W),re=W%1;!re&&W>=1&&(re=1),re===1&&te--,te=Math.min(te,y+1),!!(te%2)&&(b==="reverse"?(re=1-re,C&&(re-=C/m)):b==="mirror"&&(T=l)),A=fl(0,1,re)*m}const M=k?{done:!1,value:d[0]}:T.next(A);u&&(M.value=u(M.value));let{done:D}=M;!k&&h!==null&&(D=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return $&&i!==void 0&&(M.value=gb(d,this.options,i)),S&&S(M.value),$&&this.finish(),M}get duration(){const{resolved:t}=this;return t?ll(t.calculatedDuration):0}get time(){return ll(this.currentTime)}set time(t){t=al(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ll(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=qX,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const KX=new Set(["opacity","clipPath","filter","transform"]);function XX(e,t,n,{delay:s=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:d}={}){const h={[t]:n};d&&(h.offset=d);const p=CI(u,i);return Array.isArray(p)&&(h.easing=p),e.animate(h,{delay:s,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const JX=d2(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),K0=10,QX=2e4;function ZX(e){return k2(e.type)||e.type==="spring"||!SI(e.ease)}function eJ(e,t){const n=new B2({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const i=[];let o=0;for(;!s.done&&o<QX;)s=n.sample(o),i.push(s.value),o+=K0;return{times:void 0,keyframes:i,duration:o-K0,ease:"linear"}}const s3={anticipate:zI,backInOut:PI,circInOut:LI};function tJ(e){return e in s3}class oD extends QI{constructor(t){super(t);const{name:n,motionValue:s,element:i,keyframes:o}=this.options;this.resolver=new JI(o,(l,u)=>this.onKeyframesResolved(l,u),n,s,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:s=300,times:i,ease:o,type:l,motionValue:u,name:d,startTime:h}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&q0()&&tJ(o)&&(o=s3[o]),ZX(this.options)){const{onComplete:m,onUpdate:x,motionValue:y,element:b,...C}=this.options,S=eJ(t,C);t=S.keyframes,t.length===1&&(t[1]=t[0]),s=S.duration,i=S.times,o=S.ease,l="keyframes"}const p=XX(u.owner.current,d,t,{...this.options,duration:s,times:i,ease:o});return p.startTime=h??this.calcStartTime(),this.pendingTimeline?(UR(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:m}=this.options;u.set(gb(t,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:s,times:i,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return ll(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return ll(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=al(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Ai;const{animation:s}=n;UR(s,t)}return Ai}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:i,type:o,ease:l,times:u}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:p,onComplete:m,element:x,...y}=this.options,b=new B2({...y,keyframes:s,duration:i,type:o,ease:l,times:u,isGenerator:!0}),C=al(this.time);h.setWithVelocity(b.sample(C-K0).value,b.sample(C).value,K0)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:i,repeatType:o,damping:l,type:u}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=n.owner.getProps();return JX()&&s&&KX.has(s)&&!d&&!h&&!i&&o!=="mirror"&&l!==0&&u!=="inertia"}}const nJ={type:"spring",stiffness:500,damping:25,restSpeed:10},rJ=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),sJ={type:"keyframes",duration:.8},iJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oJ=(e,{keyframes:t})=>t.length>2?sJ:ad.has(e)?e.startsWith("scale")?rJ(t[1]):nJ:iJ;function aJ({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:h,...p}){return!!Object.keys(p).length}const $2=(e,t,n,s={},i,o)=>l=>{const u=E2(s,e)||{},d=u.delay||s.delay||0;let{elapsed:h=0}=s;h=h-al(d);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-h,onUpdate:x=>{t.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:e,motionValue:t,element:o?void 0:i};aJ(u)||(p={...p,...oJ(e,p)}),p.duration&&(p.duration=al(p.duration)),p.repeatDelay&&(p.repeatDelay=al(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(m=!0)),m&&!o&&t.get()!==void 0){const x=gb(p.keyframes,u);if(x!==void 0)return or.update(()=>{p.onUpdate(x),p.onComplete()}),new kK([])}return!o&&oD.supports(p)?new oD(p):new B2(p)};function lJ({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function i3(e,t,{delay:n=0,transitionOverride:s,type:i}={}){var o;let{transition:l=e.getDefaultTransition(),transitionEnd:u,...d}=t;s&&(l=s);const h=[],p=i&&e.animationState&&e.animationState.getState()[i];for(const m in d){const x=e.getValue(m,(o=e.latestValues[m])!==null&&o!==void 0?o:null),y=d[m];if(y===void 0||p&&lJ(p,m))continue;const b={delay:n,...E2(l||{},m)};let C=!1;if(window.MotionHandoffAnimation){const E=MI(e);if(E){const k=window.MotionHandoffAnimation(E,m,or);k!==null&&(b.startTime=k,C=!0)}}sC(e,m),x.start($2(m,x,y,e.shouldReduceMotion&&AI.has(m)?{type:!1}:b,e,C));const S=x.animation;S&&h.push(S)}return u&&Promise.all(h).then(()=>{or.update(()=>{u&&$K(e,u)})}),h}function dC(e,t,n={}){var s;const i=mb(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const l=i?()=>Promise.all(i3(e,i,n)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:x}=o;return cJ(e,t,p+h,m,x,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[h,p]=d==="beforeChildren"?[l,u]:[u,l];return h().then(()=>p())}else return Promise.all([l(),u(n.delay)])}function cJ(e,t,n=0,s=0,i=1,o){const l=[],u=(e.variantChildren.size-1)*s,d=i===1?(h=0)=>h*s:(h=0)=>u-h*s;return Array.from(e.variantChildren).sort(uJ).forEach((h,p)=>{h.notify("AnimationStart",t),l.push(dC(h,t,{...o,delay:n+d(p)}).then(()=>h.notify("AnimationComplete",t)))}),Promise.all(l)}function uJ(e,t){return e.sortNodePosition(t)}function dJ(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(o=>dC(e,o,n));s=Promise.all(i)}else if(typeof t=="string")s=dC(e,t,n);else{const i=typeof t=="function"?mb(e,t,n.custom):t;s=Promise.all(i3(e,i,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const hJ=f2.length;function o3(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?o3(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<hJ;n++){const s=f2[n],i=e.props[s];(Cm(i)||i===!1)&&(t[s]=i)}return t}const fJ=[...h2].reverse(),pJ=h2.length;function mJ(e){return t=>Promise.all(t.map(({animation:n,options:s})=>dJ(e,n,s)))}function gJ(e){let t=mJ(e),n=aD(),s=!0;const i=d=>(h,p)=>{var m;const x=mb(e,p,d==="exit"?(m=e.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(x){const{transition:y,transitionEnd:b,...C}=x;h={...h,...C,...b}}return h};function o(d){t=d(e)}function l(d){const{props:h}=e,p=o3(e.parent)||{},m=[],x=new Set;let y={},b=1/0;for(let S=0;S<pJ;S++){const E=fJ[S],k=n[E],A=h[E]!==void 0?h[E]:p[E],T=Cm(A),M=E===d?k.isActive:null;M===!1&&(b=S);let D=A===p[E]&&A!==h[E]&&T;if(D&&s&&e.manuallyAnimateOnMount&&(D=!1),k.protectedKeys={...y},!k.isActive&&M===null||!A&&!k.prevProp||fb(A)||typeof A=="boolean")continue;const $=xJ(k.prevProp,A);let W=$||E===d&&k.isActive&&!D&&T||S>b&&T,te=!1;const re=Array.isArray(A)?A:[A];let U=re.reduce(i(E),{});M===!1&&(U={});const{prevResolvedValues:oe={}}=k,xe={...oe,...U},ie=_=>{W=!0,x.has(_)&&(te=!0,x.delete(_)),k.needsAnimating[_]=!0;const B=e.getValue(_);B&&(B.liveStyle=!1)};for(const _ in xe){const B=U[_],fe=oe[_];if(y.hasOwnProperty(_))continue;let I=!1;tC(B)&&tC(fe)?I=!bI(B,fe):I=B!==fe,I?B!=null?ie(_):x.add(_):B!==void 0&&x.has(_)?ie(_):k.protectedKeys[_]=!0}k.prevProp=A,k.prevResolvedValues=U,k.isActive&&(y={...y,...U}),s&&e.blockInitialAnimation&&(W=!1),W&&(!(D&&$)||te)&&m.push(...re.map(_=>({animation:_,options:{type:E}})))}if(x.size){const S={};x.forEach(E=>{const k=e.getBaseTarget(E),A=e.getValue(E);A&&(A.liveStyle=!0),S[E]=k??null}),m.push({animation:S})}let C=!!m.length;return s&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(C=!1),s=!1,C?t(m):Promise.resolve()}function u(d,h){var p;if(n[d].isActive===h)return Promise.resolve();(p=e.variantChildren)===null||p===void 0||p.forEach(x=>{var y;return(y=x.animationState)===null||y===void 0?void 0:y.setActive(d,h)}),n[d].isActive=h;const m=l(d);for(const x in n)n[x].protectedKeys={};return m}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=aD(),s=!0}}}function xJ(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!bI(t,e):!1}function au(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aD(){return{animate:au(!0),whileInView:au(),whileHover:au(),whileTap:au(),whileDrag:au(),whileFocus:au(),exit:au()}}class Pc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class yJ extends Pc{constructor(t){super(t),t.animationState||(t.animationState=gJ(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();fb(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let bJ=0;class vJ extends Pc{constructor(){super(...arguments),this.id=bJ++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const jJ={animation:{Feature:yJ},exit:{Feature:vJ}};function Am(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function ag(e){return{point:{x:e.pageX,y:e.pageY}}}const SJ=e=>t=>T2(t)&&e(t,ag(t));function Zp(e,t,n,s){return Am(e,t,SJ(n),s)}const lD=(e,t)=>Math.abs(e-t);function CJ(e,t){const n=lD(e.x,t.x),s=lD(e.y,t.y);return Math.sqrt(n**2+s**2)}class a3{constructor(t,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=C1(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,y=CJ(m.offset,{x:0,y:0})>=3;if(!x&&!y)return;const{point:b}=m,{timestamp:C}=bs;this.history.push({...b,timestamp:C});const{onStart:S,onMove:E}=this.handlers;x||(S&&S(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,m)},this.handlePointerMove=(m,x)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=S1(x,this.transformPagePoint),or.update(this.updatePoint,!0)},this.handlePointerUp=(m,x)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=C1(m.type==="pointercancel"?this.lastMoveEventInfo:S1(x,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,S),b&&b(m,S)},!T2(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const l=ag(t),u=S1(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=bs;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,C1(u,this.history)),this.removeListeners=og(Zp(this.contextWindow,"pointermove",this.handlePointerMove),Zp(this.contextWindow,"pointerup",this.handlePointerUp),Zp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ec(this.updatePoint)}}function S1(e,t){return t?{point:t(e.point)}:e}function cD(e,t){return{x:e.x-t.x,y:e.y-t.y}}function C1({point:e},t){return{point:e,delta:cD(e,l3(t)),offset:cD(e,wJ(t)),velocity:EJ(t,.1)}}function wJ(e){return e[0]}function l3(e){return e[e.length-1]}function EJ(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=l3(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>al(t)));)n--;if(!s)return{x:0,y:0};const o=ll(i.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-s.x)/o,y:(i.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const c3=1e-4,kJ=1-c3,AJ=1+c3,u3=.01,TJ=0-u3,MJ=0+u3;function Mi(e){return e.max-e.min}function RJ(e,t,n){return Math.abs(e-t)<=n}function uD(e,t,n,s=.5){e.origin=s,e.originPoint=gr(t.min,t.max,e.origin),e.scale=Mi(n)/Mi(t),e.translate=gr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=kJ&&e.scale<=AJ||isNaN(e.scale))&&(e.scale=1),(e.translate>=TJ&&e.translate<=MJ||isNaN(e.translate))&&(e.translate=0)}function em(e,t,n,s){uD(e.x,t.x,n.x,s?s.originX:void 0),uD(e.y,t.y,n.y,s?s.originY:void 0)}function dD(e,t,n){e.min=n.min+t.min,e.max=e.min+Mi(t)}function DJ(e,t,n){dD(e.x,t.x,n.x),dD(e.y,t.y,n.y)}function hD(e,t,n){e.min=t.min-n.min,e.max=e.min+Mi(t)}function tm(e,t,n){hD(e.x,t.x,n.x),hD(e.y,t.y,n.y)}function OJ(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?gr(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?gr(n,e,s.max):Math.min(e,n)),e}function fD(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function NJ(e,{top:t,left:n,bottom:s,right:i}){return{x:fD(e.x,n,i),y:fD(e.y,t,s)}}function pD(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function PJ(e,t){return{x:pD(e.x,t.x),y:pD(e.y,t.y)}}function zJ(e,t){let n=.5;const s=Mi(e),i=Mi(t);return i>s?n=Vh(t.min,t.max-s,e.min):s>i&&(n=Vh(e.min,e.max-i,t.min)),fl(0,1,n)}function IJ(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const hC=.35;function LJ(e=hC){return e===!1?e=0:e===!0&&(e=hC),{x:mD(e,"left","right"),y:mD(e,"top","bottom")}}function mD(e,t,n){return{min:gD(e,t),max:gD(e,n)}}function gD(e,t){return typeof e=="number"?e:e[t]||0}const xD=()=>({translate:0,scale:1,origin:0,originPoint:0}),vh=()=>({x:xD(),y:xD()}),yD=()=>({min:0,max:0}),Nr=()=>({x:yD(),y:yD()});function Yi(e){return[e("x"),e("y")]}function d3({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function _J({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function BJ(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function w1(e){return e===void 0||e===1}function fC({scale:e,scaleX:t,scaleY:n}){return!w1(e)||!w1(t)||!w1(n)}function hu(e){return fC(e)||h3(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function h3(e){return bD(e.x)||bD(e.y)}function bD(e){return e&&e!=="0%"}function X0(e,t,n){const s=e-n,i=t*s;return n+i}function vD(e,t,n,s,i){return i!==void 0&&(e=X0(e,i,s)),X0(e,n,s)+t}function pC(e,t=0,n=1,s,i){e.min=vD(e.min,t,n,s,i),e.max=vD(e.max,t,n,s,i)}function f3(e,{x:t,y:n}){pC(e.x,t.translate,t.scale,t.originPoint),pC(e.y,n.translate,n.scale,n.originPoint)}const jD=.999999999999,SD=1.0000000000001;function $J(e,t,n,s=!1){const i=n.length;if(!i)return;t.x=t.y=1;let o,l;for(let u=0;u<i;u++){o=n[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Sh(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,f3(e,l)),s&&hu(o.latestValues)&&Sh(e,o.latestValues))}t.x<SD&&t.x>jD&&(t.x=1),t.y<SD&&t.y>jD&&(t.y=1)}function jh(e,t){e.min=e.min+t,e.max=e.max+t}function CD(e,t,n,s,i=.5){const o=gr(e.min,e.max,i);pC(e,t,n,o,s)}function Sh(e,t){CD(e.x,t.x,t.scaleX,t.scale,t.originX),CD(e.y,t.y,t.scaleY,t.scale,t.originY)}function p3(e,t){return d3(BJ(e.getBoundingClientRect(),t))}function FJ(e,t,n){const s=p3(e,n),{scroll:i}=t;return i&&(jh(s.x,i.offset.x),jh(s.y,i.offset.y)),s}const m3=({current:e})=>e?e.ownerDocument.defaultView:null,VJ=new WeakMap;class HJ{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ag(p).point)},o=(p,m)=>{const{drag:x,dragPropagation:y,onDragStart:b}=this.getProps();if(x&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zK(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yi(S=>{let E=this.getAxisMotionValue(S).get()||0;if(ra.test(E)){const{projection:k}=this.visualElement;if(k&&k.layout){const A=k.layout.layoutBox[S];A&&(E=Mi(A)*(parseFloat(E)/100))}}this.originPoint[S]=E}),b&&or.postRender(()=>b(p,m)),sC(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},l=(p,m)=>{const{dragPropagation:x,dragDirectionLock:y,onDirectionLock:b,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:S}=m;if(y&&this.currentDirection===null){this.currentDirection=UJ(S),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,S),this.updateAxis("y",m.point,S),this.visualElement.render(),C&&C(p,m)},u=(p,m)=>this.stop(p,m),d=()=>Yi(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new a3(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:m3(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&or.postRender(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:i}=this.getProps();if(!s||!zx(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(l=OJ(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&yh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=NJ(i.layoutBox,n):this.constraints=!1,this.elastic=LJ(s),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Yi(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=IJ(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!yh(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=FJ(s,i.root,this.visualElement.getTransformPagePoint());let l=PJ(i.layout.layoutBox,o);if(n){const u=n(_J(l));this.hasMutatedConstraints=!!u,u&&(l=d3(u))}return l}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=Yi(p=>{if(!zx(p,n,this.currentDirection))return;let m=d&&d[p]||{};l&&(m={min:0,max:0});const x=i?200:1e6,y=i?40:1e7,b={type:"inertia",velocity:s?t[p]:0,bounceStiffness:x,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(p,b)});return Promise.all(h).then(u)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return sC(this.visualElement,t),s.start($2(t,s,0,n,this.visualElement,!1))}stopAnimation(){Yi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Yi(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Yi(n=>{const{drag:s}=this.getProps();if(!zx(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:u}=i.layout.layoutBox[n];o.set(t[n]-gr(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!yh(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Yi(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();i[l]=zJ({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Yi(l=>{if(!zx(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];u.set(gr(d,h,i[l]))})}addListeners(){if(!this.visualElement.current)return;VJ.set(this.visualElement,this);const t=this.visualElement.current,n=Zp(t,"pointerdown",d=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();yh(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),or.read(s);const l=Am(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Yi(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=hC,dragMomentum:u=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function zx(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function UJ(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class WJ extends Pc{constructor(t){super(t),this.removeGroupControls=Ai,this.removeListeners=Ai,this.controls=new HJ(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ai}unmount(){this.removeGroupControls(),this.removeListeners()}}const wD=e=>(t,n)=>{e&&or.postRender(()=>e(t,n))};class qJ extends Pc{constructor(){super(...arguments),this.removePointerDownListener=Ai}onPointerDown(t){this.session=new a3(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:m3(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:wD(t),onStart:wD(n),onMove:s,onEnd:(o,l)=>{delete this.session,i&&or.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=Zp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const k0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ED(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const mp={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(zt.test(e))e=parseFloat(e);else return e;const n=ED(e,t.target.x),s=ED(e,t.target.y);return`${n}% ${s}%`}},GJ={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=kc.parse(e);if(i.length>5)return s;const o=kc.createTransformer(e),l=typeof i[0]!="number"?1:0,u=n.x.scale*t.x,d=n.y.scale*t.y;i[0+l]/=u,i[1+l]/=d;const h=gr(u,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=h),typeof i[3+l]=="number"&&(i[3+l]/=h),o(i)}};class YJ extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:o}=t;pK(KJ),o&&(n.group&&n.group.add(o),s&&s.register&&i&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),k0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:i,isPresent:o}=this.props,l=s.projection;return l&&(l.isPresent=o,i||t.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||or.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),m2.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function g3(e){const[t,n]=c2(),s=j.useContext(o2);return r.jsx(YJ,{...e,layoutGroup:s,switchLayoutGroup:j.useContext(oI),isPresent:t,safeToRemove:n})}const KJ={borderRadius:{...mp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mp,borderTopRightRadius:mp,borderBottomLeftRadius:mp,borderBottomRightRadius:mp,boxShadow:GJ};function XJ(e,t,n){const s=Os(e)?e:Em(e);return s.start($2("",s,t,n)),s.animation}function JJ(e){return e instanceof SVGElement&&e.tagName!=="svg"}const QJ=(e,t)=>e.depth-t.depth;class ZJ{constructor(){this.children=[],this.isDirty=!1}add(t){M2(this.children,t),this.isDirty=!0}remove(t){R2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(QJ),this.isDirty=!1,this.children.forEach(t)}}function eQ(e,t){const n=sa.now(),s=({timestamp:i})=>{const o=i-n;o>=t&&(Ec(s),e(o-t))};return or.read(s,!0),()=>Ec(s)}const x3=["TopLeft","TopRight","BottomLeft","BottomRight"],tQ=x3.length,kD=e=>typeof e=="string"?parseFloat(e):e,AD=e=>typeof e=="number"||zt.test(e);function nQ(e,t,n,s,i,o){i?(e.opacity=gr(0,n.opacity!==void 0?n.opacity:1,rQ(s)),e.opacityExit=gr(t.opacity!==void 0?t.opacity:1,0,sQ(s))):o&&(e.opacity=gr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let l=0;l<tQ;l++){const u=`border${x3[l]}Radius`;let d=TD(t,u),h=TD(n,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||AD(d)===AD(h)?(e[u]=Math.max(gr(kD(d),kD(h),s),0),(ra.test(h)||ra.test(d))&&(e[u]+="%")):e[u]=h}(t.rotate||n.rotate)&&(e.rotate=gr(t.rotate||0,n.rotate||0,s))}function TD(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const rQ=y3(0,.5,II),sQ=y3(.5,.95,Ai);function y3(e,t,n){return s=>s<e?0:s>t?1:n(Vh(e,t,s))}function MD(e,t){e.min=t.min,e.max=t.max}function Ui(e,t){MD(e.x,t.x),MD(e.y,t.y)}function RD(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function DD(e,t,n,s,i){return e-=t,e=X0(e,1/n,s),i!==void 0&&(e=X0(e,1/i,s)),e}function iQ(e,t=0,n=1,s=.5,i,o=e,l=e){if(ra.test(t)&&(t=parseFloat(t),t=gr(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=gr(o.min,o.max,s);e===o&&(u-=t),e.min=DD(e.min,t,n,u,i),e.max=DD(e.max,t,n,u,i)}function OD(e,t,[n,s,i],o,l){iQ(e,t[n],t[s],t[i],t.scale,o,l)}const oQ=["x","scaleX","originX"],aQ=["y","scaleY","originY"];function ND(e,t,n,s){OD(e.x,t,oQ,n?n.x:void 0,s?s.x:void 0),OD(e.y,t,aQ,n?n.y:void 0,s?s.y:void 0)}function PD(e){return e.translate===0&&e.scale===1}function b3(e){return PD(e.x)&&PD(e.y)}function zD(e,t){return e.min===t.min&&e.max===t.max}function lQ(e,t){return zD(e.x,t.x)&&zD(e.y,t.y)}function ID(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function v3(e,t){return ID(e.x,t.x)&&ID(e.y,t.y)}function LD(e){return Mi(e.x)/Mi(e.y)}function _D(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class cQ{constructor(){this.members=[]}add(t){M2(this.members,t),t.scheduleRender()}remove(t){if(R2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uQ(e,t,n){let s="";const i=e.x.translate/t.x,o=e.y.translate/t.y,l=n?.z||0;if((i||o||l)&&(s=`translate3d(${i}px, ${o}px, ${l}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:x,skewX:y,skewY:b}=n;h&&(s=`perspective(${h}px) ${s}`),p&&(s+=`rotate(${p}deg) `),m&&(s+=`rotateX(${m}deg) `),x&&(s+=`rotateY(${x}deg) `),y&&(s+=`skewX(${y}deg) `),b&&(s+=`skewY(${b}deg) `)}const u=e.x.scale*t.x,d=e.y.scale*t.y;return(u!==1||d!==1)&&(s+=`scale(${u}, ${d})`),s||"none"}const fu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Pp=typeof window<"u"&&window.MotionDebug!==void 0,E1=["","X","Y","Z"],dQ={visibility:"hidden"},BD=1e3;let hQ=0;function k1(e,t,n,s){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function j3(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=MI(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",or,!(i||o))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&j3(s)}function S3({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(l={},u=t?.()){this.id=hQ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Pp&&(fu.totalNodes=fu.resolvedTargetDeltas=fu.recalculatedProjection=0),this.nodes.forEach(mQ),this.nodes.forEach(vQ),this.nodes.forEach(jQ),this.nodes.forEach(gQ),Pp&&window.MotionDebug.record(fu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZJ)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new D2),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=JJ(l),this.instance=l;const{layoutId:d,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),e){let m;const x=()=>this.root.updateBlockedByResize=!1;e(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=eQ(x,250),k0.hasAnimatedSinceResize&&(k0.hasAnimatedSinceResize=!1,this.nodes.forEach(FD))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:x,hasRelativeTargetChanged:y,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||p.getDefaultTransition()||kQ,{onLayoutAnimationStart:S,onLayoutAnimationComplete:E}=p.getProps(),k=!this.targetLayout||!v3(this.targetLayout,b)||y,A=!x&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||x&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,A);const T={...E2(C,"layout"),onPlay:S,onComplete:E};(p.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else x||FD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ec(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SQ),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&j3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($D);return}this.isUpdating||this.nodes.forEach(yQ),this.isUpdating=!1,this.nodes.forEach(bQ),this.nodes.forEach(fQ),this.nodes.forEach(pQ),this.clearAllSnapshots();const u=sa.now();bs.delta=fl(0,1e3/60,u-bs.timestamp),bs.timestamp=u,bs.isProcessing=!0,g1.update.process(bs),g1.preRender.process(bs),g1.render.process(bs),bs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,m2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xQ),this.sharedNodes.forEach(CQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,or.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){or.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!b3(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&(u||hu(this.latestValues)||p)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),AQ(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:u}=this.options;if(!u)return Nr();const d=u.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(TQ))){const{scroll:p}=this.root;p&&(jh(d.x,p.offset.x),jh(d.y,p.offset.y))}return d}removeElementScroll(l){var u;const d=Nr();if(Ui(d,l),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return d;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:m,options:x}=p;p!==this.root&&m&&x.layoutScroll&&(m.wasRoot&&Ui(d,l),jh(d.x,m.offset.x),jh(d.y,m.offset.y))}return d}applyTransform(l,u=!1){const d=Nr();Ui(d,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Sh(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),hu(p.latestValues)&&Sh(d,p.latestValues)}return hu(this.latestValues)&&Sh(d,this.latestValues),d}removeTransform(l){const u=Nr();Ui(u,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!hu(h.latestValues))continue;fC(h.latestValues)&&h.updateSnapshot();const p=Nr(),m=h.measurePageBox();Ui(p,m),ND(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return hu(this.latestValues)&&ND(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:x}=this.options;if(!(!this.layout||!(m||x))){if(this.resolvedRelativeTargetAt=bs.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),tm(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Nr(),this.targetWithTransforms=Nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ui(this.target,this.layout.layoutBox),f3(this.target,this.targetDelta)):Ui(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),tm(this.relativeTargetOrigin,this.target,y.target),Ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Pp&&fu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||fC(this.parent.latestValues)||h3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===bs.timestamp&&(h=!1),h)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Ui(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,y=this.treeScale.y;$J(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Nr());const{target:b}=u;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RD(this.prevProjectionDelta.x,this.projectionDelta.x),RD(this.prevProjectionDelta.y,this.projectionDelta.y)),em(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==y||!_D(this.projectionDelta.x,this.prevProjectionDelta.x)||!_D(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Pp&&fu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vh(),this.projectionDelta=vh(),this.projectionDeltaWithTransform=vh()}setAnimationOrigin(l,u=!1){const d=this.snapshot,h=d?d.latestValues:{},p={...this.latestValues},m=vh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=Nr(),y=d?d.source:void 0,b=this.layout?this.layout.source:void 0,C=y!==b,S=this.getStack(),E=!S||S.members.length<=1,k=!!(C&&!E&&this.options.crossfade===!0&&!this.path.some(EQ));this.animationProgress=0;let A;this.mixTargetDelta=T=>{const M=T/1e3;VD(m.x,l.x,M),VD(m.y,l.y,M),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tm(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wQ(this.relativeTarget,this.relativeTargetOrigin,x,M),A&&lQ(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Nr()),Ui(A,this.relativeTarget)),C&&(this.animationValues=p,nQ(p,h,this.latestValues,M,k,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ec(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=or.update(()=>{k0.hasAnimatedSinceResize=!0,this.currentAnimation=XJ(0,BD,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:p}=l;if(!(!u||!d||!h)){if(this!==l&&this.layout&&h&&C3(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Nr();const m=Mi(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const x=Mi(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+x}Ui(u,d),Sh(u,p),em(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new cQ),this.sharedNodes.get(l).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const h={};d.z&&k1("z",l,h,this.animationValues);for(let p=0;p<E1.length;p++)k1(`rotate${E1[p]}`,l,h,this.animationValues),k1(`skew${E1[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}getProjectionStyles(l){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return dQ;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=w0(l?.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=w0(l?.pointerEvents)||""),this.hasProjected&&!hu(this.latestValues)&&(C.transform=p?p({},""):"none",this.hasProjected=!1),C}const x=m.animationValues||m.latestValues;this.applyTransformsToTarget(),h.transform=uQ(this.projectionDeltaWithTransform,this.treeScale,x),p&&(h.transform=p(x,h.transform));const{x:y,y:b}=this.projectionDelta;h.transformOrigin=`${y.origin*100}% ${b.origin*100}% 0`,m.animationValues?h.opacity=m===this?(d=(u=x.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:h.opacity=m===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const C in W0){if(x[C]===void 0)continue;const{correct:S,applyTo:E}=W0[C],k=h.transform==="none"?x[C]:S(x[C],m);if(E){const A=E.length;for(let T=0;T<A;T++)h[E[T]]=k}else h[C]=k}return this.options.layoutId&&(h.pointerEvents=m===this?w0(l?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach($D),this.root.sharedNodes.clear()}}}function fQ(e){e.updateLayout()}function pQ(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:o}=e.options,l=n.source!==e.layout.source;o==="size"?Yi(m=>{const x=l?n.measuredBox[m]:n.layoutBox[m],y=Mi(x);x.min=s[m].min,x.max=x.min+y}):C3(o,n.layoutBox,s)&&Yi(m=>{const x=l?n.measuredBox[m]:n.layoutBox[m],y=Mi(s[m]);x.max=x.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+y)});const u=vh();em(u,s,n.layoutBox);const d=vh();l?em(d,e.applyTransform(i,!0),n.measuredBox):em(d,s,n.layoutBox);const h=!b3(u);let p=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:x,layout:y}=m;if(x&&y){const b=Nr();tm(b,n.layoutBox,x.layoutBox);const C=Nr();tm(C,s,y.layoutBox),v3(b,C)||(p=!0),m.options.layoutRoot&&(e.relativeTarget=C,e.relativeTargetOrigin=b,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:p})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function mQ(e){Pp&&fu.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function gQ(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function xQ(e){e.clearSnapshot()}function $D(e){e.clearMeasurements()}function yQ(e){e.isLayoutDirty=!1}function bQ(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function FD(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function vQ(e){e.resolveTargetDelta()}function jQ(e){e.calcProjection()}function SQ(e){e.resetSkewAndRotation()}function CQ(e){e.removeLeadSnapshot()}function VD(e,t,n){e.translate=gr(t.translate,0,n),e.scale=gr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function HD(e,t,n,s){e.min=gr(t.min,n.min,s),e.max=gr(t.max,n.max,s)}function wQ(e,t,n,s){HD(e.x,t.x,n.x,s),HD(e.y,t.y,n.y,s)}function EQ(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const kQ={duration:.45,ease:[.4,0,.1,1]},UD=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),WD=UD("applewebkit/")&&!UD("chrome/")?Math.round:Ai;function qD(e){e.min=WD(e.min),e.max=WD(e.max)}function AQ(e){qD(e.x),qD(e.y)}function C3(e,t,n){return e==="position"||e==="preserve-aspect"&&!RJ(LD(t),LD(n),.2)}function TQ(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const MQ=S3({attachResizeListener:(e,t)=>Am(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),A1={current:void 0},w3=S3({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!A1.current){const e=new MQ({});e.mount(window),e.setOptions({layoutScroll:!0}),A1.current=e}return A1.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),RQ={pan:{Feature:qJ},drag:{Feature:WJ,ProjectionNode:w3,MeasureLayout:g3}};function GD(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=s[i];o&&or.postRender(()=>o(t,ag(t)))}class DQ extends Pc{mount(){const{current:t}=this.node;t&&(this.unmount=RK(t,n=>(GD(this.node,n,"Start"),s=>GD(this.node,s,"End"))))}unmount(){}}class OQ extends Pc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=og(Am(this.node.current,"focus",()=>this.onFocus()),Am(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function YD(e,t,n){const{props:s}=e;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=s[i];o&&or.postRender(()=>o(t,ag(t)))}class NQ extends Pc{mount(){const{current:t}=this.node;t&&(this.unmount=PK(t,n=>(YD(this.node,n,"Start"),(s,{success:i})=>YD(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mC=new WeakMap,T1=new WeakMap,PQ=e=>{const t=mC.get(e.target);t&&t(e)},zQ=e=>{e.forEach(PQ)};function IQ({root:e,...t}){const n=e||document;T1.has(n)||T1.set(n,{});const s=T1.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(zQ,{root:e,...t})),s[i]}function LQ(e,t,n){const s=IQ(t);return mC.set(e,n),s.observe(e),()=>{mC.delete(e),s.unobserve(e)}}const _Q={some:0,all:1};class BQ extends Pc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:o}=t,l={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:_Q[i]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),x=h?p:m;x&&x(d)};return LQ(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some($Q(t,n))&&this.startObserver()}unmount(){}}function $Q({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const FQ={inView:{Feature:BQ},tap:{Feature:NQ},focus:{Feature:OQ},hover:{Feature:DQ}},VQ={layout:{ProjectionNode:w3,MeasureLayout:g3}},gC={current:null},E3={current:!1};function HQ(){if(E3.current=!0,!!u2)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>gC.current=e.matches;e.addListener(t),t()}else gC.current=!1}const UQ=[...XI,Rs,kc],WQ=e=>UQ.find(KI(e)),KD=new WeakMap;function qQ(e,t,n){for(const s in t){const i=t[s],o=n[s];if(Os(i))e.addValue(s,i);else if(Os(o))e.addValue(s,Em(i,{owner:e}));else if(o!==i)if(e.hasValue(s)){const l=e.getValue(s);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,Em(l!==void 0?l:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const XD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GQ{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=L2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=sa.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,or.render(this.render,!1,!0))};const{latestValues:d,renderState:h,onUpdate:p}=l;this.onUpdate=p,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=pb(n),this.isVariantNode=sI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in x){const b=x[y];d[y]!==void 0&&Os(b)&&b.set(d[y],!1)}}mount(t){this.current=t,KD.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),E3.current||HQ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){KD.delete(this.current),this.projection&&this.projection.unmount(),Ec(this.notifyUpdate),Ec(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=ad.has(t),i=n.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&or.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Hh){const n=Hh[t];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<XD.length;s++){const i=XD[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=t[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=qQ(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Em(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(GI(i)||_I(i))?i=parseFloat(i):!WQ(i)&&kc.test(n)&&(i=UI(t,n)),this.setBaseTarget(t,Os(i)?i.get():i)),Os(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const l=x2(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(i=l[t])}if(s&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Os(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new D2),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class k3 extends GQ{constructor(){super(...arguments),this.KeyframeResolver=JI}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Os(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function YQ(e){return window.getComputedStyle(e)}class KQ extends k3{constructor(){super(...arguments),this.type="html",this.renderInstance=fI}readValueFromInstance(t,n){if(ad.has(n)){const s=I2(n);return s&&s.default||0}else{const s=YQ(t),i=(uI(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return p3(t,n)}build(t,n,s){v2(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return w2(t,n,s)}}class XQ extends k3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ad.has(n)){const s=I2(n);return s&&s.default||0}return n=pI.has(n)?n:p2(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return xI(t,n,s)}build(t,n,s){j2(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,i){mI(t,n,s,i)}mount(t){this.isSVGTag=C2(t.tagName),super.mount(t)}}const JQ=(e,t)=>g2(e)?new XQ(t):new KQ(t,{allowProjection:e!==j.Fragment}),QQ=CK({...jJ,...FQ,...RQ,...VQ},JQ),Ro=_Y(QQ),ZQ=(e,t)=>e.find(n=>n.id===t);function JD(e,t){const n=A3(e,t),s=n?e[n].findIndex(i=>i.id===t):-1;return{position:n,index:s}}function A3(e,t){for(const[n,s]of Object.entries(e))if(ZQ(s,t))return n}function eZ(e){const t=e.includes("right"),n=e.includes("left");let s="center";return t&&(s="flex-end"),n&&(s="flex-start"),{display:"flex",flexDirection:"column",alignItems:s}}function tZ(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,s=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",l=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:s,bottom:i,right:o,left:l}}var nZ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,rZ=Vz(function(e){return nZ.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),sZ=rZ,iZ=function(t){return t!=="theme"},QD=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?sZ:iZ},ZD=function(t,n,s){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(l){return t.__emotion_forwardProp(l)&&o(l)}:o}return typeof i!="function"&&s&&(i=t.__emotion_forwardProp),i},oZ=function(t){var n=t.cache,s=t.serialized,i=t.isStringTag;return Zw(n,s,i),Gz(function(){return e2(n,s,i)}),null},aZ=function e(t,n){var s=t.__emotion_real===t,i=s&&t.__emotion_base||t,o,l;n!==void 0&&(o=n.label,l=n.target);var u=ZD(t,n,s),d=u||QD(i),h=!d("as");return function(){var p=arguments,m=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&m.push("label:"+o+";"),p[0]==null||p[0].raw===void 0)m.push.apply(m,p);else{var x=p[0];m.push(x[0]);for(var y=p.length,b=1;b<y;b++)m.push(p[b],x[b])}var C=n2(function(S,E,k){var A=h&&S.as||i,T="",M=[],D=S;if(S.theme==null){D={};for(var $ in S)D[$]=S[$];D.theme=j.useContext(Fh)}typeof S.className=="string"?T=Uz(E.registered,M,S.className):S.className!=null&&(T=S.className+" ");var W=cb(m.concat(M),E.registered,D);T+=E.key+"-"+W.name,l!==void 0&&(T+=" "+l);var te=h&&u===void 0?QD(A):d,re={};for(var U in S)h&&U==="as"||te(U)&&(re[U]=S[U]);return re.className=T,k&&(re.ref=k),j.createElement(j.Fragment,null,j.createElement(oZ,{cache:E,serialized:W,isStringTag:typeof A=="string"}),j.createElement(A,re))});return C.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",C.defaultProps=t.defaultProps,C.__emotion_real=C,C.__emotion_base=i,C.__emotion_styles=m,C.__emotion_forwardProp=u,Object.defineProperty(C,"toString",{value:function(){return"."+l}}),C.withComponent=function(S,E){var k=e(S,Uu({},n,E,{shouldForwardProp:ZD(C,E,!0)}));return k.apply(void 0,m)},C}},lZ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],xC=aZ.bind(null);lZ.forEach(function(e){xC[e]=xC(e)});const cZ=new Set([...MV,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),uZ=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function dZ(e){return(uZ.has(e)||!cZ.has(e))&&e[0]!=="_"}const hZ=v8(xC),fZ=({baseStyle:e})=>t=>{const{theme:n,css:s,__css:i,sx:o,...l}=t,[u]=T8(l,DV),d=ii(e,t),h=a8({},i,d,Qm(u),o),p=vz(h)(t.theme);return s?[p,s]:p};function M1(e,t){const{baseStyle:n,...s}=t??{};s.shouldForwardProp||(s.shouldForwardProp=dZ);const i=fZ({baseStyle:n}),o=hZ(e,s)(i);return j.forwardRef(function(d,h){const{children:p,...m}=d,{colorMode:x,forced:y}=db(),b=y?x:void 0;return j.createElement(o,{ref:h,"data-theme":b,...m},p)})}function pZ(){const e=new Map;return new Proxy(M1,{apply(t,n,s){return M1(...s)},get(t,n){return e.has(n)||e.set(n,M1(n)),e.get(n)}})}const Re=pZ(),mZ={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let s=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(s=1),{opacity:0,[n]:s*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},T3=j.memo(e=>{const{id:t,message:n,onCloseComplete:s,onRequestRemove:i,requestClose:o=!1,position:l="bottom",duration:u=5e3,containerStyle:d,motionVariants:h=mZ,toastSpacing:p="0.5rem"}=e,[m,x]=j.useState(u),y=MY();wc(()=>{y||s?.()},[y]),wc(()=>{x(u)},[u]);const b=()=>x(null),C=()=>x(u),S=()=>{y&&i()};j.useEffect(()=>{y&&o&&i()},[y,o,i]),Y8(S,m);const E=j.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:p,...d}),[d,p]),k=j.useMemo(()=>eZ(l),[l]);return r.jsx(Ro.div,{layout:!0,className:"chakra-toast",variants:h,initial:"initial",animate:"animate",exit:"exit",onHoverStart:b,onHoverEnd:C,custom:{position:l},style:k,children:r.jsx(Re.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:E,children:ii(n,{id:t,onClose:S})})})});T3.displayName="ToastComponent";function $e(e){return j.forwardRef(e)}var R1,eO;function gZ(){if(eO)return R1;eO=1;var e=typeof Element<"u",t=typeof Map=="function",n=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var u,d,h;if(Array.isArray(o)){if(u=o.length,u!=l.length)return!1;for(d=u;d--!==0;)if(!i(o[d],l[d]))return!1;return!0}var p;if(t&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(p=o.entries();!(d=p.next()).done;)if(!l.has(d.value[0]))return!1;for(p=o.entries();!(d=p.next()).done;)if(!i(d.value[1],l.get(d.value[0])))return!1;return!0}if(n&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(p=o.entries();!(d=p.next()).done;)if(!l.has(d.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(u=o.length,u!=l.length)return!1;for(d=u;d--!==0;)if(o[d]!==l[d])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(h=Object.keys(o),u=h.length,u!==Object.keys(l).length)return!1;for(d=u;d--!==0;)if(!Object.prototype.hasOwnProperty.call(l,h[d]))return!1;if(e&&o instanceof Element)return!1;for(d=u;d--!==0;)if(!((h[d]==="_owner"||h[d]==="__v"||h[d]==="__o")&&o.$$typeof)&&!i(o[h[d]],l[h[d]]))return!1;return!0}return o!==o&&l!==l}return R1=function(l,u){try{return i(l,u)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},R1}var xZ=gZ();const yZ=tf(xZ);function zc(){const e=j.useContext(Fh);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}function M3(){const e=db(),t=zc();return{...e,theme:t}}function bZ(e,t,n){if(t==null)return t;const s=i=>e.__cssMap?.[i]?.value;return s(t)??s(n)??n}function vZ(e,t,n){const s=Array.isArray(t)?t:[t],i=Array.isArray(n)?n:[n];return o=>{const l=i.filter(Boolean),u=s.map((d,h)=>{const p=`${e}.${d}`;return bZ(o,p,l[h]??d)});return Array.isArray(t)?u:u[0]}}function jZ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!==void 0&&t!=="children"&&!j.isValidElement(n)))}function R3(e,t={}){const{styleConfig:n,...s}=t,{theme:i,colorMode:o}=M3(),l=e?iz(i,`components.${e}`):void 0,u=n||l,d=Zi({theme:i,colorMode:o},u?.defaultProps??{},jZ(s),(p,m)=>p?void 0:m),h=j.useRef({});if(u){const m=VV(u)(d);yZ(h.current,m)||(h.current=m)}return h.current}function Ks(e,t={}){return R3(e,t)}function _r(e,t={}){return R3(e,t)}const tO={path:r.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),r.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),r.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Wn=$e((e,t)=>{const{as:n,viewBox:s,color:i="currentColor",focusable:o=!1,children:l,className:u,__css:d,...h}=e,p=Ze("chakra-icon",u),m=Ks("Icon",e),x={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...d,...m},y={ref:t,focusable:o,className:p,__css:x},b=s??tO.viewBox;if(n&&typeof n!="string")return r.jsx(Re.svg,{as:n,...y,...h});const C=l??tO.path;return r.jsx(Re.svg,{verticalAlign:"middle",viewBox:b,...y,...h,children:C})});Wn.displayName="Icon";function SZ(e){return r.jsx(Wn,{viewBox:"0 0 24 24",...e,children:r.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function CZ(e){return r.jsx(Wn,{viewBox:"0 0 24 24",...e,children:r.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function nO(e){return r.jsx(Wn,{viewBox:"0 0 24 24",...e,children:r.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}const wZ=Oc({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),sn=$e((e,t)=>{const n=Ks("Spinner",e),{label:s="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:l="transparent",className:u,...d}=bn(e),h=Ze("chakra-spinner",u),p={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:l,borderLeftColor:l,animation:`${wZ} ${o} linear infinite`,...n};return r.jsx(Re.div,{ref:t,__css:p,className:h,...d,children:s&&r.jsx(Re.span,{srOnly:!0,children:s})})});sn.displayName="Spinner";const[EZ,F2]=un({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[kZ,V2]=un({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),D3={info:{icon:CZ,colorScheme:"blue"},warning:{icon:nO,colorScheme:"orange"},success:{icon:SZ,colorScheme:"green"},error:{icon:nO,colorScheme:"red"},loading:{icon:sn,colorScheme:"blue"}};function AZ(e){return D3[e].colorScheme}function TZ(e){return D3[e].icon}const Ft=$e(function(t,n){const{status:s="info",addRole:i=!0,...o}=bn(t),l=t.colorScheme??AZ(s),u=_r("Alert",{...t,colorScheme:l}),d={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...u.container};return r.jsx(EZ,{value:{status:s},children:r.jsx(kZ,{value:u,children:r.jsx(Re.div,{"data-status":s,role:i?"alert":void 0,ref:n,...o,className:Ze("chakra-alert",t.className),__css:d})})})});Ft.displayName="Alert";function Vt(e){const{status:t}=F2(),n=TZ(t),s=V2(),i=t==="loading"?s.spinner:s.icon;return r.jsx(Re.span,{display:"inherit","data-status":t,...e,className:Ze("chakra-alert__icon",e.className),__css:i,children:e.children||r.jsx(n,{h:"100%",w:"100%"})})}Vt.displayName="AlertIcon";const O3=$e(function(t,n){const s=V2(),{status:i}=F2();return r.jsx(Re.div,{ref:n,"data-status":i,...t,className:Ze("chakra-alert__title",t.className),__css:s.title})});O3.displayName="AlertTitle";const N3=$e(function(t,n){const{status:s}=F2(),i=V2(),o={display:"inline",...i.description};return r.jsx(Re.div,{ref:n,"data-status":s,...t,className:Ze("chakra-alert__desc",t.className),__css:o})});N3.displayName="AlertDescription";function MZ(e){return r.jsx(Wn,{focusable:"false","aria-hidden":!0,...e,children:r.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}const H2=$e(function(t,n){const s=Ks("CloseButton",t),{children:i,isDisabled:o,__css:l,...u}=bn(t),d={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return r.jsx(Re.button,{type:"button","aria-label":"Close",ref:n,disabled:o,__css:{...d,...s,...l},...u,children:i||r.jsx(MZ,{width:"1em",height:"1em"})})});H2.displayName="CloseButton";const RZ=e=>{const{status:t,variant:n="solid",id:s,title:i,isClosable:o,onClose:l,description:u,colorScheme:d,icon:h}=e,p=s?{root:`toast-${s}`,title:`toast-${s}-title`,description:`toast-${s}-description`}:void 0;return r.jsxs(Ft,{addRole:!1,status:t,variant:n,id:p?.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:d,children:[r.jsx(Vt,{children:h}),r.jsxs(Re.div,{flex:"1",maxWidth:"100%",children:[i&&r.jsx(O3,{id:p?.title,children:i}),u&&r.jsx(N3,{id:p?.description,display:"block",children:u})]}),o&&r.jsx(H2,{size:"sm",onClick:l,position:"absolute",insetEnd:1,top:1})]})};function P3(e={}){const{render:t,toastComponent:n=RZ}=e;return i=>typeof t=="function"?t({...i,...e}):r.jsx(n,{...i,...e})}const DZ={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Qo=OZ(DZ);function OZ(e){let t=e;const n=new Set,s=i=>{t=i(t),n.forEach(o=>o())};return{getState:()=>t,subscribe:i=>(n.add(i),()=>{s(()=>e),n.delete(i)}),removeToast:(i,o)=>{s(l=>({...l,[o]:l[o].filter(u=>u.id!=i)}))},notify:(i,o)=>{const l=NZ(i,o),{position:u,id:d}=l;return s(h=>{const m=u.includes("top")?[l,...h[u]??[]]:[...h[u]??[],l];return{...h,[u]:m}}),d},update:(i,o)=>{i&&s(l=>{const u={...l},{position:d,index:h}=JD(u,i);return d&&h!==-1&&(u[d][h]={...u[d][h],...o,message:P3(o)}),u})},closeAll:({positions:i}={})=>{s(o=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((d,h)=>(d[h]=o[h].map(p=>({...p,requestClose:!0})),d),{...o}))},close:i=>{s(o=>{const l=A3(o,i);return l?{...o,[l]:o[l].map(u=>u.id==i?{...u,requestClose:!0}:u)}:o})},isActive:i=>!!JD(Qo.getState(),i).position}}let rO=0;function NZ(e,t={}){rO+=1;const n=t.id??rO,s=t.position??"bottom";return{id:n,message:e,position:s,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>Qo.removeToast(String(n),s),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}const[z3,PZ]=un({strict:!1,name:"PortalContext"}),U2="chakra-portal",zZ=".chakra-portal",IZ=e=>r.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),LZ=e=>{const{appendToParentPortal:t,children:n}=e,[s,i]=j.useState(null),o=j.useRef(null),[,l]=j.useState({});j.useEffect(()=>l({}),[]);const u=PZ(),d=SY();ea(()=>{if(!s)return;const p=s.ownerDocument,m=t?u??p.body:p.body;if(!m)return;o.current=p.createElement("div"),o.current.className=U2,m.appendChild(o.current),l({});const x=o.current;return()=>{m.contains(x)&&m.removeChild(x)}},[s]);const h=d?.zIndex?r.jsx(IZ,{zIndex:d?.zIndex,children:n}):n;return o.current?Bw.createPortal(r.jsx(z3,{value:o.current,children:h}),o.current):r.jsx("span",{ref:p=>{p&&i(p)}})},_Z=e=>{const{children:t,containerRef:n,appendToParentPortal:s}=e,i=n.current,o=i??(typeof window<"u"?document.body:void 0),l=j.useMemo(()=>{const d=i?.ownerDocument.createElement("div");return d&&(d.className=U2),d},[i]),[,u]=j.useState({});return ea(()=>u({}),[]),ea(()=>{if(!(!l||!o))return o.appendChild(l),()=>{o.removeChild(l)}},[l,o]),o&&l?Bw.createPortal(r.jsx(z3,{value:s?l:null,children:t}),l):null};function cf(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...s}=t;return n?r.jsx(_Z,{containerRef:n,...s}):r.jsx(LZ,{...s})}cf.className=U2;cf.selector=zZ;cf.displayName="Portal";const[BZ,$Z]=un({name:"ToastOptionsContext",strict:!1}),FZ=e=>{const t=j.useSyncExternalStore(Qo.subscribe,Qo.getState,Qo.getState),{motionVariants:n,component:s=T3,portalProps:i,animatePresenceProps:o}=e,u=Object.keys(t).map(d=>{const h=t[d];return r.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${d}`,id:`chakra-toast-manager-${d}`,style:tZ(d),children:r.jsx(Nc,{...o,initial:!1,children:h.map(p=>r.jsx(s,{motionVariants:n,...p},p.id))})},d)});return r.jsx(cf,{...i,children:u})},VZ=e=>function({children:n,theme:s=e,toastOptions:i,...o}){return r.jsxs(wY,{theme:s,...o,children:[r.jsx(BZ,{value:i?.defaultOptions,children:n}),r.jsx(FZ,{...i})]})},HZ=VZ(zz);function sO(e){return e.sort((t,n)=>{const s=t.compareDocumentPosition(n);if(s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(s&Node.DOCUMENT_POSITION_DISCONNECTED||s&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const UZ=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function iO(e,t,n){let s=e+1;return n&&s>=t&&(s=0),s}function oO(e,t,n){let s=e-1;return n&&s<0&&(s=t),s}const D1=typeof window<"u"?j.useLayoutEffect:j.useEffect,aO=e=>e;var WZ=Object.defineProperty,qZ=(e,t,n)=>t in e?WZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wr=(e,t,n)=>(qZ(e,typeof t!="symbol"?t+"":t,n),n);class GZ{constructor(){wr(this,"descendants",new Map),wr(this,"register",t=>{if(t!=null)return UZ(t)?this.registerNode(t):n=>{this.registerNode(n,t)}}),wr(this,"unregister",t=>{this.descendants.delete(t);const n=sO(Array.from(this.descendants.keys()));this.assignIndex(n)}),wr(this,"destroy",()=>{this.descendants.clear()}),wr(this,"assignIndex",t=>{this.descendants.forEach(n=>{const s=t.indexOf(n.node);n.index=s,n.node.dataset.index=n.index.toString()})}),wr(this,"count",()=>this.descendants.size),wr(this,"enabledCount",()=>this.enabledValues().length),wr(this,"values",()=>Array.from(this.descendants.values()).sort((n,s)=>n.index-s.index)),wr(this,"enabledValues",()=>this.values().filter(t=>!t.disabled)),wr(this,"item",t=>{if(this.count()!==0)return this.values()[t]}),wr(this,"enabledItem",t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]}),wr(this,"first",()=>this.item(0)),wr(this,"firstEnabled",()=>this.enabledItem(0)),wr(this,"last",()=>this.item(this.descendants.size-1)),wr(this,"lastEnabled",()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)}),wr(this,"indexOf",t=>t?this.descendants.get(t)?.index??-1:-1),wr(this,"enabledIndexOf",t=>t==null?-1:this.enabledValues().findIndex(n=>n.node.isSameNode(t))),wr(this,"next",(t,n=!0)=>{const s=iO(t,this.count(),n);return this.item(s)}),wr(this,"nextEnabled",(t,n=!0)=>{const s=this.item(t);if(!s)return;const i=this.enabledIndexOf(s.node),o=iO(i,this.enabledCount(),n);return this.enabledItem(o)}),wr(this,"prev",(t,n=!0)=>{const s=oO(t,this.count()-1,n);return this.item(s)}),wr(this,"prevEnabled",(t,n=!0)=>{const s=this.item(t);if(!s)return;const i=this.enabledIndexOf(s.node),o=oO(i,this.enabledCount()-1,n);return this.enabledItem(o)}),wr(this,"registerNode",(t,n)=>{if(!t||this.descendants.has(t))return;const s=Array.from(this.descendants.keys()).concat(t),i=sO(s);n?.disabled&&(n.disabled=!!n.disabled);const o={node:t,index:-1,...n};this.descendants.set(t,o),this.assignIndex(i)})}}function xb(){const[e,t]=un({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});return[e,t,()=>{const i=j.useRef(new GZ);return D1(()=>()=>i.current.destroy()),i.current},i=>{const o=t(),[l,u]=j.useState(-1),d=j.useRef(null);D1(()=>()=>{d.current&&o.unregister(d.current)},[]),D1(()=>{if(!d.current)return;const p=Number(d.current.dataset.index);l!=p&&!Number.isNaN(p)&&u(p)});const h=aO(i?o.register(i):o.register);return{descendants:o,index:l,enabledIndex:o.enabledIndexOf(d.current),register:er(h,d)}}]}const[YZ,yb]=un({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[KZ,W2]=un({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[XZ,rxe,JZ,QZ]=xb();function ZZ(e){const{onChange:t,defaultIndex:n,index:s,allowMultiple:i,allowToggle:o,...l}=e;nee(e),ree(e);const u=JZ(),[d,h]=j.useState(-1);j.useEffect(()=>()=>{h(-1)},[]);const[p,m]=tb({value:s,defaultValue(){return i?n??[]:n??-1},onChange:t});return{index:p,setIndex:m,htmlProps:l,getAccordionItemProps:y=>{let b=!1;return y!==null&&(b=Array.isArray(p)?p.includes(y):p===y),{isOpen:b,onChange:S=>{if(y!==null)if(i&&Array.isArray(p)){const E=S?p.concat(y):p.filter(k=>k!==y);m(E)}else S?m(y):o&&m(-1)}}},focusedIndex:d,setFocusedIndex:h,descendants:u}}const[eee,q2]=un({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function tee(e){const{isDisabled:t,isFocusable:n,id:s,...i}=e,{getAccordionItemProps:o,setFocusedIndex:l}=q2(),u=j.useRef(null),d=j.useId(),h=s??d,p=`accordion-button-${h}`,m=`accordion-panel-${h}`;see(e);const{register:x,index:y,descendants:b}=QZ({disabled:t&&!n}),{isOpen:C,onChange:S}=o(y===-1?null:y);iee({isOpen:C,isDisabled:t});const E=()=>{S?.(!0)},k=()=>{S?.(!1)},A=j.useCallback(()=>{S?.(!C),l(y)},[y,l,C,S]),T=j.useCallback(W=>{const re={ArrowDown:()=>{b.nextEnabled(y)?.node.focus()},ArrowUp:()=>{b.prevEnabled(y)?.node.focus()},Home:()=>{b.firstEnabled()?.node.focus()},End:()=>{b.lastEnabled()?.node.focus()}}[W.key];re&&(W.preventDefault(),re(W))},[b,y]),M=j.useCallback(()=>{l(y)},[l,y]),D=j.useCallback(function(te={},re=null){return{...te,type:"button",ref:er(x,u,re),id:p,disabled:!!t,"aria-expanded":!!C,"aria-controls":m,onClick:wt(te.onClick,A),onFocus:wt(te.onFocus,M),onKeyDown:wt(te.onKeyDown,T)}},[p,t,C,A,M,T,m,x]),$=j.useCallback(function(te={},re=null){return{...te,ref:re,role:"region",id:m,"aria-labelledby":p,hidden:!C}},[p,C,m]);return{isOpen:C,isDisabled:t,isFocusable:n,onOpen:E,onClose:k,getButtonProps:D,getPanelProps:$,htmlProps:i}}function nee(e){const t=e.index||e.defaultIndex,n=t!=null&&!Array.isArray(t)&&e.allowMultiple;eg({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof t},`})}function ree(e){eg({condition:!!(e.allowMultiple&&e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function see(e){eg({condition:!!(e.isFocusable&&!e.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function iee(e){eg({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}const I3=$e(function({children:t,reduceMotion:n,...s},i){const o=_r("Accordion",s),l=bn(s),{htmlProps:u,descendants:d,...h}=ZZ(l),p=j.useMemo(()=>({...h,reduceMotion:!!n}),[h,n]);return r.jsx(XZ,{value:d,children:r.jsx(eee,{value:p,children:r.jsx(YZ,{value:o,children:r.jsx(Re.div,{ref:i,...u,className:Ze("chakra-accordion",s.className),__css:o.root,children:t})})})})});I3.displayName="Accordion";const L3=$e(function(t,n){const{getButtonProps:s}=W2(),i=s(t,n),l={display:"flex",alignItems:"center",width:"100%",outline:0,...yb().button};return r.jsx(Re.button,{...i,className:Ze("chakra-accordion__button",t.className),__css:l})});L3.displayName="AccordionButton";function _3(e){const{isOpen:t,isDisabled:n}=W2(),{reduceMotion:s}=q2(),i=Ze("chakra-accordion__icon",e.className),o=yb(),l={opacity:n?.4:1,transform:t?"rotate(-180deg)":void 0,transition:s?void 0:"transform 0.2s",transformOrigin:"center",...o.icon};return r.jsx(Wn,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:l,...e,children:r.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}_3.displayName="AccordionIcon";const B3=$e(function(t,n){const{children:s,className:i}=t,{htmlProps:o,...l}=tee(t),u=yb(),d={...u.container,overflowAnchor:"none"},h=j.useMemo(()=>l,[l]);return r.jsx(KZ,{value:h,children:r.jsx(Re.div,{ref:n,...o,className:Ze("chakra-accordion__item",i),__css:d,children:typeof s=="function"?s({isExpanded:!!l.isOpen,isDisabled:!!l.isDisabled}):s})})});B3.displayName="AccordionItem";const vu={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},gp={slideLeft:{position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},slideRight:{position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},slideUp:{position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},slideDown:{position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}}};function yC(e){switch(e?.direction??"right"){case"right":return gp.slideRight;case"left":return gp.slideLeft;case"bottom":return gp.slideDown;case"top":return gp.slideUp;default:return gp.slideRight}}const Nu={enter:{duration:.2,ease:vu.easeOut},exit:{duration:.1,ease:vu.easeIn}},ko={enter:(e,t)=>({...e,delay:typeof t=="number"?t:t?.enter}),exit:(e,t)=>({...e,delay:typeof t=="number"?t:t?.exit})},oee=e=>e!=null&&parseInt(e.toString(),10)>0,lO={exit:{height:{duration:.2,ease:vu.ease},opacity:{duration:.3,ease:vu.ease}},enter:{height:{duration:.3,ease:vu.ease},opacity:{duration:.4,ease:vu.ease}}},aee={exit:({animateOpacity:e,startingHeight:t,transition:n,transitionEnd:s,delay:i})=>({...e&&{opacity:oee(t)?1:0},height:t,transitionEnd:s?.exit,transition:n?.exit??ko.exit(lO.exit,i)}),enter:({animateOpacity:e,endingHeight:t,transition:n,transitionEnd:s,delay:i})=>({...e&&{opacity:1},height:t,transitionEnd:s?.enter,transition:n?.enter??ko.enter(lO.enter,i)})},G2=j.forwardRef((e,t)=>{const{in:n,unmountOnExit:s,animateOpacity:i=!0,startingHeight:o=0,endingHeight:l="auto",style:u,className:d,transition:h,transitionEnd:p,animatePresenceProps:m,...x}=e,[y,b]=j.useState(!1);j.useEffect(()=>{const A=setTimeout(()=>{b(!0)});return()=>clearTimeout(A)},[]),eg({condition:Number(o)>0&&!!s,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const C=parseFloat(o.toString())>0,S={startingHeight:o,endingHeight:l,animateOpacity:i,transition:y?h:{enter:{duration:0}},transitionEnd:{enter:p?.enter,exit:s?p?.exit:{...p?.exit,display:C?"block":"none"}}},E=s?n:!0,k=n||s?"enter":"exit";return r.jsx(Nc,{...m,initial:!1,custom:S,children:E&&r.jsx(Ro.div,{ref:t,...x,className:Ze("chakra-collapse",d),style:{overflow:"hidden",display:"block",...u},custom:S,variants:aee,initial:s?"exit":!1,animate:k,exit:"exit"})})});G2.displayName="Collapse";const $3=$e(function(t,n){const{className:s,motionProps:i,...o}=t,{reduceMotion:l}=q2(),{getPanelProps:u,isOpen:d}=W2(),h=u(o,n),p=Ze("chakra-accordion__panel",s),m=yb();l||delete h.hidden;const x=r.jsx(Re.div,{...h,__css:m.panel,className:p});return l?x:r.jsx(G2,{in:d,...i,children:x})});$3.displayName="AccordionPanel";const[lee,cee]=un({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"});function uee(e){const t=e.trim().split(" "),n=t[0]??"",s=t.length>1?t[t.length-1]:"";return n&&s?`${n.charAt(0)}${s.charAt(0)}`:n.charAt(0)}function F3(e){const{name:t,getInitials:n,...s}=e,i=cee();return r.jsx(Re.div,{role:"img","aria-label":t,...s,__css:i.label,children:t?n?.(t):null})}F3.displayName="AvatarName";const V3=e=>r.jsxs(Re.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...e,children:[r.jsx("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),r.jsx("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]});function H3(e){const{loading:t,src:n,srcSet:s,onLoad:i,onError:o,crossOrigin:l,sizes:u,ignoreFallback:d}=e,[h,p]=j.useState("pending");j.useEffect(()=>{p(n?"loading":"pending")},[n]);const m=j.useRef(null),x=j.useCallback(()=>{if(!n)return;y();const b=new Image;b.src=n,l&&(b.crossOrigin=l),s&&(b.srcset=s),u&&(b.sizes=u),t&&(b.loading=t),b.onload=C=>{y(),p("loaded"),i?.(C)},b.onerror=C=>{y(),p("failed"),o?.(C)},m.current=b},[n,l,s,u,i,o,t]),y=()=>{m.current&&(m.current.onload=null,m.current.onerror=null,m.current=null)};return ea(()=>{if(!d)return h==="loading"&&x(),()=>{y()}},[h,x,d]),d?"loaded":h}const dee=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function U3(e){const{src:t,srcSet:n,onError:s,onLoad:i,getInitials:o,name:l,borderRadius:u,loading:d,iconLabel:h,icon:p=r.jsx(V3,{}),ignoreFallback:m,referrerPolicy:x,crossOrigin:y}=e,C=H3({src:t,onError:s,crossOrigin:y,ignoreFallback:m})==="loaded";return!t||!C?l?r.jsx(F3,{className:"chakra-avatar__initials",getInitials:o,name:l}):j.cloneElement(p,{role:"img","aria-label":h}):r.jsx(Re.img,{src:t,srcSet:n,alt:l??h,onLoad:i,referrerPolicy:x,crossOrigin:y??void 0,className:"chakra-avatar__img",loading:d,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:u}})}U3.displayName="AvatarImage";const hee={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},W3=$e((e,t)=>{const n=_r("Avatar",e),[s,i]=j.useState(!1),{src:o,srcSet:l,name:u,showBorder:d,borderRadius:h="full",onError:p,onLoad:m,getInitials:x=uee,icon:y=r.jsx(V3,{}),iconLabel:b=" avatar",loading:C,children:S,borderColor:E,ignoreFallback:k,crossOrigin:A,referrerPolicy:T,...M}=bn(e),D={borderRadius:h,borderWidth:d?"2px":void 0,...hee,...n.container};return E&&(D.borderColor=E),r.jsx(Re.span,{ref:t,...M,className:Ze("chakra-avatar",e.className),"data-loaded":Qt(s),__css:D,children:r.jsxs(lee,{value:n,children:[r.jsx(U3,{src:o,srcSet:l,loading:C,onLoad:wt(m,()=>{i(!0)}),onError:p,getInitials:x,name:u,borderRadius:h,icon:y,iconLabel:b,ignoreFallback:k,crossOrigin:A,referrerPolicy:T}),S]})})});W3.displayName="Avatar";const Ge=$e(function(t,n){const s=Ks("Badge",t),{className:i,...o}=bn(t);return r.jsx(Re.span,{ref:n,className:Ze("chakra-badge",t.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...s}})});Ge.displayName="Badge";const de=Re("div");de.displayName="Box";const[fee,Y2]=un({name:"BreadcrumbStylesContext",errorMessage:`useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Breadcrumb />" `}),bC=$e(function(t,n){const s=_r("Breadcrumb",t),i=bn(t),{children:o,spacing:l="0.5rem",separator:u="/",className:d,listProps:h,...p}=i,m=od(o),x=m.length,y=m.map((C,S)=>j.cloneElement(C,{separator:u,spacing:l,isLastChild:x===S+1})),b=Ze("chakra-breadcrumb",d);return r.jsx(Re.nav,{ref:n,"aria-label":"breadcrumb",className:b,__css:s.container,...p,children:r.jsx(fee,{value:s,children:r.jsx(Re.ol,{className:"chakra-breadcrumb__list",...h,__css:{display:"flex",alignItems:"center",...s.list},children:y})})})});bC.displayName="Breadcrumb";const J0=$e(function(t,n){const{isCurrentPage:s,as:i,className:o,href:l,...u}=t,d=Y2(),h={ref:n,as:i,className:Ze("chakra-breadcrumb__link",o),...u};return s?r.jsx(Re.span,{"aria-current":"page",__css:d.link,...h}):r.jsx(Re.a,{__css:d.link,href:l,...h})});J0.displayName="BreadcrumbLink";const vC=$e(function(t,n){const{spacing:s,...i}=t,o=Y2(),l={mx:s,...o.separator};return r.jsx(Re.span,{ref:n,role:"presentation",...i,__css:l})});vC.displayName="BreadcrumbSeparator";const jC=$e(function(t,n){const{isCurrentPage:s,separator:i,isLastChild:o,spacing:l,children:u,className:d,...h}=t,m=od(u).map(C=>C.type===J0?j.cloneElement(C,{isCurrentPage:s}):C.type===vC?j.cloneElement(C,{spacing:l,children:C.props.children||i}):C),x=Y2(),y={display:"inline-flex",alignItems:"center",...x.item},b=Ze("chakra-breadcrumb__list-item",d);return r.jsxs(Re.li,{ref:n,className:b,...h,__css:y,children:[m,!o&&r.jsx(vC,{spacing:l,children:i})]})});jC.displayName="BreadcrumbItem";const[pee,mee]=un({strict:!1,name:"ButtonGroupContext"});function zp(e){const{children:t,className:n,...s}=e,i=j.isValidElement(t)?j.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,o=Ze("chakra-button__icon",n);return r.jsx(Re.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...s,className:o,children:i})}zp.displayName="ButtonIcon";function SC(e){const{label:t,placement:n,spacing:s="0.5rem",children:i=r.jsx(sn,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:l,...u}=e,d=Ze("chakra-button__spinner",o),h=n==="start"?"marginEnd":"marginStart",p=j.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[h]:t?s:0,fontSize:"1em",lineHeight:"normal",...l}),[l,t,h,s]);return r.jsx(Re.div,{className:d,...u,__css:p,children:i})}SC.displayName="ButtonSpinner";function gee(e){const[t,n]=j.useState(!e);return{ref:j.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:t?"button":void 0}}const Y=$e((e,t)=>{const n=mee(),s=Ks("Button",{...n,...e}),{isDisabled:i=n?.isDisabled,isLoading:o,isActive:l,children:u,leftIcon:d,rightIcon:h,loadingText:p,iconSpacing:m="0.5rem",type:x,spinner:y,spinnerPlacement:b="start",className:C,as:S,shouldWrapChildren:E,...k}=bn(e),A=j.useMemo(()=>{const $={...s?._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...s,...!!n&&{_focus:$}}},[s,n]),{ref:T,type:M}=gee(S),D={rightIcon:h,leftIcon:d,iconSpacing:m,children:u,shouldWrapChildren:E};return r.jsxs(Re.button,{disabled:i||o,ref:G8(t,T),as:S,type:x??M,"data-active":Qt(l),"data-loading":Qt(o),__css:A,className:Ze("chakra-button",C),...k,children:[o&&b==="start"&&r.jsx(SC,{className:"chakra-button__spinner--start",label:p,placement:"start",spacing:m,children:y}),o?p||r.jsx(Re.span,{opacity:0,children:r.jsx(cO,{...D})}):r.jsx(cO,{...D}),o&&b==="end"&&r.jsx(SC,{className:"chakra-button__spinner--end",label:p,placement:"end",spacing:m,children:y})]})});Y.displayName="Button";function cO(e){const{leftIcon:t,rightIcon:n,children:s,iconSpacing:i,shouldWrapChildren:o}=e;return o?r.jsxs("span",{style:{display:"contents"},children:[t&&r.jsx(zp,{marginEnd:i,children:t}),s,n&&r.jsx(zp,{marginStart:i,children:n})]}):r.jsxs(r.Fragment,{children:[t&&r.jsx(zp,{marginEnd:i,children:t}),s,n&&r.jsx(zp,{marginStart:i,children:n})]})}const xee={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},yee={horizontal:e=>({"& > *:not(style) ~ *:not(style)":{marginStart:e}}),vertical:e=>({"& > *:not(style) ~ *:not(style)":{marginTop:e}})},CC=$e(function(t,n){const{size:s,colorScheme:i,variant:o,className:l,spacing:u="0.5rem",isAttached:d,isDisabled:h,orientation:p="horizontal",...m}=t,x=Ze("chakra-button__group",l),y=j.useMemo(()=>({size:s,colorScheme:i,variant:o,isDisabled:h}),[s,i,o,h]);let b={display:"inline-flex",...d?xee[p]:yee[p](u)};const C=p==="vertical";return r.jsx(pee,{value:y,children:r.jsx(Re.div,{ref:n,role:"group",__css:b,className:x,"data-attached":d?"":void 0,"data-orientation":p,flexDir:C?"column":void 0,...m})})});CC.displayName="ButtonGroup";const et=$e((e,t)=>{const{icon:n,children:s,isRound:i,"aria-label":o,...l}=e,u=n||s,d=j.isValidElement(u)?j.cloneElement(u,{"aria-hidden":!0,focusable:!1}):null;return r.jsx(Y,{px:"0",py:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":o,...l,children:d})});et.displayName="IconButton";const[bee,q3]=bY("Card"),Me=$e(function(t,n){const{className:s,children:i,direction:o="column",justify:l,align:u,...d}=bn(t),h=_r("Card",t);return r.jsx(Re.div,{ref:n,className:Ze("chakra-card",s),__css:{display:"flex",flexDirection:o,justifyContent:l,alignItems:u,position:"relative",minWidth:0,wordWrap:"break-word",...h.container},...d,children:r.jsx(bee,{value:h,children:i})})}),Ae=$e(function(t,n){const{className:s,...i}=t,o=q3();return r.jsx(Re.div,{ref:n,className:Ze("chakra-card__body",s),__css:o.body,...i})}),Ct=$e(function(t,n){const{className:s,...i}=t,o=q3();return r.jsx(Re.div,{ref:n,className:Ze("chakra-card__header",s),__css:o.header,...i})}),cn=Re("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});cn.displayName="Center";const vee={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};$e(function(t,n){const{axis:s="both",...i}=t;return r.jsx(Re.div,{ref:n,__css:vee[s],...i,position:"absolute"})});const[jee,See]=un({name:"CheckboxGroupContext",strict:!1});function Cee(e){return r.jsx(Re.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...e,children:r.jsx("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function wee(e){return r.jsx(Re.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...e,children:r.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function Eee(e){const{isIndeterminate:t,isChecked:n,...s}=e,i=t?wee:Cee;return n||t?r.jsx(Re.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:r.jsx(i,{...s})}):null}var kee=()=>typeof document<"u",uO=!1,lg=null,Wu=!1,wC=!1,EC=new Set;function K2(e,t){EC.forEach(n=>n(e,t))}var Aee=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function Tee(e){return!(e.metaKey||!Aee&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function dO(e){Wu=!0,Tee(e)&&(lg="keyboard",K2("keyboard",e))}function Qd(e){if(lg="pointer",e.type==="mousedown"||e.type==="pointerdown"){Wu=!0;const t=e.composedPath?e.composedPath()[0]:e.target;let n=!1;try{n=t.matches(":focus-visible")}catch{}if(n)return;K2("pointer",e)}}function Mee(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function Ree(e){Mee(e)&&(Wu=!0,lg="virtual")}function Dee(e){e.target===window||e.target===document||e.target instanceof Element&&e.target.hasAttribute("tabindex")||(!Wu&&!wC&&(lg="virtual",K2("virtual",e)),Wu=!1,wC=!1)}function Oee(){Wu=!1,wC=!0}function hO(){return lg!=="pointer"}function Nee(){if(!kee()||uO)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){Wu=!0,e.apply(this,n)},document.addEventListener("keydown",dO,!0),document.addEventListener("keyup",dO,!0),document.addEventListener("click",Ree,!0),window.addEventListener("focus",Dee,!0),window.addEventListener("blur",Oee,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",Qd,!0),document.addEventListener("pointermove",Qd,!0),document.addEventListener("pointerup",Qd,!0)):(document.addEventListener("mousedown",Qd,!0),document.addEventListener("mousemove",Qd,!0),document.addEventListener("mouseup",Qd,!0)),uO=!0}function Pee(e){Nee(),e(hO());const t=()=>e(hO());return EC.add(t),()=>{EC.delete(t)}}const[zee,G3]=un({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Iee,bb]=un({strict:!1,name:"FormControlContext"});function Lee(e){const{id:t,isRequired:n,isInvalid:s,isDisabled:i,isReadOnly:o,...l}=e,u=j.useId(),d=t||`field-${u}`,h=`${d}-label`,p=`${d}-feedback`,m=`${d}-helptext`,[x,y]=j.useState(!1),[b,C]=j.useState(!1),[S,E]=j.useState(!1),k=j.useCallback(($={},W=null)=>({id:m,...$,ref:er(W,te=>{te&&C(!0)})}),[m]),A=j.useCallback(($={},W=null)=>({...$,ref:W,"data-focus":Qt(S),"data-disabled":Qt(i),"data-invalid":Qt(s),"data-readonly":Qt(o),id:$.id!==void 0?$.id:h,htmlFor:$.htmlFor!==void 0?$.htmlFor:d}),[d,i,S,s,o,h]),T=j.useCallback(($={},W=null)=>({id:p,...$,ref:er(W,te=>{te&&y(!0)}),"aria-live":"polite"}),[p]),M=j.useCallback(($={},W=null)=>({...$,...l,ref:W,role:"group","data-focus":Qt(S),"data-disabled":Qt(i),"data-invalid":Qt(s),"data-readonly":Qt(o)}),[l,i,S,s,o]),D=j.useCallback(($={},W=null)=>({...$,ref:W,role:"presentation","aria-hidden":!0,children:$.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!s,isReadOnly:!!o,isDisabled:!!i,isFocused:!!S,onFocus:()=>E(!0),onBlur:()=>E(!1),hasFeedbackText:x,setHasFeedbackText:y,hasHelpText:b,setHasHelpText:C,id:d,labelId:h,feedbackId:p,helpTextId:m,htmlProps:l,getHelpTextProps:k,getErrorMessageProps:T,getRootProps:M,getLabelProps:A,getRequiredIndicatorProps:D}}const G=$e(function(t,n){const s=_r("Form",t),i=bn(t),{getRootProps:o,htmlProps:l,...u}=Lee(i),d=Ze("chakra-form-control",t.className);return r.jsx(Iee,{value:u,children:r.jsx(zee,{value:s,children:r.jsx(Re.div,{...o({},n),className:d,__css:s.container})})})});G.displayName="FormControl";const A0=$e(function(t,n){const s=bb(),i=G3(),o=Ze("chakra-form__helper-text",t.className);return r.jsx(Re.div,{...s?.getHelpTextProps(t,n),__css:i.helperText,className:o})});A0.displayName="FormHelperText";function X2(e){const{isDisabled:t,isInvalid:n,isReadOnly:s,isRequired:i,...o}=J2(e);return{...o,disabled:t,readOnly:s,required:i,"aria-invalid":Au(n),"aria-required":Au(i),"aria-readonly":Au(s)}}function J2(e){const t=bb(),{id:n,disabled:s,readOnly:i,required:o,isRequired:l,isInvalid:u,isReadOnly:d,isDisabled:h,onFocus:p,onBlur:m,...x}=e,y=e["aria-describedby"]?[e["aria-describedby"]]:[];return t?.hasFeedbackText&&t?.isInvalid&&y.push(t.feedbackId),t?.hasHelpText&&y.push(t.helpTextId),{...x,"aria-describedby":y.join(" ")||void 0,id:n??t?.id,isDisabled:s??h??t?.isDisabled,isReadOnly:i??d??t?.isReadOnly,isRequired:o??l??t?.isRequired,isInvalid:u??t?.isInvalid,onFocus:wt(t?.onFocus,p),onBlur:wt(t?.onBlur,m)}}const Q2={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function Y3(e={}){const t=J2(e),{isDisabled:n,isReadOnly:s,isRequired:i,isInvalid:o,id:l,onBlur:u,onFocus:d,"aria-describedby":h}=t,{defaultChecked:p,isChecked:m,isFocusable:x,onChange:y,isIndeterminate:b,name:C,value:S,tabIndex:E=void 0,"aria-label":k,"aria-labelledby":A,"aria-invalid":T,...M}=e,D=Zm(M,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),$=es(y),W=es(u),te=es(d),[re,U]=j.useState(!1),[oe,xe]=j.useState(!1),[ie,H]=j.useState(!1),F=j.useRef(!1);j.useEffect(()=>Pee(De=>{F.current=De}),[]);const _=j.useRef(null),[B,fe]=j.useState(!0),[I,ee]=j.useState(!!p),ae=m!==void 0,P=ae?m:I,R=j.useCallback(De=>{if(s||n){De.preventDefault();return}ae||ee(P?De.currentTarget.checked:b?!0:De.currentTarget.checked),$?.(De)},[s,n,P,ae,b,$]);ea(()=>{_.current&&(_.current.indeterminate=!!b)},[b]),wc(()=>{n&&U(!1)},[n,U]),ea(()=>{const De=_.current;if(!De?.form)return;const Tt=()=>{ee(!!p)};return De.form.addEventListener("reset",Tt),()=>De.form?.removeEventListener("reset",Tt)},[]);const N=n&&!x,Z=j.useCallback(De=>{De.key===" "&&H(!0)},[H]),ke=j.useCallback(De=>{De.key===" "&&H(!1)},[H]);ea(()=>{if(!_.current)return;_.current.checked!==P&&ee(_.current.checked)},[_.current]);const Te=j.useCallback((De={},Tt=null)=>{const ue=Ee=>{re&&Ee.preventDefault(),H(!0)};return{...De,ref:Tt,"data-active":Qt(ie),"data-hover":Qt(oe),"data-checked":Qt(P),"data-focus":Qt(re),"data-focus-visible":Qt(re&&F.current),"data-indeterminate":Qt(b),"data-disabled":Qt(n),"data-invalid":Qt(o),"data-readonly":Qt(s),"aria-hidden":!0,onMouseDown:wt(De.onMouseDown,ue),onMouseUp:wt(De.onMouseUp,()=>H(!1)),onMouseEnter:wt(De.onMouseEnter,()=>xe(!0)),onMouseLeave:wt(De.onMouseLeave,()=>xe(!1))}},[ie,P,n,re,oe,b,o,s]),je=j.useCallback((De={},Tt=null)=>({...De,ref:Tt,"data-active":Qt(ie),"data-hover":Qt(oe),"data-checked":Qt(P),"data-focus":Qt(re),"data-focus-visible":Qt(re&&F.current),"data-indeterminate":Qt(b),"data-disabled":Qt(n),"data-invalid":Qt(o),"data-readonly":Qt(s)}),[ie,P,n,re,oe,b,o,s]),Ke=j.useCallback((De={},Tt=null)=>({...D,...De,ref:er(Tt,ue=>{ue&&fe(ue.tagName==="LABEL")}),onClick:wt(De.onClick,()=>{B||(_.current?.click(),requestAnimationFrame(()=>{_.current?.focus({preventScroll:!0})}))}),"data-disabled":Qt(n),"data-checked":Qt(P),"data-invalid":Qt(o)}),[D,n,P,o,B]),Xe=j.useCallback((De={},Tt=null)=>({...De,ref:er(_,Tt),type:"checkbox",name:C,value:S,id:l,tabIndex:E,onChange:wt(De.onChange,R),onBlur:wt(De.onBlur,W,()=>U(!1)),onFocus:wt(De.onFocus,te,()=>U(!0)),onKeyDown:wt(De.onKeyDown,Z),onKeyUp:wt(De.onKeyUp,ke),required:i,checked:P,disabled:N,readOnly:s,"aria-label":k,"aria-labelledby":A,"aria-invalid":T?!!T:o,"aria-describedby":h,"aria-disabled":n,"aria-checked":b?"mixed":P,style:Q2}),[C,S,l,E,R,W,te,Z,ke,i,P,N,s,k,A,T,o,h,n,b]),He=j.useCallback((De={},Tt=null)=>({...De,ref:Tt,onMouseDown:wt(De.onMouseDown,_ee),"data-disabled":Qt(n),"data-checked":Qt(P),"data-invalid":Qt(o)}),[P,n,o]);return{state:{isInvalid:o,isFocused:re,isChecked:P,isActive:ie,isHovered:oe,isIndeterminate:b,isDisabled:n,isReadOnly:s,isRequired:i},getRootProps:Ke,getCheckboxProps:Te,getIndicatorProps:je,getInputProps:Xe,getLabelProps:He,htmlProps:D}}function _ee(e){e.preventDefault(),e.stopPropagation()}function Bee(e){const[t,n]=j.useState(e),[s,i]=j.useState(!1);return e!==t&&(i(!0),n(e)),s}const $ee={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},Fee={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},Vee=Oc({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),Hee=Oc({from:{opacity:0},to:{opacity:1}}),Uee=Oc({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),Pu=$e(function(t,n){const s=See(),i={...s,...t},o=_r("Checkbox",i),l=bn(t),{spacing:u="0.5rem",className:d,children:h,iconColor:p,iconSize:m,icon:x=r.jsx(Eee,{}),isChecked:y,isDisabled:b=s?.isDisabled,onChange:C,inputProps:S,...E}=l;let k=y;s?.value&&l.value&&(k=s.value.includes(l.value));let A=C;s?.onChange&&l.value&&(A=Fw(s.onChange,C));const{state:T,getInputProps:M,getCheckboxProps:D,getLabelProps:$,getRootProps:W}=Y3({...E,isDisabled:b,isChecked:k,onChange:A}),te=Bee(T.isChecked),re=j.useMemo(()=>({animation:te?T.isIndeterminate?`${Hee} 20ms linear, ${Uee} 200ms linear`:`${Vee} 200ms linear`:void 0,...o.icon,...Qm({fontSize:m,color:p})}),[p,m,te,T.isIndeterminate,o.icon]),U=j.cloneElement(x,{__css:re,isIndeterminate:T.isIndeterminate,isChecked:T.isChecked});return r.jsxs(Re.label,{__css:{...Fee,...o.container},className:Ze("chakra-checkbox",d),...W(),children:[r.jsx("input",{className:"chakra-checkbox__input",...M(S,n)}),r.jsx(Re.span,{__css:{...$ee,...o.control},className:"chakra-checkbox__control",...D(),children:U}),h&&r.jsx(Re.span,{className:"chakra-checkbox__label",...$(),__css:{marginStart:u,...o.label},children:h})]})});Pu.displayName="Checkbox";function fO(e){return e&&ts(e)&&ts(e.target)}function Wee(e={}){const{defaultValue:t,value:n,onChange:s,isDisabled:i,isNative:o}=e,l=es(s),[u,d]=tb({value:n,defaultValue:t||[],onChange:l}),h=j.useCallback(m=>{if(!u)return;const x=fO(m)?m.target.checked:!u.includes(m),y=fO(m)?m.target.value:m,b=x?[...u,y]:u.filter(C=>String(C)!==String(y));d(b)},[d,u]),p=j.useCallback((m={})=>({...m,[o?"checked":"isChecked"]:u.some(y=>String(m.value)===String(y)),onChange:h}),[h,o,u]);return{value:u,isDisabled:i,onChange:h,setValue:d,getCheckboxProps:p}}function K3(e){const{colorScheme:t,size:n,variant:s,children:i,isDisabled:o}=e,{value:l,onChange:u}=Wee(e),d=j.useMemo(()=>({size:n,onChange:u,colorScheme:t,value:l,variant:s,isDisabled:o}),[n,u,t,l,s,o]);return r.jsx(jee,{value:d,children:i})}K3.displayName="CheckboxGroup";const Q0=$e(function(t,n){const s=Ks("Code",t),{className:i,...o}=bn(t);return r.jsx(Re.code,{ref:n,className:Ze("chakra-code",t.className),...o,__css:{display:"inline-block",...s}})});Q0.displayName="Code";const Ws=$e(function(t,n){const{className:s,centerContent:i,...o}=bn(t),l=Ks("Container",t);return r.jsx(Re.div,{ref:n,className:Ze("chakra-container",s),...o,__css:{...l,...i&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});Ws.displayName="Container";const rn=$e(function(t,n){const{borderLeftWidth:s,borderBottomWidth:i,borderTopWidth:o,borderRightWidth:l,borderWidth:u,borderStyle:d,borderColor:h,...p}=Ks("Divider",t),{className:m,orientation:x="horizontal",__css:y,...b}=bn(t),C={vertical:{borderLeftWidth:s||l||u||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||u||"1px",width:"100%"}};return r.jsx(Re.hr,{ref:n,"aria-orientation":x,...b,__css:{...p,border:"0",borderColor:h,borderStyle:d,...C[x],...y},className:Ze("chakra-divider",m)})});rn.displayName="Divider";function Ip(e){return typeof e=="function"}function qee(...e){return t=>e.reduce((n,s)=>s(n),t)}const Gee=e=>function(...n){let s=[...n],i=n[n.length-1];return fG(i)&&s.length>1?s=s.slice(0,s.length-1):i=e,qee(...s.map(o=>l=>Ip(o)?o(l):Kee(l,o)))(i)},Yee=Gee(zz);function Kee(...e){return Zi({},...e,X3)}function X3(e,t,n,s){if((Ip(e)||Ip(t))&&Object.prototype.hasOwnProperty.call(s,n))return(...i)=>{const o=Ip(e)?e(...i):e,l=Ip(t)?t(...i):t;return Zi({},o,l,X3)};if(ts(e)&&FS(t)||FS(e)&&ts(t))return t}const qn=$e(function(t,n){const{direction:s,align:i,justify:o,wrap:l,basis:u,grow:d,shrink:h,...p}=t,m={display:"flex",flexDirection:s,alignItems:i,justifyContent:o,flexWrap:l,flexBasis:u,flexGrow:d,flexShrink:h};return r.jsx(Re.div,{ref:n,__css:m,...p})});qn.displayName="Flex";function Xee(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var kC="data-focus-lock",J3="data-focus-lock-disabled",Jee="data-no-focus-lock",Qee="data-autofocus-inside",Zee="data-no-autofocus";function O1(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ete(e,t){var n=j.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=t,n.facade}var tte=typeof window<"u"?j.useLayoutEffect:j.useEffect,pO=new WeakMap;function Q3(e,t){var n=ete(null,function(s){return e.forEach(function(i){return O1(i,s)})});return tte(function(){var s=pO.get(n);if(s){var i=new Set(s),o=new Set(e),l=n.current;i.forEach(function(u){o.has(u)||O1(u,null)}),o.forEach(function(u){i.has(u)||O1(u,l)})}pO.set(n,e)},[e]),n}var N1={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Zo=function(){return Zo=Object.assign||function(t){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Zo.apply(this,arguments)};function Z3(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function nte(e,t,n){if(n||arguments.length===2)for(var s=0,i=t.length,o;s<i;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}function e4(e){return e}function t4(e,t){t===void 0&&(t=e4);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var l=t(o,s);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(s=!0;n.length;){var l=n;n=[],l.forEach(o)}n={push:function(u){return o(u)},filter:function(){return n}}},assignMedium:function(o){s=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(o),l=n}var d=function(){var p=l;l=[],p.forEach(o)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(p){l.push(p),h()},filter:function(p){return l=l.filter(p),n}}}};return i}function Z2(e,t){return t===void 0&&(t=e4),t4(e,t)}function n4(e){e===void 0&&(e={});var t=t4(null);return t.options=Zo({async:!0,ssr:!1},e),t}var r4=function(e){var t=e.sideCar,n=Z3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return j.createElement(s,Zo({},n))};r4.isSideCarExport=!0;function rte(e,t){return e.useMedium(t),r4}var s4=Z2({},function(e){var t=e.target,n=e.currentTarget;return{target:t,currentTarget:n}}),i4=Z2(),ste=Z2(),ite=n4({async:!0,ssr:typeof document<"u"}),ote=j.createContext(void 0),ate=[],eE=j.forwardRef(function(t,n){var s,i=j.useState(),o=i[0],l=i[1],u=j.useRef(),d=j.useRef(!1),h=j.useRef(null),p=j.useState({}),m=p[1],x=t.children,y=t.disabled,b=y===void 0?!1:y,C=t.noFocusGuards,S=C===void 0?!1:C,E=t.persistentFocus,k=E===void 0?!1:E,A=t.crossFrame,T=A===void 0?!0:A,M=t.autoFocus,D=M===void 0?!0:M;t.allowTextSelection;var $=t.group,W=t.className,te=t.whiteList,re=t.hasPositiveIndices,U=t.shards,oe=U===void 0?ate:U,xe=t.as,ie=xe===void 0?"div":xe,H=t.lockProps,F=H===void 0?{}:H,_=t.sideCar,B=t.returnFocus,fe=B===void 0?!1:B,I=t.focusOptions,ee=t.onActivation,ae=t.onDeactivation,P=j.useState({}),R=P[0],N=j.useCallback(function(ue){var Ee=ue.captureFocusRestore;if(!h.current){var nt,X=(nt=document)==null?void 0:nt.activeElement;h.current=X,X!==document.body&&(h.current=Ee(X))}u.current&&ee&&ee(u.current),d.current=!0,m()},[ee]),Z=j.useCallback(function(){d.current=!1,ae&&ae(u.current),m()},[ae]),ke=j.useCallback(function(ue){var Ee=h.current;if(Ee){var nt=(typeof Ee=="function"?Ee():Ee)||document.body,X=typeof fe=="function"?fe(nt):fe;if(X){var le=typeof X=="object"?X:void 0;h.current=null,ue?Promise.resolve().then(function(){return nt.focus(le)}):nt.focus(le)}}},[fe]),Te=j.useCallback(function(ue){d.current&&s4.useMedium(ue)},[]),je=i4.useMedium,Ke=j.useCallback(function(ue){u.current!==ue&&(u.current=ue,l(ue))},[]),Xe=Uu((s={},s[J3]=b&&"disabled",s[kC]=$,s),F),He=S!==!0,pt=He&&S!=="tail",De=Q3([n,Ke]),Tt=j.useMemo(function(){return{observed:u,shards:oe,enabled:!b,active:d.current}},[b,d.current,oe,o]);return Lt.createElement(j.Fragment,null,He&&[Lt.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:b?-1:0,style:N1}),re?Lt.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:b?-1:1,style:N1}):null],!b&&Lt.createElement(_,{id:R,sideCar:ite,observed:o,disabled:b,persistentFocus:k,crossFrame:T,autoFocus:D,whiteList:te,shards:oe,onActivation:N,onDeactivation:Z,returnFocus:ke,focusOptions:I,noFocusGuards:S}),Lt.createElement(ie,Uu({ref:De},Xe,{className:W,onBlur:je,onFocus:Te}),Lt.createElement(ote.Provider,{value:Tt},x)),pt&&Lt.createElement("div",{"data-focus-guard":!0,tabIndex:b?-1:0,style:N1}))});eE.propTypes={};function AC(e,t){return AC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},AC(e,t)}function lte(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,AC(e,t)}function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}function cte(e,t){if(Tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Tm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ute(e){var t=cte(e,"string");return Tm(t)=="symbol"?t:t+""}function dte(e,t,n){return(t=ute(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hte(e,t){function n(s){return s.displayName||s.name||"Component"}return function(i){var o=[],l;function u(){l=e(o.map(function(h){return h.props})),t(l)}var d=(function(h){lte(p,h);function p(){return h.apply(this,arguments)||this}p.peek=function(){return l};var m=p.prototype;return m.componentDidMount=function(){o.push(this),u()},m.componentDidUpdate=function(){u()},m.componentWillUnmount=function(){var y=o.indexOf(this);o.splice(y,1),u()},m.render=function(){return Lt.createElement(i,this.props)},p})(j.PureComponent);return dte(d,"displayName","SideEffect("+n(i)+")"),d}}var fa=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},qu=function(e){return Array.isArray(e)?e:[e]},o4=function(e){return Array.isArray(e)?e[0]:e},fte=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},a4=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},l4=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},pte=function(e){return e.hasAttribute("inert")},mte=function(e,t){return!e||l4(e)||!fte(e)&&!pte(e)&&t(a4(e))},c4=function(e,t){var n=e.get(t);if(n!==void 0)return n;var s=mte(t,c4.bind(void 0,e));return e.set(t,s),s},gte=function(e,t){return e&&!l4(e)?bte(e)?t(a4(e)):!1:!0},u4=function(e,t){var n=e.get(t);if(n!==void 0)return n;var s=gte(t,u4.bind(void 0,e));return e.set(t,s),s},d4=function(e){return e.dataset},xte=function(e){return e.tagName==="BUTTON"},h4=function(e){return e.tagName==="INPUT"},f4=function(e){return h4(e)&&e.type==="radio"},yte=function(e){return!((h4(e)||xte(e))&&(e.type==="hidden"||e.disabled))},bte=function(e){var t=e.getAttribute(Zee);return![!0,"true",""].includes(t)},tE=function(e){var t;return!!(e&&(!((t=d4(e))===null||t===void 0)&&t.focusGuard))},TC=function(e){return!tE(e)},vte=function(e){return!!e},jte=function(e,t){var n=Math.max(0,e.tabIndex),s=Math.max(0,t.tabIndex),i=n-s,o=e.index-t.index;if(i){if(!n)return 1;if(!s)return-1}return i||o},Ste=function(e){return e.tabIndex<0&&!e.hasAttribute("tabindex")?0:e.tabIndex},nE=function(e,t,n){return fa(e).map(function(s,i){var o=Ste(s);return{node:s,index:i,tabIndex:n&&o===-1?(s.dataset||{}).focusGuard?0:-1:o}}).filter(function(s){return!t||s.tabIndex>=0}).sort(jte)},Cte=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],rE=Cte.join(","),wte="".concat(rE,", [data-focus-guard]"),p4=function(e,t){return fa((e.shadowRoot||e).children).reduce(function(n,s){return n.concat(s.matches(t?wte:rE)?[s]:[],p4(s))},[])},Ete=function(e,t){var n;return e instanceof HTMLIFrameElement&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?Wh([e.contentDocument.body],t):[e]},Wh=function(e,t){return e.reduce(function(n,s){var i,o=p4(s,t),l=(i=[]).concat.apply(i,o.map(function(u){return Ete(u,t)}));return n.concat(l,s.parentNode?fa(s.parentNode.querySelectorAll(rE)).filter(function(u){return u===s}):[])},[])},kte=function(e){var t=e.querySelectorAll("[".concat(Qee,"]"));return fa(t).map(function(n){return Wh([n])}).reduce(function(n,s){return n.concat(s)},[])},sE=function(e,t){return fa(e).filter(function(n){return c4(t,n)}).filter(function(n){return yte(n)})},mO=function(e,t){return t===void 0&&(t=new Map),fa(e).filter(function(n){return u4(t,n)})},iE=function(e,t,n){return nE(sE(Wh(e,n),t),!0,n)},Mm=function(e,t){return nE(sE(Wh(e),t),!1)},Ate=function(e,t){return sE(kte(e),t)},zu=function(e,t){return e.shadowRoot?zu(e.shadowRoot,t):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,t)?!0:fa(e.children).some(function(n){var s;if(n instanceof HTMLIFrameElement){var i=(s=n.contentDocument)===null||s===void 0?void 0:s.body;return i?zu(i,t):!1}return zu(n,t)})},Tte=function(e){for(var t=new Set,n=e.length,s=0;s<n;s+=1)for(var i=s+1;i<n;i+=1){var o=e[s].compareDocumentPosition(e[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(s)}return e.filter(function(l,u){return!t.has(u)})},m4=function(e){return e.parentNode?m4(e.parentNode):e},oE=function(e){var t=qu(e);return t.filter(Boolean).reduce(function(n,s){var i=s.getAttribute(kC);return n.push.apply(n,i?Tte(fa(m4(s).querySelectorAll("[".concat(kC,'="').concat(i,'"]:not([').concat(J3,'="disabled"])')))):[s]),n},[])},Mte=function(e){try{return e()}catch{return}},Rm=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var t=e.activeElement;return t.shadowRoot?Rm(t.shadowRoot):t instanceof HTMLIFrameElement&&Mte(function(){return t.contentWindow.document})?Rm(t.contentWindow.document):t}},Rte=function(e,t){return e===t},Dte=function(e,t){return!!fa(e.querySelectorAll("iframe")).some(function(n){return Rte(n,t)})},g4=function(e,t){return t===void 0&&(t=Rm(o4(e).ownerDocument)),!t||t.dataset&&t.dataset.focusGuard?!1:oE(e).some(function(n){return zu(n,t)||Dte(n,t)})},Ote=function(e){e===void 0&&(e=document);var t=Rm(e);return t?fa(e.querySelectorAll("[".concat(Jee,"]"))).some(function(n){return zu(n,t)}):!1},Nte=function(e,t){return t.filter(f4).filter(function(n){return n.name===e.name}).filter(function(n){return n.checked})[0]||e},aE=function(e,t){return f4(e)&&e.name?Nte(e,t):e},Pte=function(e){var t=new Set;return e.forEach(function(n){return t.add(aE(n,e))}),e.filter(function(n){return t.has(n)})},gO=function(e){return e[0]&&e.length>1?aE(e[0],e):e[0]},xO=function(e,t){return e.indexOf(aE(t,e))},MC="NEW_FOCUS",zte=function(e,t,n,s,i){var o=e.length,l=e[0],u=e[o-1],d=tE(s);if(!(s&&e.indexOf(s)>=0)){var h=s!==void 0?n.indexOf(s):-1,p=i?n.indexOf(i):h,m=i?e.indexOf(i):-1;if(h===-1)return m!==-1?m:MC;if(m===-1)return MC;var x=h-p,y=n.indexOf(l),b=n.indexOf(u),C=Pte(n),S=s!==void 0?C.indexOf(s):-1,E=i?C.indexOf(i):S,k=C.filter(function(W){return W.tabIndex>=0}),A=s!==void 0?k.indexOf(s):-1,T=i?k.indexOf(i):A,M=A>=0&&T>=0?T-A:E-S;if(!x&&m>=0||t.length===0)return m;var D=xO(e,t[0]),$=xO(e,t[t.length-1]);if(h<=y&&d&&Math.abs(x)>1)return $;if(h>=b&&d&&Math.abs(x)>1)return D;if(x&&Math.abs(M)>1)return m;if(h<=y)return $;if(h>b)return D;if(x)return Math.abs(x)>1?m:(o+m+x)%o}},Ite=function(e){return function(t){var n,s=(n=d4(t))===null||n===void 0?void 0:n.autofocus;return t.autofocus||s!==void 0&&s!=="false"||e.indexOf(t)>=0}},yO=function(e,t,n){var s=e.map(function(o){var l=o.node;return l}),i=mO(s.filter(Ite(n)));return i&&i.length?gO(i):gO(mO(t))},RC=function(e,t){return t===void 0&&(t=[]),t.push(e),e.parentNode&&RC(e.parentNode.host||e.parentNode,t),t},P1=function(e,t){for(var n=RC(e),s=RC(t),i=0;i<n.length;i+=1){var o=n[i];if(s.indexOf(o)>=0)return o}return!1},x4=function(e,t,n){var s=qu(e),i=qu(t),o=s[0],l=!1;return i.filter(Boolean).forEach(function(u){l=P1(l||u,u)||l,n.filter(Boolean).forEach(function(d){var h=P1(o,d);h&&(!l||zu(h,l)?l=h:l=P1(h,l))})}),l},bO=function(e,t){return e.reduce(function(n,s){return n.concat(Ate(s,t))},[])},Lte=function(e,t){var n=new Map;return t.forEach(function(s){return n.set(s.node,s)}),e.map(function(s){return n.get(s)}).filter(vte)},_te=function(e,t){var n=Rm(qu(e).length>0?document:o4(e).ownerDocument),s=oE(e).filter(TC),i=x4(n||e,e,s),o=new Map,l=Mm(s,o),u=l.filter(function(b){var C=b.node;return TC(C)});if(u[0]){var d=Mm([i],o).map(function(b){var C=b.node;return C}),h=Lte(d,u),p=h.map(function(b){var C=b.node;return C}),m=h.filter(function(b){var C=b.tabIndex;return C>=0}).map(function(b){var C=b.node;return C}),x=zte(p,m,d,n,t);if(x===MC){var y=yO(l,m,bO(s,o))||yO(l,p,bO(s,o));if(y)return{node:y};console.warn("focus-lock: cannot find any node to move focus into");return}return x===void 0?x:h[x]}},Bte=function(e){var t=oE(e).filter(TC),n=x4(e,e,t),s=nE(Wh([n],!0),!0,!0),i=Wh(t,!1);return s.map(function(o){var l=o.node,u=o.index;return{node:l,index:u,lockItem:i.indexOf(l)>=0,guard:tE(l)}})},lE=function(e,t){e&&("focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus())},z1=0,I1=!1,y4=function(e,t,n){n===void 0&&(n={});var s=_te(e,t);if(!I1&&s){if(z1>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),I1=!0,setTimeout(function(){I1=!1},1);return}z1++,lE(s.node,n.focusOptions),z1--}};function xp(e){if(!e)return null;if(typeof WeakRef>"u")return function(){return e||null};var t=e?new WeakRef(e):null;return function(){return t?.deref()||null}}var $te=function(e){if(!e)return null;for(var t=[],n=e;n&&n!==document.body;)t.push({current:xp(n),parent:xp(n.parentElement),left:xp(n.previousElementSibling),right:xp(n.nextElementSibling)}),n=n.parentElement;return{element:xp(e),stack:t,ownerDocument:e.ownerDocument}},Fte=function(e){var t,n,s,i,o;if(e)for(var l=e.stack,u=e.ownerDocument,d=new Map,h=0,p=l;h<p.length;h++){var m=p[h],x=(t=m.parent)===null||t===void 0?void 0:t.call(m);if(x&&u.contains(x)){for(var y=(n=m.left)===null||n===void 0?void 0:n.call(m),b=m.current(),C=x.contains(b)?b:void 0,S=(s=m.right)===null||s===void 0?void 0:s.call(m),E=iE([x],d),k=(o=(i=C??y?.nextElementSibling)!==null&&i!==void 0?i:S)!==null&&o!==void 0?o:y;k;){for(var A=0,T=E;A<T.length;A++){var M=T[A];if(k?.contains(M.node))return M.node}k=k.nextElementSibling}if(E.length)return E[0].node}}},b4=function(e){var t=$te(e);return function(){return Fte(t)}},Vte=function(e,t,n){if(!e||!t)return console.error("no element or scope given"),{};var s=qu(t);if(s.every(function(l){return!zu(l,e)}))return console.error("Active element is not contained in the scope"),{};var i=n?iE(s,new Map):Mm(s,new Map),o=i.findIndex(function(l){var u=l.node;return u===e});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},Hte=function(e,t){var n=t?iE(qu(e),new Map):Mm(qu(e),new Map);return{first:n[0],last:n[n.length-1]}},Ute=function(e){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},e)},v4=function(e,t,n){t===void 0&&(t={});var s=Ute(t),i=Vte(e,s.scope,s.onlyTabbable);if(i){var o=n(i,s.cycle);o&&lE(o.node,s.focusOptions)}},Wte=function(e,t){t===void 0&&(t={}),v4(e,t,function(n,s){var i=n.next,o=n.first;return i||s&&o})},qte=function(e,t){t===void 0&&(t={}),v4(e,t,function(n,s){var i=n.prev,o=n.last;return i||s&&o})},j4=function(e,t,n){var s,i=Hte(e,(s=t.onlyTabbable)!==null&&s!==void 0?s:!0),o=i[n];o&&lE(o.node,t.focusOptions)},Gte=function(e,t){t===void 0&&(t={}),j4(e,t,"first")},Yte=function(e,t){t===void 0&&(t={}),j4(e,t,"last")};function cE(e){setTimeout(e,1)}var Kte=function(t){return t&&"current"in t?t.current:t},S4=function(){return document&&document.activeElement===document.body},Xte=function(){return S4()||Ote()},Dh=null,ti=null,vO=function(){return null},Oh=null,Dm=!1,uE=!1,Jte=function(){return!0},Qte=function(t){return(Dh.whiteList||Jte)(t)},Zte=function(t,n){Oh={observerNode:t,portaledElement:n}},ene=function(t){return Oh&&Oh.portaledElement===t};function jO(e,t,n,s){var i=null,o=e;do{var l=s[o];if(l.guard)l.node.dataset.focusAutoGuard&&(i=l);else if(l.lockItem){if(o!==e)return;i=null}else break}while((o+=n)!==t);i&&(i.node.tabIndex=0)}var tne=function(t){return t?!!Dm:Dm==="meanwhile"},nne=function e(t,n,s){return n&&(n.host===t&&(!n.activeElement||s.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,s))},rne=function(t,n){return n.some(function(s){return nne(t,s,s)})},C4=function(t){return Mm(t,new Map)},sne=function(t){return!C4([t.parentNode]).some(function(n){return n.node===t})},Z0=function(){var t=!1;if(Dh){var n=Dh,s=n.observed,i=n.persistentFocus,o=n.autoFocus,l=n.shards,u=n.crossFrame,d=n.focusOptions,h=n.noFocusGuards,p=s||Oh&&Oh.portaledElement;if(S4()&&ti&&ti!==document.body&&(!document.body.contains(ti)||sne(ti))){var m=vO();m&&m.focus()}var x=document&&document.activeElement;if(p){var y=[p].concat(l.map(Kte).filter(Boolean)),b=function(){if(!tne(u)||!h||!ti||uE)return!1;var A=C4(y),T=A.findIndex(function(M){var D=M.node;return D===ti});return T===0||T===A.length-1};if((!x||Qte(x))&&(i||b()||!Xte()||!ti&&o)&&(p&&!(g4(y)||x&&rne(x,y)||ene(x))&&(document&&!ti&&x&&!o?(x.blur&&x.blur(),document.body.focus()):(t=y4(y,ti,{focusOptions:d}),Oh={})),ti=document&&document.activeElement,ti!==document.body&&(vO=b4(ti)),Dm=!1),document&&x!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var C=document&&document.activeElement,S=Bte(y),E=S.map(function(k){var A=k.node;return A}).indexOf(C);E>-1&&(S.filter(function(k){var A=k.guard,T=k.node;return A&&T.dataset.focusAutoGuard}).forEach(function(k){var A=k.node;return A.removeAttribute("tabIndex")}),jO(E,S.length,1,S),jO(E,-1,-1,S))}}}return t},w4=function(t){Z0()&&t&&(t.stopPropagation(),t.preventDefault())},dE=function(){return cE(Z0)},ine=function(t){var n=t.target,s=t.currentTarget;s.contains(n)||Zte(s,n)},one=function(){return null},E4=function(){uE=!0},k4=function(){uE=!1,Dm="just",cE(function(){Dm="meanwhile"})},ane=function(){document.addEventListener("focusin",w4),document.addEventListener("focusout",dE),window.addEventListener("focus",E4),window.addEventListener("blur",k4)},lne=function(){document.removeEventListener("focusin",w4),document.removeEventListener("focusout",dE),window.removeEventListener("focus",E4),window.removeEventListener("blur",k4)};function cne(e){return e.filter(function(t){var n=t.disabled;return!n})}var A4={moveFocusInside:y4,focusInside:g4,focusNextElement:Wte,focusPrevElement:qte,focusFirstElement:Gte,focusLastElement:Yte,captureFocusRestore:b4};function une(e){var t=e.slice(-1)[0];t&&!Dh&&ane();var n=Dh,s=n&&t&&t.id===n.id;Dh=t,n&&!s&&(n.onDeactivation(),e.filter(function(i){var o=i.id;return o===n.id}).length||n.returnFocus(!t)),t?(ti=null,(!s||n.observed!==t.observed)&&t.onActivation(A4),Z0(),cE(Z0)):(lne(),ti=null)}s4.assignSyncMedium(ine);i4.assignMedium(dE);ste.assignMedium(function(e){return e(A4)});const dne=hte(cne,une)(one);var DC=j.forwardRef(function(t,n){return Lt.createElement(eE,Uu({sideCar:dne,ref:n},t))}),T4=eE.propTypes||{};T4.sideCar;Xee(T4,["sideCar"]);DC.propTypes={};const hne=DC.default??DC,M4=e=>{const{initialFocusRef:t,finalFocusRef:n,contentRef:s,restoreFocus:i,children:o,isDisabled:l,autoFocus:u,persistentFocus:d,lockFocusAcrossFrames:h}=e,p=j.useCallback(()=>{t?.current?t.current.focus():s?.current&&sz(s.current).length===0&&requestAnimationFrame(()=>{s.current?.focus()})},[t,s]),m=j.useCallback(()=>{n?.current?.focus()},[n]),x=i&&!n;return r.jsx(hne,{crossFrame:h,persistentFocus:d,autoFocus:u,disabled:l,onActivation:p,onDeactivation:m,returnFocus:x,children:o})};M4.displayName="FocusLock";const q=$e(function(t,n){const s=Ks("FormLabel",t),i=bn(t),{className:o,children:l,requiredIndicator:u=r.jsx(R4,{}),optionalIndicator:d=null,...h}=i,p=bb(),m=p?.getLabelProps(h,n)??{ref:n,...h};return r.jsxs(Re.label,{...m,className:Ze("chakra-form__label",i.className),__css:{display:"block",textAlign:"start",...s},children:[l,p?.isRequired?u:d]})});q.displayName="FormLabel";const R4=$e(function(t,n){const s=bb(),i=G3();if(!s?.isRequired)return null;const o=Ze("chakra-form__required-indicator",t.className);return r.jsx(Re.span,{...s?.getRequiredIndicatorProps(t,n),__css:i.requiredIndicator,className:o})});R4.displayName="RequiredIndicator";const so=$e(function(t,n){const{templateAreas:s,gap:i,rowGap:o,columnGap:l,column:u,row:d,autoFlow:h,autoRows:p,templateRows:m,autoColumns:x,templateColumns:y,...b}=t,C={display:"grid",gridTemplateAreas:s,gridGap:i,gridRowGap:o,gridColumnGap:l,gridAutoColumns:x,gridColumn:u,gridRow:d,gridAutoFlow:h,gridAutoRows:p,gridTemplateRows:m,gridTemplateColumns:y};return r.jsx(Re.div,{ref:n,__css:C,...b})});so.displayName="Grid";function SO(e){return eb(e,t=>t==="auto"?"auto":`span ${t}/span ${t}`)}const OC=$e(function(t,n){const{area:s,colSpan:i,colStart:o,colEnd:l,rowEnd:u,rowSpan:d,rowStart:h,...p}=t,m=Qm({gridArea:s,gridColumn:SO(i),gridRow:SO(d),gridColumnStart:o,gridColumnEnd:l,gridRowStart:h,gridRowEnd:u});return r.jsx(Re.div,{ref:n,__css:m,...p})});OC.displayName="GridItem";const tt=$e(function(t,n){const{columns:s,spacingX:i,spacingY:o,spacing:l,minChildWidth:u,...d}=t,h=zc(),p=u?pne(u,h):mne(s);return r.jsx(so,{ref:n,gap:l,columnGap:i,rowGap:o,templateColumns:p,...d})});tt.displayName="SimpleGrid";function fne(e){return typeof e=="number"?`${e}px`:e}function pne(e,t){return eb(e,n=>{const s=vZ("sizes",n,fne(n))(t);return n===null?null:`repeat(auto-fit, minmax(${s}, 1fr))`})}function mne(e){return eb(e,t=>t===null?null:`repeat(${t}, minmax(0, 1fr))`)}function ld(e){const{viewBox:t="0 0 24 24",d:n,displayName:s,defaultProps:i={}}=e,o=j.Children.toArray(e.path),l=$e((u,d)=>r.jsx(Wn,{ref:d,viewBox:t,...i,...u,children:o.length?o:r.jsx("path",{fill:"currentColor",d:n})}));return l.displayName=s,l}const NC=$e(function(t,n){const{htmlWidth:s,htmlHeight:i,alt:o,...l}=t;return r.jsx("img",{width:s,height:i,ref:n,alt:o,...l})});NC.displayName="NativeImage";const ui=$e(function(t,n){const{fallbackSrc:s,fallback:i,src:o,srcSet:l,align:u,fit:d,loading:h,ignoreFallback:p,crossOrigin:m,fallbackStrategy:x="beforeLoadOrError",referrerPolicy:y,...b}=t,C=s!==void 0||i!==void 0,S=h!=null||p||!C,E=H3({...t,crossOrigin:m,ignoreFallback:S}),k=dee(E,x),A={ref:n,objectFit:d,objectPosition:u,...S?b:Zm(b,["onError","onLoad"])};return k?i||r.jsx(Re.img,{as:NC,className:"chakra-image__placeholder",src:s,...A}):r.jsx(Re.img,{as:NC,src:o,srcSet:l,crossOrigin:m,loading:h,referrerPolicy:y,className:"chakra-image",...A})});ui.displayName="Image";const pe=$e(function(t,n){const{htmlSize:s,...i}=t,o=_r("Input",i),l=bn(i),u=X2(l),d=Ze("chakra-input",t.className);return r.jsx(Re.input,{size:s,...u,__css:o.field,ref:n,className:d})});pe.displayName="Input";pe.id="Input";const[gne,xne]=un({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),Gu=$e(function(t,n){const s=_r("Input",t),{children:i,className:o,...l}=bn(t),u=Ze("chakra-input__group",o),d={},h=od(i),p=s.field;h.forEach(x=>{s&&(p&&x.type.id==="InputLeftElement"&&(d.paddingStart=p.height??p.h),p&&x.type.id==="InputRightElement"&&(d.paddingEnd=p.height??p.h),x.type.id==="InputRightAddon"&&(d.borderEndRadius=0),x.type.id==="InputLeftAddon"&&(d.borderStartRadius=0))});const m=h.map(x=>{const y=Qm({size:x.props?.size||t.size,variant:x.props?.variant||t.variant});return x.type.id!=="Input"?j.cloneElement(x,y):j.cloneElement(x,Object.assign(y,d,x.props))});return r.jsx(Re.div,{className:u,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...s.group},"data-group":!0,...l,children:r.jsx(gne,{value:s,children:m})})});Gu.displayName="InputGroup";const yne=Re("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),vb=$e(function(t,n){const{placement:s="left",...i}=t,o=xne(),l=o.field,d={[s==="left"?"insetStart":"insetEnd"]:"0",width:l?.height??l?.h,height:l?.height??l?.h,fontSize:l?.fontSize,...o.element};return r.jsx(yne,{ref:n,__css:d,...i})});vb.id="InputElement";vb.displayName="InputElement";const Yu=$e(function(t,n){const{className:s,...i}=t,o=Ze("chakra-input__left-element",s);return r.jsx(vb,{ref:n,placement:"left",className:o,...i})});Yu.id="InputLeftElement";Yu.displayName="InputLeftElement";const hE=$e(function(t,n){const{className:s,...i}=t,o=Ze("chakra-input__right-element",s);return r.jsx(vb,{ref:n,placement:"right",className:o,...i})});hE.id="InputRightElement";hE.displayName="InputRightElement";const fE=$e(function(t,n){const s=Ks("Link",t),{className:i,isExternal:o,...l}=bn(t);return r.jsx(Re.a,{target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:n,className:Ze("chakra-link",i),...l,__css:s})});fE.displayName="Link";const[bne,D4]=un({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),jb=$e(function(t,n){const s=_r("List",t),{children:i,styleType:o="none",stylePosition:l,spacing:u,...d}=bn(t),h=od(i),m=u?{"& > *:not(style) ~ *:not(style)":{mt:u}}:{};return r.jsx(bne,{value:s,children:r.jsx(Re.ul,{ref:n,listStyleType:o,listStylePosition:l,role:"list",__css:{...s.container,...m},...d,children:h})})});jb.displayName="List";const vne=$e((e,t)=>{const{as:n,...s}=e;return r.jsx(jb,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...s})});vne.displayName="OrderedList";const jne=$e(function(t,n){const{as:s,...i}=t;return r.jsx(jb,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})});jne.displayName="UnorderedList";const O4=$e(function(t,n){const s=D4();return r.jsx(Re.li,{ref:n,...t,__css:s.item})});O4.displayName="ListItem";const Sne=$e(function(t,n){const s=D4();return r.jsx(Wn,{ref:n,role:"presentation",...t,__css:s.icon})});Sne.displayName="ListIcon";function Cne(e,t={}){const{ssr:n=!0,fallback:s}=t,{getWindow:i}=CY(),o=Array.isArray(e)?e:[e];let l=Array.isArray(s)?s:[s];l=l.filter(h=>h!=null);const[u,d]=j.useState(()=>o.map((h,p)=>({media:h,matches:n?!!l[p]:i().matchMedia(h).matches})));return j.useEffect(()=>{const h=i();d(o.map(x=>({media:x,matches:h.matchMedia(x).matches})));const p=o.map(x=>h.matchMedia(x)),m=x=>{d(y=>y.slice().map(b=>b.media===x.media?{...b,matches:x.matches}:b))};return p.forEach(x=>{typeof x.addListener=="function"?x.addListener(m):x.addEventListener("change",m)}),()=>{p.forEach(x=>{typeof x.removeListener=="function"?x.removeListener(m):x.removeEventListener("change",m)})}},[i]),u.map(h=>h.matches)}function wne(e){const t=ts(e)?e:{fallback:e??"base"},s=zc().__breakpoints.details.map(({minMaxQuery:u,breakpoint:d})=>({breakpoint:d,query:u.replace("@media screen and ","")})),i=s.map(u=>u.breakpoint===t.fallback),l=Cne(s.map(u=>u.query),{fallback:i,ssr:t.ssr}).findIndex(u=>u==!0);return s[l]?.breakpoint??t.fallback}function Ene(e,t,n=lz){let s=Object.keys(e).indexOf(t);if(s!==-1)return e[t];let i=n.indexOf(t);for(;i>=0;){const o=n[i];if(e.hasOwnProperty(o)){s=i;break}i-=1}if(s!==-1){const o=n[s];return e[o]}}function kne(e,t){const n=ts(t)?t:{fallback:"base"},s=wne(n),i=zc();if(!s)return;const o=Array.from(i.__breakpoints?.keys||[]),l=Array.isArray(e)?Object.fromEntries(Object.entries(C8(e,o)).map(([u,d])=>[u,d])):e;return Ene(l,s,o)}function Ane(e,t,n,s){if(t==null)return s;if(!s)return e.find(l=>n(l).toLowerCase().startsWith(t.toLowerCase()));const i=e.filter(o=>n(o).toLowerCase().startsWith(t.toLowerCase()));if(i.length>0){let o;return i.includes(s)?(o=i.indexOf(s)+1,o===i.length&&(o=0),i[o]):(o=e.indexOf(i[0]),e[o])}return s}function Tne(e){const{key:t}=e;return t.length===1||t.length>1&&/[^a-zA-Z0-9]/.test(t)}function Mne(e={}){const{timeout:t=300,preventDefault:n=()=>!0}=e,[s,i]=j.useState([]),o=j.useRef(void 0),l=()=>{o.current&&(clearTimeout(o.current),o.current=null)},u=()=>{l(),o.current=setTimeout(()=>{i([]),o.current=null},t)};j.useEffect(()=>l,[]);function d(h){return p=>{if(p.key==="Backspace"){const m=[...s];m.pop(),i(m);return}if(Tne(p)){const m=s.concat(p.key);n(p)&&(p.preventDefault(),p.stopPropagation()),i(m),h(m.join("")),u()}}}return d}var oi="top",io="bottom",oo="right",ai="left",pE="auto",cg=[oi,io,oo,ai],qh="start",Om="end",Rne="clippingParents",N4="viewport",yp="popper",Dne="reference",CO=cg.reduce(function(e,t){return e.concat([t+"-"+qh,t+"-"+Om])},[]),P4=[].concat(cg,[pE]).reduce(function(e,t){return e.concat([t,t+"-"+qh,t+"-"+Om])},[]),One="beforeRead",Nne="read",Pne="afterRead",zne="beforeMain",Ine="main",Lne="afterMain",_ne="beforeWrite",Bne="write",$ne="afterWrite",Fne=[One,Nne,Pne,zne,Ine,Lne,_ne,Bne,$ne];function ca(e){return e?(e.nodeName||"").toLowerCase():null}function Ri(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ku(e){var t=Ri(e).Element;return e instanceof t||e instanceof Element}function eo(e){var t=Ri(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function mE(e){if(typeof ShadowRoot>"u")return!1;var t=Ri(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Vne(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},i=t.attributes[n]||{},o=t.elements[n];!eo(o)||!ca(o)||(Object.assign(o.style,s),Object.keys(i).forEach(function(l){var u=i[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function Hne(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var i=t.elements[s],o=t.attributes[s]||{},l=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),u=l.reduce(function(d,h){return d[h]="",d},{});!eo(i)||!ca(i)||(Object.assign(i.style,u),Object.keys(o).forEach(function(d){i.removeAttribute(d)}))})}}const Une={name:"applyStyles",enabled:!0,phase:"write",fn:Vne,effect:Hne,requires:["computeStyles"]};function ia(e){return e.split("-")[0]}var Iu=Math.max,ey=Math.min,Gh=Math.round;function PC(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function z4(){return!/^((?!chrome|android).)*safari/i.test(PC())}function Yh(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),i=1,o=1;t&&eo(e)&&(i=e.offsetWidth>0&&Gh(s.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Gh(s.height)/e.offsetHeight||1);var l=Ku(e)?Ri(e):window,u=l.visualViewport,d=!z4()&&n,h=(s.left+(d&&u?u.offsetLeft:0))/i,p=(s.top+(d&&u?u.offsetTop:0))/o,m=s.width/i,x=s.height/o;return{width:m,height:x,top:p,right:h+m,bottom:p+x,left:h,x:h,y:p}}function gE(e){var t=Yh(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function I4(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&mE(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function pl(e){return Ri(e).getComputedStyle(e)}function Wne(e){return["table","td","th"].indexOf(ca(e))>=0}function Ic(e){return((Ku(e)?e.ownerDocument:e.document)||window.document).documentElement}function Sb(e){return ca(e)==="html"?e:e.assignedSlot||e.parentNode||(mE(e)?e.host:null)||Ic(e)}function wO(e){return!eo(e)||pl(e).position==="fixed"?null:e.offsetParent}function qne(e){var t=/firefox/i.test(PC()),n=/Trident/i.test(PC());if(n&&eo(e)){var s=pl(e);if(s.position==="fixed")return null}var i=Sb(e);for(mE(i)&&(i=i.host);eo(i)&&["html","body"].indexOf(ca(i))<0;){var o=pl(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function ug(e){for(var t=Ri(e),n=wO(e);n&&Wne(n)&&pl(n).position==="static";)n=wO(n);return n&&(ca(n)==="html"||ca(n)==="body"&&pl(n).position==="static")?t:n||qne(e)||t}function xE(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function nm(e,t,n){return Iu(e,ey(t,n))}function Gne(e,t,n){var s=nm(e,t,n);return s>n?n:s}function L4(){return{top:0,right:0,bottom:0,left:0}}function _4(e){return Object.assign({},L4(),e)}function B4(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var Yne=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,_4(typeof t!="number"?t:B4(t,cg))};function Kne(e){var t,n=e.state,s=e.name,i=e.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,u=ia(n.placement),d=xE(u),h=[ai,oo].indexOf(u)>=0,p=h?"height":"width";if(!(!o||!l)){var m=Yne(i.padding,n),x=gE(o),y=d==="y"?oi:ai,b=d==="y"?io:oo,C=n.rects.reference[p]+n.rects.reference[d]-l[d]-n.rects.popper[p],S=l[d]-n.rects.reference[d],E=ug(o),k=E?d==="y"?E.clientHeight||0:E.clientWidth||0:0,A=C/2-S/2,T=m[y],M=k-x[p]-m[b],D=k/2-x[p]/2+A,$=nm(T,D,M),W=d;n.modifiersData[s]=(t={},t[W]=$,t.centerOffset=$-D,t)}}function Xne(e){var t=e.state,n=e.options,s=n.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||I4(t.elements.popper,i)&&(t.elements.arrow=i))}const Jne={name:"arrow",enabled:!0,phase:"main",fn:Kne,effect:Xne,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Kh(e){return e.split("-")[1]}var Qne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zne(e,t){var n=e.x,s=e.y,i=t.devicePixelRatio||1;return{x:Gh(n*i)/i||0,y:Gh(s*i)/i||0}}function EO(e){var t,n=e.popper,s=e.popperRect,i=e.placement,o=e.variation,l=e.offsets,u=e.position,d=e.gpuAcceleration,h=e.adaptive,p=e.roundOffsets,m=e.isFixed,x=l.x,y=x===void 0?0:x,b=l.y,C=b===void 0?0:b,S=typeof p=="function"?p({x:y,y:C}):{x:y,y:C};y=S.x,C=S.y;var E=l.hasOwnProperty("x"),k=l.hasOwnProperty("y"),A=ai,T=oi,M=window;if(h){var D=ug(n),$="clientHeight",W="clientWidth";if(D===Ri(n)&&(D=Ic(n),pl(D).position!=="static"&&u==="absolute"&&($="scrollHeight",W="scrollWidth")),D=D,i===oi||(i===ai||i===oo)&&o===Om){T=io;var te=m&&D===M&&M.visualViewport?M.visualViewport.height:D[$];C-=te-s.height,C*=d?1:-1}if(i===ai||(i===oi||i===io)&&o===Om){A=oo;var re=m&&D===M&&M.visualViewport?M.visualViewport.width:D[W];y-=re-s.width,y*=d?1:-1}}var U=Object.assign({position:u},h&&Qne),oe=p===!0?Zne({x:y,y:C},Ri(n)):{x:y,y:C};if(y=oe.x,C=oe.y,d){var xe;return Object.assign({},U,(xe={},xe[T]=k?"0":"",xe[A]=E?"0":"",xe.transform=(M.devicePixelRatio||1)<=1?"translate("+y+"px, "+C+"px)":"translate3d("+y+"px, "+C+"px, 0)",xe))}return Object.assign({},U,(t={},t[T]=k?C+"px":"",t[A]=E?y+"px":"",t.transform="",t))}function ere(e){var t=e.state,n=e.options,s=n.gpuAcceleration,i=s===void 0?!0:s,o=n.adaptive,l=o===void 0?!0:o,u=n.roundOffsets,d=u===void 0?!0:u,h={placement:ia(t.placement),variation:Kh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,EO(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,EO(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const tre={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ere,data:{}};var Ix={passive:!0};function nre(e){var t=e.state,n=e.instance,s=e.options,i=s.scroll,o=i===void 0?!0:i,l=s.resize,u=l===void 0?!0:l,d=Ri(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&h.forEach(function(p){p.addEventListener("scroll",n.update,Ix)}),u&&d.addEventListener("resize",n.update,Ix),function(){o&&h.forEach(function(p){p.removeEventListener("scroll",n.update,Ix)}),u&&d.removeEventListener("resize",n.update,Ix)}}const rre={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nre,data:{}};var sre={left:"right",right:"left",bottom:"top",top:"bottom"};function T0(e){return e.replace(/left|right|bottom|top/g,function(t){return sre[t]})}var ire={start:"end",end:"start"};function kO(e){return e.replace(/start|end/g,function(t){return ire[t]})}function yE(e){var t=Ri(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function bE(e){return Yh(Ic(e)).left+yE(e).scrollLeft}function ore(e,t){var n=Ri(e),s=Ic(e),i=n.visualViewport,o=s.clientWidth,l=s.clientHeight,u=0,d=0;if(i){o=i.width,l=i.height;var h=z4();(h||!h&&t==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}return{width:o,height:l,x:u+bE(e),y:d}}function are(e){var t,n=Ic(e),s=yE(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Iu(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=Iu(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-s.scrollLeft+bE(e),d=-s.scrollTop;return pl(i||n).direction==="rtl"&&(u+=Iu(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:l,x:u,y:d}}function vE(e){var t=pl(e),n=t.overflow,s=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function $4(e){return["html","body","#document"].indexOf(ca(e))>=0?e.ownerDocument.body:eo(e)&&vE(e)?e:$4(Sb(e))}function rm(e,t){var n;t===void 0&&(t=[]);var s=$4(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=Ri(s),l=i?[o].concat(o.visualViewport||[],vE(s)?s:[]):s,u=t.concat(l);return i?u:u.concat(rm(Sb(l)))}function zC(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lre(e,t){var n=Yh(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function AO(e,t,n){return t===N4?zC(ore(e,n)):Ku(t)?lre(t,n):zC(are(Ic(e)))}function cre(e){var t=rm(Sb(e)),n=["absolute","fixed"].indexOf(pl(e).position)>=0,s=n&&eo(e)?ug(e):e;return Ku(s)?t.filter(function(i){return Ku(i)&&I4(i,s)&&ca(i)!=="body"}):[]}function ure(e,t,n,s){var i=t==="clippingParents"?cre(e):[].concat(t),o=[].concat(i,[n]),l=o[0],u=o.reduce(function(d,h){var p=AO(e,h,s);return d.top=Iu(p.top,d.top),d.right=ey(p.right,d.right),d.bottom=ey(p.bottom,d.bottom),d.left=Iu(p.left,d.left),d},AO(e,l,s));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function F4(e){var t=e.reference,n=e.element,s=e.placement,i=s?ia(s):null,o=s?Kh(s):null,l=t.x+t.width/2-n.width/2,u=t.y+t.height/2-n.height/2,d;switch(i){case oi:d={x:l,y:t.y-n.height};break;case io:d={x:l,y:t.y+t.height};break;case oo:d={x:t.x+t.width,y:u};break;case ai:d={x:t.x-n.width,y:u};break;default:d={x:t.x,y:t.y}}var h=i?xE(i):null;if(h!=null){var p=h==="y"?"height":"width";switch(o){case qh:d[h]=d[h]-(t[p]/2-n[p]/2);break;case Om:d[h]=d[h]+(t[p]/2-n[p]/2);break}}return d}function Nm(e,t){t===void 0&&(t={});var n=t,s=n.placement,i=s===void 0?e.placement:s,o=n.strategy,l=o===void 0?e.strategy:o,u=n.boundary,d=u===void 0?Rne:u,h=n.rootBoundary,p=h===void 0?N4:h,m=n.elementContext,x=m===void 0?yp:m,y=n.altBoundary,b=y===void 0?!1:y,C=n.padding,S=C===void 0?0:C,E=_4(typeof S!="number"?S:B4(S,cg)),k=x===yp?Dne:yp,A=e.rects.popper,T=e.elements[b?k:x],M=ure(Ku(T)?T:T.contextElement||Ic(e.elements.popper),d,p,l),D=Yh(e.elements.reference),$=F4({reference:D,element:A,placement:i}),W=zC(Object.assign({},A,$)),te=x===yp?W:D,re={top:M.top-te.top+E.top,bottom:te.bottom-M.bottom+E.bottom,left:M.left-te.left+E.left,right:te.right-M.right+E.right},U=e.modifiersData.offset;if(x===yp&&U){var oe=U[i];Object.keys(re).forEach(function(xe){var ie=[oo,io].indexOf(xe)>=0?1:-1,H=[oi,io].indexOf(xe)>=0?"y":"x";re[xe]+=oe[H]*ie})}return re}function dre(e,t){t===void 0&&(t={});var n=t,s=n.placement,i=n.boundary,o=n.rootBoundary,l=n.padding,u=n.flipVariations,d=n.allowedAutoPlacements,h=d===void 0?P4:d,p=Kh(s),m=p?u?CO:CO.filter(function(b){return Kh(b)===p}):cg,x=m.filter(function(b){return h.indexOf(b)>=0});x.length===0&&(x=m);var y=x.reduce(function(b,C){return b[C]=Nm(e,{placement:C,boundary:i,rootBoundary:o,padding:l})[ia(C)],b},{});return Object.keys(y).sort(function(b,C){return y[b]-y[C]})}function hre(e){if(ia(e)===pE)return[];var t=T0(e);return[kO(e),t,kO(t)]}function fre(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,l=n.altAxis,u=l===void 0?!0:l,d=n.fallbackPlacements,h=n.padding,p=n.boundary,m=n.rootBoundary,x=n.altBoundary,y=n.flipVariations,b=y===void 0?!0:y,C=n.allowedAutoPlacements,S=t.options.placement,E=ia(S),k=E===S,A=d||(k||!b?[T0(S)]:hre(S)),T=[S].concat(A).reduce(function(R,N){return R.concat(ia(N)===pE?dre(t,{placement:N,boundary:p,rootBoundary:m,padding:h,flipVariations:b,allowedAutoPlacements:C}):N)},[]),M=t.rects.reference,D=t.rects.popper,$=new Map,W=!0,te=T[0],re=0;re<T.length;re++){var U=T[re],oe=ia(U),xe=Kh(U)===qh,ie=[oi,io].indexOf(oe)>=0,H=ie?"width":"height",F=Nm(t,{placement:U,boundary:p,rootBoundary:m,altBoundary:x,padding:h}),_=ie?xe?oo:ai:xe?io:oi;M[H]>D[H]&&(_=T0(_));var B=T0(_),fe=[];if(o&&fe.push(F[oe]<=0),u&&fe.push(F[_]<=0,F[B]<=0),fe.every(function(R){return R})){te=U,W=!1;break}$.set(U,fe)}if(W)for(var I=b?3:1,ee=function(N){var Z=T.find(function(ke){var Te=$.get(ke);if(Te)return Te.slice(0,N).every(function(je){return je})});if(Z)return te=Z,"break"},ae=I;ae>0;ae--){var P=ee(ae);if(P==="break")break}t.placement!==te&&(t.modifiersData[s]._skip=!0,t.placement=te,t.reset=!0)}}const pre={name:"flip",enabled:!0,phase:"main",fn:fre,requiresIfExists:["offset"],data:{_skip:!1}};function TO(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function MO(e){return[oi,oo,io,ai].some(function(t){return e[t]>=0})}function mre(e){var t=e.state,n=e.name,s=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,l=Nm(t,{elementContext:"reference"}),u=Nm(t,{altBoundary:!0}),d=TO(l,s),h=TO(u,i,o),p=MO(d),m=MO(h);t.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}const gre={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mre};function xre(e,t,n){var s=ia(e),i=[ai,oi].indexOf(s)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,l=o[0],u=o[1];return l=l||0,u=(u||0)*i,[ai,oo].indexOf(s)>=0?{x:u,y:l}:{x:l,y:u}}function yre(e){var t=e.state,n=e.options,s=e.name,i=n.offset,o=i===void 0?[0,0]:i,l=P4.reduce(function(p,m){return p[m]=xre(m,t.rects,o),p},{}),u=l[t.placement],d=u.x,h=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=l}const bre={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yre};function vre(e){var t=e.state,n=e.name;t.modifiersData[n]=F4({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const jre={name:"popperOffsets",enabled:!0,phase:"read",fn:vre,data:{}};function Sre(e){return e==="x"?"y":"x"}function Cre(e){var t=e.state,n=e.options,s=e.name,i=n.mainAxis,o=i===void 0?!0:i,l=n.altAxis,u=l===void 0?!1:l,d=n.boundary,h=n.rootBoundary,p=n.altBoundary,m=n.padding,x=n.tether,y=x===void 0?!0:x,b=n.tetherOffset,C=b===void 0?0:b,S=Nm(t,{boundary:d,rootBoundary:h,padding:m,altBoundary:p}),E=ia(t.placement),k=Kh(t.placement),A=!k,T=xE(E),M=Sre(T),D=t.modifiersData.popperOffsets,$=t.rects.reference,W=t.rects.popper,te=typeof C=="function"?C(Object.assign({},t.rects,{placement:t.placement})):C,re=typeof te=="number"?{mainAxis:te,altAxis:te}:Object.assign({mainAxis:0,altAxis:0},te),U=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,oe={x:0,y:0};if(D){if(o){var xe,ie=T==="y"?oi:ai,H=T==="y"?io:oo,F=T==="y"?"height":"width",_=D[T],B=_+S[ie],fe=_-S[H],I=y?-W[F]/2:0,ee=k===qh?$[F]:W[F],ae=k===qh?-W[F]:-$[F],P=t.elements.arrow,R=y&&P?gE(P):{width:0,height:0},N=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:L4(),Z=N[ie],ke=N[H],Te=nm(0,$[F],R[F]),je=A?$[F]/2-I-Te-Z-re.mainAxis:ee-Te-Z-re.mainAxis,Ke=A?-$[F]/2+I+Te+ke+re.mainAxis:ae+Te+ke+re.mainAxis,Xe=t.elements.arrow&&ug(t.elements.arrow),He=Xe?T==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,pt=(xe=U?.[T])!=null?xe:0,De=_+je-pt-He,Tt=_+Ke-pt,ue=nm(y?ey(B,De):B,_,y?Iu(fe,Tt):fe);D[T]=ue,oe[T]=ue-_}if(u){var Ee,nt=T==="x"?oi:ai,X=T==="x"?io:oo,le=D[M],Ve=M==="y"?"height":"width",at=le+S[nt],dn=le-S[X],Fn=[oi,ai].indexOf(E)!==-1,Oe=(Ee=U?.[M])!=null?Ee:0,We=Fn?at:le-$[Ve]-W[Ve]-Oe+re.altAxis,bt=Fn?le+$[Ve]+W[Ve]-Oe-re.altAxis:dn,Be=y&&Fn?Gne(We,le,bt):nm(y?We:at,le,y?bt:dn);D[M]=Be,oe[M]=Be-le}t.modifiersData[s]=oe}}const wre={name:"preventOverflow",enabled:!0,phase:"main",fn:Cre,requiresIfExists:["offset"]};function Ere(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function kre(e){return e===Ri(e)||!eo(e)?yE(e):Ere(e)}function Are(e){var t=e.getBoundingClientRect(),n=Gh(t.width)/e.offsetWidth||1,s=Gh(t.height)/e.offsetHeight||1;return n!==1||s!==1}function Tre(e,t,n){n===void 0&&(n=!1);var s=eo(t),i=eo(t)&&Are(t),o=Ic(t),l=Yh(e,i,n),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!n)&&((ca(t)!=="body"||vE(o))&&(u=kre(t)),eo(t)?(d=Yh(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):o&&(d.x=bE(o))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function Mre(e){var t=new Map,n=new Set,s=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!n.has(u)){var d=t.get(u);d&&i(d)}}),s.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),s}function Rre(e){var t=Mre(e);return Fne.reduce(function(n,s){return n.concat(t.filter(function(i){return i.phase===s}))},[])}function Dre(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Ore(e){var t=e.reduce(function(n,s){var i=n[s.name];return n[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var RO={placement:"bottom",modifiers:[],strategy:"absolute"};function DO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Nre(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?RO:i;return function(u,d,h){h===void 0&&(h=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},RO,o),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},m=[],x=!1,y={state:p,setOptions:function(E){var k=typeof E=="function"?E(p.options):E;C(),p.options=Object.assign({},o,p.options,k),p.scrollParents={reference:Ku(u)?rm(u):u.contextElement?rm(u.contextElement):[],popper:rm(d)};var A=Rre(Ore([].concat(s,p.options.modifiers)));return p.orderedModifiers=A.filter(function(T){return T.enabled}),b(),y.update()},forceUpdate:function(){if(!x){var E=p.elements,k=E.reference,A=E.popper;if(DO(k,A)){p.rects={reference:Tre(k,ug(A),p.options.strategy==="fixed"),popper:gE(A)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(re){return p.modifiersData[re.name]=Object.assign({},re.data)});for(var T=0;T<p.orderedModifiers.length;T++){if(p.reset===!0){p.reset=!1,T=-1;continue}var M=p.orderedModifiers[T],D=M.fn,$=M.options,W=$===void 0?{}:$,te=M.name;typeof D=="function"&&(p=D({state:p,options:W,name:te,instance:y})||p)}}}},update:Dre(function(){return new Promise(function(S){y.forceUpdate(),S(p)})}),destroy:function(){C(),x=!0}};if(!DO(u,d))return y;y.setOptions(h).then(function(S){!x&&h.onFirstUpdate&&h.onFirstUpdate(S)});function b(){p.orderedModifiers.forEach(function(S){var E=S.name,k=S.options,A=k===void 0?{}:k,T=S.effect;if(typeof T=="function"){var M=T({state:p,name:E,instance:y,options:A}),D=function(){};m.push(M||D)}})}function C(){m.forEach(function(S){return S()}),m=[]}return y}}var Pre=[rre,jre,tre,Une,bre,pre,wre,Jne,gre],zre=Nre({defaultModifiers:Pre});const Zd=(e,t)=>({var:e,varRef:t?`var(${e}, ${t})`:`var(${e})`}),qr={arrowShadowColor:Zd("--popper-arrow-shadow-color"),arrowSize:Zd("--popper-arrow-size","8px"),arrowSizeHalf:Zd("--popper-arrow-size-half"),arrowBg:Zd("--popper-arrow-bg"),transformOrigin:Zd("--popper-transform-origin"),arrowOffset:Zd("--popper-arrow-offset")};function Ire(e){if(e.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}const Lre={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},_re=e=>Lre[e],OO={scroll:!0,resize:!0};function Bre(e){let t;return typeof e=="object"?t={enabled:!0,options:{...OO,...e}}:t={enabled:e,options:OO},t}const $re={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`},effect:({state:e})=>()=>{const t=e.elements.reference;e.elements.popper.style.width=`${t.offsetWidth}px`}},Fre={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:e})=>{NO(e)},effect:({state:e})=>()=>{NO(e)}},NO=e=>{e.elements.popper.style.setProperty(qr.transformOrigin.var,_re(e.placement))},Vre={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:e})=>{Hre(e)}},Hre=e=>{if(!e.placement)return;const t=Ure(e.placement);if(e.elements?.arrow&&t){Object.assign(e.elements.arrow.style,{[t.property]:t.value,width:qr.arrowSize.varRef,height:qr.arrowSize.varRef,zIndex:-1});const n={[qr.arrowSizeHalf.var]:`calc(${qr.arrowSize.varRef} / 2 - 1px)`,[qr.arrowOffset.var]:`calc(${qr.arrowSizeHalf.varRef} * -1)`};for(const s in n)e.elements.arrow.style.setProperty(s,n[s])}},Ure=e=>{if(e.startsWith("top"))return{property:"bottom",value:qr.arrowOffset.varRef};if(e.startsWith("bottom"))return{property:"top",value:qr.arrowOffset.varRef};if(e.startsWith("left"))return{property:"right",value:qr.arrowOffset.varRef};if(e.startsWith("right"))return{property:"left",value:qr.arrowOffset.varRef}},Wre={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:e})=>{PO(e)},effect:({state:e})=>()=>{PO(e)}},PO=e=>{if(!e.elements.arrow)return;const t=e.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!t)return;const n=Ire(e.placement);n&&t.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(t.style,{transform:"rotate(45deg)",background:qr.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},qre={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},Gre={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function Yre(e,t="ltr"){const n=qre[e]?.[t]||e;return t==="ltr"?n:Gre[e]??n}function jE(e={}){const{enabled:t=!0,modifiers:n,placement:s="bottom",strategy:i="absolute",arrowPadding:o=8,eventListeners:l=!0,offset:u,gutter:d=8,flip:h=!0,boundary:p="clippingParents",preventOverflow:m=!0,matchWidth:x,direction:y="ltr"}=e,b=j.useRef(null),C=j.useRef(null),S=j.useRef(null),E=Yre(s,y),k=j.useRef(()=>{}),A=j.useCallback(()=>{!t||!b.current||!C.current||(k.current?.(),S.current=zre(b.current,C.current,{placement:E,modifiers:[Wre,Vre,Fre,{...$re,enabled:!!x},{name:"eventListeners",...Bre(l)},{name:"arrow",options:{padding:o}},{name:"offset",options:{offset:u??[0,d]}},{name:"flip",enabled:!!h,options:{padding:8}},{name:"preventOverflow",enabled:!!m,options:{boundary:p}},...n??[]],strategy:i}),S.current.forceUpdate(),k.current=S.current.destroy)},[E,t,n,x,l,o,u,d,h,m,p,i]);j.useEffect(()=>()=>{!b.current&&!C.current&&(S.current?.destroy(),S.current=null)},[]);const T=j.useCallback(re=>{b.current=re,A()},[A]),M=j.useCallback((re={},U=null)=>({...re,ref:er(T,U)}),[T]),D=j.useCallback(re=>{C.current=re,A()},[A]),$=j.useCallback((re={},U=null)=>({...re,ref:er(D,U),style:{...re.style,position:i,minWidth:x?void 0:"max-content",inset:"0 auto auto 0"}}),[i,D,x]),W=j.useCallback((re={},U=null)=>{const{size:oe,shadowColor:xe,bg:ie,style:H,...F}=re;return{...F,ref:U,"data-popper-arrow":"",style:Kre(re)}},[]),te=j.useCallback((re={},U=null)=>({...re,ref:U,"data-popper-arrow-inner":""}),[]);return{update(){S.current?.update()},forceUpdate(){S.current?.forceUpdate()},transformOrigin:qr.transformOrigin.varRef,referenceRef:T,popperRef:D,getPopperProps:$,getArrowProps:W,getArrowInnerProps:te,getReferenceProps:M}}function Kre(e){const{size:t,shadowColor:n,bg:s,style:i}=e,o={...i,position:"absolute"};return t&&(o["--popper-arrow-size"]=t),n&&(o["--popper-arrow-shadow-color"]=n),s&&(o["--popper-arrow-bg"]=s),o}function Xre(){const e=j.useRef(new Map),t=e.current,n=j.useCallback((i,o,l,u)=>{e.current.set(l,{type:o,el:i,options:u}),i.addEventListener(o,l,u)},[]),s=j.useCallback((i,o,l,u)=>{i.removeEventListener(o,l,u),e.current.delete(l)},[]);return j.useEffect(()=>()=>{t.forEach((i,o)=>{s(i.el,i.type,o,i.options)})},[s,t]),{add:n,remove:s}}function L1(e){const t=e.composedPath?.()?.[0]??e.target,{tagName:n,isContentEditable:s}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&s!==!0}function V4(e={}){const{ref:t,isDisabled:n,isFocusable:s,clickOnEnter:i=!0,clickOnSpace:o=!0,onMouseDown:l,onMouseUp:u,onClick:d,onKeyDown:h,onKeyUp:p,tabIndex:m,onMouseOver:x,onMouseLeave:y,...b}=e,[C,S]=j.useState(!0),[E,k]=j.useState(!1),A=Xre(),T=_=>{_&&_.tagName!=="BUTTON"&&S(!1)},M=C?m:m||0,D=n&&!s,$=j.useCallback(_=>{if(n){_.stopPropagation(),_.preventDefault();return}_.currentTarget.focus(),d?.(_)},[n,d]),W=j.useCallback(_=>{E&&L1(_)&&(_.preventDefault(),_.stopPropagation(),k(!1),A.remove(document,"keyup",W,!1))},[E,A]),te=j.useCallback(_=>{if(h?.(_),n||_.defaultPrevented||_.metaKey||!L1(_.nativeEvent)||C)return;const B=i&&_.key==="Enter";o&&_.key===" "&&(_.preventDefault(),k(!0)),B&&(_.preventDefault(),_.currentTarget.click()),A.add(document,"keyup",W,!1)},[n,C,h,i,o,A,W]),re=j.useCallback(_=>{if(p?.(_),n||_.defaultPrevented||_.metaKey||!L1(_.nativeEvent)||C)return;o&&_.key===" "&&(_.preventDefault(),k(!1),_.currentTarget.click())},[o,C,n,p]),U=j.useCallback(_=>{_.button===0&&(k(!1),A.remove(document,"mouseup",U,!1))},[A]),oe=j.useCallback(_=>{if(_.button!==0)return;if(n){_.stopPropagation(),_.preventDefault();return}C||k(!0),_.currentTarget.focus({preventScroll:!0}),A.add(document,"mouseup",U,!1),l?.(_)},[n,C,l,A,U]),xe=j.useCallback(_=>{_.button===0&&(C||k(!1),u?.(_))},[u,C]),ie=j.useCallback(_=>{if(n){_.preventDefault();return}x?.(_)},[n,x]),H=j.useCallback(_=>{E&&(_.preventDefault(),k(!1)),y?.(_)},[E,y]),F=er(t,T);return C?{...b,ref:F,type:"button","aria-disabled":D?void 0:n,disabled:D,onClick:$,onMouseDown:l,onMouseUp:u,onKeyUp:p,onKeyDown:h,onMouseOver:x,onMouseLeave:y}:{...b,ref:F,role:"button","data-active":Qt(E),"aria-disabled":n?"true":void 0,tabIndex:D?void 0:M,onClick:$,onMouseDown:oe,onMouseUp:xe,onKeyUp:re,onKeyDown:te,onMouseOver:ie,onMouseLeave:H}}const[Jre,Qre,Zre,ese]=xb(),[tse,dg]=un({strict:!1,name:"MenuContext"});function H4(e){return e?.ownerDocument??document}function nse(e){return H4(e).activeElement===e}function rse(e={}){const{id:t,closeOnSelect:n=!0,closeOnBlur:s=!0,initialFocusRef:i,autoSelect:o=!0,isLazy:l,isOpen:u,defaultIsOpen:d,onClose:h,onOpen:p,placement:m="bottom-start",lazyBehavior:x="unmount",direction:y,computePositionOnMount:b=!1,...C}=e,S=j.useRef(null),E=j.useRef(null),k=j.useRef(!0),A=Zre(),T=j.useCallback(()=>{requestAnimationFrame(()=>{S.current?.focus({preventScroll:!1})})},[]),M=j.useCallback(()=>{const P=setTimeout(()=>{if(i)i.current?.focus();else if(!A.count())S.current?.focus({preventScroll:!1});else{const R=A.firstEnabled();R&&ie(R.index)}});fe.current.add(P)},[A,i]),D=j.useCallback(()=>{const P=setTimeout(()=>{if(!A.count())S.current?.focus({preventScroll:!1});else{const R=A.lastEnabled();R&&ie(R.index)}});fe.current.add(P)},[A]),$=j.useCallback(()=>{p?.(),o?M():T()},[o,M,T,p]),{isOpen:W,onOpen:te,onClose:re,onToggle:U}=jt({isOpen:u,defaultIsOpen:d,onClose:h,onOpen:$});pz({enabled:W&&s,ref:S,handler:P=>{const R=P.composedPath?.()?.[0]??P.target;E.current?.contains(R)||re()}});const oe=jE({...C,enabled:W||b,placement:m,direction:y}),[xe,ie]=j.useState(-1);hz(S,{focusRef:E,visible:W,shouldFocus:!0});const H=uz({isOpen:W,ref:S}),[F,_]=U8(t,"menu-button","menu-list"),B=j.useCallback(()=>{te(),T()},[te,T]),fe=j.useRef(new Set([]));j.useEffect(()=>{const P=fe.current;return()=>{P.forEach(R=>clearTimeout(R)),P.clear()}},[]),wc(()=>{W||(ie(-1),S.current?.scrollTo(0,0))},[W]),wc(()=>{W&&xe===-1&&T()},[xe,W]),j.useEffect(()=>{if(!W)return;A.item(xe)?.node?.focus({preventScroll:!k.current})},[A,xe,W]);const I=j.useCallback(()=>{te(),M()},[M,te]),ee=j.useCallback(()=>{k.current=!0,te(),D()},[te,D]),ae=j.useCallback(()=>{const P=H4(S.current),R=S.current?.contains(P.activeElement);if(!(W&&!R))return;A.item(xe)?.node?.focus({preventScroll:!k.current})},[W,xe,A]);return{openAndFocusMenu:B,openAndFocusFirstItem:I,openAndFocusLastItem:ee,onTransitionEnd:ae,unstable__animationState:H,descendants:A,popper:oe,buttonId:F,menuId:_,forceUpdate:oe.forceUpdate,orientation:"vertical",isOpen:W,onToggle:U,onOpen:te,onClose:re,menuRef:S,buttonRef:E,focusedIndex:xe,closeOnSelect:n,closeOnBlur:s,autoSelect:o,setFocusedIndex:ie,isLazy:l,lazyBehavior:x,initialFocusRef:i,scrollIntoViewRef:k}}function sse(e={},t=null){const n=dg(),{onToggle:s,popper:i,openAndFocusFirstItem:o,openAndFocusLastItem:l,scrollIntoViewRef:u}=n,d=j.useCallback(h=>{const p=h.key,x={Enter:o,ArrowDown:o,ArrowUp:l}[p];x&&(u.current=!0,h.preventDefault(),h.stopPropagation(),x(h))},[o,l,u]);return{...e,ref:er(n.buttonRef,t,i.referenceRef),id:n.buttonId,"data-active":Qt(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:wt(e.onClick,s),onKeyDown:wt(e.onKeyDown,d)}}function IC(e){return lse(e)&&!!e?.getAttribute("role")?.startsWith("menuitem")}function ise(e={},t=null){const n=dg();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:s,setFocusedIndex:i,menuRef:o,isOpen:l,onClose:u,menuId:d,isLazy:h,lazyBehavior:p,scrollIntoViewRef:m,unstable__animationState:x}=n,y=Qre(),b=Mne({preventDefault:k=>k.key!==" "&&IC(k.target)}),C=j.useCallback(k=>{if(!k.currentTarget.contains(k.target))return;const A=k.key,M={Tab:$=>$.preventDefault(),Escape:$=>{$.stopPropagation(),u()},ArrowDown:()=>{m.current=!0;const $=y.nextEnabled(s)??y.firstEnabled();$&&i($.index)},ArrowUp:()=>{m.current=!0;const $=y.prevEnabled(s)??y.firstEnabled();$&&i($.index)}}[A];if(M){k.preventDefault(),M(k);return}const D=b($=>{const W=Ane(y.values(),$,te=>te?.node?.textContent??"",y.item(s));if(W){const te=y.indexOf(W.node);i(te)}});IC(k.target)&&D(k)},[y,s,b,u,i,m]),S=j.useRef(!1);l&&(S.current=!0);const E=Vw({wasSelected:S.current,enabled:h,mode:p,isSelected:x.present});return{...e,ref:er(o,t),children:E?e.children:null,tabIndex:-1,role:"menu",id:d,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:wt(e.onKeyDown,C)}}function ose(e={}){const{popper:t,isOpen:n}=dg();return t.getPopperProps({...e,style:{visibility:n?"visible":"hidden",...e.style}})}function ase(e={},t=null){const{onMouseEnter:n,onMouseMove:s,onMouseLeave:i,onClick:o,onFocus:l,isDisabled:u,isFocusable:d,closeOnSelect:h,type:p,...m}=e,x=dg(),{setFocusedIndex:y,focusedIndex:b,closeOnSelect:C,onClose:S,menuId:E,scrollIntoViewRef:k}=x,A=j.useRef(null),T=`${E}-menuitem-${j.useId()}`,{index:M,register:D}=ese({disabled:u&&!d}),$=j.useCallback(ie=>{n?.(ie),!u&&(k.current=!1,y(M))},[y,M,u,n,k]),W=j.useCallback(ie=>{s?.(ie),A.current&&!nse(A.current)&&$(ie)},[$,s]),te=j.useCallback(ie=>{i?.(ie),!u&&y(-1)},[y,u,i]),re=j.useCallback(ie=>{o?.(ie),IC(ie.currentTarget)&&(h??C)&&S()},[S,o,C,h]),U=j.useCallback(ie=>{l?.(ie),y(M)},[y,l,M]),oe=M===b,xe=V4({onClick:re,onFocus:U,onMouseEnter:$,onMouseMove:W,onMouseLeave:te,ref:er(D,A,t),isDisabled:u,isFocusable:d});return{...m,...xe,type:p??xe.type,id:T,role:"menuitem",tabIndex:oe?0:-1}}function lse(e){if(!cse(e))return!1;const t=e.ownerDocument.defaultView??window;return e instanceof t.HTMLElement}function cse(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}const[use,uf]=un({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),oa=e=>{const{children:t}=e,n=_r("Menu",e),s=bn(e),{direction:i}=zc(),{descendants:o,...l}=rse({...s,direction:i}),u=j.useMemo(()=>l,[l]),{isOpen:d,onClose:h,forceUpdate:p}=u;return r.jsx(Jre,{value:o,children:r.jsx(tse,{value:u,children:r.jsx(use,{value:n,children:ii(t,{isOpen:d,onClose:h,forceUpdate:p})})})})};oa.displayName="Menu";const dse=$e((e,t)=>{const n=uf();return r.jsx(Re.button,{ref:t,...e,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})}),aa=$e((e,t)=>{const{children:n,as:s,...i}=e,o=sse(i,t),l=s||dse;return r.jsx(l,{...o,className:Ze("chakra-menu__menu-button",e.className),children:r.jsx(Re.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:e.children})})});aa.displayName="MenuButton";const U4=$e((e,t)=>{const n=uf();return r.jsx(Re.span,{ref:t,...e,__css:n.command,className:"chakra-menu__command"})});U4.displayName="MenuCommand";const W4=e=>{const{className:t,...n}=e,s=uf();return r.jsx(Re.hr,{"aria-orientation":"horizontal",className:Ze("chakra-menu__divider",t),...n,__css:s.divider})};W4.displayName="MenuDivider";const q4=e=>{const{className:t,children:n,...s}=e,i=uf(),o=j.Children.only(n),l=j.isValidElement(o)?j.cloneElement(o,{focusable:"false","aria-hidden":!0,className:Ze("chakra-menu__icon",o.props.className)}):null,u=Ze("chakra-menu__icon-wrapper",t);return r.jsx(Re.span,{className:u,...s,__css:i.icon,children:l})};q4.displayName="MenuIcon";const hse=$e((e,t)=>{const{type:n,...s}=e,i=uf(),o=s.as||n?n??void 0:"button",l=j.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...i.item}),[i.item]);return r.jsx(Re.button,{ref:t,type:o,...s,__css:l})}),Zt=$e((e,t)=>{const{icon:n,iconSpacing:s="0.75rem",command:i,commandSpacing:o="0.75rem",children:l,...u}=e,d=ase(u,t),p=n||i?r.jsx("span",{style:{pointerEvents:"none",flex:1},children:l}):l;return r.jsxs(hse,{...d,className:Ze("chakra-menu__menuitem",d.className),children:[n&&r.jsx(q4,{fontSize:"0.8em",marginEnd:s,children:n}),p,i&&r.jsx(U4,{marginStart:o,children:i})]})});Zt.displayName="MenuItem";const fse={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},pse=Re(Ro.div),la=$e(function(t,n){const{rootProps:s,motionProps:i,...o}=t,{isOpen:l,onTransitionEnd:u,unstable__animationState:d}=dg(),h=ise(o,n),p=ose(s),m=uf();return r.jsx(Re.div,{...p,__css:{zIndex:t.zIndex??m.list?.zIndex},children:r.jsx(pse,{variants:fse,initial:!1,animate:l?"enter":"exit",__css:{outline:0,...m.list},...i,...h,className:Ze("chakra-menu__menu-list",h.className),onUpdate:u,onAnimationComplete:Fw(d.onComplete,h.onAnimationComplete)})})});la.displayName="MenuList";var mse=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},eh=new WeakMap,Lx=new WeakMap,_x={},_1=0,G4=function(e){return e&&(e.host||G4(e.parentNode))},gse=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=G4(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},xse=function(e,t,n,s){var i=gse(t,Array.isArray(e)?e:[e]);_x[n]||(_x[n]=new WeakMap);var o=_x[n],l=[],u=new Set,d=new Set(i),h=function(m){!m||u.has(m)||(u.add(m),h(m.parentNode))};i.forEach(h);var p=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(x){if(u.has(x))p(x);else try{var y=x.getAttribute(s),b=y!==null&&y!=="false",C=(eh.get(x)||0)+1,S=(o.get(x)||0)+1;eh.set(x,C),o.set(x,S),l.push(x),C===1&&b&&Lx.set(x,!0),S===1&&x.setAttribute(n,"true"),b||x.setAttribute(s,"true")}catch(E){console.error("aria-hidden: cannot operate on ",x,E)}})};return p(t),u.clear(),_1++,function(){l.forEach(function(m){var x=eh.get(m)-1,y=o.get(m)-1;eh.set(m,x),o.set(m,y),x||(Lx.has(m)||m.removeAttribute(s),Lx.delete(m)),y||m.removeAttribute(n)}),_1--,_1||(eh=new WeakMap,eh=new WeakMap,Lx=new WeakMap,_x={})}},yse=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=mse(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),xse(s,i,n,"aria-hidden")):function(){return null}},bse=Object.defineProperty,vse=(e,t,n)=>t in e?bse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jse=(e,t,n)=>(vse(e,t+"",n),n);class Sse{constructor(){jse(this,"modals"),this.modals=new Set}add(t){return this.modals.add(t),this.modals.size}remove(t){this.modals.delete(t)}isTopModal(t){if(!t)return!1;const n=Array.from(this.modals)[this.modals.size-1];return t===n}}const LC=new Sse;function Y4(e,t){const[n,s]=j.useState(0);return j.useEffect(()=>{const i=e.current;if(i){if(t){const o=LC.add(i);s(o)}return()=>{LC.remove(i),s(0)}}},[t,e]),n}function Cse(e){const{isOpen:t,onClose:n,id:s,closeOnOverlayClick:i=!0,closeOnEsc:o=!0,useInert:l=!0,onOverlayClick:u,onEsc:d}=e,h=j.useRef(null),p=j.useRef(null),[m,x,y]=Ese(s,"chakra-modal","chakra-modal--header","chakra-modal--body");wse(h,t&&l);const b=Y4(h,t),C=j.useRef(null),S=j.useCallback(te=>{C.current=te.target},[]),E=j.useCallback(te=>{te.key==="Escape"&&(te.stopPropagation(),o&&n?.(),d?.())},[o,n,d]),[k,A]=j.useState(!1),[T,M]=j.useState(!1),D=j.useCallback((te={},re=null)=>({role:"dialog",...te,ref:er(re,h),id:m,tabIndex:-1,"aria-modal":!0,"aria-labelledby":k?x:void 0,"aria-describedby":T?y:void 0,onClick:wt(te.onClick,U=>U.stopPropagation())}),[y,T,m,x,k]),$=j.useCallback(te=>{te.stopPropagation(),C.current===te.target&&LC.isTopModal(h.current)&&(i&&n?.(),u?.())},[n,i,u]),W=j.useCallback((te={},re=null)=>({...te,ref:er(re,p),onClick:wt(te.onClick,$),onKeyDown:wt(te.onKeyDown,E),onMouseDown:wt(te.onMouseDown,S)}),[E,S,$]);return{isOpen:t,onClose:n,headerId:x,bodyId:y,setBodyMounted:M,setHeaderMounted:A,dialogRef:h,overlayRef:p,getDialogProps:D,getDialogContainerProps:W,index:b}}function wse(e,t){const n=e.current;j.useEffect(()=>{if(!(!e.current||!t))return yse(e.current)},[t,e,n])}function Ese(e,...t){const n=j.useId(),s=e||n;return j.useMemo(()=>t.map(i=>`${i}-${s}`),[s,t])}const[kse,cd]=un({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[Ase,Ac]=un({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),mt=e=>{const t={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,preserveScrollBarGap:!0,motionPreset:"scale",...e,lockFocusAcrossFrames:e.lockFocusAcrossFrames??!0},{portalProps:n,children:s,autoFocus:i,trapFocus:o,initialFocusRef:l,finalFocusRef:u,returnFocusOnClose:d,blockScrollOnMount:h,allowPinchZoom:p,preserveScrollBarGap:m,motionPreset:x,lockFocusAcrossFrames:y,animatePresenceProps:b,onCloseComplete:C}=t,S=_r("Modal",t),k={...Cse(t),autoFocus:i,trapFocus:o,initialFocusRef:l,finalFocusRef:u,returnFocusOnClose:d,blockScrollOnMount:h,allowPinchZoom:p,preserveScrollBarGap:m,motionPreset:x,lockFocusAcrossFrames:y};return r.jsx(Ase,{value:k,children:r.jsx(kse,{value:S,children:r.jsx(Nc,{...b,onExitComplete:C,children:k.isOpen&&r.jsx(cf,{...n,children:s})})})})};mt.displayName="Modal";var M0="right-scroll-bar-position",R0="width-before-scroll-bar",Tse="with-scroll-bars-hidden",Mse="--removed-body-scroll-bar-size",K4=n4(),B1=function(){},Cb=j.forwardRef(function(e,t){var n=j.useRef(null),s=j.useState({onScrollCapture:B1,onWheelCapture:B1,onTouchMoveCapture:B1}),i=s[0],o=s[1],l=e.forwardProps,u=e.children,d=e.className,h=e.removeScrollBar,p=e.enabled,m=e.shards,x=e.sideCar,y=e.noRelative,b=e.noIsolation,C=e.inert,S=e.allowPinchZoom,E=e.as,k=E===void 0?"div":E,A=e.gapMode,T=Z3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=x,D=Q3([n,t]),$=Zo(Zo({},T),i);return j.createElement(j.Fragment,null,p&&j.createElement(M,{sideCar:K4,removeScrollBar:h,shards:m,noRelative:y,noIsolation:b,inert:C,setCallbacks:o,allowPinchZoom:!!S,lockRef:n,gapMode:A}),l?j.cloneElement(j.Children.only(u),Zo(Zo({},$),{ref:D})):j.createElement(k,Zo({},$,{className:d,ref:D}),u))});Cb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cb.classNames={fullWidth:R0,zeroRight:M0};var Rse=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Dse(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Rse();return t&&e.setAttribute("nonce",t),e}function Ose(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Nse(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Pse=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Dse())&&(Ose(t,n),Nse(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},zse=function(){var e=Pse();return function(t,n){j.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},X4=function(){var e=zse(),t=function(n){var s=n.styles,i=n.dynamic;return e(s,i),null};return t},Ise={left:0,top:0,right:0,gap:0},$1=function(e){return parseInt(e||"",10)||0},Lse=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[$1(n),$1(s),$1(i)]},_se=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ise;var t=Lse(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},Bse=X4(),Nh="data-scroll-locked",$se=function(e,t,n,s){var i=e.left,o=e.top,l=e.right,u=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Tse,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(Nh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(M0,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(R0,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(M0," .").concat(M0,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(R0," .").concat(R0,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Nh,`] {
    `).concat(Mse,": ").concat(u,`px;
  }
`)},zO=function(){var e=parseInt(document.body.getAttribute(Nh)||"0",10);return isFinite(e)?e:0},Fse=function(){j.useEffect(function(){return document.body.setAttribute(Nh,(zO()+1).toString()),function(){var e=zO()-1;e<=0?document.body.removeAttribute(Nh):document.body.setAttribute(Nh,e.toString())}},[])},Vse=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;Fse();var o=j.useMemo(function(){return _se(i)},[i]);return j.createElement(Bse,{styles:$se(o,!t,i,n?"":"!important")})},_C=!1;if(typeof window<"u")try{var Bx=Object.defineProperty({},"passive",{get:function(){return _C=!0,!0}});window.addEventListener("test",Bx,Bx),window.removeEventListener("test",Bx,Bx)}catch{_C=!1}var th=_C?{passive:!1}:!1,Hse=function(e){return e.tagName==="TEXTAREA"},J4=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Hse(e)&&n[t]==="visible")},Use=function(e){return J4(e,"overflowY")},Wse=function(e){return J4(e,"overflowX")},IO=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=Q4(e,s);if(i){var o=Z4(e,s),l=o[1],u=o[2];if(l>u)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},qse=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Gse=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},Q4=function(e,t){return e==="v"?Use(t):Wse(t)},Z4=function(e,t){return e==="v"?qse(t):Gse(t)},Yse=function(e,t){return e==="h"&&t==="rtl"?-1:1},Kse=function(e,t,n,s,i){var o=Yse(e,window.getComputedStyle(t).direction),l=o*s,u=n.target,d=t.contains(u),h=!1,p=l>0,m=0,x=0;do{if(!u)break;var y=Z4(e,u),b=y[0],C=y[1],S=y[2],E=C-S-o*b;(b||E)&&Q4(e,u)&&(m+=E,x+=b);var k=u.parentNode;u=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!d&&u!==document.body||d&&(t.contains(u)||t===u));return(p&&Math.abs(m)<1||!p&&Math.abs(x)<1)&&(h=!0),h},$x=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},LO=function(e){return[e.deltaX,e.deltaY]},_O=function(e){return e&&"current"in e?e.current:e},Xse=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Jse=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Qse=0,nh=[];function Zse(e){var t=j.useRef([]),n=j.useRef([0,0]),s=j.useRef(),i=j.useState(Qse++)[0],o=j.useState(X4)[0],l=j.useRef(e);j.useEffect(function(){l.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var C=nte([e.lockRef.current],(e.shards||[]).map(_O),!0).filter(Boolean);return C.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),C.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var u=j.useCallback(function(C,S){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!l.current.allowPinchZoom;var E=$x(C),k=n.current,A="deltaX"in C?C.deltaX:k[0]-E[0],T="deltaY"in C?C.deltaY:k[1]-E[1],M,D=C.target,$=Math.abs(A)>Math.abs(T)?"h":"v";if("touches"in C&&$==="h"&&D.type==="range")return!1;var W=IO($,D);if(!W)return!0;if(W?M=$:(M=$==="v"?"h":"v",W=IO($,D)),!W)return!1;if(!s.current&&"changedTouches"in C&&(A||T)&&(s.current=M),!M)return!0;var te=s.current||M;return Kse(te,S,C,te==="h"?A:T)},[]),d=j.useCallback(function(C){var S=C;if(!(!nh.length||nh[nh.length-1]!==o)){var E="deltaY"in S?LO(S):$x(S),k=t.current.filter(function(M){return M.name===S.type&&(M.target===S.target||S.target===M.shadowParent)&&Xse(M.delta,E)})[0];if(k&&k.should){S.cancelable&&S.preventDefault();return}if(!k){var A=(l.current.shards||[]).map(_O).filter(Boolean).filter(function(M){return M.contains(S.target)}),T=A.length>0?u(S,A[0]):!l.current.noIsolation;T&&S.cancelable&&S.preventDefault()}}},[]),h=j.useCallback(function(C,S,E,k){var A={name:C,delta:S,target:E,should:k,shadowParent:eie(E)};t.current.push(A),setTimeout(function(){t.current=t.current.filter(function(T){return T!==A})},1)},[]),p=j.useCallback(function(C){n.current=$x(C),s.current=void 0},[]),m=j.useCallback(function(C){h(C.type,LO(C),C.target,u(C,e.lockRef.current))},[]),x=j.useCallback(function(C){h(C.type,$x(C),C.target,u(C,e.lockRef.current))},[]);j.useEffect(function(){return nh.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:x}),document.addEventListener("wheel",d,th),document.addEventListener("touchmove",d,th),document.addEventListener("touchstart",p,th),function(){nh=nh.filter(function(C){return C!==o}),document.removeEventListener("wheel",d,th),document.removeEventListener("touchmove",d,th),document.removeEventListener("touchstart",p,th)}},[]);var y=e.removeScrollBar,b=e.inert;return j.createElement(j.Fragment,null,b?j.createElement(o,{styles:Jse(i)}):null,y?j.createElement(Vse,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function eie(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const tie=rte(K4,Zse);var eL=j.forwardRef(function(e,t){return j.createElement(Cb,Zo({},e,{ref:t,sideCar:tie}))});eL.classNames=Cb.classNames;function tL(e){const{autoFocus:t,trapFocus:n,dialogRef:s,initialFocusRef:i,blockScrollOnMount:o,allowPinchZoom:l,finalFocusRef:u,returnFocusOnClose:d,preserveScrollBarGap:h,lockFocusAcrossFrames:p,isOpen:m}=Ac(),[x,y]=c2();j.useEffect(()=>{!x&&y&&setTimeout(y)},[x,y]);const b=Y4(s,m);return r.jsx(M4,{autoFocus:t,isDisabled:!n,initialFocusRef:i,finalFocusRef:u,restoreFocus:d,contentRef:s,lockFocusAcrossFrames:p,children:r.jsx(eL,{removeScrollBar:!h,allowPinchZoom:l,enabled:b===1&&o,forwardProps:!0,children:e.children})})}const nie={initial:({offsetX:e,offsetY:t,transition:n,transitionEnd:s,delay:i})=>({opacity:0,x:e,y:t,transition:n?.exit??ko.exit(Nu.exit,i),transitionEnd:s?.exit}),enter:({transition:e,transitionEnd:t,delay:n})=>({opacity:1,x:0,y:0,transition:e?.enter??ko.enter(Nu.enter,n),transitionEnd:t?.enter}),exit:({offsetY:e,offsetX:t,transition:n,transitionEnd:s,reverse:i,delay:o})=>{const l={x:t,y:e};return{opacity:0,transition:n?.exit??ko.exit(Nu.exit,o),...i?{...l,transitionEnd:s?.exit}:{transitionEnd:{...l,...s?.exit}}}}},Lp={initial:"initial",animate:"enter",exit:"exit",variants:nie},rie=j.forwardRef(function(t,n){const{unmountOnExit:s,in:i,reverse:o=!0,className:l,offsetX:u=0,offsetY:d=8,transition:h,transitionEnd:p,delay:m,animatePresenceProps:x,...y}=t,b=s?i&&s:!0,C=i||s?"enter":"exit",S={offsetX:u,offsetY:d,reverse:o,transition:h,transitionEnd:p,delay:m};return r.jsx(Nc,{...x,custom:S,children:b&&r.jsx(Ro.div,{ref:n,className:Ze("chakra-offset-slide",l),custom:S,...Lp,animate:C,...y})})});rie.displayName="SlideFade";const sie={exit:({reverse:e,initialScale:t,transition:n,transitionEnd:s,delay:i})=>({opacity:0,...e?{scale:t,transitionEnd:s?.exit}:{transitionEnd:{scale:t,...s?.exit}},transition:n?.exit??ko.exit(Nu.exit,i)}),enter:({transitionEnd:e,transition:t,delay:n})=>({opacity:1,scale:1,transition:t?.enter??ko.enter(Nu.enter,n),transitionEnd:e?.enter})},nL={initial:"exit",animate:"enter",exit:"exit",variants:sie},iie=j.forwardRef(function(t,n){const{unmountOnExit:s,in:i,reverse:o=!0,initialScale:l=.95,className:u,transition:d,transitionEnd:h,delay:p,animatePresenceProps:m,...x}=t,y=s?i&&s:!0,b=i||s?"enter":"exit",C={initialScale:l,reverse:o,transition:d,transitionEnd:h,delay:p};return r.jsx(Nc,{...m,custom:C,children:y&&r.jsx(Ro.div,{ref:n,className:Ze("chakra-offset-slide",u),...nL,animate:b,custom:C,...x})})});iie.displayName="ScaleFade";const oie={slideInBottom:{...Lp,custom:{offsetY:16,reverse:!0}},slideInRight:{...Lp,custom:{offsetX:16,reverse:!0}},slideInTop:{...Lp,custom:{offsetY:-16,reverse:!0}},slideInLeft:{...Lp,custom:{offsetX:-16,reverse:!0}},scale:{...nL,custom:{initialScale:.95,reverse:!0}},none:{}},aie=Re(Ro.section),lie=e=>oie[e||"none"],rL=j.forwardRef((e,t)=>{const{preset:n,motionProps:s=lie(n),...i}=e;return r.jsx(aie,{ref:t,...s,...i})});rL.displayName="ModalTransition";const vt=$e((e,t)=>{const{className:n,children:s,containerProps:i,motionProps:o,...l}=e,{getDialogProps:u,getDialogContainerProps:d}=Ac(),h=u(l,t),p=d(i),m=Ze("chakra-modal__content",n),x=cd(),y={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...x.dialog},b={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...x.dialogContainer},{motionPreset:C}=Ac();return r.jsx(tL,{children:r.jsx(Re.div,{...p,className:"chakra-modal__content-container",tabIndex:-1,__css:b,children:r.jsx(rL,{preset:C,motionProps:o,className:m,...h,__css:y,children:s})})})});vt.displayName="ModalContent";const gt=$e((e,t)=>{const{className:n,...s}=e,{bodyId:i,setBodyMounted:o}=Ac();j.useEffect(()=>(o(!0),()=>o(!1)),[o]);const l=Ze("chakra-modal__body",n),u=cd();return r.jsx(Re.div,{ref:t,className:l,id:i,...s,__css:u.body})});gt.displayName="ModalBody";const kt=$e((e,t)=>{const{onClick:n,className:s,...i}=e,{onClose:o}=Ac(),l=Ze("chakra-modal__close-btn",s),u=cd();return r.jsx(H2,{ref:t,__css:u.closeButton,className:l,onClick:wt(n,d=>{d.stopPropagation(),o()}),...i})});kt.displayName="ModalCloseButton";const Nt=$e((e,t)=>{const{className:n,...s}=e,i=Ze("chakra-modal__footer",n),o=cd(),l={display:"flex",alignItems:"center",justifyContent:"flex-end",...o.footer};return r.jsx(Re.footer,{ref:t,...s,__css:l,className:i})});Nt.displayName="ModalFooter";const xt=$e((e,t)=>{const{className:n,...s}=e,{headerId:i,setHeaderMounted:o}=Ac();j.useEffect(()=>(o(!0),()=>o(!1)),[o]);const l=Ze("chakra-modal__header",n),u=cd(),d={flex:0,...u.header};return r.jsx(Re.header,{ref:t,className:l,id:i,...s,__css:d})});xt.displayName="ModalHeader";const cie={enter:({transition:e,transitionEnd:t,delay:n}={})=>({opacity:1,transition:e?.enter??ko.enter(Nu.enter,n),transitionEnd:t?.enter}),exit:({transition:e,transitionEnd:t,delay:n}={})=>({opacity:0,transition:e?.exit??ko.exit(Nu.exit,n),transitionEnd:t?.exit})},sL={initial:"exit",animate:"enter",exit:"exit",variants:cie},uie=j.forwardRef(function(t,n){const{unmountOnExit:s,in:i,className:o,transition:l,transitionEnd:u,delay:d,animatePresenceProps:h,...p}=t,m=i||s?"enter":"exit",x=s?i&&s:!0,y={transition:l,transitionEnd:u,delay:d};return r.jsx(Nc,{...h,custom:y,children:x&&r.jsx(Ro.div,{ref:n,className:Ze("chakra-fade",o),custom:y,...sL,animate:m,...p})})});uie.displayName="Fade";const die=Re(Ro.div),yt=$e((e,t)=>{const{className:n,transition:s,motionProps:i,...o}=e,l=Ze("chakra-modal__overlay",n),d={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...cd().overlay},{motionPreset:h}=Ac(),m=i||(h==="none"?{}:sL);return r.jsx(die,{...m,__css:d,ref:t,className:l,...o})});yt.displayName="ModalOverlay";function hie(e){const{leastDestructiveRef:t,...n}=e;return r.jsx(mt,{...n,initialFocusRef:t})}const fie=$e((e,t)=>r.jsx(vt,{ref:t,role:"alertdialog",...e})),[pie,mie]=un(),gie={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function xie(e,t){if(e)return gie[e]?.[t]??e}function yie(e){const{isOpen:t,onClose:n,placement:s="right",children:i,...o}=e,l=zc(),u=l.components?.Drawer,d=xie(s,l.direction);return r.jsx(pie,{value:{placement:d},children:r.jsx(mt,{isOpen:t,onClose:n,styleConfig:u,...o,children:i})})}const BO={exit:{duration:.15,ease:vu.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},bie={exit:({direction:e,transition:t,transitionEnd:n,delay:s})=>{const{exit:i}=yC({direction:e});return{...i,transition:t?.exit??ko.exit(BO.exit,s),transitionEnd:n?.exit}},enter:({direction:e,transitionEnd:t,transition:n,delay:s})=>{const{enter:i}=yC({direction:e});return{...i,transition:n?.enter??ko.enter(BO.enter,s),transitionEnd:t?.enter}}},iL=j.forwardRef(function(t,n){const{direction:s="right",style:i,unmountOnExit:o,in:l,className:u,transition:d,transitionEnd:h,delay:p,motionProps:m,animatePresenceProps:x,...y}=t,b=yC({direction:s}),C=Object.assign({position:"fixed"},b.position,i),S=o?l&&o:!0,E=l||o?"enter":"exit",k={transitionEnd:h,transition:d,direction:s,delay:p};return r.jsx(Nc,{...x,custom:k,children:S&&r.jsx(Ro.div,{...y,ref:n,initial:"exit",className:Ze("chakra-slide",u),animate:E,exit:"exit",custom:k,variants:bie,style:C,...m})})});iL.displayName="Slide";const vie=Re(iL),oL=$e((e,t)=>{const{className:n,children:s,motionProps:i,containerProps:o,...l}=e,{getDialogProps:u,getDialogContainerProps:d,isOpen:h}=Ac(),p=u(l,t),m=d(o),x=Ze("chakra-modal__content",n),y=cd(),b={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...y.dialog},C={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...y.dialogContainer},{placement:S}=mie();return r.jsx(tL,{children:r.jsx(Re.div,{...m,className:"chakra-modal__content-container",__css:C,children:r.jsx(vie,{motionProps:i,direction:S,in:h,className:x,...p,__css:b,children:s})})})});oL.displayName="DrawerContent";const jie=e=>r.jsx(Wn,{viewBox:"0 0 24 24",...e,children:r.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}),Sie=e=>r.jsx(Wn,{viewBox:"0 0 24 24",...e,children:r.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})});function $O(e,t,n,s){j.useEffect(()=>{if(!e.current||!s)return;const i=e.current.ownerDocument.defaultView??window,o=Array.isArray(t)?t:[t],l=new i.MutationObserver(u=>{for(const d of u)d.type==="attributes"&&d.attributeName&&o.includes(d.attributeName)&&n(d)});return l.observe(e.current,{attributes:!0,attributeFilter:o}),()=>l.disconnect()})}const Cie=50,FO=300;function wie(e,t){const[n,s]=j.useState(!1),[i,o]=j.useState(null),[l,u]=j.useState(!0),d=j.useRef(null),h=()=>clearTimeout(d.current);W8(()=>{i==="increment"&&e(),i==="decrement"&&t()},n?Cie:null);const p=j.useCallback(()=>{l&&e(),d.current=setTimeout(()=>{u(!1),s(!0),o("increment")},FO)},[e,l]),m=j.useCallback(()=>{l&&t(),d.current=setTimeout(()=>{u(!1),s(!0),o("decrement")},FO)},[t,l]),x=j.useCallback(()=>{u(!0),s(!1),h()},[]);return j.useEffect(()=>()=>h(),[]),{up:p,down:m,stop:x,isSpinning:n}}const Eie=/^[Ee0-9+\-.]$/;function kie(e){return Eie.test(e)}function Aie(e,t){if(e.key==null)return!0;const n=e.ctrlKey||e.altKey||e.metaKey;return!(e.key.length===1)||n?!0:t(e.key)}function Tie(e={}){const{focusInputOnChange:t=!0,clampValueOnBlur:n=!0,keepWithinRange:s=!0,min:i=Number.MIN_SAFE_INTEGER,max:o=Number.MAX_SAFE_INTEGER,step:l=1,isReadOnly:u,isDisabled:d,isRequired:h,isInvalid:p,pattern:m="[0-9]*(.[0-9]+)?",inputMode:x="decimal",allowMouseWheel:y,id:b,onChange:C,precision:S,name:E,"aria-describedby":k,"aria-label":A,"aria-labelledby":T,onFocus:M,onBlur:D,onInvalid:$,getAriaValueText:W,isValidCharacter:te,format:re,parse:U,...oe}=e,xe=es(M),ie=es(D),H=es($),F=es(te??kie),_=es(W),B=D8(e),{update:fe,increment:I,decrement:ee}=B,[ae,P]=j.useState(!1),R=!(u||d),N=j.useRef(null),Z=j.useRef(null),ke=j.useRef(null),Te=j.useRef(null),je=j.useCallback(Be=>Be.split("").filter(F).join(""),[F]),Ke=j.useCallback(Be=>U?.(Be)??Be,[U]),Xe=j.useCallback(Be=>(re?.(Be)??Be).toString(),[re]);wc(()=>{(B.valueAsNumber>o||B.valueAsNumber<i)&&H?.("rangeOverflow",Xe(B.value),B.valueAsNumber)},[B.valueAsNumber,B.value,Xe,H]),ea(()=>{if(!N.current)return;if(N.current.value!=B.value){const ot=Ke(N.current.value);B.setValue(je(ot))}},[Ke,je]);const He=j.useCallback((Be=l)=>{R&&I(Be)},[I,R,l]),pt=j.useCallback((Be=l)=>{R&&ee(Be)},[ee,R,l]),De=wie(He,pt);$O(ke,"disabled",De.stop,De.isSpinning),$O(Te,"disabled",De.stop,De.isSpinning);const Tt=j.useCallback(Be=>{if(Be.nativeEvent.isComposing)return;const vn=Ke(Be.currentTarget.value);fe(je(vn)),Z.current={start:Be.currentTarget.selectionStart,end:Be.currentTarget.selectionEnd}},[fe,je,Ke]),ue=j.useCallback(Be=>{xe?.(Be),Z.current&&(Be.currentTarget.selectionStart=Z.current.start??Be.currentTarget.value?.length,Be.currentTarget.selectionEnd=Z.current.end??Be.currentTarget.selectionStart)},[xe]),Ee=j.useCallback(Be=>{if(Be.nativeEvent.isComposing)return;Aie(Be,F)||Be.preventDefault();const ot=nt(Be)*l,vn=Be.key,ct={ArrowUp:()=>He(ot),ArrowDown:()=>pt(ot),Home:()=>fe(i),End:()=>fe(o)}[vn];ct&&(Be.preventDefault(),ct(Be))},[F,l,He,pt,fe,i,o]),nt=Be=>{let ot=1;return(Be.metaKey||Be.ctrlKey)&&(ot=.1),Be.shiftKey&&(ot=10),ot},X=j.useMemo(()=>{const Be=_?.(B.value);if(Be!=null)return Be;const ot=B.value.toString();return ot||void 0},[B.value,_]),le=j.useCallback(()=>{let Be=B.value;if(B.value==="")return;/^[eE]/.test(B.value.toString())?B.setValue(""):(B.valueAsNumber<i&&(Be=i),B.valueAsNumber>o&&(Be=o),B.cast(Be))},[B,o,i]),Ve=j.useCallback(()=>{P(!1),n&&le()},[n,P,le]),at=j.useCallback(()=>{t&&requestAnimationFrame(()=>{N.current?.focus()})},[t]),dn=j.useCallback(Be=>{Be.preventDefault(),De.up(),at()},[at,De]),Fn=j.useCallback(Be=>{Be.preventDefault(),De.down(),at()},[at,De]);Tu(()=>N.current,"wheel",Be=>{const vn=(N.current?.ownerDocument??document).activeElement===N.current;if(!y||!vn)return;Be.preventDefault();const Le=nt(Be)*l,ct=Math.sign(Be.deltaY);ct===-1?He(Le):ct===1&&pt(Le)},{passive:!1});const Oe=j.useCallback((Be={},ot=null)=>{const vn=d||s&&B.isAtMax;return{...Be,ref:er(ot,ke),role:"button",tabIndex:-1,onPointerDown:wt(Be.onPointerDown,Le=>{Le.button!==0||vn||dn(Le)}),onPointerLeave:wt(Be.onPointerLeave,De.stop),onPointerUp:wt(Be.onPointerUp,De.stop),disabled:vn,"aria-disabled":Au(vn)}},[B.isAtMax,s,dn,De.stop,d]),We=j.useCallback((Be={},ot=null)=>{const vn=d||s&&B.isAtMin;return{...Be,ref:er(ot,Te),role:"button",tabIndex:-1,onPointerDown:wt(Be.onPointerDown,Le=>{Le.button!==0||vn||Fn(Le)}),onPointerLeave:wt(Be.onPointerLeave,De.stop),onPointerUp:wt(Be.onPointerUp,De.stop),disabled:vn,"aria-disabled":Au(vn)}},[B.isAtMin,s,Fn,De.stop,d]),bt=j.useCallback((Be={},ot=null)=>({name:E,inputMode:x,type:"text",pattern:m,"aria-labelledby":T,"aria-label":A,"aria-describedby":k,id:b,disabled:d,role:"spinbutton",...Be,readOnly:Be.readOnly??u,"aria-readonly":Be.readOnly??u,"aria-required":Be.required??h,required:Be.required??h,ref:er(N,ot),value:Xe(B.value),"aria-valuemin":i,"aria-valuemax":o,"aria-valuenow":Number.isNaN(B.valueAsNumber)?void 0:B.valueAsNumber,"aria-invalid":Au(p??B.isOutOfRange),"aria-valuetext":X,autoComplete:"off",autoCorrect:"off",onChange:wt(Be.onChange,Tt),onKeyDown:wt(Be.onKeyDown,Ee),onFocus:wt(Be.onFocus,ue,()=>P(!0)),onBlur:wt(Be.onBlur,ie,Ve)}),[E,x,m,T,A,Xe,k,b,d,h,u,p,B.value,B.valueAsNumber,B.isOutOfRange,i,o,X,Tt,Ee,ue,ie,Ve]);return{value:Xe(B.value),valueAsNumber:B.valueAsNumber,isFocused:ae,isDisabled:d,isReadOnly:u,getIncrementButtonProps:Oe,getDecrementButtonProps:We,getInputProps:bt,htmlProps:oe}}const[Mie,wb]=un({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[Rie,SE]=un({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),Qn=$e(function(t,n){const s=_r("NumberInput",t),i=bn(t),o=J2(i),{htmlProps:l,...u}=Tie(o),d=j.useMemo(()=>u,[u]);return r.jsx(Rie,{value:d,children:r.jsx(Mie,{value:s,children:r.jsx(Re.div,{...l,ref:n,className:Ze("chakra-numberinput",t.className),__css:{position:"relative",zIndex:0,...s.root}})})})});Qn.displayName="NumberInput";const Bs=$e(function(t,n){const s=wb();return r.jsx(Re.div,{"aria-hidden":!0,ref:n,...t,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...s.stepperGroup}})});Bs.displayName="NumberInputStepper";const Zn=$e(function(t,n){const{getInputProps:s}=SE(),i=s(t,n),o=wb();return r.jsx(Re.input,{...i,className:Ze("chakra-numberinput__field",t.className),__css:{width:"100%",...o.field}})});Zn.displayName="NumberInputField";const aL=Re("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),$s=$e(function(t,n){const s=wb(),{getDecrementButtonProps:i}=SE(),o=i(t,n);return r.jsx(aL,{...o,__css:s.stepper,children:t.children??r.jsx(jie,{})})});$s.displayName="NumberDecrementStepper";const Fs=$e(function(t,n){const{getIncrementButtonProps:s}=SE(),i=s(t,n),o=wb();return r.jsx(aL,{...i,__css:o.stepper,children:t.children??r.jsx(Sie,{})})});Fs.displayName="NumberIncrementStepper";const[Die,sxe,Oie,Nie]=xb(),[Pie,zie]=un({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to place all pin input fields within `<PinInput />`"}),VO=e=>e?.split("");function HO(e,t){return(t==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(e)}function Iie(e={}){const{autoFocus:t,value:n,defaultValue:s,onChange:i,onComplete:o,placeholder:l="",manageFocus:u=!0,otp:d=!1,id:h,isDisabled:p,isInvalid:m,type:x="number",mask:y}=e,b=j.useId(),C=h??`pin-input-${b}`,S=Oie(),[E,k]=j.useState(!0),[A,T]=j.useState(-1),[M,D]=tb({defaultValue:VO(s)||[],value:VO(n),onChange:oe=>i?.(oe.join(""))});j.useEffect(()=>{if(t){const oe=S.first();oe&&requestAnimationFrame(()=>{oe.node.focus()})}},[S]);const $=j.useCallback(oe=>{if(!E||!u)return;const xe=S.next(oe,!1);xe&&requestAnimationFrame(()=>{xe.node.focus()})},[S,E,u]),W=j.useCallback((oe,xe,ie=!0)=>{const H=[...M];H[xe]=oe,D(H),oe!==""&&H.length===S.count()&&H.every(_=>_!=null&&_!=="")?o?.(H.join("")):ie&&$(xe)},[M,D,$,o,S]),te=j.useCallback(()=>{const oe=Array(S.count()).fill("");D(oe),S.first()?.node?.focus()},[S,D]),re=j.useCallback((oe,xe)=>{let ie=xe;return oe?.length>0&&(oe[0]===xe.charAt(0)?ie=xe.charAt(1):oe[0]===xe.charAt(1)&&(ie=xe.charAt(0))),ie},[]);return{getInputProps:j.useCallback(oe=>{const{index:xe,...ie}=oe,H=ee=>{const ae=ee.currentTarget.value,P=M[xe],R=re(P,ae);if(R===""){W("",xe);return}if(ae.length>2){if(HO(ae,x)){const N=ae.split("").filter((Z,ke)=>ke<S.count());D(N),N.length===S.count()&&o?.(N.join(""))}}else HO(R,x)&&W(R,xe),k(!0)},F=ee=>{if(ee.key==="Backspace"&&u)if(ee.currentTarget.value===""){const ae=S.prev(xe,!1);ae&&(W("",xe-1,!1),ae.node?.focus(),k(!0))}else k(!1)},_=()=>{T(xe)},B=()=>{T(-1)},fe=A===xe;return{"aria-label":"Please enter your pin code",inputMode:x==="number"?"numeric":"text",type:y?"password":x==="number"?"tel":"text",...ie,id:`${C}-${xe}`,disabled:p,"aria-invalid":Au(m),onChange:wt(ie.onChange,H),onKeyDown:wt(ie.onKeyDown,F),onFocus:wt(ie.onFocus,_),onBlur:wt(ie.onBlur,B),value:M[xe]||"",autoComplete:d?"one-time-code":"off",placeholder:fe?"":l}},[S,A,re,C,p,y,m,u,o,d,l,W,D,x,M]),id:C,descendants:S,values:M,setValue:W,setValues:D,clear:te}}function Lie(e={},t=null){const{getInputProps:n}=zie(),{index:s,register:i}=Nie();return n({...e,ref:er(i,t),index:e.index??s})}function BC(e){const t=Ks("PinInput",e),{children:n,...s}=bn(e),{descendants:i,...o}=Iie(s),l=od(n).map(u=>j.cloneElement(u,{__css:t}));return r.jsx(Die,{value:i,children:r.jsx(Pie,{value:o,children:l})})}BC.displayName="PinInput";const qa=$e(function(t,n){const s=Lie(t,n);return r.jsx(Re.input,{...s,className:Ze("chakra-pin-input",t.className)})});qa.displayName="PinInputField";const[_ie,hg]=un({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Bie,CE]=un({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),rh={click:"click",hover:"hover"};function $ie(e={}){const{closeOnBlur:t=!0,closeOnEsc:n=!0,initialFocusRef:s,id:i,returnFocusOnClose:o=!0,autoFocus:l=!0,arrowSize:u,arrowShadowColor:d,trigger:h=rh.click,openDelay:p=200,closeDelay:m=200,isLazy:x,lazyBehavior:y="unmount",computePositionOnMount:b,...C}=e,{isOpen:S,onClose:E,onOpen:k,onToggle:A}=jt(e),[T,M]=j.useState(o);j.useEffect(()=>M(o),[o]);const D=j.useRef(null),$=j.useRef(null),W=j.useRef(null),te=j.useRef(!1),re=j.useRef(!1);S&&(re.current=!0);const[U,oe]=j.useState(!1),[xe,ie]=j.useState(!1),H=j.useId(),F=i??H,[_,B,fe,I]=["popover-trigger","popover-content","popover-header","popover-body"].map(Ee=>`${Ee}-${F}`),{referenceRef:ee,getArrowProps:ae,getPopperProps:P,getArrowInnerProps:R,forceUpdate:N}=jE({...C,enabled:S||!!b}),Z=uz({isOpen:S,ref:W});V8({enabled:S,ref:$}),hz(W,{focusRef:$,visible:S,shouldFocus:T&&h===rh.click}),P8(W,{focusRef:s,visible:S,shouldFocus:l&&h===rh.click}),pz({enabled:S&&t,ref:W,handler(Ee){const nt=Ee.composedPath?.()[0]??[Ee.target];Fx($.current,nt)||(nt&&M(!_0(nt)),E())}});const ke=Vw({wasSelected:re.current,enabled:x,mode:y,isSelected:Z.present}),Te=j.useCallback((Ee={},nt=null)=>{const X={...Ee,style:{...Ee.style,transformOrigin:qr.transformOrigin.varRef,[qr.arrowSize.var]:u?`${u}px`:void 0,[qr.arrowShadowColor.var]:d},ref:er(W,nt),children:ke?Ee.children:null,id:B,tabIndex:-1,role:"dialog",onKeyDown:wt(Ee.onKeyDown,le=>{le.nativeEvent.isComposing||n&&le.key==="Escape"&&(le.preventDefault(),le.stopPropagation(),E())}),onBlur:wt(Ee.onBlur,le=>{const Ve=UO(le),at=Fx(W.current,Ve),dn=Fx($.current,Ve),Fn=!at&&!dn;Ve&&M(!_0(Ve)),S&&t&&Fn&&E()}),"aria-labelledby":U?fe:void 0,"aria-describedby":xe?I:void 0};return h===rh.hover&&(X.role="tooltip",X.onMouseEnter=wt(Ee.onMouseEnter,()=>{te.current=!0}),X.onMouseLeave=wt(Ee.onMouseLeave,le=>{le.nativeEvent.relatedTarget!==null&&(te.current=!1,setTimeout(()=>E(),m))})),X},[ke,B,U,fe,xe,I,h,n,E,S,t,m,d,u]),je=j.useCallback((Ee={},nt=null)=>P({...Ee,style:{visibility:S?"visible":"hidden",...Ee.style}},nt),[S,P]),Ke=j.useCallback((Ee,nt=null)=>({...Ee,ref:er(nt,D,ee)}),[D,ee]),Xe=j.useRef(void 0),He=j.useRef(void 0),pt=j.useCallback(Ee=>{D.current==null&&ee(Ee)},[ee]),De=j.useCallback((Ee={},nt=null)=>{const X={...Ee,ref:er($,nt,pt),id:_,"aria-haspopup":"dialog","aria-expanded":S,"aria-controls":B};return h===rh.click&&(X.onClick=wt(Ee.onClick,A)),h===rh.hover&&(X.onFocus=wt(Ee.onFocus,()=>{Xe.current===void 0&&k()}),X.onBlur=wt(Ee.onBlur,le=>{const Ve=UO(le),at=!Fx(W.current,Ve);S&&t&&at&&E()}),X.onKeyDown=wt(Ee.onKeyDown,le=>{le.key==="Escape"&&E()}),X.onMouseEnter=wt(Ee.onMouseEnter,()=>{te.current=!0,Xe.current=window.setTimeout(()=>k(),p)}),X.onMouseLeave=wt(Ee.onMouseLeave,()=>{te.current=!1,Xe.current&&(clearTimeout(Xe.current),Xe.current=void 0),He.current=window.setTimeout(()=>{te.current===!1&&E()},m)})),X},[_,S,B,h,pt,A,k,t,E,p,m]);j.useEffect(()=>()=>{Xe.current&&clearTimeout(Xe.current),He.current&&clearTimeout(He.current)},[]);const Tt=j.useCallback((Ee={},nt=null)=>({...Ee,id:fe,ref:er(nt,X=>{oe(!!X)})}),[fe]),ue=j.useCallback((Ee={},nt=null)=>({...Ee,id:I,ref:er(nt,X=>{ie(!!X)})}),[I]);return{forceUpdate:N,isOpen:S,onAnimationComplete:Z.onComplete,onClose:E,getAnchorProps:Ke,getArrowProps:ae,getArrowInnerProps:R,getPopoverPositionerProps:je,getPopoverProps:Te,getTriggerProps:De,getHeaderProps:Tt,getBodyProps:ue}}function Fx(e,t){return e===t||e?.contains(t)}function UO(e){const t=e.currentTarget.ownerDocument.activeElement;return e.relatedTarget??t}function lL(e){const t=_r("Popover",e),{children:n,...s}=bn(e),i=zc(),o=$ie({...s,direction:i.direction});return r.jsx(_ie,{value:o,children:r.jsx(Bie,{value:t,children:ii(n,{isOpen:o.isOpen,onClose:o.onClose,forceUpdate:o.forceUpdate})})})}lL.displayName="Popover";function cL(e){const t=j.version;return typeof t!="string"||t.startsWith("18.")?e?.ref:e?.props?.ref}const F1=(e,t)=>t?`${e}.${t}, ${t}`:void 0;function uL(e){const{bg:t,bgColor:n,backgroundColor:s,shadow:i,boxShadow:o,shadowColor:l,...u}=e,{getArrowProps:d,getArrowInnerProps:h}=hg(),p=CE(),m=t??n??s,x=i??o;return r.jsx(Re.div,{...d(),className:"chakra-popover__arrow-positioner",children:r.jsx(Re.div,{className:Ze("chakra-popover__arrow",e.className),...h(u),__css:{"--popper-arrow-shadow-color":F1("colors",l),"--popper-arrow-bg":F1("colors",m),"--popper-arrow-shadow":F1("shadows",x),...p.arrow}})})}uL.displayName="PopoverArrow";const dL=$e(function(t,n){const{getBodyProps:s}=hg(),i=CE();return r.jsx(Re.div,{...s(t,n),className:Ze("chakra-popover__body",t.className),__css:i.body})});dL.displayName="PopoverBody";function Fie(e){if(e)return{enter:{...e.enter,visibility:"visible"},exit:{...e.exit,transitionEnd:{visibility:"hidden"}}}}const Vie={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},Hie=Re(Ro.section),hL=$e(function(t,n){const{variants:s=Vie,...i}=t,{isOpen:o}=hg();return r.jsx(Hie,{ref:n,variants:Fie(s),initial:!1,animate:o?"enter":"exit",...i})});hL.displayName="PopoverTransition";const fL=$e(function(t,n){const{rootProps:s,motionProps:i,...o}=t,{getPopoverProps:l,getPopoverPositionerProps:u,onAnimationComplete:d}=hg(),h=CE(),p={position:"relative",display:"flex",flexDirection:"column",...h.content};return r.jsx(Re.div,{...u(s),__css:h.popper,className:"chakra-popover__popper",children:r.jsx(hL,{...i,...l(o,n),onAnimationComplete:Fw(d,o.onAnimationComplete),className:Ze("chakra-popover__content",t.className),__css:p})})});fL.displayName="PopoverContent";function pL(e){const t=j.Children.only(e.children),{getTriggerProps:n}=hg();return r.jsx(r.Fragment,{children:j.cloneElement(t,n(t.props,cL(t)))})}pL.displayName="PopoverTrigger";function Uie(e,t,n){return(e-t)*100/(n-t)}Oc({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});Oc({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});const Wie=Oc({"0%":{left:"-40%"},"100%":{left:"100%"}}),qie=Oc({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function Gie(e){const{value:t=0,min:n,max:s,valueText:i,getValueText:o,isIndeterminate:l,role:u="progressbar"}=e,d=Uie(t,n,s);return{bind:{"data-indeterminate":l?"":void 0,"aria-valuemax":s,"aria-valuemin":n,"aria-valuenow":l?void 0:t,"aria-valuetext":(()=>{if(t!=null)return typeof o=="function"?o(t,d):i})(),role:u},percent:d,value:t}}const[Yie,Kie]=un({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),Xie=$e((e,t)=>{const{min:n,max:s,value:i,isIndeterminate:o,role:l,...u}=e,d=Gie({value:i,min:n,max:s,isIndeterminate:o,role:l}),p={height:"100%",...Kie().filledTrack};return r.jsx(Re.div,{ref:t,style:{width:`${d.percent}%`,...u.style},...d.bind,...u,__css:p})}),gc=$e((e,t)=>{const{value:n,min:s=0,max:i=100,hasStripe:o,isAnimated:l,children:u,borderRadius:d,isIndeterminate:h,"aria-label":p,"aria-labelledby":m,"aria-valuetext":x,title:y,role:b,...C}=bn(e),S=_r("Progress",e),E=d??S.track?.borderRadius,k={animation:`${qie} 1s linear infinite`},M={...!h&&o&&l&&k,...h&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${Wie} 1s ease infinite normal none running`}},D={overflow:"hidden",position:"relative",...S.track};return r.jsx(Re.div,{ref:t,borderRadius:E,__css:D,...C,children:r.jsxs(Yie,{value:S,children:[r.jsx(Xie,{"aria-label":p,"aria-labelledby":m,"aria-valuetext":x,min:s,max:i,value:n,isIndeterminate:h,css:M,borderRadius:E,title:y,role:b}),u]})})});gc.displayName="Progress";const mL=$e(function(t,n){const{children:s,placeholder:i,className:o,...l}=t;return r.jsxs(Re.select,{...l,ref:n,className:Ze("chakra-select",o),children:[i&&r.jsx("option",{value:"",children:i}),s]})});mL.displayName="SelectField";const Qe=$e((e,t)=>{const n=_r("Select",e),{rootProps:s,placeholder:i,icon:o,color:l,height:u,h:d,minH:h,minHeight:p,iconColor:m,iconSize:x,...y}=bn(e),[b,C]=A8(y,TV),S=X2(C),E={width:"100%",height:"fit-content",position:"relative",color:l},k={paddingEnd:"2rem",...n.field,_focus:{zIndex:"unset",...n.field?._focus}};return r.jsxs(Re.div,{className:"chakra-select__wrapper",__css:E,...b,...s,children:[r.jsx(mL,{ref:t,height:d??u,minH:h??p,placeholder:i,...S,__css:k,children:e.children}),r.jsx(gL,{"data-disabled":Qt(S.disabled),...(m||l)&&{color:m||l},__css:n.icon,...x&&{fontSize:x},children:o})]})});Qe.displayName="Select";const Jie=e=>r.jsx("svg",{viewBox:"0 0 24 24",...e,children:r.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),Qie=Re("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),gL=e=>{const{children:t=r.jsx(Jie,{}),...n}=e,s=j.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return r.jsx(Qie,{...n,className:"chakra-select__icon-wrapper",children:j.isValidElement(t)?s:null})};gL.displayName="SelectIcon";const Pm=Re("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});Pm.displayName="Spacer";const xL=e=>r.jsx(Re.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});xL.displayName="StackItem";function Zie(e){const{spacing:t,direction:n}=e,s={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":eb(n,i=>s[i])}}const pa=$e((e,t)=>{const{isInline:n,direction:s,align:i,justify:o,spacing:l="0.5rem",wrap:u,children:d,divider:h,className:p,shouldWrapChildren:m,...x}=e,y=n?"row":s??"column",b=j.useMemo(()=>Zie({spacing:l,direction:y}),[l,y]),C=!!h,S=!m&&!C,E=j.useMemo(()=>{const A=od(d);return S?A:A.map((T,M)=>{const D=typeof T.key<"u"?T.key:M,$=M+1===A.length,te=m?r.jsx(xL,{children:T},D):T;if(!C)return te;const re=j.cloneElement(h,{__css:b}),U=$?null:re;return r.jsxs(j.Fragment,{children:[te,U]},D)})},[h,b,C,S,m,d]),k=Ze("chakra-stack",p);return r.jsx(Re.div,{ref:t,display:"flex",alignItems:i,justifyContent:o,flexDirection:y,flexWrap:u,gap:C?void 0:l,className:k,...x,children:E})});pa.displayName="Stack";const ne=$e((e,t)=>r.jsx(pa,{align:"center",...e,direction:"row",ref:t}));ne.displayName="HStack";const Q=$e((e,t)=>r.jsx(pa,{align:"center",...e,direction:"column",ref:t}));Q.displayName="VStack";const[eoe,Eb]=un({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),dt=$e(function(t,n){const s=_r("Stat",t),i={position:"relative",flex:"1 1 0%",...s.container},{className:o,children:l,...u}=bn(t);return r.jsx(eoe,{value:s,children:r.jsx(Re.div,{ref:n,...u,className:Ze("chakra-stat",o),__css:i,children:r.jsx("dl",{children:l})})})});dt.displayName="Stat";const yL=e=>r.jsx(Wn,{color:"red.400",...e,children:r.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})});yL.displayName="StatDownArrow";function bL(e){return r.jsx(Wn,{color:"green.400",...e,children:r.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})})}bL.displayName="StatUpArrow";function Ch(e){const{type:t,"aria-label":n,...s}=e,i=Eb(),o=t==="increase"?bL:yL,u=n||(t==="increase"?"increased by":"decreased by");return r.jsxs(r.Fragment,{children:[r.jsx(Re.span,{srOnly:!0,children:u}),r.jsx(o,{"aria-hidden":!0,...s,__css:i.icon})]})}Ch.displayName="StatArrow";const wE=$e(function(t,n){return r.jsx(Re.div,{...t,ref:n,role:"group",className:Ze("chakra-stat__group",t.className),__css:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"flex-start"}})});wE.displayName="StatGroup";const Si=$e(function(t,n){const s=Eb();return r.jsx(Re.dd,{ref:n,...t,className:Ze("chakra-stat__help-text",t.className),__css:s.helpText})});Si.displayName="StatHelpText";const ht=$e(function(t,n){const s=Eb();return r.jsx(Re.dt,{ref:n,...t,className:Ze("chakra-stat__label",t.className),__css:s.label})});ht.displayName="StatLabel";const ft=$e(function(t,n){const s=Eb();return r.jsx(Re.dd,{ref:n,...t,className:Ze("chakra-stat__number",t.className),__css:{...s.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})});ft.displayName="StatNumber";const sr=$e(function(t,n){const s=_r("Switch",t),{spacing:i="0.5rem",children:o,...l}=bn(t),{getIndicatorProps:u,getInputProps:d,getCheckboxProps:h,getRootProps:p,getLabelProps:m}=Y3(l),x=j.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...s.container}),[s.container]),y=j.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...s.track}),[s.track]),b=j.useMemo(()=>({userSelect:"none",marginStart:i,...s.label}),[i,s.label]);return r.jsxs(Re.label,{...p(),className:Ze("chakra-switch",t.className),__css:x,children:[r.jsx("input",{className:"chakra-switch__input",...d({},n)}),r.jsx(Re.span,{...h(),className:"chakra-switch__track",__css:y,children:r.jsx(Re.span,{__css:s.thumb,className:"chakra-switch__thumb",...u()})}),o&&r.jsx(Re.span,{className:"chakra-switch__label",...m(),__css:b,children:o})]})});sr.displayName="Switch";const[toe,fg]=un({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),Tr=$e((e,t)=>{const n=_r("Table",e),{className:s,layout:i,...o}=bn(e);return r.jsx(toe,{value:n,children:r.jsx(Re.table,{ref:t,__css:{tableLayout:i,...n.table},className:Ze("chakra-table",s),...o})})});Tr.displayName="Table";const zr=$e((e,t)=>{const n=fg();return r.jsx(Re.tbody,{...e,ref:t,__css:n.tbody})}),Pe=$e(({isNumeric:e,...t},n)=>{const s=fg();return r.jsx(Re.td,{...t,ref:n,__css:s.td,"data-is-numeric":e})}),Ie=$e(({isNumeric:e,...t},n)=>{const s=fg();return r.jsx(Re.th,{...t,ref:n,__css:s.th,"data-is-numeric":e})}),Ir=$e((e,t)=>{const n=fg();return r.jsx(Re.thead,{...e,ref:t,__css:n.thead})}),$t=$e((e,t)=>{const n=fg();return r.jsx(Re.tr,{...e,ref:t,__css:n.tr})}),[noe,roe,soe,ioe]=xb();function ooe(e){const{defaultIndex:t,onChange:n,index:s,isManual:i,isLazy:o,lazyBehavior:l="unmount",orientation:u="horizontal",direction:d="ltr",...h}=e,[p,m]=j.useState(t??0),[x,y]=tb({defaultValue:t??0,value:s,onChange:n});j.useEffect(()=>{s!=null&&m(s)},[s]);const b=soe(),C=j.useId();return{id:`tabs-${e.id??C}`,selectedIndex:x,focusedIndex:p,setSelectedIndex:y,setFocusedIndex:m,isManual:i,isLazy:o,lazyBehavior:l,orientation:u,descendants:b,direction:d,htmlProps:h}}const[aoe,kb]=un({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function loe(e){const{focusedIndex:t,orientation:n,direction:s}=kb(),i=roe(),o=j.useCallback(l=>{const u=()=>{const k=i.nextEnabled(t);k&&k.node?.focus()},d=()=>{const k=i.prevEnabled(t);k&&k.node?.focus()},h=()=>{const k=i.firstEnabled();k&&k.node?.focus()},p=()=>{const k=i.lastEnabled();k&&k.node?.focus()},m=n==="horizontal",x=n==="vertical",y=l.key,b=s==="ltr"?"ArrowLeft":"ArrowRight",C=s==="ltr"?"ArrowRight":"ArrowLeft",E={[b]:()=>m&&d(),[C]:()=>m&&u(),ArrowDown:()=>x&&u(),ArrowUp:()=>x&&d(),Home:h,End:p}[y];E&&(l.preventDefault(),E(l))},[i,t,n,s]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:wt(e.onKeyDown,o)}}function coe(e){const{isDisabled:t=!1,isFocusable:n=!1,...s}=e,{setSelectedIndex:i,isManual:o,id:l,setFocusedIndex:u,selectedIndex:d}=kb(),{index:h,register:p}=ioe({disabled:t&&!n}),m=h===d,x=()=>{i(h)},y=()=>{u(h),!o&&!(t&&n)&&i(h)};return{...V4({...s,ref:er(p,e.ref),isDisabled:t,isFocusable:n,onClick:wt(e.onClick,x)}),id:vL(l,h),role:"tab",tabIndex:m?0:-1,type:"button","aria-selected":m,"aria-controls":jL(l,h),onFocus:t?void 0:wt(e.onFocus,y)}}const[uoe,doe]=un({});function hoe(e){const t=kb(),{id:n,selectedIndex:s}=t,o=od(e.children).map((l,u)=>j.createElement(uoe,{key:l.key??u,value:{isSelected:u===s,id:jL(n,u),tabId:vL(n,u),selectedIndex:s}},l));return{...e,children:o}}function foe(e){const{children:t,...n}=e,{isLazy:s,lazyBehavior:i}=kb(),{isSelected:o,id:l,tabId:u}=doe(),d=j.useRef(!1);o&&(d.current=!0);const h=Vw({wasSelected:d.current,isSelected:o,enabled:s,mode:i});return{tabIndex:0,...n,children:h?t:null,role:"tabpanel","aria-labelledby":u,hidden:!o,id:l}}function vL(e,t){return`${e}--tab-${t}`}function jL(e,t){return`${e}--tabpanel-${t}`}const[poe,Ab]=un({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),gl=$e(function(t,n){const s=_r("Tabs",t),{children:i,className:o,...l}=bn(t),{htmlProps:u,descendants:d,...h}=ooe(l),p=j.useMemo(()=>h,[h]),{isFitted:m,...x}=u,y={position:"relative",...s.root};return r.jsx(noe,{value:d,children:r.jsx(aoe,{value:p,children:r.jsx(poe,{value:s,children:r.jsx(Re.div,{className:Ze("chakra-tabs",o),ref:n,...x,__css:y,children:i})})})})});gl.displayName="Tabs";const an=$e(function(t,n){const s=Ab(),i=coe({...t,ref:n}),o={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...s.tab};return r.jsx(Re.button,{...i,className:Ze("chakra-tabs__tab",t.className),__css:o})});an.displayName="Tab";const xl=$e(function(t,n){const s=loe({...t,ref:n}),i=Ab(),o={display:"flex",...i.tablist};return r.jsx(Re.div,{...s,className:Ze("chakra-tabs__tablist",t.className),__css:o})});xl.displayName="TabList";const ln=$e(function(t,n){const s=foe({...t,ref:n}),i=Ab();return r.jsx(Re.div,{outline:"0",...s,className:Ze("chakra-tabs__tab-panel",t.className),__css:i.tabpanel})});ln.displayName="TabPanel";const yl=$e(function(t,n){const s=hoe(t),i=Ab();return r.jsx(Re.div,{...s,width:"100%",ref:n,className:Ze("chakra-tabs__tab-panels",t.className),__css:i.tabpanels})});yl.displayName="TabPanels";const[moe,SL]=un({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),Xu=$e((e,t)=>{const n=_r("Tag",e),s=bn(e),i={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...n.container};return r.jsx(moe,{value:n,children:r.jsx(Re.span,{ref:t,...s,__css:i})})});Xu.displayName="Tag";const Ju=$e((e,t)=>{const n=SL();return r.jsx(Re.span,{ref:t,noOfLines:1,...e,__css:n.label})});Ju.displayName="TagLabel";const goe=$e((e,t)=>r.jsx(Wn,{ref:t,verticalAlign:"top",marginEnd:"0.5rem",...e}));goe.displayName="TagLeftIcon";const xoe=$e((e,t)=>r.jsx(Wn,{ref:t,verticalAlign:"top",marginStart:"0.5rem",...e}));xoe.displayName="TagRightIcon";const CL=e=>r.jsx(Wn,{verticalAlign:"inherit",viewBox:"0 0 512 512",...e,children:r.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});CL.displayName="TagCloseIcon";const EE=$e((e,t)=>{const{isDisabled:n,children:s,...i}=e,l={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...SL().closeButton};return r.jsx(Re.button,{ref:t,"aria-label":"close",...i,type:"button",disabled:n,__css:l,children:s||r.jsx(CL,{})})});EE.displayName="TagCloseButton";const yoe=["h","minH","height","minHeight"],Gt=$e((e,t)=>{const n=Ks("Textarea",e),{className:s,rows:i,...o}=bn(e),l=X2(o),u=i?Zm(n,yoe):n;return r.jsx(Re.textarea,{ref:t,rows:i,...l,className:Ze("chakra-textarea",s),__css:u})});Gt.displayName="Textarea";function boe(e,t){const n=e??"bottom";return{"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[n]?.[t]??n}function voe(e,t){const n=i=>({...t,...i,position:boe(i?.position??t?.position,e)}),s=i=>{const o=n(i),l=P3(o);return Qo.notify(l,o)};return s.update=(i,o)=>{Qo.update(i,n(o))},s.promise=(i,o)=>{const l=s({...o.loading,status:"loading",duration:null});i.then(u=>s.update(l,{status:"success",duration:5e3,...ii(o.success,u)})).catch(u=>s.update(l,{status:"error",duration:5e3,...ii(o.error,u)}))},s.closeAll=Qo.closeAll,s.close=Qo.close,s.isActive=Qo.isActive,s}function mn(e){const{theme:t}=M3(),n=$Z();return j.useMemo(()=>voe(t.direction,{...n,...e}),[e,t.direction,n])}const joe={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},$C=e=>e.current?.ownerDocument||document,D0=e=>e.current?.ownerDocument?.defaultView||window;function Soe(e={}){const{openDelay:t=0,closeDelay:n=0,closeOnClick:s=!0,closeOnMouseDown:i,closeOnScroll:o,closeOnPointerDown:l=i,closeOnEsc:u=!0,onOpen:d,onClose:h,placement:p,id:m,isOpen:x,defaultIsOpen:y,arrowSize:b=10,arrowShadowColor:C,arrowPadding:S,modifiers:E,isDisabled:k,gutter:A,offset:T,direction:M,...D}=e,{isOpen:$,onOpen:W,onClose:te}=jt({isOpen:x,defaultIsOpen:y,onOpen:d,onClose:h}),{referenceRef:re,getPopperProps:U,getArrowInnerProps:oe,getArrowProps:xe}=jE({enabled:$,placement:p,arrowPadding:S,modifiers:E,gutter:A,offset:T,direction:M}),ie=j.useId(),F=`tooltip-${m??ie}`,_=j.useRef(null),B=j.useRef(void 0),fe=j.useCallback(()=>{B.current&&(clearTimeout(B.current),B.current=void 0)},[]),I=j.useRef(void 0),ee=j.useCallback(()=>{I.current&&(clearTimeout(I.current),I.current=void 0)},[]),ae=j.useCallback(()=>{ee(),te()},[te,ee]),P=Coe(_,ae),R=j.useCallback(()=>{if(!k&&!B.current){$&&P();const He=D0(_);B.current=He.setTimeout(W,t)}},[P,k,$,W,t]),N=j.useCallback(()=>{fe();const He=D0(_);I.current=He.setTimeout(ae,n)},[n,ae,fe]),Z=j.useCallback(()=>{$&&s&&N()},[s,N,$]),ke=j.useCallback(()=>{$&&l&&N()},[l,N,$]),Te=j.useCallback(He=>{$&&He.key==="Escape"&&N()},[$,N]);Tu(()=>$C(_),"keydown",u?Te:void 0),Tu(()=>{if(!o)return null;const He=_.current;if(!He)return null;const pt=cz(He);return pt.localName==="body"?D0(_):pt},"scroll",()=>{$&&o&&ae()},{passive:!0,capture:!0}),j.useEffect(()=>{k&&(fe(),$&&te())},[k,$,te,fe]),j.useEffect(()=>()=>{fe(),ee()},[fe,ee]),Tu(()=>_.current,"pointerleave",N);const je=j.useCallback((He={},pt=null)=>({...He,ref:er(_,pt,re),onPointerEnter:wt(He.onPointerEnter,Tt=>{Tt.pointerType!=="touch"&&R()}),onClick:wt(He.onClick,Z),onPointerDown:wt(He.onPointerDown,ke),onFocus:wt(He.onFocus,R),onBlur:wt(He.onBlur,N),"aria-describedby":$?F:void 0}),[R,N,ke,$,F,Z,re]),Ke=j.useCallback((He={},pt=null)=>U({...He,style:{...He.style,[qr.arrowSize.var]:b?`${b}px`:void 0,[qr.arrowShadowColor.var]:C}},pt),[U,b,C]),Xe=j.useCallback((He={},pt=null)=>{const De={...He.style,position:"relative",transformOrigin:qr.transformOrigin.varRef};return{ref:pt,...D,...He,id:F,role:"tooltip",style:De}},[D,F]);return{isOpen:$,show:R,hide:N,getTriggerProps:je,getTooltipProps:Xe,getTooltipPositionerProps:Ke,getArrowProps:xe,getArrowInnerProps:oe}}const V1="chakra-ui:close-tooltip";function Coe(e,t){return j.useEffect(()=>{const n=$C(e);return n.addEventListener(V1,t),()=>n.removeEventListener(V1,t)},[t,e]),()=>{const n=$C(e),s=D0(e);n.dispatchEvent(new s.CustomEvent(V1))}}const woe=Re(Ro.div),Bn=$e((e,t)=>{const n=Ks("Tooltip",e),s=bn(e),i=zc(),{children:o,label:l,shouldWrapChildren:u,"aria-label":d,hasArrow:h,bg:p,portalProps:m,background:x,backgroundColor:y,bgColor:b,motionProps:C,animatePresenceProps:S,...E}=s,k=x??y??p??b;if(k){n.bg=k;const re=_V(i,"colors",k);n[qr.arrowBg.var]=re}const A=Soe({...E,direction:i.direction}),T=!j.isValidElement(o)||u;let M;if(T)M=r.jsx(Re.span,{display:"inline-block",tabIndex:0,...A.getTriggerProps(),children:o});else{const re=j.Children.only(o);M=j.cloneElement(re,A.getTriggerProps(re.props,cL(re)))}const D=!!d,$=A.getTooltipProps({},t),W=D?Zm($,["role","id"]):$,te=az($,["role","id"]);return l?r.jsxs(r.Fragment,{children:[M,r.jsx(Nc,{...S,children:A.isOpen&&r.jsx(cf,{...m,children:r.jsx(Re.div,{...A.getTooltipPositionerProps(),__css:{zIndex:n.zIndex,pointerEvents:"none"},children:r.jsxs(woe,{variants:joe,initial:"exit",animate:"enter",exit:"exit",...C,...W,__css:n,children:[l,D&&r.jsx(Re.span,{srOnly:!0,...te,children:d}),h&&r.jsx(Re.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:r.jsx(Re.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:n.bg}})})]})})})})]}):r.jsx(r.Fragment,{children:o})});Bn.displayName="Tooltip";const we=$e(function(t,n){const s=Ks("Heading",t),{className:i,...o}=bn(t);return r.jsx(Re.h2,{ref:n,className:Ze("chakra-heading",t.className),...o,__css:s})});we.displayName="Heading";const O=$e(function(t,n){const s=Ks("Text",t),{className:i,align:o,decoration:l,casing:u,...d}=bn(t),h=Qm({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return r.jsx(Re.p,{ref:n,className:Ze("chakra-text",t.className),...h,...d,__css:s})});O.displayName="Text";const wL=Re("span",{baseStyle:Q2});wL.displayName="VisuallyHidden";const Eoe=Re("input",{baseStyle:Q2});Eoe.displayName="VisuallyHiddenInput";const EL=$e(function(t,n){const{spacing:s="0.5rem",spacingX:i,spacingY:o,children:l,justify:u,direction:d,align:h,className:p,shouldWrapChildren:m,...x}=t,y=j.useMemo(()=>m?j.Children.map(l,(b,C)=>r.jsx(kL,{children:b},C)):l,[l,m]);return r.jsx(Re.div,{ref:n,className:Ze("chakra-wrap",p),...x,children:r.jsx(Re.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:u,alignItems:h,flexDirection:d,listStyleType:"none",gap:s,columnGap:i,rowGap:o,padding:"0"},children:y})})});EL.displayName="Wrap";const kL=$e(function(t,n){const{className:s,...i}=t;return r.jsx(Re.li,{ref:n,__css:{display:"flex",alignItems:"flex-start"},className:Ze("chakra-wrap__listitem",s),...i})});kL.displayName="WrapItem";const koe=Yee({fonts:{heading:"Montserrat, system-ui, sans-serif",body:"Montserrat, system-ui, sans-serif"},styles:{global:{body:{fontFamily:"Montserrat, system-ui, sans-serif",bg:"gray.50",color:"gray.800"},"*":{borderColor:"gray.200"}}},colors:{rbe:{50:"#fef2f4",100:"#fde2e7",200:"#facbd4",300:"#f5a3b2",400:"#ed7189",500:"#e14964",600:"#be003c",700:"#9f1d3d",800:"#881b38",900:"#751a35"},brand:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e"},success:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d"},warning:{50:"#fffbeb",100:"#fef3c7",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12"},gray:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"}},semanticTokens:{colors:{primary:{default:"rbe.600",_dark:"rbe.400"},accent:{default:"rbe.500",_dark:"rbe.300"},background:{default:"gray.50",_dark:"gray.900"},surface:{default:"white",_dark:"gray.800"},muted:{default:"gray.100",_dark:"gray.700"}}},components:{Card:{baseStyle:{container:{fontFamily:"Montserrat, system-ui, sans-serif",borderRadius:"xl",boxShadow:"sm",border:"1px solid",borderColor:"gray.200",transition:"all 0.2s ease-out",_hover:{boxShadow:"md",transform:"translateY(-2px)"}}},variants:{modern:{container:{bg:"white",borderRadius:"2xl",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"none",_hover:{boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",transform:"translateY(-4px)"}}},gradient:{container:{bgGradient:"linear(to-br, rbe.500, rbe.700)",color:"white",border:"none",_hover:{bgGradient:"linear(to-br, rbe.400, rbe.600)"}}}}},Heading:{baseStyle:{fontFamily:"Montserrat, system-ui, sans-serif",fontWeight:"700",letterSpacing:"-0.025em",lineHeight:"shorter"},variants:{page:{fontSize:{base:"2xl",md:"4xl"},fontWeight:"800",bgGradient:"linear(to-r, rbe.600, rbe.800)",bgClip:"text",textAlign:"center",mb:2},section:{fontSize:{base:"xl",md:"2xl"},fontWeight:"700",color:"gray.800",mb:4},card:{fontSize:{base:"lg",md:"xl"},fontWeight:"600",color:"gray.700"}}},Text:{baseStyle:{fontFamily:"Montserrat, system-ui, sans-serif",lineHeight:"relaxed"},variants:{subtitle:{fontSize:{base:"md",md:"lg"},color:"gray.600",textAlign:"center",maxW:"2xl",mx:"auto"},description:{fontSize:"sm",color:"gray.600",lineHeight:"relaxed"}}},Button:{baseStyle:{fontFamily:"Montserrat, system-ui, sans-serif",fontWeight:"600",borderRadius:"lg",transition:"all 0.2s ease-out",_focus:{boxShadow:"0 0 0 3px rgba(190, 0, 60, 0.1)"}},variants:{primary:{bg:"rbe.600",color:"white",_hover:{bg:"rbe.700",transform:"translateY(-1px)",boxShadow:"lg"},_active:{bg:"rbe.800"}},secondary:{bg:"white",color:"rbe.600",borderWidth:"2px",borderColor:"rbe.600",_hover:{bg:"rbe.50",transform:"translateY(-1px)"}},modern:{bg:"white",color:"gray.700",borderWidth:"1px",borderColor:"gray.300",boxShadow:"sm",_hover:{bg:"gray.50",borderColor:"gray.400",transform:"translateY(-1px)",boxShadow:"md"}}},sizes:{modern:{h:"12",px:"6",fontSize:"sm",fontWeight:"600"}}},Container:{baseStyle:{maxW:"container.xl",px:{base:4,md:8}}},Badge:{baseStyle:{fontFamily:"Montserrat, system-ui, sans-serif",fontWeight:"600",fontSize:"xs",textTransform:"none",borderRadius:"md",px:2,py:1}},Modal:{baseStyle:{dialog:{borderRadius:"2xl",boxShadow:"2xl"},header:{fontFamily:"Montserrat, system-ui, sans-serif",fontWeight:"700",fontSize:"xl",color:"gray.800"}}}},breakpoints:{base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},shadows:{modern:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)","modern-lg":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",rbe:"0 4px 14px 0 rgba(190, 0, 60, 0.15)"},radii:{modern:"12px","modern-lg":"16px","modern-xl":"20px"}}),Aoe=["w.belaidi","admin"];function Toe(e){return e?Aoe.includes(String(e).toLowerCase()):!1}const Moe=[{code:"ADMIN",label:"Administrateur"},{code:"VOLUNTEER",label:"Bnvole"},{code:"DRIVER",label:"Conducteur"},{code:"MEMBER",label:"Membre"},{code:"PRESIDENT",label:"Prsident (hritage)"},{code:"VICE_PRESIDENT",label:"Vice-prsident (hritage)"},{code:"TRESORIER",label:"Trsorier (hritage)"},{code:"SECRETAIRE_GENERAL",label:"Secrtaire gnral (hritage)"}];function Roe(e){if(!e)return"MEMBER";let t=String(e).trim().toUpperCase().replace(/[-\s]+/g,"_");const n={ADMINISTRATEUR:"ADMIN",ADMINISTRATEURS:"ADMIN",BENEVOLE:"VOLUNTEER",BNVOLE:"VOLUNTEER",BENEVOLES:"VOLUNTEER",BNVOLES:"VOLUNTEER",CONDUCTEUR:"DRIVER",CONDUCTEURS:"DRIVER",MEMBRE:"MEMBER",MEMBRES:"MEMBER"};return n[t]&&(t=n[t]),new Set(Moe.map(i=>i.code)).has(t)?t:"MEMBER"}const Doe=ld({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),AL=ld({displayName:"ViewIcon",path:r.jsxs("g",{fill:"currentColor",children:[r.jsx("path",{d:"M23.432,10.524C20.787,7.614,16.4,4.538,12,4.6,7.6,4.537,3.213,7.615.568,10.524a2.211,2.211,0,0,0,0,2.948C3.182,16.351,7.507,19.4,11.839,19.4h.308c4.347,0,8.671-3.049,11.288-5.929A2.21,2.21,0,0,0,23.432,10.524ZM7.4,12A4.6,4.6,0,1,1,12,16.6,4.6,4.6,0,0,1,7.4,12Z"}),r.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Ooe=ld({displayName:"ViewOffIcon",path:r.jsxs("g",{fill:"currentColor",children:[r.jsx("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),r.jsx("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"})]})}),Noe=ld({displayName:"DeleteIcon",path:r.jsx("g",{fill:"currentColor",children:r.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})}),Poe=ld({displayName:"EditIcon",path:r.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[r.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),r.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),zoe=ld({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"}),Ioe=ld({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"});function Loe({isOpen:e,onPasswordChanged:t}){const[n,s]=j.useState(""),[i,o]=j.useState(""),[l,u]=j.useState(!1),[d,h]=j.useState(!1),[p,m]=j.useState(""),y=(C=>{let S=0;return C.length>=8&&(S+=25),/[A-Z]/.test(C)&&(S+=25),/[a-z]/.test(C)&&(S+=25),/[0-9]/.test(C)&&(S+=25),S})(n),b=async C=>{if(C.preventDefault(),m(""),n.length<6){m("Le mot de passe doit contenir au moins 6 caractres");return}if(n!==i){m("Les mots de passe ne correspondent pas");return}h(!0);try{const S=await fetch("https://attractive-kindness-rbe-serveurs.up.railway.app/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({newPassword:n})}),E=await S.json();if(!S.ok)throw new Error(E.error||"Erreur de changement de mot de passe");t()}catch(S){m(S.message)}finally{h(!1)}};return r.jsxs(mt,{isOpen:e,closeOnOverlayClick:!1,closeOnEsc:!1,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Changement de mot de passe obligatoire"}),r.jsxs(gt,{pb:6,children:[r.jsxs(Ft,{status:"info",mb:4,children:[r.jsx(Vt,{}),"Vous devez changer votre mot de passe temporaire avant de continuer."]}),r.jsx("form",{onSubmit:b,children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nouveau mot de passe"}),r.jsxs(Gu,{children:[r.jsx(pe,{type:l?"text":"password",value:n,onChange:C=>s(C.target.value),placeholder:"Au moins 6 caractres"}),r.jsx(hE,{children:r.jsx(et,{variant:"ghost",size:"sm",icon:l?r.jsx(Ooe,{}):r.jsx(AL,{}),onClick:()=>u(!l)})})]}),n&&r.jsxs(Q,{align:"start",spacing:1,mt:2,children:[r.jsx(O,{fontSize:"xs",color:"gray.600",children:"Force du mot de passe:"}),r.jsx(gc,{value:y,colorScheme:y<50?"red":y<75?"yellow":"green",size:"sm",width:"100%"})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Confirmer le mot de passe"}),r.jsx(pe,{type:l?"text":"password",value:i,onChange:C=>o(C.target.value),placeholder:"Retapez le nouveau mot de passe"})]}),p&&r.jsx(O,{color:"red.500",fontSize:"sm",children:p}),r.jsx(Y,{type:"submit",colorScheme:"blue",width:"100%",isLoading:d,isDisabled:!n||!i,children:"Changer le mot de passe"})]})})]})]})]})}const TL=j.createContext(null);function _oe({children:e}){const[t,n]=j.useState(()=>localStorage.getItem("token")||""),[s,i]=j.useState(()=>{const ae=localStorage.getItem("user");return ae?JSON.parse(ae):null}),[o,l]=j.useState(!1),[u,d]=j.useState(!1),h=!!t,[p,m]=j.useState(null),[x,y]=j.useState(!1),[b,C]=j.useState(null),[S,E]=j.useState(null),k=j.useRef(0),[A,T]=j.useState(null),[M,D]=j.useState(!1);j.useEffect(()=>{t?localStorage.setItem("token",t):localStorage.removeItem("token")},[t]),j.useEffect(()=>{s?localStorage.setItem("user",JSON.stringify(s)):localStorage.removeItem("user")},[s]);const $=()=>{n(""),i(null),m(null),C(null),E(null),localStorage.removeItem("token"),localStorage.removeItem("user")},W=async()=>{if(!t)return i(null),d(!0),!1;const ae="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,""),P=String(t).startsWith("local-dev-token-");if(!ae||P)return d(!0),!0;try{const R=await fetch(`${ae}/api/me`,{headers:{Authorization:`Bearer ${t}`}});if(!R.ok)throw new Error(`HTTP ${R.status}`);const N=await R.json();if(N?.disabled===!0||N?.active===!1||N?.status==="DISABLED")return $(),d(!0),!1;const ke=(()=>{const Te=N?.username||N?.matricule||N?.login||(N?.email?String(N.email).split("@")[0]:""),je=N?.prenom||N?.firstName||N?.given_name||"",Ke=N?.nom||N?.lastName||N?.family_name||"";return{...N,username:Te,prenom:je,nom:Ke}})();return i(ke),l(!!N.mustChangePassword),d(!0),!0}catch{return $(),d(!0),!1}},te=()=>{const ae="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,""),P=[];return ae&&P.push(ae),P.push(""),P},re=async(ae=!1)=>{if(!t)return m(null),C("no-token"),null;const P=Date.now();if(!ae&&P-k.current<500)return p;k.current=P,y(!0),C(null);try{const R=te();let N=!1,Z=null;for(const ke of R)try{const Te=await fetch(`${ke}/api/members/me`,{headers:{Authorization:`Bearer ${t}`}});if(Z=Te.status,Te.ok){const je=await Te.json();m(je),E(ke||null),N=!0;break}}catch{Z="network";continue}return N?p:(m(null),C(Z),null)}finally{y(!1)}},U=async()=>{if(!s?.id||!t)return T(null),null;D(!0);try{const ae=te();for(const P of ae)try{const R=await fetch(`${P}/api/member-permissions/${s.id}`,{headers:{Authorization:`Bearer ${t}`}});if(R.ok){const N=await R.json(),Z=N.customPermissions&&Object.keys(N.customPermissions).length>0?N.customPermissions:null;return T(Z),Z}}catch{continue}return T(null),null}finally{D(!1)}};j.useEffect(()=>{W()},[]),j.useEffect(()=>{t?W().then(ae=>{ae&&(re(),U())}):d(!0)},[t]),j.useEffect(()=>{const ae=()=>W();window.addEventListener("focus",ae);const P=setInterval(()=>W(),300*1e3);return()=>{window.removeEventListener("focus",ae),clearInterval(P)}},[t]);const oe=s?.username||"",xe=s?.prenom||"",ie=s?.nom||"",H=(s?.roles||[]).map(ae=>Roe(ae)),F=H.includes("ADMIN")||H.includes("PRESIDENT")||H.includes("VICE_PRESIDENT")||H.includes("TRESORIER")||H.includes("SECRETAIRE_GENERAL"),_=H.includes("VOLUNTEER"),B=H.includes("DRIVER"),fe=H.includes("MEMBER"),I=s?.username||"",ee=j.useMemo(()=>({token:t,setToken:n,user:s,setUser:i,isAuthenticated:h,username:oe,prenom:xe,nom:ie,roles:H,isAdmin:F,isVolunteer:_,isDriver:B,isMember:fe,matricule:I,logout:$,sessionChecked:u,ensureSession:W,member:p,memberLoading:x,memberError:b,memberApiBase:S,refreshMember:re,customPermissions:A,permissionsLoading:M,refreshPermissions:U}),[t,s,h,oe,xe,ie,H,F,_,B,fe,I,u,p,x,b,S,A,M]);return r.jsxs(TL.Provider,{value:ee,children:[e,r.jsx(Loe,{isOpen:o,onPasswordChanged:()=>{l(!1),t&&W()}})]})}function Cs(){return j.useContext(TL)}const qi="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,""),bp=(e={})=>({"Content-Type":"application/json",...e.headers}),vp=(e,t={})=>({"Content-Type":"application/json",Authorization:`Bearer ${e}`,...t.headers}),Uo=async e=>{const t=e.headers.get("content-type");if(t&&t.includes("application/json"))try{return await e.json()}catch(n){throw console.error(" Erreur parsing JSON:",n),new Error("Rponse JSON invalide du serveur")}else{const n=await e.text();throw console.error(" Rponse non-JSON reue:",n.substring(0,200)+"..."),n.includes("<!DOCTYPE")?new Error("Le serveur a renvoy une page HTML au lieu de JSON. Vrifiez l'URL de l'API."):new Error(`Rponse inattendue du serveur (${e.status}): ${n.substring(0,100)}`)}},ut={baseURL:qi,get:async(e,t={})=>{const n=localStorage.getItem("token"),s=n?vp(n,t):bp(t);console.log(` GET ${qi}${e}`);try{const i=await fetch(`${qi}${e}`,{method:"GET",headers:s,...t});if(console.log(` Response status: ${i.status}`),!i.ok){if(i.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const o=await Uo(i),l=o?.error||o?.message||`HTTP ${i.status}`;throw new Error(l)}return await Uo(i)}catch(i){throw console.error(` Erreur GET ${e}:`,i.message),i}},post:async(e,t,n={})=>{const s=localStorage.getItem("token"),i=s?vp(s,n):bp(n);console.log(` POST ${qi}${e}`,t);try{const o=await fetch(`${qi}${e}`,{method:"POST",headers:i,body:JSON.stringify(t),...n});if(console.log(` Response status: ${o.status}`),!o.ok){if(o.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const l=await Uo(o),u=l?.error||l?.message||`HTTP ${o.status}`;throw new Error(u)}return await Uo(o)}catch(o){throw console.error(` Erreur POST ${e}:`,o.message),o}},put:async(e,t,n={})=>{const s=localStorage.getItem("token"),i=s?vp(s,n):bp(n);console.log(` PUT ${qi}${e}`,t);try{const o=await fetch(`${qi}${e}`,{method:"PUT",headers:i,body:JSON.stringify(t),...n});if(console.log(` Response status: ${o.status}`),!o.ok){if(o.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const l=await Uo(o),u=l?.error||l?.message||`HTTP ${o.status}`;throw new Error(u)}return await Uo(o)}catch(o){throw console.error(` Erreur PUT ${e}:`,o.message),o}},patch:async(e,t,n={})=>{const s=localStorage.getItem("token"),i=s?vp(s,n):bp(n);console.log(` PATCH ${qi}${e}`,t);try{const o=await fetch(`${qi}${e}`,{method:"PATCH",headers:i,body:JSON.stringify(t),...n});if(console.log(` Response status: ${o.status}`),!o.ok){if(o.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const l=await Uo(o),u=l?.error||l?.message||`HTTP ${o.status}`;throw new Error(u)}return await Uo(o)}catch(o){throw console.error(` Erreur PATCH ${e}:`,o.message),o}},delete:async(e,t={})=>{const n=localStorage.getItem("token"),s=n?vp(n,t):bp(t);console.log(` DELETE ${qi}${e}`);try{const i=await fetch(`${qi}${e}`,{method:"DELETE",headers:s,...t});if(console.log(` Response status: ${i.status}`),!i.ok){if(i.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const l=await Uo(i),u=l?.error||l?.message||`HTTP ${i.status}`;throw new Error(u)}return i.headers.get("content-length")==="0"||i.status===204?{success:!0}:await Uo(i)}catch(i){throw console.error(` Erreur DELETE ${e}:`,i.message),i}}},Tb={getActive:async()=>{console.log(" API: getActive flashs...");const e=await ut.get("/flashes");return console.log(" API: getActive result:",e),e},getAll:async()=>{console.log(" API: getAll flashs...");const e=await ut.get("/flashes/all");return console.log(" API: getAll result:",e),e},create:async e=>{console.log(" API: create flash:",e);const t=await ut.post("/flashes",e);return console.log(" API: create result:",t),t},update:async(e,t)=>{console.log(" API: update flash:",e,t);const n=await ut.put(`/flashes/${e}`,t);return console.log(" API: update result:",n),n},delete:async e=>{console.log(" API: delete flash:",e);const t=await ut.delete(`/flashes/${e}`);return console.log(" API: delete result:",t),t}};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$oe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),WO=e=>{const t=$oe(e);return t.charAt(0).toUpperCase()+t.slice(1)},ML=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),Foe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Voe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:l,...u},d)=>j.createElement("svg",{ref:d,...Voe,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:ML("lucide",i),...!o&&!Foe(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,p])=>j.createElement(h,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=(e,t)=>{const n=j.forwardRef(({className:s,...i},o)=>j.createElement(Hoe,{ref:o,iconNode:t,className:ML(`lucide-${Boe(WO(e))}`,`lucide-${e}`,s),...i}));return n.displayName=WO(e),n};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],qO=pg("bell",Uoe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qoe=pg("check",Woe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yoe=pg("settings",Goe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xoe=pg("trash-2",Koe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qoe=pg("x",Joe);function Zoe(){const[e,t]=j.useState([]),[n,s]=j.useState(0),[i,o]=j.useState(!1),[l,u]=j.useState(!1),[d,h]=j.useState(!1),[p,m]=j.useState({}),x=j.useCallback(async()=>{try{const k=localStorage.getItem("token");if(!k)return;const A=await fetch("/api/notifications/inbox?limit=20",{headers:{Authorization:`Bearer ${k}`}});if(!A.ok)throw new Error("Failed to fetch");const T=await A.json();T.success&&(t(T.messages||[]),s(T.unread||0))}catch(k){console.error(" Fetch notifications error:",k)}},[]),y=j.useCallback(async()=>{try{const k=localStorage.getItem("token");if(!k)return;const A=await fetch("/api/notifications/preferences",{headers:{Authorization:`Bearer ${k}`}});if(A.ok){const T=await A.json();m(T.preferences||{})}}catch(k){console.error(" Fetch preferences error:",k)}},[]),b=async k=>{try{const A=localStorage.getItem("token");(await fetch(`/api/notifications/mark-read/${k}`,{method:"PATCH",headers:{Authorization:`Bearer ${A}`}})).ok&&x()}catch(A){console.error(" Mark read error:",A)}},C=async k=>{try{const A=localStorage.getItem("token");(await fetch(`/api/notifications/message/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${A}`}})).ok&&x()}catch(A){console.error(" Delete error:",A)}},S=async()=>{try{const k=localStorage.getItem("token");(await fetch("/api/notifications/mark-all-read",{method:"PATCH",headers:{Authorization:`Bearer ${k}`}})).ok&&x()}catch(k){console.error(" Mark all read error:",k)}},E=async(k,A)=>{try{const T=localStorage.getItem("token");(await fetch("/api/notifications/preferences",{method:"PUT",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"},body:JSON.stringify({[k]:A})})).ok&&y()}catch(T){console.error(" Update preferences error:",T)}};return j.useEffect(()=>{x(),y();const k=setInterval(x,3e4);return()=>clearInterval(k)},[x,y]),r.jsxs("div",{className:"notification-center",children:[r.jsxs("button",{className:"bell-button",onClick:()=>{o(!i),h(!1)},title:"Notifications",children:[r.jsx(qO,{size:20}),n>0&&r.jsx("span",{className:"badge",children:n>9?"9+":n})]}),i&&r.jsxs("div",{className:"notification-popup",children:[r.jsxs("div",{className:"popup-header",children:[r.jsxs("h3",{children:["Notifications ",e.length>0&&`(${e.length})`]}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{className:"icon-button",onClick:()=>h(!d),title:"Paramtres",children:r.jsx(Yoe,{size:16})}),r.jsx("button",{className:"close-button",onClick:()=>o(!1),children:r.jsx(Qoe,{size:16})})]})]}),r.jsx("div",{className:"popup-content",children:d?r.jsxs("div",{className:"preferences-panel",children:[r.jsx("h4",{children:"Prfrences de notification"}),r.jsxs("label",{className:"pref-item",children:[r.jsx("input",{type:"checkbox",checked:p.ticketNotifications!==!1,onChange:k=>E("ticketNotifications",k.target.checked)}),r.jsx("span",{children:" Notifications de tickets"})]}),r.jsxs("label",{className:"pref-item",children:[r.jsx("input",{type:"checkbox",checked:p.eventNotifications!==!1,onChange:k=>E("eventNotifications",k.target.checked)}),r.jsx("span",{children:" Notifications d'vnements"})]}),r.jsxs("label",{className:"pref-item",children:[r.jsx("input",{type:"checkbox",checked:p.reportNotifications!==!1,onChange:k=>E("reportNotifications",k.target.checked)}),r.jsx("span",{children:" Notifications de rapports"})]}),r.jsxs("label",{className:"pref-item",children:[r.jsx("input",{type:"checkbox",checked:p.maintenanceNotifications!==!1,onChange:k=>E("maintenanceNotifications",k.target.checked)}),r.jsx("span",{children:" Alertes de maintenance"})]}),r.jsxs("label",{className:"pref-item",children:[r.jsx("input",{type:"checkbox",checked:p.systemNotifications!==!1,onChange:k=>E("systemNotifications",k.target.checked)}),r.jsx("span",{children:" Messages systme"})]})]}):r.jsx(r.Fragment,{children:e.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx(qO,{size:48}),r.jsx("p",{children:"Aucune notification"})]}):r.jsxs("div",{className:"messages-list",children:[n>0&&r.jsx("div",{className:"mark-all-read",children:r.jsx("button",{onClick:S,children:" Marquer tout comme lu"})}),e.map(k=>r.jsxs("div",{className:`message-item ${k.readAt?"read":"unread"}`,children:[r.jsxs("div",{className:"message-header",children:[r.jsx("strong",{children:k.title}),r.jsx("small",{children:eae(new Date(k.createdAt))})]}),r.jsx("div",{className:"message-content",dangerouslySetInnerHTML:{__html:k.content}}),r.jsxs("div",{className:"message-footer",children:[r.jsx("small",{className:"type-badge",children:k.type}),r.jsxs("div",{className:"message-actions",children:[!k.readAt&&r.jsx("button",{className:"action-button",onClick:()=>b(k.id),title:"Marquer comme lu",children:r.jsx(qoe,{size:14})}),r.jsx("button",{className:"action-button delete",onClick:()=>C(k.id),title:"Supprimer",children:r.jsx(Xoe,{size:14})})]})]})]},k.id))]})})})]})]})}function eae(e){const n=new Date-e,s=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return s<1?" l'instant":s<60?`${s}m`:i<24?`${i}h`:o<7?`${o}j`:e.toLocaleDateString("fr-FR")}const tae="/assets/retro_intranet_essonne-BfWPiuYY.svg",nae="/assets/flash-info-rvZ9UMs-.png",rae="/assets/flash-notif-HViqZ6l6.png",sae="/assets/flash-pos-1o7mOrZv.png",Pr={SITE_MANAGEMENT:"site:management",VEHICLES:"vehicles:list",EVENTS:"events:list",FINANCE:"finance:access",MEMBERS:"members:list",STOCK:"stock:access",NEWSLETTER:"newsletter:access",RETROMAIL:"retromail:access",RETROPLANNING:"retroplanning:access",RETROPLANNING_RESPOND:"retroplanning:respond",RETROSUPPORT:"retrosupport:access",MYRBE:"myrbe:access"};function iae(e,t,n="access",s=null){return e==="PRESTATAIRE"?t?.startsWith("retroplanning")||t?.startsWith("retrosupport"):!0}function Ya(e,t,n=null){return iae(e,t,"access",n)}function lu({to:e,exact:t=!1,children:n}){const{pathname:s}=Mo(),i=t?s===e:s===e||s.startsWith(e+"/");return r.jsx(fE,{as:$n,to:e,color:i?"var(--rbe-red)":"gray.600",fontWeight:i?"bold":"normal",textDecoration:"none",position:"relative",_hover:{color:"var(--rbe-red)",textDecoration:"none"},_after:i?{content:'""',position:"absolute",bottom:"-8px",left:0,right:0,height:"2px",bg:"var(--rbe-red)",borderRadius:"1px"}:{},"aria-current":i?"page":void 0,children:n})}function oae(){const{user:e,customPermissions:t}=Cs(),n=e?.role||"MEMBER",s=Ya(n,Pr.SITE_MANAGEMENT,t),i=Ya(n,Pr.VEHICLES,t),o=Ya(n,Pr.EVENTS,t),l=Ya(n,Pr.MYRBE,t),u=Ya(n,Pr.NEWSLETTER,t),d=Ya(n,Pr.RETROPLANNING,t),h=Ya(n,Pr.RETROSUPPORT,t);return n==="PRESTATAIRE"?r.jsxs(qn,{bg:"white",gap:{base:4,md:8},justify:"center",align:"center",py:3,children:[d&&r.jsx(lu,{to:"/dashboard/retroplanning",children:" RtroPlanning"}),h&&r.jsx(lu,{to:"/dashboard/support",children:" RtroSupport"})]}):r.jsxs(qn,{bg:"white",gap:{base:4,md:8},justify:"center",align:"center",py:3,children:[s&&r.jsx(lu,{to:"/dashboard",children:" Accueil"}),i&&r.jsx(lu,{to:"/dashboard/vehicules",children:" Vhicules"}),o&&r.jsx(lu,{to:"/dashboard/evenements",children:" vnements"}),l&&r.jsx(lu,{to:"/dashboard/myrbe",children:" MyRBE"}),u&&r.jsx(lu,{to:"/dashboard/retromerch",children:" RtroMerch"})]})}const Vx={red:"#2e538d",yellow:"#2e538d",green:"#bb1f11",blue:"#bb1f11"},mu={INFO:{key:"INFO",label:"Flash Infos",color:{bg:"red.50",border:"red.300",text:"red.800",accent:"#bb1f11"}},NOTIF:{key:"NOTIF",label:"Flash Notifications",color:{bg:"orange.50",border:"orange.300",text:"orange.800",accent:"#d97706"}},POS:{key:"POS",label:"Flash Positif",color:{bg:"green.50",border:"green.300",text:"green.900",accent:"#16a34a"}}},aae="56px",lae="80px",cae="52px",uae="110px",RL="rbe:announcements:dismissed:";function dae(){return`flash-${Date.now()}-${Math.floor(Math.random()*1e3)}`}async function hae(){try{const e=await Tb.getAll();return Array.isArray(e)?e:[]}catch{return[]}}async function fae(e){try{return await Tb.create(e)}catch(t){throw t}}async function GO(e,t){try{return await Tb.update(e,t)}catch(n){throw n}}async function pae(e){try{return await Tb.delete(e),!0}catch(t){throw t}}function YO(e){if(!e)return{};try{const t=localStorage.getItem(RL+e);return t?JSON.parse(t):{}}catch{return{}}}function mae(e,t){try{localStorage.setItem(RL+e,JSON.stringify(t||{}))}catch{}}const KO={INFO:nae,NOTIF:rae,POS:sae};function H1({catKey:e}){const t=Object.values(mu).find(s=>s.key===e)||mu.INFO,n=KO[e]||KO.INFO;return r.jsx(Bn,{label:t.label,children:r.jsxs(de,{as:"span",display:"inline-flex",alignItems:"center",gap:2,children:[r.jsx(ui,{src:n,alt:"",boxSize:"18px",draggable:!1}),r.jsx(wL,{children:t.label})]})})}function gae(e){return r.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor","aria-hidden":"true",...e,children:r.jsx("path",{d:"M3 10v4a2 2 0 0 0 2 2h1v2a1 1 0 0 0 1.555.832L12 16h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1h-6L7.555 3.168A1 1 0 0 0 6 4v2H5a2 2 0 0 0-2 2z"})})}function xae(){const{logout:e,prenom:t,nom:n,isAuthenticated:s,isAdmin:i,matricule:o}=Cs(),l=ha(),u=mn(),d=jt(),h=jt(),p=jt(),m=kne({base:!0,md:!1}),[x,y]=j.useState([]),[b,C]=j.useState(!0),[S,E]=j.useState(null),[k,A]=j.useState({message:"",category:"INFO",active:!0,expiresAt:""}),T=()=>{e(),l("/login"),u({title:"Dconnexion russie",description:"Vous avez t dconnect avec succs",status:"info",duration:3e3,isClosable:!0})};j.useEffect(()=>{if(!s)return;let _;const B=600*1e3,fe=()=>{clearTimeout(_),_=setTimeout(()=>{e(),l("/login"),u({title:"Session expire",description:"Vous avez t dconnect pour inactivit (10 minutes)",status:"warning",duration:5e3,isClosable:!0})},B)},I=["mousedown","mousemove","keypress","scroll","touchstart","click"];return fe(),I.forEach(ee=>{document.addEventListener(ee,fe,!0)}),()=>{clearTimeout(_),I.forEach(ee=>{document.removeEventListener(ee,fe,!0)})}},[s,e,l,u]),j.useEffect(()=>{async function _(){try{C(!0);const B=await hae();y(B)}finally{C(!1)}}_()},[u]);const M=Date.now(),D=j.useMemo(()=>x.filter(_=>_&&_.active&&(!_.expiresAt||new Date(_.expiresAt).getTime()>M)),[x,M]),$=j.useMemo(()=>D.filter(_=>_.category==="INFO"),[D]),[W,te]=j.useState(0);j.useEffect(()=>{const _=YO(o||"anon"),B=D.reduce((fe,I)=>{const ee=_[I.id]||0,ae=I.updatedAt?new Date(I.updatedAt).getTime():I.createdAt?new Date(I.createdAt).getTime():0;return fe+(ee>=ae?0:1)},0);te(B)},[x,o,D.length]);const re=()=>{E(null),A({message:"",category:"INFO",active:!0,expiresAt:""}),d.onOpen()},U=_=>{E(_),A({message:_.message||"",category:_.category||"INFO",active:!!_.active,expiresAt:_.expiresAt||""}),d.onOpen()},oe=async()=>{const _=(k.message||"").trim();if(!_)return u({status:"warning",title:"Le message est requis"});["INFO","NOTIF","POS"].includes(k.category)||(k.category="INFO");try{if(S){const B=await GO(S.id,{message:_,category:k.category,active:!!k.active,expiresAt:k.expiresAt||null});y(fe=>fe.map(I=>I.id===S.id?B:I)),u({status:"success",title:"Flash modifi"})}else{const B={id:dae(),message:_,category:k.category,active:!!k.active,expiresAt:k.expiresAt||null},fe=await fae(B);y(I=>[fe,...I]),u({status:"success",title:"Flash ajout"})}E(null),d.onClose()}catch(B){u({status:"error",title:"Erreur",description:`Impossible de sauvegarder le flash: ${B.message}`})}},xe=async _=>{if(confirm("Supprimer ce flash ?"))try{await pae(_),y(B=>B.filter(fe=>fe.id!==_)),u({status:"info",title:"Flash supprim"})}catch{u({status:"error",title:"Erreur",description:"Impossible de supprimer le flash"})}},ie=async _=>{try{const B=x.find(I=>I.id===_);if(!B)return;const fe=await GO(_,{active:!B.active});y(I=>I.map(ee=>ee.id===_?fe:ee))}catch{u({status:"error",title:"Erreur",description:"Impossible de modifier le flash"})}},H=_=>{const B=o||"anon",fe=YO(B),I=Date.now();fe[_]=I,mae(B,fe),te(ee=>Math.max(0,ee-1)),u({status:"info",title:"Prise de connaissance enregistre"})},F=_=>{const B=Object.values(mu).find(fe=>fe.key===_)||mu.INFO;return{bg:B.color.bg,borderColor:B.color.border,color:B.color.text,accent:B.color.accent}};return r.jsxs(de,{as:"header",w:"100%",bg:"white",position:"sticky",top:"0",zIndex:"1000",borderBottom:"1px solid #3a3a3aff",children:[r.jsxs(de,{position:"relative",h:{base:aae,md:lae},overflow:"visible",children:[r.jsx(de,{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",zIndex:0,pointerEvents:"none",style:{background:`linear-gradient(90deg,
              ${Vx.red} 0%,
              ${Vx.yellow} 22%,
              ${Vx.green} 70%,
              ${Vx.blue} 100%
            )`}}),r.jsx(ui,{src:tae,alt:"RtroBus Essonne Intranet",height:{base:cae,md:uae},objectFit:"contain",position:"absolute",left:{base:3,md:5},top:"50%",transform:"translateY(-50%)",zIndex:2,draggable:!1}),r.jsx(de,{position:"absolute",right:{base:2,md:6},top:"50%",transform:"translateY(-50%)",zIndex:2,children:m?r.jsx(et,{"aria-label":"Menu",icon:r.jsx(de,{as:"span",display:"inline-block",w:"18px",h:"2px",bg:"white",position:"relative",_before:{content:'""',position:"absolute",w:"18px",h:"2px",bg:"white",top:"-6px",left:0},_after:{content:'""',position:"absolute",w:"18px",h:"2px",bg:"white",top:"6px",left:0}}),size:"sm",variant:"ghost",color:"white",onClick:p.onOpen,title:"Ouvrir le menu"}):r.jsxs(ne,{spacing:2,children:[r.jsx(Bn,{label:i?"Grer les flashs":"Vous n'tes pas autoris",children:r.jsx("span",{children:r.jsx(et,{"aria-label":"Annonces (gestion)",icon:r.jsx(gae,{}),size:"sm",variant:"ghost",color:"white",onClick:()=>{i&&d.onOpen()},title:"Annonces",isDisabled:!i})})}),r.jsx(Zoe,{}),r.jsxs(oa,{children:[r.jsxs(aa,{as:Y,colorScheme:"red",children:["Bonjour, ",t||"Utilisateur"]}),r.jsxs(la,{children:[r.jsx(Zt,{as:$n,to:"/adhesion",children:"Mon Adhsion"}),r.jsx(Zt,{as:$n,to:"/retromail",children:"RtroMail"}),r.jsx(Zt,{onClick:T,color:"red.500",children:"Dconnexion"})]})]})]})})]}),r.jsx(de,{display:{base:"none",md:"block"},children:r.jsx(oae,{})}),r.jsxs(yie,{isOpen:p.isOpen,onClose:p.onClose,placement:"right",children:[r.jsx(yt,{}),r.jsxs(oL,{children:[r.jsx(kt,{}),r.jsxs(xt,{bg:"var(--rbe-red)",color:"white",children:[r.jsxs(O,{fontWeight:"bold",children:[" Bonjour ",t||"Utilisateur"]}),W>0&&r.jsxs(O,{fontSize:"sm",color:"whiteAlpha.800",children:[W," flash(s) non lu(s)"]})]}),r.jsx(gt,{p:0,children:r.jsxs(Q,{align:"stretch",spacing:0,children:[r.jsx(Y,{as:$n,to:"/dashboard",variant:"ghost",justifyContent:"flex-start",onClick:p.onClose,py:4,px:5,children:"Accueil"}),r.jsx(Y,{as:$n,to:"/dashboard/vehicules",variant:"ghost",justifyContent:"flex-start",onClick:p.onClose,py:4,px:5,children:"Vhicules"}),r.jsx(Y,{as:$n,to:"/dashboard/evenements",variant:"ghost",justifyContent:"flex-start",onClick:p.onClose,py:4,px:5,children:"vnements"}),r.jsx(Y,{as:$n,to:"/dashboard/myrbe",variant:"ghost",justifyContent:"flex-start",onClick:p.onClose,py:4,px:5,children:"MyRBE"}),r.jsx(Y,{as:$n,to:"/dashboard/retromerch",variant:"ghost",justifyContent:"flex-start",onClick:p.onClose,py:4,px:5,children:"RtroMerch"}),r.jsx(rn,{}),r.jsx(Y,{onClick:()=>{h.onOpen(),p.onClose()},variant:"ghost",justifyContent:"flex-start",py:4,px:5,children:"Voir les flashs"}),i&&r.jsx(Y,{onClick:()=>{d.onOpen(),p.onClose()},variant:"ghost",justifyContent:"flex-start",py:4,px:5,children:"Grer les flashs"}),r.jsx(rn,{}),r.jsx(Y,{as:$n,to:"/adhesion",variant:"ghost",justifyContent:"flex-start",onClick:p.onClose,py:4,px:5,children:"Mon Adhsion"}),r.jsx(Y,{as:$n,to:"/retromail",variant:"ghost",justifyContent:"flex-start",onClick:p.onClose,py:4,px:5,children:"RtroMail"}),r.jsx(Y,{onClick:()=>{p.onClose(),T()},colorScheme:"red",justifyContent:"flex-start",variant:"ghost",py:4,px:5,children:"Dconnexion"})]})})]})]}),r.jsx(de,{children:$.map(_=>{const B=F(_.category);return r.jsx(de,{bg:B.bg,borderTop:"2px solid",borderColor:B.borderColor||B.border,py:2,px:4,children:r.jsxs(ne,{spacing:3,flex:"1",align:"center",children:[r.jsx(de,{children:r.jsx(H1,{catKey:_.category})}),r.jsxs(de,{children:[r.jsx(O,{fontSize:{base:"sm",md:"md"},color:B.color,children:_.message}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:_.createdAt?`Publi: ${new Date(_.createdAt).toLocaleString()}`:""})]}),r.jsx(de,{children:i?r.jsxs(ne,{spacing:2,children:[r.jsx(Y,{size:"sm",onClick:()=>U(_),children:"diter"}),r.jsx(Y,{size:"sm",colorScheme:_.active?"yellow":"green",onClick:()=>ie(_.id),children:_.active?"Dsactiver":"Activer"}),r.jsx(Y,{size:"sm",colorScheme:"red",onClick:()=>xe(_.id),children:"Supprimer"})]}):r.jsx(Y,{size:"sm",onClick:()=>H(_.id),children:"Prendre connaissance"})})]})},_.id)})}),r.jsxs(mt,{isOpen:h.isOpen,onClose:h.onClose,isCentered:!0,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{maxW:"900px",children:[r.jsx(xt,{children:"Flashs en cours"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:3,align:"stretch",children:[D.length===0&&r.jsx(O,{color:"gray.600",children:"Aucun flash en cours."}),D.map(_=>r.jsxs(de,{p:3,borderWidth:"1px",borderRadius:"md",bg:"white",children:[r.jsxs(ne,{spacing:2,align:"center",children:[r.jsx(H1,{catKey:_.category}),r.jsx(O,{fontWeight:"600",children:_.message})]}),r.jsx(O,{fontSize:"sm",color:"gray.500",children:_.createdAt?`Publi: ${new Date(_.createdAt).toLocaleString()}`:""}),r.jsx(Y,{size:"sm",onClick:()=>{H(_.id)},children:"Prendre connaissance"})]},_.id))]})}),r.jsx(Nt,{children:r.jsx(Y,{onClick:h.onClose,children:"Fermer"})})]})]}),r.jsxs(mt,{isOpen:d.isOpen,onClose:()=>{E(null),d.onClose()},isCentered:!0,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{maxW:"900px",children:[r.jsx(xt,{children:"Gestion des flashs"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(pa,{direction:"row",justify:"space-between",align:"center",children:[r.jsx(O,{fontWeight:"600",children:"Diffusions existantes"}),r.jsx(Y,{size:"sm",onClick:re,children:"Nouveau flash"})]}),x.length===0&&r.jsx(O,{color:"gray.600",children:"Aucun flash enregistr."}),x.map(_=>{const B=F(_.category);return r.jsxs(de,{p:3,borderWidth:"1px",borderRadius:"md",bg:B.bg,children:[r.jsxs(ne,{spacing:2,align:"center",children:[r.jsx(H1,{catKey:_.category}),r.jsx(O,{fontWeight:"600",children:_.message})]}),r.jsx(O,{fontSize:"sm",color:"gray.500",children:_.createdAt?`Publi: ${new Date(_.createdAt).toLocaleString()}`:""}),r.jsxs(ne,{spacing:2,children:[r.jsx(Y,{size:"sm",onClick:()=>U(_),children:"diter"}),r.jsx(Y,{size:"sm",onClick:()=>ie(_.id),children:_.active?"Dsactiver":"Activer"}),r.jsx(Y,{size:"sm",colorScheme:"red",onClick:()=>xe(_.id),children:"Supprimer"})]})]},_.id)}),r.jsxs(de,{mt:2,p:3,borderWidth:"1px",borderRadius:"md",bg:"white",children:[r.jsx(O,{fontWeight:"600",mb:2,children:S?"Modifier le flash":"Crer un nouveau flash"}),r.jsxs(G,{mb:2,children:[r.jsx(q,{children:"Catgorie"}),r.jsxs(Qe,{value:k.category,onChange:_=>A(B=>({...B,category:_.target.value})),children:[r.jsx("option",{value:"INFO",children:mu.INFO.label}),r.jsx("option",{value:"NOTIF",children:mu.NOTIF.label}),r.jsx("option",{value:"POS",children:mu.POS.label})]})]}),r.jsxs(G,{mb:2,children:[r.jsx(q,{children:"Message"}),r.jsx(Gt,{value:k.message,onChange:_=>A(B=>({...B,message:_.target.value})),rows:4})]}),r.jsxs(G,{display:"flex",alignItems:"center",mb:2,children:[r.jsx(q,{mb:"0",mr:3,children:"Actif"}),r.jsx(sr,{isChecked:k.active,onChange:_=>A(B=>({...B,active:_.target.checked}))})]}),r.jsxs(G,{mb:2,children:[r.jsx(q,{children:"Expire le (optionnel)"}),r.jsx("input",{type:"datetime-local",value:k.expiresAt||"",onChange:_=>A(B=>({...B,expiresAt:_.target.value||""})),style:{width:"100%",padding:"8px",borderRadius:6,border:"1px solid #e2e8f0"}})]}),r.jsxs(ne,{gap:2,justify:"flex-end",children:[r.jsx(Y,{variant:"ghost",onClick:()=>{E(null),A({message:"",category:"INFO",active:!0,expiresAt:""})},children:"Rinitialiser"}),r.jsx(Y,{colorScheme:"blue",onClick:oe,children:S?"Sauvegarder":"Crer"})]})]})]})}),r.jsx(Nt,{children:r.jsx(Y,{onClick:()=>{E(null),d.onClose()},children:"Fermer"})})]})]})]})}function pr({children:e}){const{isAuthenticated:t,user:n,sessionChecked:s,ensureSession:i}=Cs(),[o,l]=j.useState(!1);return j.useEffect(()=>{!s&&!o&&(i(),l(!0))},[s,o,i]),s?!t||!n?r.jsx(c0,{to:"/login",replace:!0}):e:r.jsx(cn,{py:20,children:r.jsx(sn,{size:"lg"})})}function Hx({children:e,resource:t=null,permissionType:n="access",fallbackRoute:s="/dashboard/home",showError:i=!1}){const{isAuthenticated:o,user:l}=Cs();if(!o)return console.warn(" PermissionProtectedRoute: Not authenticated"),r.jsx(c0,{to:"/login",replace:!0});if(!l)return console.warn(" PermissionProtectedRoute: No user data"),r.jsx(c0,{to:"/login",replace:!0});if(!t)return e;const u=l.role||l.roles?.[0]||"MEMBER";return Ya(u,t)?(console.log(` PermissionProtectedRoute: Access granted to "${t}" for role "${u}"`),e):(console.warn(` PermissionProtectedRoute: User role "${u}" denied access to resource "${t}"`),i?r.jsx(de,{p:8,textAlign:"center",minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:r.jsxs(Q,{spacing:4,children:[r.jsx(O,{fontSize:"2xl",fontWeight:"bold",children:" Accs Refus"}),r.jsx(O,{fontSize:"md",color:"gray.600",children:"Vous n'avez pas les permissions ncessaires pour accder  cette ressource."}),r.jsxs(O,{fontSize:"sm",color:"gray.400",children:["Votre rle: ",r.jsx("strong",{children:u})]})]})}):r.jsx(c0,{to:s,replace:!0}))}function yae({children:e}){const{matricule:t}=Cs();return Toe(t)?e:r.jsxs(de,{p:6,children:[r.jsx(O,{fontWeight:"bold",children:"Accs refus"}),r.jsx(O,{opacity:.8,children:"Vous ntes pas autoris  ajouter des vhicules."})]})}var bae=Object.defineProperty,ty=Object.getOwnPropertySymbols,DL=Object.prototype.hasOwnProperty,OL=Object.prototype.propertyIsEnumerable,XO=(e,t,n)=>t in e?bae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FC=(e,t)=>{for(var n in t||(t={}))DL.call(t,n)&&XO(e,n,t[n]);if(ty)for(var n of ty(t))OL.call(t,n)&&XO(e,n,t[n]);return e},VC=(e,t)=>{var n={};for(var s in e)DL.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&ty)for(var s of ty(e))t.indexOf(s)<0&&OL.call(e,s)&&(n[s]=e[s]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Qu;(e=>{const t=class nn{constructor(d,h,p,m){if(this.version=d,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],d<nn.MIN_VERSION||d>nn.MAX_VERSION)throw new RangeError("Version value out of range");if(m<-1||m>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let b=0;b<this.size;b++)x.push(!1);for(let b=0;b<this.size;b++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const y=this.addEccAndInterleave(p);if(this.drawCodewords(y),m==-1){let b=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const S=this.getPenaltyScore();S<b&&(m=C,b=S),this.applyMask(C)}}i(0<=m&&m<=7),this.mask=m,this.applyMask(m),this.drawFormatBits(m),this.isFunction=[]}static encodeText(d,h){const p=e.QrSegment.makeSegments(d);return nn.encodeSegments(p,h)}static encodeBinary(d,h){const p=e.QrSegment.makeBytes(d);return nn.encodeSegments([p],h)}static encodeSegments(d,h,p=1,m=40,x=-1,y=!0){if(!(nn.MIN_VERSION<=p&&p<=m&&m<=nn.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let b,C;for(b=p;;b++){const A=nn.getNumDataCodewords(b,h)*8,T=l.getTotalBits(d,b);if(T<=A){C=T;break}if(b>=m)throw new RangeError("Data too long")}for(const A of[nn.Ecc.MEDIUM,nn.Ecc.QUARTILE,nn.Ecc.HIGH])y&&C<=nn.getNumDataCodewords(b,A)*8&&(h=A);let S=[];for(const A of d){n(A.mode.modeBits,4,S),n(A.numChars,A.mode.numCharCountBits(b),S);for(const T of A.getData())S.push(T)}i(S.length==C);const E=nn.getNumDataCodewords(b,h)*8;i(S.length<=E),n(0,Math.min(4,E-S.length),S),n(0,(8-S.length%8)%8,S),i(S.length%8==0);for(let A=236;S.length<E;A^=253)n(A,8,S);let k=[];for(;k.length*8<S.length;)k.push(0);return S.forEach((A,T)=>k[T>>>3]|=A<<7-(T&7)),new nn(b,h,k,x)}getModule(d,h){return 0<=d&&d<this.size&&0<=h&&h<this.size&&this.modules[h][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),h=d.length;for(let p=0;p<h;p++)for(let m=0;m<h;m++)p==0&&m==0||p==0&&m==h-1||p==h-1&&m==0||this.drawAlignmentPattern(d[p],d[m]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const h=this.errorCorrectionLevel.formatBits<<3|d;let p=h;for(let x=0;x<10;x++)p=p<<1^(p>>>9)*1335;const m=(h<<10|p)^21522;i(m>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,s(m,x));this.setFunctionModule(8,7,s(m,6)),this.setFunctionModule(8,8,s(m,7)),this.setFunctionModule(7,8,s(m,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,s(m,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,s(m,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,s(m,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let p=0;p<12;p++)d=d<<1^(d>>>11)*7973;const h=this.version<<12|d;i(h>>>18==0);for(let p=0;p<18;p++){const m=s(h,p),x=this.size-11+p%3,y=Math.floor(p/3);this.setFunctionModule(x,y,m),this.setFunctionModule(y,x,m)}}drawFinderPattern(d,h){for(let p=-4;p<=4;p++)for(let m=-4;m<=4;m++){const x=Math.max(Math.abs(m),Math.abs(p)),y=d+m,b=h+p;0<=y&&y<this.size&&0<=b&&b<this.size&&this.setFunctionModule(y,b,x!=2&&x!=4)}}drawAlignmentPattern(d,h){for(let p=-2;p<=2;p++)for(let m=-2;m<=2;m++)this.setFunctionModule(d+m,h+p,Math.max(Math.abs(m),Math.abs(p))!=1)}setFunctionModule(d,h,p){this.modules[h][d]=p,this.isFunction[h][d]=!0}addEccAndInterleave(d){const h=this.version,p=this.errorCorrectionLevel;if(d.length!=nn.getNumDataCodewords(h,p))throw new RangeError("Invalid argument");const m=nn.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][h],x=nn.ECC_CODEWORDS_PER_BLOCK[p.ordinal][h],y=Math.floor(nn.getNumRawDataModules(h)/8),b=m-y%m,C=Math.floor(y/m);let S=[];const E=nn.reedSolomonComputeDivisor(x);for(let A=0,T=0;A<m;A++){let M=d.slice(T,T+C-x+(A<b?0:1));T+=M.length;const D=nn.reedSolomonComputeRemainder(M,E);A<b&&M.push(0),S.push(M.concat(D))}let k=[];for(let A=0;A<S[0].length;A++)S.forEach((T,M)=>{(A!=C-x||M>=b)&&k.push(T[A])});return i(k.length==y),k}drawCodewords(d){if(d.length!=Math.floor(nn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let m=0;m<this.size;m++)for(let x=0;x<2;x++){const y=p-x,C=(p+1&2)==0?this.size-1-m:m;!this.isFunction[C][y]&&h<d.length*8&&(this.modules[C][y]=s(d[h>>>3],7-(h&7)),h++)}}i(h==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let p=0;p<this.size;p++){let m;switch(d){case 0:m=(p+h)%2==0;break;case 1:m=h%2==0;break;case 2:m=p%3==0;break;case 3:m=(p+h)%3==0;break;case 4:m=(Math.floor(p/3)+Math.floor(h/2))%2==0;break;case 5:m=p*h%2+p*h%3==0;break;case 6:m=(p*h%2+p*h%3)%2==0;break;case 7:m=((p+h)%2+p*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][p]&&m&&(this.modules[h][p]=!this.modules[h][p])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let y=!1,b=0,C=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[x][S]==y?(b++,b==5?d+=nn.PENALTY_N1:b>5&&d++):(this.finderPenaltyAddHistory(b,C),y||(d+=this.finderPenaltyCountPatterns(C)*nn.PENALTY_N3),y=this.modules[x][S],b=1);d+=this.finderPenaltyTerminateAndCount(y,b,C)*nn.PENALTY_N3}for(let x=0;x<this.size;x++){let y=!1,b=0,C=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][x]==y?(b++,b==5?d+=nn.PENALTY_N1:b>5&&d++):(this.finderPenaltyAddHistory(b,C),y||(d+=this.finderPenaltyCountPatterns(C)*nn.PENALTY_N3),y=this.modules[S][x],b=1);d+=this.finderPenaltyTerminateAndCount(y,b,C)*nn.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let y=0;y<this.size-1;y++){const b=this.modules[x][y];b==this.modules[x][y+1]&&b==this.modules[x+1][y]&&b==this.modules[x+1][y+1]&&(d+=nn.PENALTY_N2)}let h=0;for(const x of this.modules)h=x.reduce((y,b)=>y+(b?1:0),h);const p=this.size*this.size,m=Math.ceil(Math.abs(h*20-p*10)/p)-1;return i(0<=m&&m<=9),d+=m*nn.PENALTY_N4,i(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let p=[6];for(let m=this.size-7;p.length<d;m-=h)p.splice(1,0,m);return p}}static getNumRawDataModules(d){if(d<nn.MIN_VERSION||d>nn.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*d+128)*d+64;if(d>=2){const p=Math.floor(d/7)+2;h-=(25*p-10)*p-55,d>=7&&(h-=36)}return i(208<=h&&h<=29648),h}static getNumDataCodewords(d,h){return Math.floor(nn.getNumRawDataModules(d)/8)-nn.ECC_CODEWORDS_PER_BLOCK[h.ordinal][d]*nn.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let h=[];for(let m=0;m<d-1;m++)h.push(0);h.push(1);let p=1;for(let m=0;m<d;m++){for(let x=0;x<h.length;x++)h[x]=nn.reedSolomonMultiply(h[x],p),x+1<h.length&&(h[x]^=h[x+1]);p=nn.reedSolomonMultiply(p,2)}return h}static reedSolomonComputeRemainder(d,h){let p=h.map(m=>0);for(const m of d){const x=m^p.shift();p.push(0),h.forEach((y,b)=>p[b]^=nn.reedSolomonMultiply(y,x))}return p}static reedSolomonMultiply(d,h){if(d>>>8||h>>>8)throw new RangeError("Byte out of range");let p=0;for(let m=7;m>=0;m--)p=p<<1^(p>>>7)*285,p^=(h>>>m&1)*d;return i(p>>>8==0),p}finderPenaltyCountPatterns(d){const h=d[1];i(h<=this.size*3);const p=h>0&&d[2]==h&&d[3]==h*3&&d[4]==h&&d[5]==h;return(p&&d[0]>=h*4&&d[6]>=h?1:0)+(p&&d[6]>=h*4&&d[0]>=h?1:0)}finderPenaltyTerminateAndCount(d,h,p){return d&&(this.finderPenaltyAddHistory(h,p),h=0),h+=this.size,this.finderPenaltyAddHistory(h,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(d,h){h[0]==0&&(d+=this.size),h.pop(),h.unshift(d)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(u,d,h){if(d<0||d>31||u>>>d)throw new RangeError("Value out of range");for(let p=d-1;p>=0;p--)h.push(u>>>p&1)}function s(u,d){return(u>>>d&1)!=0}function i(u){if(!u)throw new Error("Assertion error")}const o=class kr{constructor(d,h,p){if(this.mode=d,this.numChars=h,this.bitData=p,h<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(d){let h=[];for(const p of d)n(p,8,h);return new kr(kr.Mode.BYTE,d.length,h)}static makeNumeric(d){if(!kr.isNumeric(d))throw new RangeError("String contains non-numeric characters");let h=[];for(let p=0;p<d.length;){const m=Math.min(d.length-p,3);n(parseInt(d.substring(p,p+m),10),m*3+1,h),p+=m}return new kr(kr.Mode.NUMERIC,d.length,h)}static makeAlphanumeric(d){if(!kr.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],p;for(p=0;p+2<=d.length;p+=2){let m=kr.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p))*45;m+=kr.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p+1)),n(m,11,h)}return p<d.length&&n(kr.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p)),6,h),new kr(kr.Mode.ALPHANUMERIC,d.length,h)}static makeSegments(d){return d==""?[]:kr.isNumeric(d)?[kr.makeNumeric(d)]:kr.isAlphanumeric(d)?[kr.makeAlphanumeric(d)]:[kr.makeBytes(kr.toUtf8ByteArray(d))]}static makeEci(d){let h=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)n(d,8,h);else if(d<16384)n(2,2,h),n(d,14,h);else if(d<1e6)n(6,3,h),n(d,21,h);else throw new RangeError("ECI assignment value out of range");return new kr(kr.Mode.ECI,0,h)}static isNumeric(d){return kr.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return kr.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,h){let p=0;for(const m of d){const x=m.mode.numCharCountBits(h);if(m.numChars>=1<<x)return 1/0;p+=4+x+m.bitData.length}return p}static toUtf8ByteArray(d){d=encodeURI(d);let h=[];for(let p=0;p<d.length;p++)d.charAt(p)!="%"?h.push(d.charCodeAt(p)):(h.push(parseInt(d.substring(p+1,p+3),16)),p+=2);return h}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=o;e.QrSegment=o})(Qu||(Qu={}));(e=>{(t=>{const n=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Qu||(Qu={}));(e=>{(t=>{const n=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Qu||(Qu={}));var wh=Qu;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var vae={L:wh.QrCode.Ecc.LOW,M:wh.QrCode.Ecc.MEDIUM,Q:wh.QrCode.Ecc.QUARTILE,H:wh.QrCode.Ecc.HIGH},NL=128,PL="L",zL="#FFFFFF",IL="#000000",LL=!1,_L=1,jae=4,Sae=0,Cae=.1;function BL(e,t=0){const n=[];return e.forEach(function(s,i){let o=null;s.forEach(function(l,u){if(!l&&o!==null){n.push(`M${o+t} ${i+t}h${u-o}v1H${o+t}z`),o=null;return}if(u===s.length-1){if(!l)return;o===null?n.push(`M${u+t},${i+t} h1v1H${u+t}z`):n.push(`M${o+t},${i+t} h${u+1-o}v1H${o+t}z`);return}l&&o===null&&(o=u)})}),n.join("")}function $L(e,t){return e.slice().map((n,s)=>s<t.y||s>=t.y+t.h?n:n.map((i,o)=>o<t.x||o>=t.x+t.w?i:!1))}function wae(e,t,n,s){if(s==null)return null;const i=e.length+n*2,o=Math.floor(t*Cae),l=i/t,u=(s.width||o)*l,d=(s.height||o)*l,h=s.x==null?e.length/2-u/2:s.x*l,p=s.y==null?e.length/2-d/2:s.y*l,m=s.opacity==null?1:s.opacity;let x=null;if(s.excavate){let b=Math.floor(h),C=Math.floor(p),S=Math.ceil(u+h-b),E=Math.ceil(d+p-C);x={x:b,y:C,w:S,h:E}}const y=s.crossOrigin;return{x:h,y:p,h:d,w:u,excavation:x,opacity:m,crossOrigin:y}}function Eae(e,t){return t!=null?Math.max(Math.floor(t),0):e?jae:Sae}function FL({value:e,level:t,minVersion:n,includeMargin:s,marginSize:i,imageSettings:o,size:l,boostLevel:u}){let d=Lt.useMemo(()=>{const b=(Array.isArray(e)?e:[e]).reduce((C,S)=>(C.push(...wh.QrSegment.makeSegments(S)),C),[]);return wh.QrCode.encodeSegments(b,vae[t],n,void 0,void 0,u)},[e,t,n,u]);const{cells:h,margin:p,numCells:m,calculatedImageSettings:x}=Lt.useMemo(()=>{let y=d.getModules();const b=Eae(s,i),C=y.length+b*2,S=wae(y,l,b,o);return{cells:y,margin:b,numCells:C,calculatedImageSettings:S}},[d,l,o,s,i]);return{qrcode:d,margin:p,cells:h,numCells:m,calculatedImageSettings:x}}var kae=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),VL=Lt.forwardRef(function(t,n){const s=t,{value:i,size:o=NL,level:l=PL,bgColor:u=zL,fgColor:d=IL,includeMargin:h=LL,minVersion:p=_L,boostLevel:m,marginSize:x,imageSettings:y}=s,C=VC(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=C,E=VC(C,["style"]),k=y?.src,A=Lt.useRef(null),T=Lt.useRef(null),M=Lt.useCallback(ie=>{A.current=ie,typeof n=="function"?n(ie):n&&(n.current=ie)},[n]),[D,$]=Lt.useState(!1),{margin:W,cells:te,numCells:re,calculatedImageSettings:U}=FL({value:i,level:l,minVersion:p,boostLevel:m,includeMargin:h,marginSize:x,imageSettings:y,size:o});Lt.useEffect(()=>{if(A.current!=null){const ie=A.current,H=ie.getContext("2d");if(!H)return;let F=te;const _=T.current,B=U!=null&&_!==null&&_.complete&&_.naturalHeight!==0&&_.naturalWidth!==0;B&&U.excavation!=null&&(F=$L(te,U.excavation));const fe=window.devicePixelRatio||1;ie.height=ie.width=o*fe;const I=o/re*fe;H.scale(I,I),H.fillStyle=u,H.fillRect(0,0,re,re),H.fillStyle=d,kae?H.fill(new Path2D(BL(F,W))):te.forEach(function(ee,ae){ee.forEach(function(P,R){P&&H.fillRect(R+W,ae+W,1,1)})}),U&&(H.globalAlpha=U.opacity),B&&H.drawImage(_,U.x+W,U.y+W,U.w,U.h)}}),Lt.useEffect(()=>{$(!1)},[k]);const oe=FC({height:o,width:o},S);let xe=null;return k!=null&&(xe=Lt.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{$(!0)},ref:T,crossOrigin:U?.crossOrigin})),Lt.createElement(Lt.Fragment,null,Lt.createElement("canvas",FC({style:oe,height:o,width:o,ref:M,role:"img"},E)),xe)});VL.displayName="QRCodeCanvas";var Aae=Lt.forwardRef(function(t,n){const s=t,{value:i,size:o=NL,level:l=PL,bgColor:u=zL,fgColor:d=IL,includeMargin:h=LL,minVersion:p=_L,boostLevel:m,title:x,marginSize:y,imageSettings:b}=s,C=VC(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:E,numCells:k,calculatedImageSettings:A}=FL({value:i,level:l,minVersion:p,boostLevel:m,includeMargin:h,marginSize:y,imageSettings:b,size:o});let T=E,M=null;b!=null&&A!=null&&(A.excavation!=null&&(T=$L(E,A.excavation)),M=Lt.createElement("image",{href:b.src,height:A.h,width:A.w,x:A.x+S,y:A.y+S,preserveAspectRatio:"none",opacity:A.opacity,crossOrigin:A.crossOrigin}));const D=BL(T,S);return Lt.createElement("svg",FC({height:o,width:o,viewBox:`0 0 ${k} ${k}`,ref:n,role:"img"},C),!!x&&Lt.createElement("title",null,x),Lt.createElement("path",{fill:u,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),Lt.createElement("path",{fill:d,d:D,shapeRendering:"crispEdges"}),M)});Aae.displayName="QRCodeSVG";var HL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},JO=Lt.createContext&&Lt.createContext(HL),Tae=["attr","size","title"];function Mae(e,t){if(e==null)return{};var n=Rae(e,t),s,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)s=o[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Rae(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ny.apply(this,arguments)}function QO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QO(Object(n),!0).forEach(function(s){Dae(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Dae(e,t,n){return t=Oae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oae(e){var t=Nae(e,"string");return typeof t=="symbol"?t:t+""}function Nae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UL(e){return e&&e.map((t,n)=>Lt.createElement(t.tag,ry({key:n},t.attr),UL(t.child)))}function qe(e){return t=>Lt.createElement(Pae,ny({attr:ry({},e.attr)},t),UL(e.child))}function Pae(e){var t=n=>{var{attr:s,size:i,title:o}=e,l=Mae(e,Tae),u=i||n.size||"1em",d;return n.className&&(d=n.className),e.className&&(d=(d?d+" ":"")+e.className),Lt.createElement("svg",ny({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,l,{className:d,style:ry(ry({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Lt.createElement("title",null,o),e.children)};return JO!==void 0?Lt.createElement(JO.Consumer,null,n=>t(n)):t(HL)}function Za(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function WL(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function zae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function Iae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"10",x2:"6",y2:"10"},child:[]},{tag:"line",attr:{x1:"21",y1:"6",x2:"3",y2:"6"},child:[]},{tag:"line",attr:{x1:"21",y1:"14",x2:"3",y2:"14"},child:[]},{tag:"line",attr:{x1:"18",y1:"18",x2:"6",y2:"18"},child:[]}]})(e)}function Lae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"17",y1:"10",x2:"3",y2:"10"},child:[]},{tag:"line",attr:{x1:"21",y1:"6",x2:"3",y2:"6"},child:[]},{tag:"line",attr:{x1:"21",y1:"14",x2:"3",y2:"14"},child:[]},{tag:"line",attr:{x1:"17",y1:"18",x2:"3",y2:"18"},child:[]}]})(e)}function _ae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"21",y1:"10",x2:"7",y2:"10"},child:[]},{tag:"line",attr:{x1:"21",y1:"6",x2:"3",y2:"6"},child:[]},{tag:"line",attr:{x1:"21",y1:"14",x2:"3",y2:"14"},child:[]},{tag:"line",attr:{x1:"21",y1:"18",x2:"7",y2:"18"},child:[]}]})(e)}function qL(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function Bae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function $ae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function Fae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function Vae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"10"},child:[]},{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"16"},child:[]}]})(e)}function Hae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function Uae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"},child:[]},{tag:"path",attr:{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"},child:[]}]})(e)}function si(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function kE(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function sy(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function AE(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function GL(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function iy(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function TE(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function YL(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function Wae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"},child:[]},{tag:"polyline",attr:{points:"8 6 2 12 8 18"},child:[]}]})(e)}function ZO(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(e)}function qae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(e)}function HC(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(e)}function Zu(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function ml(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function Gae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function _p(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(e)}function us(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function KL(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(e)}function UC(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function zm(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function WC(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"},child:[]},{tag:"polyline",attr:{points:"13 2 13 9 20 9"},child:[]}]})(e)}function Yae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Ph(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(e)}function ME(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(e)}function Kae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function Xae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(e)}function Jae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]}]})(e)}function Qae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"4",x2:"10",y2:"4"},child:[]},{tag:"line",attr:{x1:"14",y1:"20",x2:"5",y2:"20"},child:[]},{tag:"line",attr:{x1:"15",y1:"4",x2:"9",y2:"20"},child:[]}]})(e)}function Lu(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(e)}function Zae(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"4"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"9.17",y2:"9.17"},child:[]},{tag:"line",attr:{x1:"14.83",y1:"14.83",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"14.83",y1:"9.17",x2:"19.07",y2:"4.93"},child:[]},{tag:"line",attr:{x1:"14.83",y1:"9.17",x2:"18.36",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"9.17",y2:"14.83"},child:[]}]})(e)}function ele(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"16",y2:"12"},child:[]}]})(e)}function tle(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(e)}function RE(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(e)}function ed(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Tc(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Mb(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function nle(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function zh(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(e)}function oy(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(e)}function XL(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function rle(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function Pn(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function ao(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(e)}function sle(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"1 4 1 10 7 10"},child:[]},{tag:"path",attr:{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"},child:[]}]})(e)}function xc(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function Rb(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function ile(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function mg(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function JL(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function ole(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(e)}function ale(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function lle(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(e)}function Yn(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function cle(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(e)}function yc(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(e)}function Ux(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 7 4 4 20 4 20 7"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"15",y2:"20"},child:[]},{tag:"line",attr:{x1:"12",y1:"4",x2:"12",y2:"20"},child:[]}]})(e)}function ule(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"},child:[]},{tag:"line",attr:{x1:"4",y1:"21",x2:"20",y2:"21"},child:[]}]})(e)}function qC(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}function dle(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function QL(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function eN(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function ay(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function U1(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function wi(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function hle(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Im(e){return qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const tN=window.location.origin,fle=()=>{const[e,t]=j.useState([]),[n,s]=j.useState(!1),[i,o]=j.useState(""),[l,u]=j.useState(!1),[d,h]=j.useState(null),p=mn(),m=j.useRef(null),x=j.useCallback(async S=>{try{s(!0);const E=await ut.get("/vehicles");t(Array.isArray(E)?E:[])}catch(E){E.name!=="AbortError"&&(console.error(E),t([]),p({status:"error",title:"Impossible de charger la liste",description:E.message}))}finally{s(!1)}},[p]);j.useEffect(()=>{const S=new AbortController;return x(S.signal),()=>S.abort()},[x]);const y=e.filter(S=>{if(!i.trim())return!0;const E=i.toLowerCase();return[S.parc,S.modele,S.marque,S.immat].filter(Boolean).some(k=>k.toLowerCase().includes(E))}),b=S=>{h(S),u(!0)},C=()=>{const S=m.current?.querySelector("canvas");if(S){const E=S.toDataURL(),k=document.createElement("a");k.href=E,k.download=`qr-${d?.parc||"vehicle"}.png`,k.click()}};return r.jsxs(de,{p:6,children:[r.jsxs(qn,{justify:"space-between",align:"center",mb:6,children:[r.jsx(we,{children:"Vhicules"}),r.jsx(Y,{as:$n,to:"/dashboard/vehicules/ajouter",leftIcon:r.jsx(Pn,{}),colorScheme:"blue",children:"Ajouter un vhicule"})]}),r.jsx(de,{mb:6,children:r.jsx(pe,{placeholder:"Rechercher par parc, modle, marque ou immatriculation...",value:i,onChange:S=>o(S.target.value),maxW:"400px"})}),n?r.jsx(cn,{py:20,children:r.jsx(sn,{size:"xl"})}):r.jsx(tt,{columns:{base:1,md:2,lg:3},spacing:6,children:y.map(S=>r.jsxs(Me,{shadow:"md",children:[r.jsx(Ct,{pb:2,children:r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",children:S.parc}),r.jsx(Ge,{colorScheme:S.etat==="disponible"?"green":"orange",children:S.etat})]})}),r.jsx(Ae,{pt:0,children:r.jsxs(Q,{align:"start",spacing:2,children:[r.jsxs(O,{children:[r.jsx("strong",{children:"Modle:"})," ",S.modele||"Non spcifi"]}),r.jsxs(O,{children:[r.jsx("strong",{children:"Marque:"})," ",S.marque||"Non spcifie"]}),S.immat&&r.jsxs(O,{children:[r.jsx("strong",{children:"Immat:"})," ",S.immat]}),r.jsxs(ne,{spacing:2,pt:4,w:"100%",children:[r.jsx(Y,{as:$n,to:`/dashboard/vehicules/${S.parc}`,leftIcon:r.jsx(us,{}),size:"sm",flex:1,children:"Grer"}),r.jsx(Y,{leftIcon:r.jsx(ME,{}),size:"sm",onClick:()=>b(S),children:"QR"})]})]})})]},S.parc))}),y.length===0&&!n&&r.jsx(cn,{py:20,children:r.jsx(O,{color:"gray.500",children:"Aucun vhicule trouv"})}),r.jsxs(mt,{isOpen:l,onClose:()=>u(!1),isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsxs(xt,{children:["QR Code - ",d?.parc]}),r.jsx(kt,{}),r.jsx(gt,{pb:6,children:r.jsxs(Q,{spacing:4,children:[r.jsx(de,{ref:m,children:r.jsx(VL,{value:`${tN}/mobile/v/${d?.parc}`,size:200,level:"M"})}),r.jsx(O,{fontSize:"sm",color:"gray.600",textAlign:"center",children:`${tN}/mobile/v/${d?.parc}`}),r.jsx(Y,{onClick:C,colorScheme:"blue",children:"Tlcharger"})]})})]})]})]})},ple=(qi||"https://attractive-kindness-rbe-serveurs.up.railway.app").replace(/\/+$/,""),mle=(localStorage.getItem("rbe_api_prefix")||"api").replace(/^\/+|\/+$/g,""),Wx=()=>(localStorage.getItem("rbe_api_vehicles_path")||`${mle}/vehicles`).replace(/^\/+/,"").replace(/\/+$/,""),gle=()=>(localStorage.getItem("rbe_api_origin")||ple).replace(/\/+$/,""),Wo=e=>{const t=String(e||"").replace(/^\/+/,""),n=gle(),s=`/${t}`,i=n?`${n}/${t}`:null,o=[s];return i&&o.push(i),o},cu=async(e,t)=>{let n=null;for(const s of e)try{const i=await fetch(s,t);if(!i.ok){n=new Error(`HTTP ${i.status}`);continue}if(!(i.headers.get("content-type")||"").toLowerCase().includes("application/json")){n=new Error("non-json");continue}return await i.json()}catch(i){n=i}throw n||new Error("fetch failed")};function xle(){const{parc:e}=Jy(),[t]=KF(),n=mn(),s=ha(),i=t.get("t")||"",{matricule:o,setMatricule:l,token:u}=Cs(),[d,h]=j.useState(i||""),[p,m]=j.useState(null),[x,y]=j.useState([]),[b,C]=j.useState([]),[S,E]=j.useState(!0),[k,A]=j.useState(!1),[T,M]=j.useState(!1),[D,$]=j.useState(!1),[W,te]=j.useState(!1),[re,U]=j.useState(o||""),[oe,xe]=j.useState(!1),[ie,H]=j.useState([]),[F,_]=j.useState(!1),[B,fe]=j.useState(""),[I,ee]=j.useState([]),[ae,P]=j.useState(""),[R,N]=j.useState(""),[Z,ke]=j.useState(""),[Te,je]=j.useState(""),[Ke,Xe]=j.useState(""),[He,pt]=j.useState(""),[De,Tt]=j.useState(""),[ue,Ee]=j.useState(null),[nt,X]=j.useState(null),le=`rbe_current_usage_${e}`,[Ve,at]=j.useState(()=>{const Le=localStorage.getItem(le);return Le?JSON.parse(Le):null}),dn=Le=>{at(Le),Le?localStorage.setItem(le,JSON.stringify(Le)):localStorage.removeItem(le)},Fn=()=>new Promise(Le=>{if(!("geolocation"in navigator))return Le(null);navigator.geolocation.getCurrentPosition(ct=>Le({lat:ct.coords.latitude,lng:ct.coords.longitude,accuracy:ct.coords.accuracy}),()=>Le(null),{enableHighAccuracy:!0,timeout:8e3,maximumAge:3e4})});j.useEffect(()=>{if(T&&!D){const Le=new Date;ke(Le.toISOString().slice(0,10)),je(Le.toTimeString().slice(0,5)),Fn().then(Ee)}if(T&&D){const Le=new Date;Xe(Le.toISOString().slice(0,10)),pt(Le.toTimeString().slice(0,5)),Fn().then(X)}T||$(!1)},[T,D]);const Oe=async()=>{if(u)try{_(!0);const Le=Wo(`${(localStorage.getItem("rbe_api_prefix")||"api").replace(/^\/+/,"")}/members?limit=500`),ct=await cu(Le,{headers:{Authorization:`Bearer ${u}`}});H(Array.isArray(ct?.members)?ct.members:[])}catch{H([])}finally{_(!1)}},We=(Le=d,ct=o)=>{const Ht={"Content-Type":"application/json"};return Le?Ht["x-qr-token"]=Le:ct&&(Ht["x-user-matricule"]=ct),u&&(Ht.Authorization=`Bearer ${u}`),Ht};j.useEffect(()=>{let Le=!1;return(async()=>{try{E(!0);const ct=We(d),Ht=Wx(),hn=Wo(`${Ht}/${encodeURIComponent(e)}`),_t=Wo(`${Ht}/${encodeURIComponent(e)}/reports`),Sn=Wo(`${Ht}/${encodeURIComponent(e)}/usages`),[fn,yr,ar]=await Promise.all([cu(hn,{headers:ct}),cu(_t,{headers:ct}).catch(()=>[]),cu(Sn,{headers:ct}).catch(()=>[])]);if(Le)return;m(fn);const rs=Array.isArray(yr)?yr.map(jn=>({id:jn.id,type:jn.type||"Rapport",date:jn.createdAt||jn.date||new Date().toISOString(),note:jn.description||jn.note||"",createdBy:jn.createdBy||jn.author||""})):[];y(rs),C(Array.isArray(ar)?ar:[])}catch(ct){console.warn("fetch vehicle failed:",ct),m(null),y([]),C([])}finally{Le||E(!1)}})(),()=>{Le=!0}},[e,d]);const bt=async Le=>{if(Le?.preventDefault?.(),!re?.trim())return n({status:"warning",title:"Matricule requis"});try{xe(!0),l(re.trim()),n({status:"success",title:"Connect",description:re.trim()}),h(""),setTimeout(()=>{(async()=>{try{E(!0);const ct=We("",re.trim()),Ht=Wx(),hn=Wo(`${Ht}/${encodeURIComponent(e)}`),_t=Wo(`${Ht}/${encodeURIComponent(e)}/reports`),Sn=Wo(`${Ht}/${encodeURIComponent(e)}/usages`),[fn,yr,ar]=await Promise.all([cu(hn,{headers:ct}),cu(_t,{headers:ct}).catch(()=>[]),cu(Sn,{headers:ct}).catch(()=>[])]);m(fn);const rs=Array.isArray(yr)?yr.map(jn=>({id:jn.id,type:jn.type||"Rapport",date:jn.createdAt||jn.date||new Date().toISOString(),note:jn.description||jn.note||"",createdBy:jn.createdBy||jn.author||""})):[];y(rs),C(Array.isArray(ar)?ar:[])}catch{n({status:"error",title:"Accs refus"})}finally{E(!1)}})()},250)}finally{xe(!1)}},Be=async Le=>{try{const ct=Wx(),Ht=Wo(`${ct}/${encodeURIComponent(e)}/reports`),hn=await fetch(Ht[0],{method:"POST",headers:We(),body:JSON.stringify({description:Le?.note?`${Le.type||"vnement"}: ${Le.note}`:Le?.type||"vnement"})});if(!hn.ok){const fn=await hn.json().catch(()=>({error:"err"}));throw new Error(fn?.error||hn.statusText||"Erreur")}const _t=await hn.json(),Sn={id:_t.id,type:"Rapport",date:_t.createdAt||new Date().toISOString(),note:_t.description||"",createdBy:_t.createdBy||""};return y(fn=>[Sn,...fn]),n({status:"success",title:"vnement ajout"}),_t}catch(ct){throw console.error(ct),n({status:"error",title:"Impossible d'ajouter l'vnement",description:String(ct.message)}),ct}},ot=async Le=>{try{const ct=Wx(),Ht=Wo(`${ct}/${encodeURIComponent(e)}/usages`),hn=await fetch(Ht[0],{method:"POST",headers:We(),body:JSON.stringify(Le)});if(!hn.ok){const Sn=await hn.json().catch(()=>({error:"err"}));throw new Error(Sn?.error||hn.statusText||"Erreur")}const _t=await hn.json();return C(Sn=>[_t,...Sn]),_t}catch(ct){throw console.error(ct),n({status:"error",title:"Impossible d'ajouter l'usage",description:String(ct.message)}),ct}},vn=async(Le,ct)=>{try{const Ht=Wo(`usages/${encodeURIComponent(Le)}`),hn=await fetch(Ht[0],{method:"PUT",headers:We(),body:JSON.stringify(ct)});if(!hn.ok){const Sn=await hn.json().catch(()=>({error:"err"}));throw new Error(Sn?.error||hn.statusText||"Erreur")}const _t=await hn.json();return C(Sn=>Sn.map(fn=>fn.id===_t.id?_t:fn)),_t}catch(Ht){throw console.error(Ht),n({status:"error",title:"Impossible de mettre  jour l'usage",description:String(Ht.message)}),Ht}};return S?r.jsx(cn,{p:8,children:r.jsx(sn,{size:"lg"})}):r.jsxs(de,{p:4,maxW:"720px",mx:"auto",children:[p?r.jsxs(de,{children:[r.jsx(we,{size:"md",children:p.modele||`Parc ${p.parc}`}),r.jsx(O,{mt:1,opacity:.8,children:p.immat?`${p.immat}  Parc ${p.parc}`:`Parc ${p.parc}`}),r.jsxs(pa,{spacing:4,mt:6,children:[r.jsx(Y,{colorScheme:"red",onClick:()=>A(!0),children:"Signaler une anomalie"}),!Ve&&r.jsx(Y,{colorScheme:"orange",onClick:()=>{$(!1),M(!0)},children:"Dmarrer un pointage"}),Ve&&r.jsx(Y,{colorScheme:"green",onClick:()=>{$(!0),M(!0)},children:"Terminer le pointage"}),r.jsx(Y,{colorScheme:"blue",onClick:()=>te(!0),children:"Ajouter un vnement au vhicule"})]}),r.jsxs(de,{mt:6,children:[r.jsx(we,{size:"sm",mb:2,children:"Derniers vnements"}),r.jsxs(Q,{spacing:2,align:"stretch",children:[x.length===0&&r.jsx(O,{opacity:.7,children:"Aucun vnement"}),x.map(Le=>r.jsxs(de,{p:3,border:"1px solid #eee",borderRadius:"md",children:[r.jsxs(O,{fontSize:"sm",children:[r.jsx("b",{children:Le.type}),"  ",new Date(Le.date).toLocaleString()]}),Le.note&&r.jsx(O,{mt:1,fontSize:"sm",children:Le.note}),r.jsxs(O,{mt:1,fontSize:"xs",opacity:.7,children:["Ajout par ",Le.createdBy||""]})]},Le.id))]})]}),r.jsxs(de,{mt:6,children:[r.jsx(we,{size:"sm",mb:2,children:"Derniers passages"}),r.jsxs(Q,{spacing:2,align:"stretch",children:[b.length===0&&r.jsx(O,{opacity:.7,children:"Aucun passage"}),b.map(Le=>r.jsxs(de,{p:3,border:"1px solid #eee",borderRadius:"md",children:[r.jsxs(O,{fontSize:"sm",children:[Le.conducteur||"","  ",Le.km?`${Le.km} km`:"","  ",Le.durationMin?`${Le.durationMin} min`:""]}),Le.note&&r.jsx(O,{mt:1,fontSize:"sm",children:Le.note}),r.jsxs(O,{mt:1,fontSize:"xs",opacity:.7,children:["Ajout par ",Le.createdBy||""]})]},Le.id))]})]})]}):r.jsxs(de,{textAlign:"center",py:8,children:[r.jsx(we,{size:"md",children:"Accs restreint"}),r.jsx(O,{mt:2,opacity:.8,children:"Ce carnet est accessible uniquement via le QR code du vhicule ou aprs authentification."}),r.jsx(de,{mt:6,as:"form",onSubmit:bt,maxW:"360px",mx:"auto",children:r.jsxs(Q,{spacing:3,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Matricule"}),r.jsx(pe,{value:re,onChange:Le=>U(Le.target.value),placeholder:"ex: w.belaidi"})]}),r.jsxs(ne,{children:[r.jsx(Y,{colorScheme:"blue",onClick:bt,isLoading:oe,children:"Se connecter"}),r.jsx(Y,{variant:"ghost",onClick:()=>s(-1),children:"Retour"})]})]})}),r.jsx(O,{mt:4,fontSize:"sm",opacity:.8,children:"Astuce : scannez le QR sur le vhicule pour accder sans vous connecter."})]}),r.jsxs(mt,{isOpen:k,onClose:()=>A(!1),isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Signaler une anomalie"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsxs(O,{fontSize:"sm",opacity:.8,children:["Vhicule : ",r.jsx("b",{children:p?.parc})," ",p?.immat?` ${p.immat}`:""]}),r.jsxs(G,{children:[r.jsx(q,{children:"Type d'anomalie"}),r.jsx(pe,{id:"anom-type",placeholder:"ex: Frein / Porte / Moteur"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{id:"anom-note",placeholder:"Dcris l'anomalie..."})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:()=>A(!1),children:"Annuler"}),r.jsx(Y,{colorScheme:"red",onClick:async()=>{const Le=document.getElementById("anom-type")?.value||"Anomalie",ct=document.getElementById("anom-note")?.value||"";try{await Be({type:`Anomalie: ${Le}`,note:ct}),A(!1)}catch{}},children:"Signaler"})]})]})]}),r.jsxs(mt,{isOpen:T,onClose:()=>M(!1),isCentered:!0,onOverlayClick:()=>{},children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:D?"Terminer le pointage":"Dmarrer un pointage"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsxs(O,{fontSize:"sm",opacity:.8,children:["Vhicule : ",r.jsx("b",{children:p?.parc})," ",p?.immat?` ${p.immat}`:""]}),r.jsxs(G,{children:[r.jsx(q,{children:"Conducteur"}),r.jsx(pe,{id:"pass-conducteur",placeholder:"Nom ou matricule"})]}),!D&&r.jsxs(r.Fragment,{children:[r.jsxs(ne,{children:[r.jsxs(G,{children:[r.jsx(q,{children:"Date d'arrive"}),r.jsx(pe,{type:"date",value:Z,onChange:Le=>ke(Le.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Heure d'arrive"}),r.jsx(pe,{type:"time",value:Te,onChange:Le=>je(Le.target.value)})]})]}),ue&&r.jsxs(O,{fontSize:"sm",color:"gray.600",children:[" Arrive GPS: ",ue.lat.toFixed(5),",",ue.lng.toFixed(5)," (",Math.round(ue.accuracy),"m)"]})]}),D&&r.jsxs(r.Fragment,{children:[r.jsxs(ne,{children:[r.jsxs(G,{children:[r.jsx(q,{children:"Date de sortie"}),r.jsx(pe,{type:"date",value:Ke,onChange:Le=>Xe(Le.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Heure de sortie"}),r.jsx(pe,{type:"time",value:He,onChange:Le=>pt(Le.target.value)})]})]}),nt&&r.jsxs(O,{fontSize:"sm",color:"gray.600",children:[" Sortie GPS: ",nt.lat.toFixed(5),",",nt.lng.toFixed(5)," (",Math.round(nt.accuracy),"m)"]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Membres prsents"}),r.jsx(pe,{placeholder:"Rechercher un adhrent (nom, prnom, n)",value:B,onChange:Le=>fe(Le.target.value),onFocus:()=>{ie.length===0&&Oe()}}),r.jsxs(de,{mt:2,maxH:"180px",overflowY:"auto",border:"1px solid #eee",borderRadius:"md",p:2,children:[F&&r.jsx(cn,{py:3,children:r.jsx(sn,{size:"sm"})}),!F&&ie.filter(Le=>{if(!B.trim())return!0;const ct=B.toLowerCase();return[Le.firstName,Le.lastName,Le.memberNumber,Le.email].filter(Boolean).some(Ht=>String(Ht).toLowerCase().includes(ct))}).slice(0,50).map(Le=>{const ct=Le.id,Ht=I.includes(ct),hn=`${Le.lastName?.toUpperCase()||""} ${Le.firstName||""}${Le.memberNumber?`  ${Le.memberNumber}`:""}`.trim();return r.jsxs(ne,{py:1,spacing:3,children:[r.jsx("input",{type:"checkbox",checked:Ht,onChange:_t=>{ee(Sn=>_t.target.checked?[...Sn,ct]:Sn.filter(fn=>fn!==ct))}}),r.jsx(O,{fontSize:"sm",children:hn})]},ct)}),!F&&ie.length===0&&r.jsx(O,{fontSize:"sm",opacity:.7,children:"Aucun adhrent charg. Connectez-vous pour voir la liste."})]})]}),r.jsxs(ne,{children:[r.jsxs(G,{children:[r.jsx(q,{children:"Invit - Prnom"}),r.jsx(pe,{value:ae,onChange:Le=>P(Le.target.value),placeholder:"Prnom invit"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Invit - Nom"}),r.jsx(pe,{value:R,onChange:Le=>N(Le.target.value),placeholder:"Nom invit"})]})]}),D&&r.jsxs(G,{children:[r.jsx(q,{children:"Actions ralises"}),r.jsx(Gt,{value:De,onChange:Le=>Tt(Le.target.value),placeholder:"Dtaillez les actions ralises pendant le passage",rows:4})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:()=>M(!1),children:"Annuler"}),r.jsx(Y,{colorScheme:D?"green":"orange",onClick:async()=>{const Le=document.getElementById("pass-conducteur")?.value||"",Ht=ie.filter(ar=>I.includes(ar.id)).map(ar=>`${ar.firstName||""} ${ar.lastName||""}`.trim()).filter(Boolean),hn=ae||R?`Invit: ${[ae,R].filter(Boolean).join(" ")}`:"",_t=[Le?`Conducteur: ${Le}`:"",...Ht,hn].filter(Boolean).join("; "),Sn=(ar,rs)=>{if(!ar&&!rs)return null;const jn=ar||new Date().toISOString().split("T")[0],lr=rs||new Date().toTimeString().slice(0,5),[ss,jl,Sl]=jn.split("-").map(Number),[lo,co]=lr.split(":").map(Number);return new Date(ss,jl-1,Sl,lo,co,0).toISOString()},fn=Sn(Z,Te),yr=Ke||He?Sn(Ke,He):null;try{if(D){if(!Ve)throw new Error("Aucun pointage en cours");const ar=nt?`
Sortie GPS: ${nt.lat?.toFixed(5)},${nt.lng?.toFixed(5)} (${Math.round(nt.accuracy||0)}m)`:"",rs=De?`
Actions:
${De}`:"";await vn(Ve,{endedAt:yr||new Date().toISOString(),conducteur:Le||null,participants:_t||null,note:`${rs}${ar}`.trim()}),dn(null),n({status:"success",title:"Pointage termin"})}else{const ar=ue?`
Arrive GPS: ${ue.lat?.toFixed(5)},${ue.lng?.toFixed(5)} (${Math.round(ue.accuracy||0)}m)`:"",rs=await ot({startedAt:fn||new Date().toISOString(),conducteur:Le||null,participants:_t||null,note:ar||""});dn(rs?.id||null),n({status:"success",title:"Pointage dmarr"})}M(!1),ee([]),P(""),N(""),fe(""),ke(""),je(""),Xe(""),pt(""),Tt(""),Ee(null),X(null)}catch{}},children:"Signaler"})]})]})]}),r.jsxs(mt,{isOpen:W,onClose:()=>te(!1),isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Ajouter un vnement"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsxs(O,{fontSize:"sm",opacity:.8,children:["Vhicule : ",r.jsx("b",{children:p?.parc})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Type"}),r.jsx(pe,{id:"evt-type",placeholder:"ex: Rvision"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Note"}),r.jsx(Gt,{id:"evt-note",placeholder:"Dtails..."})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:()=>te(!1),children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:async()=>{const Le=document.getElementById("evt-type")?.value||"vnement",ct=document.getElementById("evt-note")?.value||"";try{await Be({type:Le,note:ct}),te(!1)}catch{}},children:"Ajouter"})]})]})]})]})}function ZL({value:e=[],onChange:t,uploadEndpoint:n,deleteEndpoint:s,authHeader:i}){const o=mn(),[l,u]=j.useState(!1),d=(x,y)=>{const b=[...e],C=x+y;C<0||C>=b.length||([b[x],b[C]]=[b[C],b[x]],t(b))},h=async x=>{if(!s){t(e.filter(y=>y!==x));return}try{const y=await fetch(s,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:i},body:JSON.stringify({image:x})});if(!y.ok)throw new Error;const b=await y.json();t(b.gallery||[])}catch{t(e.filter(y=>y!==x))}},p=async x=>{if(!x?.length)return;u(!0);const y=new FormData;[...x].forEach(b=>y.append("images",b)),console.log(" Upload debug:",{endpoint:n,filesCount:x.length,hasAuth:!!i});try{const b=await fetch(n,{method:"POST",headers:{Authorization:i},body:y});if(console.log(" Upload response:",{status:b.status,statusText:b.statusText,headers:Object.fromEntries(b.headers)}),!b.ok){const S=await b.text().catch(()=>"");throw console.error(" Upload failed:",b.status,S),o({status:"error",title:"chec upload",description:`Erreur ${b.status}: ${S||b.statusText}`}),new Error(`HTTP ${b.status}: ${S}`)}const C=await b.json();t(C.gallery||[]),o({status:"success",title:"Images ajoutes"})}catch(b){console.error("Upload error",b),o({status:"error",title:"chec upload",description:b.message||"Erreur rseau"})}finally{u(!1)}},m=x=>!x||x.startsWith("http://")||x.startsWith("https://")||x.startsWith("data:")||x.startsWith("blob:")?x:"https://attractive-kindness-rbe-serveurs.up.railway.app"+x;return r.jsxs(de,{children:[r.jsx(pe,{type:"file",multiple:!0,accept:"image/*",onChange:x=>p(x.target.files),isDisabled:l,mb:3}),e.length===0&&r.jsx(O,{fontSize:"sm",color:"gray.500",mb:2,children:"Aucune image dans la galerie."}),r.jsx(tt,{columns:{base:2,md:4},spacing:3,children:e.map((x,y)=>r.jsxs(de,{border:"1px solid",borderColor:"gray.200",borderRadius:"md",p:1,children:[r.jsx(ui,{src:m(x),w:"100%",h:"110px",objectFit:"cover",borderRadius:"sm"}),r.jsxs(ne,{mt:1,justify:"space-between",children:[r.jsxs(ne,{children:[r.jsx(et,{"aria-label":"Monter",icon:r.jsx(TE,{}),size:"xs",onClick:()=>d(y,-1),isDisabled:y===0}),r.jsx(et,{"aria-label":"Descendre",icon:r.jsx(AE,{}),size:"xs",onClick:()=>d(y,1),isDisabled:y===e.length-1})]}),r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(Yn,{}),size:"xs",colorScheme:"red",onClick:()=>h(x)})]})]},x+y))})]})}function yle({value:e=[],onChange:t}){const n=(o,l,u)=>{const d=[...e];d[o]={...d[o],[l]:u},t(d)},s=()=>t([...e||[],{label:"",value:""}]),i=o=>{const l=[...e];l.splice(o,1),t(l)};return r.jsxs(Q,{align:"stretch",spacing:3,children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(q,{mb:0,children:"Caractristiques"}),r.jsx(Y,{size:"xs",leftIcon:r.jsx(Pn,{}),onClick:s,children:"Ajouter"})]}),(e||[]).map((o,l)=>r.jsxs(ne,{align:"flex-start",children:[r.jsx(pe,{placeholder:"Label",value:o.label,onChange:u=>n(l,"label",u.target.value)}),r.jsx(pe,{placeholder:"Valeur",value:o.value,onChange:u=>n(l,"value",u.target.value)}),r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(cle,{}),size:"sm",onClick:()=>i(l)})]},l))]})}const ble="https://attractive-kindness-rbe-serveurs.up.railway.app";function vle(){const e=ha(),t=mn(),[n,s]=j.useState({parc:"",modele:"",marque:"",subtitle:"",etat:"disponible",immat:"",energie:"",miseEnCirculation:"",description:"",history:"",caracteristiques:[],gallery:[],isPublic:!1}),[i,o]=j.useState(!1),l=(d,h)=>s(p=>({...p,[d]:h})),u=async()=>{if(!n.parc.trim()){t({status:"error",title:"Parc requis"});return}o(!0);try{const d=await fetch(`${ble}/vehicles`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({parc:n.parc.trim(),modele:n.modele,marque:n.marque,subtitle:n.subtitle,etat:n.etat,immat:n.immat,energie:n.energie,miseEnCirculation:n.miseEnCirculation,description:n.description,history:n.history,caracteristiques:n.caracteristiques,gallery:n.gallery,isPublic:n.isPublic})});if(!d.ok){const p=await d.json();throw new Error(p.error||"Erreur cration")}const h=await d.json();t({status:"success",title:"Vhicule cr !",description:`Le vhicule ${n.parc} a t cr avec succs`}),e(`/dashboard/vehicules/${h.parc}`)}catch(d){console.error(" Erreur cration:",d),t({status:"error",title:"Erreur sauvegarde",description:d.message})}finally{o(!1)}};return r.jsxs(de,{p:8,children:[r.jsxs(ne,{mb:6,children:[r.jsx(Y,{as:"a",href:"/dashboard/vehicules",leftIcon:r.jsx(qL,{}),variant:"outline",children:"Retour"}),r.jsx(we,{children:" Crer un vhicule"})]}),r.jsxs(Q,{align:"stretch",spacing:6,children:[r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsx(we,{size:"md",children:" Identit du vhicule"}),r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Numro de parc"}),r.jsx(pe,{placeholder:"ex: 920",value:n.parc,onChange:d=>l("parc",d.target.value),fontWeight:"bold"}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:"Identifiant unique du vhicule"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Marque"}),r.jsx(pe,{placeholder:"ex: Mercedes-Benz",value:n.marque,onChange:d=>l("marque",d.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Modle"}),r.jsx(pe,{placeholder:"ex: Citaro",value:n.modele,onChange:d=>l("modele",d.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Sous-titre"}),r.jsx(pe,{placeholder:"ex: Un grand classique",value:n.subtitle,onChange:d=>l("subtitle",d.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Immatriculation"}),r.jsx(pe,{placeholder:"ex: FG-920-RE",value:n.immat,onChange:d=>l("immat",d.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"tat"}),r.jsx(pe,{placeholder:"ex: Disponible, Prserv, En restauration...",value:n.etat,onChange:d=>l("etat",d.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"nergie"}),r.jsx(pe,{placeholder:"ex: Diesel",value:n.energie,onChange:d=>l("energie",d.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Mise en circulation"}),r.jsx(pe,{type:"date",value:n.miseEnCirculation,onChange:d=>l("miseEnCirculation",d.target.value)})]})]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsx(we,{size:"md",children:" Descriptions"}),r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{rows:4,placeholder:"Description gnrale du vhicule...",value:n.description,onChange:d=>l("description",d.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Historique"}),r.jsx(Gt,{rows:5,placeholder:"Historique, anecdotes, restaurations...",value:n.history,onChange:d=>l("history",d.target.value)})]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsx(we,{size:"md",children:" Caractristiques techniques"}),r.jsx(yle,{value:n.caracteristiques,onChange:d=>l("caracteristiques",d)})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsx(we,{size:"md",children:" Galerie photos"}),r.jsx(ZL,{value:n.gallery,onChange:d=>l("gallery",d),parc:n.parc||"nouveau"})]})})}),r.jsx(Me,{bg:"blue.50",children:r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsx(we,{size:"md",children:" Publication"}),r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{mb:0,flex:1,children:"Afficher sur le site public"}),r.jsx(sr,{isChecked:n.isPublic,onChange:d=>l("isPublic",d.target.checked),size:"lg",colorScheme:"green"})]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:n.isPublic?" Ce vhicule sera visible sur le site public":" Ce vhicule n'est visible que par les administrateurs"})]})})}),r.jsx(rn,{}),r.jsxs(ne,{spacing:4,justify:"flex-end",children:[r.jsx(Y,{variant:"outline",onClick:()=>e("/dashboard/vehicules"),children:"Annuler"}),r.jsx(Y,{colorScheme:"green",leftIcon:r.jsx(xc,{}),isLoading:i,loadingText:"Cration...",onClick:u,size:"lg",children:"Crer le vhicule"})]})]})]})}const jle=window.location.origin;function Sle({etat:e}){const t={disponible:"green",en_panne:"red",maintenance:"orange",Service:"green",Prserv:"blue","A VENIR":"gray",Restauration:"orange"};return r.jsx(Ge,{colorScheme:t[e]||"purple",children:e})}function Cle({vehicle:e,parc:t,onChange:n,authHeader:s}){const{isOpen:i,onOpen:o,onClose:l}=jt(),u=j.useRef(),[d,h]=j.useState(!1),[p,m]=j.useState(null),[x,y]=j.useState(!1),b=mn(),C=async T=>{if(!T)return;h(!0);const M=new FormData;M.append("image",T);try{const D=await fetch(`https://attractive-kindness-rbe-serveurs.up.railway.app/vehicles/${t}/background`,{method:"POST",headers:{Authorization:s},body:M});if(!D.ok)throw new Error("Upload failed");const $=await D.json();n({backgroundImage:$.backgroundImage}),b({status:"success",title:"Image de fond mise  jour"})}catch{b({status:"error",title:"Erreur upload image de fond"})}finally{h(!1)}},S=async()=>{try{await ut.put(`/vehicles/${t}`,{backgroundImage:null,backgroundPosition:null}),n({backgroundImage:null,backgroundPosition:null}),b({status:"success",title:"Image de fond supprime"})}catch{b({status:"error",title:"Erreur suppression image de fond"})}},E=async T=>{const M=T.target.getBoundingClientRect(),D=(T.clientX-M.left)/M.width*100,$=(T.clientY-M.top)/M.height*100,W=`${D.toFixed(1)}% ${$.toFixed(1)}%`;m({x:D,y:$});try{await ut.put(`/vehicles/${t}`,{backgroundPosition:W}),n({backgroundPosition:W}),b({status:"success",title:"Position focale sauvegarde",description:W})}catch{b({status:"error",title:"Erreur sauvegarde position"})}},k=e.backgroundImage??null,A=k&&e.backgroundPosition||"center";return r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",cursor:"pointer",onClick:()=>y(!x),children:[r.jsx(we,{size:"md",children:" Image de fond Hero"}),r.jsxs(ne,{spacing:2,children:[k&&x&&r.jsx(Y,{leftIcon:r.jsx(Yn,{}),size:"sm",colorScheme:"red",variant:"outline",onClick:T=>{T.stopPropagation(),S()},children:"Supprimer"}),r.jsx(et,{icon:x?r.jsx(TE,{}):r.jsx(AE,{}),size:"sm",variant:"ghost","aria-label":x?"Replier":"Dplier"})]})]}),r.jsx(G2,{in:x,animateOpacity:!0,children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Gestion de l'image de fond plein cran pour la page publique"}),r.jsxs(ne,{children:[r.jsx(Y,{leftIcon:r.jsx(dle,{}),size:"sm",onClick:T=>{T.stopPropagation(),u.current?.click()},isLoading:d,colorScheme:"blue",children:"Changer le fond"}),k&&r.jsx(Y,{leftIcon:r.jsx(ale,{}),size:"sm",colorScheme:"orange",onClick:T=>{T.stopPropagation(),o()},children:"Position focale"})]})]}),r.jsx(pe,{ref:u,type:"file",accept:"image/*",onChange:T=>C(T.target.files[0]),display:"none"}),k&&r.jsxs(de,{borderRadius:"md",overflow:"hidden",bg:"gray.100",border:"1px solid",borderColor:"gray.200",children:[r.jsx(ui,{src:k,alt:"Aperu image de fond",w:"100%",h:"200px",objectFit:"cover",objectPosition:A}),r.jsxs(O,{fontSize:"sm",color:"gray.600",p:2,bg:"gray.50",children:[" Position focale : ",A]})]}),!k&&r.jsxs(de,{borderRadius:"md",border:"2px dashed",borderColor:"gray.300",p:8,textAlign:"center",bg:"gray.50",children:[r.jsx(O,{color:"gray.500",mb:2,children:"Aucune image de fond dfinie"}),r.jsx(O,{fontSize:"sm",color:"gray.400",children:"La premire image de la galerie sera utilise par dfaut"})]})]})}),r.jsxs(mt,{isOpen:i,onClose:l,size:"4xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:" Ajuster la position focale"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsx(O,{color:"gray.600",children:"Cliquez sur l'image pour dfinir le point focal qui sera visible sur la page publique"}),k&&r.jsxs(de,{position:"relative",borderRadius:"md",overflow:"hidden",children:[r.jsx(ui,{src:k,alt:"Rglage position focale",w:"100%",h:"400px",objectFit:"cover",cursor:"crosshair",onClick:E}),p&&r.jsx(de,{position:"absolute",left:`${p.x}%`,top:`${p.y}%`,transform:"translate(-50%, -50%)",w:"20px",h:"20px",borderRadius:"50%",bg:"red.500",border:"2px solid white",boxShadow:"0 0 0 2px red.500",zIndex:1})]}),r.jsxs(O,{fontSize:"sm",color:"gray.500",mb:4,children:[" Position actuelle : ",A]})]})})]})]})]})}function wle(){const{parc:e}=Jy(),t=ha(),n=mn(),[s,i]=j.useState(!0),[o,l]=j.useState(!1),[u,d]=j.useState(null),[h,p]=j.useState({}),[m,x]=j.useState([]),y={marque:"Mercedes-Benz",modele:"Citaro ",subtitle:"Citaro 1 |  II |  | ",etat:"Prserv",type:"Bus",immat:"FG-920-RE",energie:"Diesel",miseEnCirculation:"2001-07-01",numerosFlotte:"592 / 720 / X / 920",constructeur:"Mercedes-Benz",longueur:"11,95 m",placesAssises:"32",placesDebout:"64",ufr:"1",statut:"Prserv",preservePar:"Association RtroBus Essonne",normeEuro:"Euro II",moteur:"Mercedes-Benz OM906hLA - 279 ch",boiteVitesses:"Automatique ZF5HP-502C",nombrePortes:"2",livree:"Grise",girouette:"Duhamel LED Oranges + Pastilles Vertes",climatisation:"Complte",description:"Ce vhicule est un exemple emblmatique de la gamme Citaro de premire gnration. Mis en service commercial en juillet 2001, il reprsente l'volution technologique des transports urbains du dbut des annes 2000. quip d'une climatisation complte et accessible aux personnes  mobilit rduite.",history:"Le Mercedes-Benz Citaro est un autobus urbain produit par Daimler AG depuis 1997. Ce modle a rvolutionn les transports publics europens avec son design moderne et ses innovations techniques. Notre exemplaire FG-920-RE a t command par Cars Bridet  Wissous pour le rseau du Palladin et mis en service en juillet 2001. Au cours de sa carrire, il a port successivement les numros 592, 720, X, puis 920. Il a assur la desserte Le Palladin jusqu'en aot 2014. Aprs plusieurs annes de service fidle, il est pass brivement par Brtigny en 2018, puis a rejoint Transdev STRAV  Limeil-Brvannes, avant d'tre exploit par Cars Sur. En mai 2025, ce vhicule historique a trouv sa place au sein de la collection de l'association RtroBus Essonne, o il tmoigne de l'volution du transport public francilien au dbut du XXIe sicle.",caracteristiques:[{label:"Numros de flotte",value:"592 / 720 / X / 920"},{label:"Constructeur",value:"Mercedes-Benz"},{label:"Modle",value:"Citaro "},{label:"Immatriculation",value:"FG-920-RE"},{label:"Mise en circulation",value:"juillet 2001"},{label:"Longueur",value:"11,95 m"},{label:"Places assises",value:"32"},{label:"Places debout",value:"64"},{label:"UFR",value:"1"},{label:"Statut",value:"Prserv"},{label:"Prserv par",value:"Association RtroBus Essonne"},{label:"nergie",value:"Diesel"},{label:"Norme Euro",value:"Euro II"},{label:"Moteur",value:"Mercedes-Benz OM906hLA - 279 ch"},{label:"Bote de vitesses",value:"Automatique ZF5HP-502C"},{label:"Nombre de portes",value:"2"},{label:"Livre",value:"Grise"},{label:"Girouette",value:"Duhamel LED Oranges + Pastilles Vertes"},{label:"Climatisation",value:"Complte"}]},b=j.useCallback(async()=>{if(e){i(!0);try{const A=await ut.get(`/vehicles/${e}`);d(A);try{const M=await ut.get(`/vehicles/${e}/usages`);x(Array.isArray(M)?M:[])}catch{x([])}const T={...y,...A,caracteristiques:A.caracteristiques&&A.caracteristiques.length>0?A.caracteristiques:y.caracteristiques,description:A.description||y.description,history:A.history||y.history};p(T)}catch(A){n({status:"error",title:A.message||"Erreur chargement"}),t("/dashboard/vehicules")}finally{i(!1)}}},[e,n,t]);j.useEffect(()=>{b()},[b]);const C=j.useCallback(()=>{const A=[{label:"Numros de flotte",value:h.numerosFlotte||""},{label:"Constructeur",value:h.constructeur||""},{label:"Modle",value:h.modele||""},{label:"Immatriculation",value:h.immat||""},{label:"Mise en circulation",value:h.miseEnCirculation?"juillet 2001":""},{label:"Longueur",value:h.longueur||""},{label:"Places assises",value:h.placesAssises||""},{label:"Places debout",value:h.placesDebout||""},{label:"UFR",value:h.ufr||""},{label:"Statut",value:h.statut||""},{label:"Prserv par",value:h.preservePar||""},{label:"nergie",value:h.energie||""},{label:"Norme Euro",value:h.normeEuro||""},{label:"Moteur",value:h.moteur||""},{label:"Bote de vitesses",value:h.boiteVitesses||""},{label:"Nombre de portes",value:h.nombrePortes||""},{label:"Livre",value:h.livree||""},{label:"Girouette",value:h.girouette||""},{label:"Climatisation",value:h.climatisation||""}].filter(T=>T.value);p(T=>({...T,caracteristiques:A}))},[h.numerosFlotte,h.constructeur,h.modele,h.immat,h.miseEnCirculation,h.longueur,h.placesAssises,h.placesDebout,h.ufr,h.statut,h.preservePar,h.energie,h.normeEuro,h.moteur,h.boiteVitesses,h.nombrePortes,h.livree,h.girouette,h.climatisation]);j.useEffect(()=>{C()},[C]);const S=async()=>{try{l(!0);const A=h.statut||h.etat;await ut.put(`/vehicles/${e}`,{etat:A,marque:h.marque,modele:h.modele,type:h.type,immat:h.immat,energie:h.energie,miseEnCirculation:h.miseEnCirculation,subtitle:h.subtitle,description:h.description,history:h.history,caracteristiques:h.caracteristiques,gallery:h.gallery,backgroundImage:h.backgroundImage,backgroundPosition:h.backgroundPosition,isPublic:h.isPublic!==void 0?h.isPublic:u?.isPublic||!1,numerosFlotte:h.numerosFlotte,constructeur:h.constructeur,longueur:h.longueur,placesAssises:h.placesAssises,placesDebout:h.placesDebout,ufr:h.ufr,statut:h.statut,preservePar:h.preservePar,normeEuro:h.normeEuro,moteur:h.moteur,boiteVitesses:h.boiteVitesses,nombrePortes:h.nombrePortes,livree:h.livree,girouette:h.girouette,climatisation:h.climatisation}),n({status:"success",title:" Sauvegard avec succs",description:"Visible sur la page publique"}),b()}catch{n({status:"error",title:" Erreur sauvegarde"})}finally{l(!1)}},E=A=>{d(T=>({...T,...A})),p(T=>({...T,...A}))},k=()=>{p(A=>({...A,...y,parc:A.parc,id:A.id,createdAt:A.createdAt,updatedAt:A.updatedAt,gallery:A.gallery,backgroundImage:A.backgroundImage,backgroundPosition:A.backgroundPosition})),n({status:"info",title:" Donnes par dfaut restaures",description:"N'oubliez pas de sauvegarder"})};return s?r.jsx(cn,{h:"60vh",children:r.jsx(sn,{size:"xl"})}):u?(u.marque?`${u.marque}${u.modele}`:u.modele,r.jsxs(de,{p:8,children:[r.jsxs(qn,{align:"center",justify:"space-between",mb:6,children:[r.jsxs(ne,{children:[r.jsx(Y,{leftIcon:r.jsx(qL,{}),variant:"ghost",onClick:()=>t("/dashboard/vehicules"),children:"Retour"}),r.jsxs(we,{size:"lg",children:[" dition vhicule ",u.parc]}),r.jsx(Sle,{etat:u.etat})]}),r.jsxs(ne,{children:[r.jsx(Y,{size:"sm",variant:"outline",onClick:k,children:" Donnes par dfaut"}),r.jsx(Y,{leftIcon:r.jsx(KL,{}),colorScheme:"blue",variant:"outline",onClick:()=>window.open(jle+"/vehicles/"+e,"_blank"),children:" Voir la page publique"})]})]}),r.jsxs(Q,{spacing:8,align:"stretch",children:[r.jsx(de,{bg:"blue.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"blue.200",children:r.jsx(Cle,{vehicle:u,parc:e,onChange:E,authHeader:`Bearer ${localStorage.getItem("token")}`})}),r.jsxs(de,{bg:"gray.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"gray.200",children:[r.jsxs(qn,{justify:"space-between",align:"center",mb:4,children:[r.jsx(we,{size:"md",children:" Informations principales"}),r.jsxs(G,{display:"flex",alignItems:"center",w:"auto",children:[r.jsxs(q,{htmlFor:"isPublic",mb:"0",mr:3,fontWeight:"bold",children:[h.isPublic?" Visible":" Cach"," sur le site public:"]}),r.jsx(sr,{id:"isPublic",isChecked:h.isPublic||!1,onChange:A=>p(T=>({...T,isPublic:A.target.checked})),colorScheme:h.isPublic?"green":"red",size:"lg"})]})]}),r.jsxs(tt,{columns:{base:1,md:2,lg:4},spacing:4,mb:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Parc"}),r.jsx(pe,{value:u.parc,isReadOnly:!0,bg:"gray.100"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Numros de flotte"}),r.jsx(pe,{value:h.numerosFlotte||"",onChange:A=>p(T=>({...T,numerosFlotte:A.target.value})),placeholder:"592 / 720 / X / 920"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Constructeur"}),r.jsx(pe,{value:h.constructeur||"",onChange:A=>p(T=>({...T,constructeur:A.target.value})),placeholder:"Mercedes-Benz"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Modle"}),r.jsx(pe,{value:h.modele||"",onChange:A=>p(T=>({...T,modele:A.target.value})),placeholder:"Citaro "})]})]}),r.jsxs(tt,{columns:{base:1,md:2,lg:4},spacing:4,mb:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Immatriculation"}),r.jsx(pe,{value:h.immat||"",onChange:A=>p(T=>({...T,immat:A.target.value})),placeholder:"FG-920-RE"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Mise en circulation"}),r.jsx(pe,{type:"date",value:h.miseEnCirculation?new Date(h.miseEnCirculation).toISOString().split("T")[0]:"",onChange:A=>p(T=>({...T,miseEnCirculation:A.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Longueur"}),r.jsx(pe,{value:h.longueur||"",onChange:A=>p(T=>({...T,longueur:A.target.value})),placeholder:"11,95 m"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Places assises"}),r.jsx(pe,{value:h.placesAssises||"",onChange:A=>p(T=>({...T,placesAssises:A.target.value})),placeholder:"32"})]})]}),r.jsxs(tt,{columns:{base:1,md:2,lg:4},spacing:4,mb:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Places debout"}),r.jsx(pe,{value:h.placesDebout||"",onChange:A=>p(T=>({...T,placesDebout:A.target.value})),placeholder:"64"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"UFR"}),r.jsx(pe,{value:h.ufr||"",onChange:A=>p(T=>({...T,ufr:A.target.value})),placeholder:"1"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Statut"}),r.jsxs(Qe,{value:h.statut||"",onChange:A=>p(T=>({...T,statut:A.target.value})),children:[r.jsx("option",{value:"Prserv",children:"Prserv"}),r.jsx("option",{value:"Service",children:"Service"}),r.jsx("option",{value:"disponible",children:"Disponible"}),r.jsx("option",{value:"en_panne",children:"En panne"}),r.jsx("option",{value:"maintenance",children:"Maintenance"}),r.jsx("option",{value:"A VENIR",children:"A venir"}),r.jsx("option",{value:"Restauration",children:"Restauration"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"nergie"}),r.jsxs(Qe,{value:h.energie||"",onChange:A=>p(T=>({...T,energie:A.target.value})),children:[r.jsx("option",{value:"Diesel",children:"Diesel"}),r.jsx("option",{value:"lectrique",children:"lectrique"}),r.jsx("option",{value:"Hybride",children:"Hybride"}),r.jsx("option",{value:"GNV",children:"GNV"})]})]})]}),r.jsx(tt,{columns:{base:1,md:1},spacing:4,mb:4,children:r.jsxs(G,{children:[r.jsx(q,{children:"Prserv par"}),r.jsx(pe,{value:h.preservePar||"",onChange:A=>p(T=>({...T,preservePar:A.target.value})),placeholder:"Association RtroBus Essonne"})]})}),r.jsxs(tt,{columns:{base:1,md:2,lg:3},spacing:4,mb:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Norme Euro"}),r.jsx(pe,{value:h.normeEuro||"",onChange:A=>p(T=>({...T,normeEuro:A.target.value})),placeholder:"Euro II"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Moteur"}),r.jsx(pe,{value:h.moteur||"",onChange:A=>p(T=>({...T,moteur:A.target.value})),placeholder:"Mercedes-Benz OM906hLA - 279 ch"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Bote de vitesses"}),r.jsx(pe,{value:h.boiteVitesses||"",onChange:A=>p(T=>({...T,boiteVitesses:A.target.value})),placeholder:"Automatique ZF5HP-502C"})]})]}),r.jsxs(tt,{columns:{base:1,md:2,lg:4},spacing:4,mb:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Nombre de portes"}),r.jsx(pe,{value:h.nombrePortes||"",onChange:A=>p(T=>({...T,nombrePortes:A.target.value})),placeholder:"2"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Livre"}),r.jsx(pe,{value:h.livree||"",onChange:A=>p(T=>({...T,livree:A.target.value})),placeholder:"Grise"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Girouette"}),r.jsx(pe,{value:h.girouette||"",onChange:A=>p(T=>({...T,girouette:A.target.value})),placeholder:"Duhamel LED Oranges + Pastilles Vertes"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Climatisation"}),r.jsx(pe,{value:h.climatisation||"",onChange:A=>p(T=>({...T,climatisation:A.target.value})),placeholder:"Complte"})]})]}),r.jsxs(G,{mt:4,children:[r.jsx(q,{children:"Sous-titre (badges affichs)"}),r.jsx(pe,{value:h.subtitle||"",onChange:A=>p(T=>({...T,subtitle:A.target.value})),placeholder:"Citaro 1 |  II |  | "}),r.jsx(O,{fontSize:"sm",color:"gray.600",mt:1,children:'Exemple avec mojis : "Citaro 1 |  II |  | "'})]}),r.jsx(Me,{mt:6,bg:"blue.50",borderWidth:"2px",borderColor:"blue.200",children:r.jsx(Ae,{children:r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{mb:0,flex:1,children:r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"bold",children:" Afficher sur le site public"}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:u?.isPublic?" Ce vhicule est visible par tous":" Ce vhicule n'est visible que par les administrateurs"})]})}),r.jsx(sr,{isChecked:u?.isPublic||!1,onChange:A=>d(T=>({...T,isPublic:A.target.checked})),size:"lg",colorScheme:"green"})]})})}),r.jsx(O,{fontSize:"xs",color:"blue.600",mt:4,fontStyle:"italic",children:" Les caractristiques techniques sont automatiquement mises  jour en fonction des champs ci-dessus"})]}),r.jsxs(de,{bg:"green.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"green.200",children:[r.jsx(we,{size:"md",mb:4,children:" Textes descriptifs"}),r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{value:h.description||"",onChange:A=>p(T=>({...T,description:A.target.value})),rows:4,placeholder:"Ce vhicule est un exemple emblmatique..."}),r.jsx(O,{fontSize:"xs",color:"gray.600",mt:1,children:'Apparat dans la section "Description" sur la page publique'})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Histoire"}),r.jsx(Gt,{value:h.history||"",onChange:A=>p(T=>({...T,history:A.target.value})),rows:6,placeholder:"Le Mercedes-Benz Citaro est un autobus urbain..."}),r.jsx(O,{fontSize:"xs",color:"gray.600",mt:1,children:'Apparat dans la section "Histoire" sur la page publique'})]})]})]}),r.jsxs(de,{bg:"purple.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"purple.200",children:[r.jsx(we,{size:"md",mb:4,children:" Galerie photos"}),r.jsx(ZL,{value:h.gallery||[],onChange:A=>p(T=>({...T,gallery:A})),uploadEndpoint:`https://attractive-kindness-rbe-serveurs.up.railway.app/vehicles/${e}/gallery`,deleteEndpoint:`https://attractive-kindness-rbe-serveurs.up.railway.app/vehicles/${e}/gallery`,authHeader:`Bearer ${localStorage.getItem("token")}`}),r.jsx(O,{fontSize:"sm",color:"gray.600",mt:2,children:"La premire image peut servir de fond si aucune image de fond spcifique n'est dfinie. Les autres images apparaissent dans le carrousel."})]}),r.jsxs(de,{bg:"orange.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"orange.200",children:[r.jsx(we,{size:"md",mb:4,children:" Carnet de suivi"}),!m?.length&&r.jsx(O,{color:"gray.600",children:"Aucun passage enregistr pour ce vhicule."}),r.jsx(Q,{align:"stretch",spacing:3,divider:r.jsx(rn,{}),mt:m?.length?2:0,children:m.map(A=>r.jsxs(de,{children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(O,{fontWeight:"bold",children:A.conducteur||""}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:A.startedAt?new Date(A.startedAt).toLocaleString():""})]}),A.participants&&r.jsx(O,{mt:1,fontSize:"sm",children:A.participants}),A.note&&r.jsx(O,{mt:1,fontSize:"sm",color:"gray.700",children:A.note})]},A.id))})]}),r.jsxs(de,{bg:"orange.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"orange.200",children:[r.jsx(we,{size:"md",mb:4,children:" Carnet de suivi"}),!m?.length&&r.jsx(O,{color:"gray.600",children:"Aucun passage enregistr pour ce vhicule."}),r.jsx(Q,{align:"stretch",spacing:3,divider:r.jsx(rn,{}),mt:m?.length?2:0,children:m.map(A=>{const T=A.startedAt?new Date(A.startedAt):null,M=A.endedAt?new Date(A.endedAt):null,D=T&&M?Math.round((M-T)/6e4):null;return r.jsxs(de,{children:[r.jsxs(ne,{justify:"space-between",align:"start",children:[r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontWeight:"bold",children:A.conducteur||""}),A.participants&&r.jsx(O,{mt:1,fontSize:"sm",children:A.participants})]}),r.jsxs(Q,{align:"end",spacing:0,children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:T?T.toLocaleString():""}),M&&r.jsxs(O,{fontSize:"sm",color:"gray.600",children:[" ",M.toLocaleString()," ",D!=null?`(${D} min)`:""]})]})]}),A.note&&r.jsx(O,{mt:2,fontSize:"sm",whiteSpace:"pre-wrap",children:A.note})]},A.id)})})]}),r.jsxs(de,{textAlign:"center",py:4,children:[r.jsx(Y,{leftIcon:r.jsx(xc,{}),colorScheme:"blue",size:"lg",onClick:S,isLoading:o,loadingText:"Sauvegarde en cours...",children:" Sauvegarder toutes les modifications"}),r.jsx(O,{fontSize:"sm",color:"gray.600",mt:2,children:"Les modifications seront visibles immdiatement sur la page publique"})]})]})]})):null}const Lm=({title:e,subtitle:t,breadcrumbs:n=[],children:s,headerActions:i,bgGradient:o,maxW:l="container.xl",titleSize:u="2xl",titleWeight:d="800",headerVariant:h="full"})=>{const p=ir(o||"linear(to-r, rbe.600, rbe.800)","linear(to-r, rbe.700, rbe.900)");return r.jsxs(de,{minH:"100vh",fontFamily:"Montserrat, system-ui, sans-serif",children:[h==="full"?r.jsxs(de,{bgGradient:p,color:"white",py:{base:12,md:16},position:"relative",overflow:"hidden",children:[r.jsx(de,{position:"absolute",inset:0,bgGradient:"radial(circle at 30% 30%, whiteAlpha.200, transparent 50%)",pointerEvents:"none"}),r.jsx(Ws,{maxW:l,position:"relative",children:r.jsxs(Q,{spacing:6,align:"stretch",children:[n.length>0&&r.jsx(bC,{separator:r.jsx(iy,{color:"whiteAlpha.700"}),color:"whiteAlpha.800",fontSize:"sm",children:n.map((m,x)=>r.jsx(jC,{children:r.jsx(J0,{as:$n,to:m.href,_hover:{color:"white"},children:m.label})},x))}),r.jsxs(Q,{spacing:4,textAlign:"center",children:[r.jsx(we,{as:"h1",size:u,fontWeight:d,letterSpacing:"-0.025em",textShadow:"0 2px 4px rgba(0,0,0,0.1)",children:e}),t&&r.jsx(O,{fontSize:{base:"lg",md:"xl"},opacity:.9,maxW:"2xl",lineHeight:"relaxed",children:t}),i&&r.jsx(de,{pt:4,children:i})]})]})})]}):r.jsxs(Ws,{maxW:l,py:{base:6,md:8},children:[n.length>0&&r.jsx(bC,{separator:r.jsx(iy,{}),color:ir("gray.600","gray.300"),fontSize:"sm",mb:4,children:n.map((m,x)=>r.jsx(jC,{children:r.jsx(J0,{as:$n,to:m.href,children:m.label})},x))}),r.jsxs(de,{bgGradient:p,color:"white",p:{base:6,md:8},borderRadius:"xl",textAlign:"center",boxShadow:"lg",children:[r.jsx(we,{as:"h1",size:u,fontWeight:d,letterSpacing:"-0.02em",children:e}),t&&r.jsx(O,{mt:2,opacity:.9,fontSize:{base:"md",md:"lg"},children:t}),i&&r.jsx(de,{pt:4,children:i})]})]}),r.jsx(Ws,{maxW:l,py:{base:8,md:12},children:s})]})},el=({title:e,description:t,icon:n,badge:s,children:i,variant:o="modern",color:l="gray",onClick:u,...d})=>{const h=ir("white","gray.800"),p=ir("gray.200","gray.600"),m=ir("0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2)");return r.jsxs(Me,{variant:o,bg:h,borderColor:p,cursor:u?"pointer":"default",onClick:u,_hover:u?{boxShadow:m,transform:"translateY(-4px)",borderColor:`${l}.300`}:{},transition:"all 0.3s ease-out",...d,children:[(e||n||s)&&r.jsx(Ct,{pb:t?3:6,children:r.jsxs(ne,{justify:"space-between",align:"start",children:[r.jsxs(ne,{spacing:3,flex:1,children:[n&&r.jsx(Wn,{as:n,color:`${l}.600`,boxSize:6,flexShrink:0}),r.jsxs(Q,{align:"start",spacing:1,flex:1,children:[r.jsx(we,{size:"md",color:"gray.700",fontWeight:"600",children:e}),t&&r.jsx(O,{variant:"description",fontSize:"sm",children:t})]})]}),s&&r.jsx(Ge,{colorScheme:s.color||l,variant:"subtle",children:s.label})]})}),i&&r.jsx(Ae,{pt:e?0:6,children:i})]})},W1=[{title:"RtroBus",description:"Mcanique, vhicules et maintenance",to:"/dashboard/retrobus",icon:lle,color:"teal"},{title:"Gestion Financire",description:"Recettes, dpenses et oprations programmes",to:"/admin/finance",icon:Zu,color:"rbe"},{title:"Gestion des vnements",description:"Cration, planification et suivi",to:"/dashboard/events-management",icon:si,color:"green"},{title:"Grer les adhsions",description:"Membres, cotisations et documents",to:"/dashboard/members-management",icon:wi,color:"blue"},{title:"Gestion des Stocks",description:"Inventaire et matriel de l'association",to:"/dashboard/stock-management",icon:oy,color:"yellow"},{title:"Gestion Newsletter",description:"Abonns et campagnes d'envoi",to:"/dashboard/newsletter",icon:Tc,color:"purple"},{title:"RtroPlanning",description:"Calendrier centralis: campagnes, tournes, affectations",to:"/dashboard/retroplanning",icon:si,color:"orange"},{title:"Gestion du Site",description:"Changelog, contenu et mise  jour",to:"/dashboard/site-management",icon:Ph,color:"pink"},{title:"Retromail",description:"Messagerie interne de l'quipe",to:"/retromail",icon:Jae,color:"teal"},{title:"RtroSupport",description:"Tickets: incidents, bugs et amliorations",to:"/dashboard/support",icon:Zae,color:"cyan"}];function Ele(){const e=ir("blue.50","blue.900"),t=ir("blue.500","blue.300"),{user:n,customPermissions:s}=Cs(),i=n?.role||"MEMBER";let o=W1;return i==="PRESTATAIRE"?o=W1.filter(l=>l.title==="RtroPlanning"||l.title==="RtroSupport"):o=W1.filter(l=>{const d={RtroBus:Pr.VEHICLES,"Gestion Financire":Pr.FINANCE,"Gestion des vnements":Pr.EVENTS,"Grer les adhsions":Pr.MEMBERS,"Gestion des Stocks":Pr.STOCK,"Gestion Newsletter":Pr.NEWSLETTER,RtroPlanning:Pr.RETROPLANNING,"Gestion du Site":Pr.SITE_MANAGEMENT,Retromail:Pr.RETROMAIL,RtroSupport:Pr.RETROSUPPORT}[l.title];return!d||Ya(i,d,s)}),r.jsx(Lm,{title:"Espace MyRBE",subtitle:"Les outils d'administration RtroBus Essonne",headerVariant:"card",bgGradient:"linear(to-r, blue.500, purple.600)",titleSize:"xl",titleWeight:"700",breadcrumbs:[{label:"Dashboard",href:"/dashboard/home"},{label:"MyRBE",href:"/dashboard/myrbe"}],children:r.jsxs(Q,{spacing:8,align:"stretch",children:[r.jsx(tt,{columns:{base:1,md:2,lg:3},spacing:6,children:o.map(l=>r.jsx(el,{title:l.title,description:l.description,icon:l.icon,color:l.color,badge:l.badge,as:$n,to:l.to,onClick:()=>{}},l.title))}),r.jsxs(Q,{spacing:6,children:[r.jsx(de,{bg:e,p:6,borderRadius:"xl",borderLeft:"4px solid",borderLeftColor:t,w:"full",children:r.jsxs(Q,{spacing:3,align:"start",children:[r.jsx(ne,{children:r.jsx(O,{fontSize:"lg",fontWeight:"600",color:"blue.700",children:" Guide d'utilisation"})}),r.jsx(O,{color:"blue.600",lineHeight:"relaxed",fontSize:"sm",children:"Toutes ces fonctionnalits sont connectes aux donnes relles de l'association. Les modifications que vous effectuez sont automatiquement sauvegardes et synchronises avec les autres membres de l'quipe."}),r.jsxs(ne,{spacing:3,pt:2,children:[r.jsx(Y,{size:"sm",variant:"secondary",colorScheme:"blue",children:"Guide complet"}),r.jsx(Y,{size:"sm",variant:"modern",as:$n,to:"/dashboard/support",children:"Support technique"})]})]})}),r.jsxs(tt,{columns:{base:2,md:4},spacing:4,w:"full",children:[r.jsx(el,{title:"Uptime",description:"99.9%",color:"green",variant:"modern"}),r.jsx(el,{title:"Membres actifs",description:"45",color:"blue",variant:"modern"}),r.jsx(el,{title:"Dernire sync",description:"Il y a 2 min",color:"gray",variant:"modern"}),r.jsx(el,{title:"Version",description:"v2.1.3",color:"purple",variant:"modern"})]})]})]})})}const tc="https://attractive-kindness-rbe-serveurs.up.railway.app",nN=[{matricule:"w.belaidi",label:"Waiyl Belaidi"},{matricule:"m.ravichandran",label:"Mthusan Ravichandran"}];function rN(e,t){return`pointage:${e}:${t}`}function kle(e){try{const t="rbe:reports:local",n=localStorage.getItem(t),s=n?JSON.parse(n):[];return s.unshift(e),localStorage.setItem(t,JSON.stringify(s)),!0}catch(t){return console.error("saveLocalReport failed",t),!1}}function Ale(){const{parc:e}=Jy(),t=mn(),{matricule:n,prenom:s}=Cs(),[i,o]=j.useState(null),[l,u]=j.useState(!0),[d,h]=j.useState(nN),[p,m]=j.useState(""),[x,y]=j.useState([]),[b,C]=j.useState(null),[S,E]=j.useState(!1),[k,A]=j.useState(!1),[T,M]=j.useState(!1),[D,$]=j.useState(""),[W,te]=j.useState(""),[re,U]=j.useState(!1),[oe,xe]=j.useState(""),[ie,H]=j.useState([]),[F,_]=j.useState(!1),[B,fe]=j.useState(null);j.useEffect(()=>{let je=!1;return(async()=>{try{u(!0);const Ke=await fetch(`${tc}/vehicles/${encodeURIComponent(e)}`);if(!Ke.ok)throw new Error("Vhicule introuvable");const Xe=await Ke.json();je||o(Xe)}catch(Ke){console.error(Ke),t({status:"error",title:"Impossible de charger le vhicule",description:String(Ke.message)})}finally{je||u(!1)}})(),()=>{je=!0}},[e,t]),j.useEffect(()=>{n&&n.trim()?(m(n),d.some(je=>je.matricule===n)||h(je=>[{matricule:n,label:s?`${s} (${n})`:n},...je])):p||m(nN[0].matricule)},[n,s]),j.useEffect(()=>{if(!p)return;const je=rN(e,p);try{const Ke=localStorage.getItem(je);if(Ke){const Xe=JSON.parse(Ke);C(Xe)}else C(null)}catch(Ke){console.warn("failed reading pointage from storage",Ke)}},[e,p]);const I=je=>{const Ke=rN(e,p);if(je)try{localStorage.setItem(Ke,JSON.stringify(je))}catch(Xe){console.warn("persistActiveLocal failed",Xe)}else try{localStorage.removeItem(Ke)}catch(Xe){console.warn("persistActiveLocal remove failed",Xe)}},ee=je=>{try{return new Date(je).toLocaleString()}catch{return je}},ae=()=>{const je=D.trim();if(!je)return t({status:"warning",title:"Matricule requis"});if(je===p)return $(""),t({status:"info",title:"C'est dj le membre principal"});if(x.includes(je))return $(""),t({status:"info",title:"Participant dj ajout"});y(Ke=>[...Ke,je]),d.some(Ke=>Ke.matricule===je)||h(Ke=>[{matricule:je,label:je},...Ke]),$(""),t({status:"success",title:"Participant ajout"})},P=je=>{y(Ke=>Ke.filter(Xe=>Xe!==je))},R=async()=>{E(!0);try{try{if(!(await fetch(`${tc}/health`)).ok){t({status:"error",title:"API indisponible",description:"Le serveur est indisponible  le pointage informatique est dsactiv."}),E(!1);return}}catch{t({status:"error",title:"API indisponible",description:"Impossible de joindre le serveur  le pointage informatique est dsactiv."}),E(!1);return}const je=[...x],Ke={conducteur:p||null,participants:je,note:"pointage:start",startedAt:new Date().toISOString()},Xe=await fetch(`${tc}/vehicles/${encodeURIComponent(e)}/usages`,{method:"POST",headers:{"Content-Type":"application/json","x-user-matricule":p||""},body:JSON.stringify(Ke)});if(!Xe.ok){let De=null;try{De=await Xe.json()}catch{De=await Xe.text().catch(()=>null)}console.warn("startPointage server error",Xe.status,De),t({status:"error",title:"chec du pointage",description:De?.error||`Erreur serveur (${Xe.status})`}),E(!1);return}const He=await Xe.json(),pt={id:He.id||`local-${Date.now()}`,startedAt:He.startedAt||Ke.startedAt,conducteur:Ke.conducteur,participants:Ke.participants||[]};C(pt),I(pt),t({status:"success",title:"Pointage dmarr",description:` ${ee(pt.startedAt)}`}),A(!1)}catch(je){console.error(je),t({status:"error",title:"chec du pointage",description:String(je.message)})}finally{E(!1)}},N=async()=>{if(!b)return;E(!0);const je=new Date().toISOString(),Ke=(Xe,He)=>{try{const pt="rbe:usages:local",De=localStorage.getItem(pt),Tt=De?JSON.parse(De):[],ue={id:`local-end-${Date.now()}`,relatedTo:Xe,parc:e,startedAt:He||b.startedAt,endedAt:je,conducteur:b.conducteur||p,participants:b.participants||x,note:W||"depointe",createdAt:new Date().toISOString(),synced:!1};return Tt.unshift(ue),localStorage.setItem(pt,JSON.stringify(Tt)),ue}catch(pt){return console.error("saveLocalEnded failed",pt),null}};try{try{if(!(await fetch(`${tc}/health`)).ok){t({status:"error",title:"API indisponible",description:"Impossible de terminer le pointage  serveur indisponible."}),E(!1);return}}catch{t({status:"error",title:"API indisponible",description:"Impossible de joindre le serveur  le pointage ne peut pas tre termin."}),E(!1);return}const Xe={endedAt:je,note:W||"depointe",participants:b.participants||x};let He=null;try{const ue=await fetch(`${tc}/vehicles/${encodeURIComponent(e)}/usages/${encodeURIComponent(b.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});if(ue.ok){try{He=await ue.json()}catch{He=null}I(null),C(null),M(!1),te(""),t({status:"success",title:"Dpointe",description:`arrt  ${new Date(je).toLocaleString()}`})}else{let Ee=null;try{Ee=await ue.json()}catch{Ee=await ue.text().catch(()=>null)}console.warn("depointerWithNote: PATCH failed",ue.status,Ee)}}catch(ue){console.warn("depointerWithNote: PATCH network error",ue)}if(!He)try{const ue=await fetch(`${tc}/vehicles/${encodeURIComponent(e)}/usages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conducteur:p||null,note:W||"pointage:end",relatedTo:b.id,participants:b.participants||x,endedAt:je})});if(ue.ok){try{He=await ue.json()}catch{He=null}I(null),C(null),M(!1),te(""),t({status:"success",title:"Dpointe (fallback)",description:`arrt  ${new Date(je).toLocaleString()}`})}else{let Ee=null;try{Ee=await ue.json()}catch{Ee=await ue.text().catch(()=>null)}console.warn("depointerWithNote: POST fallback failed",ue.status,Ee)}}catch(ue){console.warn("depointerWithNote: POST fallback network error",ue)}if(!He){const ue=Ke(b.id,b.startedAt);I(null),C(null),M(!1),te(""),t({status:"warning",title:"Dpointe local",description:ue?"Le pointage a t enregistr localement (pas d'API). La fiche peut tre envoye plus tard.":"Le serveur est indisponible et la sauvegarde locale a chou."}),fe({usageId:ue?ue.id:`local-${Date.now()}`,startedAt:ue?.startedAt||b.startedAt,endedAt:ue?.endedAt||je,conducteur:b.conducteur||p,participants:b.participants||x}),xe(W||""),H([]),U(!0);return}const pt=He?.id||b.id,De=He?.startedAt||b.startedAt,Tt=He?.endedAt||je;fe({usageId:pt,startedAt:De,endedAt:Tt,conducteur:p,participants:b.participants||x}),xe(W||""),H([]),U(!0)}catch(Xe){console.error("depointerWithNote: unexpected error",Xe),t({status:"error",title:"chec du dpointeur",description:String(Xe.message)})}finally{E(!1)}},Z=je=>{const Ke=Array.from(je.target.files||[]);H(Xe=>[...Xe,...Ke]),je.target.value=""},ke=je=>{H(Ke=>Ke.filter((Xe,He)=>He!==je))},Te=async()=>{if(B){_(!0);try{const{usageId:je,startedAt:Ke,endedAt:Xe,conducteur:He,participants:pt}=B,De=new FormData;De.append("description",oe||""),De.append("startedAt",Ke||""),De.append("endedAt",Xe||""),De.append("conducteur",He||""),De.append("participants",JSON.stringify(pt||[])),ie.forEach((ue,Ee)=>De.append("files",ue,ue.name));let Tt=!1;try{const ue=await fetch(`${tc}/vehicles/${encodeURIComponent(e)}/usages/${encodeURIComponent(je)}/report`,{method:"POST",body:De});ue.ok?(Tt=!0,t({status:"success",title:"Fiche enregistre",description:"La fiche a t enregistre sur le serveur."})):console.warn("primary report endpoint failed",ue.status)}catch(ue){console.warn("primary report endpoint error",ue)}if(!Tt)try{const ue=await fetch(`${tc}/vehicles/${encodeURIComponent(e)}/reports`,{method:"POST",body:De});ue.ok?(Tt=!0,t({status:"success",title:"Fiche enregistre (fallback)",description:"La fiche a t envoye au fallback serveur."})):console.warn("fallback report endpoint failed",ue.status)}catch(ue){console.warn("fallback report endpoint error",ue)}if(!Tt){const ue={id:`local-${Date.now()}`,parc:e,usageId:je,startedAt:Ke,endedAt:Xe,conducteur:He,participants:pt||[],description:oe||"",files:ie.map(nt=>({name:nt.name,size:nt.size,type:nt.type})),createdAt:new Date().toISOString()},Ee=kle(ue);t(Ee?{status:"warning",title:"Fiche sauvegarde localement",description:"Pas d'API disponible  la fiche est dans votre navigateur."}:{status:"error",title:"chec sauvegarde locale",description:"Impossible de sauvegarder la fiche."})}U(!1),xe(""),H([]),fe(null)}catch(je){console.error(je),t({status:"error",title:"Erreur lors de l'envoi de la fiche",description:String(je.message)})}finally{_(!1)}}};return l?r.jsx(cn,{p:8,children:r.jsx(sn,{size:"lg"})}):r.jsxs(Ws,{maxW:"4xl",py:10,children:[r.jsx(we,{as:"h1",size:"xl",mb:4,children:"MyRBE  Actions rapides"}),r.jsxs(de,{mb:4,children:[r.jsxs(O,{fontSize:"md",children:[r.jsx("b",{children:"Vhicule :"})," ",i?.immat||`Parc ${e}`]}),r.jsxs(O,{fontSize:"sm",color:"gray.600",children:["Parc ",e]})]}),r.jsxs(de,{mb:4,children:[r.jsx(O,{mb:2,children:r.jsx("b",{children:"Initiateur (scan)"})}),r.jsxs(ne,{spacing:3,align:"start",children:[r.jsxs(Qe,{value:p,onChange:je=>m(je.target.value),maxW:"360px",children:[d.map(je=>r.jsxs("option",{value:je.matricule,children:[je.label," (",je.matricule,")"]},je.matricule)),n&&!d.some(je=>je.matricule===n)&&r.jsx("option",{value:n,children:s?`${s} (${n})`:n})]}),r.jsx(de,{children:r.jsx(pe,{placeholder:"Ajouter participant (matricule)",value:D,onChange:je=>$(je.target.value),maxW:"220px"})}),r.jsx(Y,{size:"sm",onClick:ae,children:"Ajouter"})]}),r.jsxs(de,{mt:3,children:[r.jsx(O,{mb:2,fontSize:"sm",children:"Participants prsents :"}),r.jsxs(EL,{spacing:2,children:[x.length===0&&r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Aucun participant ajout"}),x.map(je=>r.jsxs(Xu,{size:"sm",borderRadius:"full",variant:"solid",colorScheme:"blue",children:[r.jsx(Ju,{children:je}),r.jsx(EE,{onClick:()=>P(je)})]},je))]})]})]}),r.jsxs(pa,{direction:{base:"column",md:"row"},spacing:4,mb:4,children:[r.jsx(Y,{colorScheme:"blue",size:"lg",onClick:()=>t({status:"info",title:"Planifier",description:"Fonctionnalit planification  ajouter"}),children:"Planifier une intervention"}),r.jsx(Y,{colorScheme:"red",size:"lg",onClick:()=>t({status:"info",title:"Signaler",description:"Fonctionnalit signalement  ajouter"}),children:"Signaler une anomalie"}),r.jsx(Y,{colorScheme:b?"orange":"green",size:"lg",onClick:()=>{b?M(!0):A(!0)},isLoading:S,children:b?"Dpointer":"Pointer"})]}),r.jsxs(de,{children:[r.jsxs(O,{fontSize:"sm",color:"gray.700",children:[r.jsx("b",{children:"Initiateur :"})," ",p," ",n===p&&s?`  ${s}`:""]}),b?r.jsxs(O,{fontSize:"sm",color:"gray.700",children:["Point depuis : ",ee(b.startedAt)]}):r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Aucun pointage actif pour ce membre sur ce vhicule."})]}),r.jsxs(mt,{isOpen:k,onClose:()=>A(!1),isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Pointer  dmarrer"}),r.jsx(kt,{}),r.jsxs(gt,{children:[r.jsxs(O,{mb:3,children:["Vhicule : ",r.jsx("b",{children:i?.immat||`Parc ${e}`})]}),r.jsxs(O,{mb:3,children:["Initiateur : ",r.jsx("b",{children:p})]}),r.jsxs(O,{mb:3,children:["Participants : ",x.length?x.join(", "):""]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Confirmer pour crer le pointage (heure actuelle enregistre)."})]}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:()=>A(!1),children:"Annuler"}),r.jsx(Y,{colorScheme:"green",onClick:R,isLoading:S,children:"Confirmer"})]})]})]}),r.jsxs(mt,{isOpen:T,onClose:()=>M(!1),isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Dpointer  terminer"}),r.jsx(kt,{}),r.jsxs(gt,{children:[r.jsxs(O,{mb:3,children:["Vhicule : ",r.jsx("b",{children:i?.immat||`Parc ${e}`})]}),r.jsxs(O,{mb:3,children:["Initiateur : ",r.jsx("b",{children:p})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Description des activits ralises"}),r.jsx(Gt,{value:W,onChange:je=>te(je.target.value),placeholder:"Ex: contrle frein, remplacement ampoule..."})]}),r.jsx(O,{mt:3,fontSize:"sm",color:"gray.500",children:"(Aprs validation, vous pourrez ajouter photos/vidos  la fiche.)"})]}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:()=>M(!1),children:"Annuler"}),r.jsx(Y,{colorScheme:"orange",onClick:N,isLoading:S,isDisabled:!W.trim(),children:"Confirmer dpointer"})]})]})]}),r.jsxs(mt,{isOpen:re,onClose:()=>U(!1),size:"xl",isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Fiche de pointage  dtails"}),r.jsx(kt,{}),r.jsxs(gt,{children:[r.jsxs(de,{mb:3,children:[r.jsxs(O,{children:[r.jsx("b",{children:"Vhicule :"})," ",i?.immat||`Parc ${e}`]}),r.jsxs(O,{children:[r.jsx("b",{children:"Initiateur :"})," ",B?.conducteur]}),r.jsxs(O,{children:[r.jsx("b",{children:"Participants :"})," ",(B?.participants||[]).join(", ")||""]}),r.jsxs(O,{children:[r.jsx("b",{children:"Dbut :"})," ",B?ee(B.startedAt):""]}),r.jsxs(O,{children:[r.jsx("b",{children:"Fin :"})," ",B?ee(B.endedAt):""]})]}),r.jsxs(G,{mb:3,children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{value:oe,onChange:je=>xe(je.target.value),placeholder:"Dcrivez les actions effectues..."})]}),r.jsxs(G,{mb:3,children:[r.jsx(q,{children:"Photos / Vidos"}),r.jsx(pe,{type:"file",accept:"image/*,video/*",multiple:!0,onChange:Z}),ie.length>0&&r.jsx(tt,{columns:{base:2,md:3},spacing:2,mt:3,children:ie.map((je,Ke)=>r.jsxs(de,{borderRadius:"md",overflow:"hidden",pos:"relative",bg:"gray.50",p:2,children:[je.type.startsWith("image/")?r.jsx(ui,{src:URL.createObjectURL(je),alt:je.name,objectFit:"cover",maxH:"140px",w:"100%"}):r.jsxs(de,{p:2,children:[r.jsx(O,{fontSize:"sm",noOfLines:2,children:je.name}),r.jsxs(O,{fontSize:"xs",color:"gray.600",children:[je.size/1024|0," KB"]})]}),r.jsx(et,{"aria-label":"Supprimer",size:"sm",pos:"absolute",top:"6px",right:"6px",onClick:()=>ke(Ke),icon:r.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M3 6h18"}),r.jsx("path",{d:"M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"})]})})]},Ke))})]}),r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Les fichiers seront envoys au serveur si disponible ; sinon la fiche sera sauvegarde localement."})]}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:()=>U(!1),children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:Te,isLoading:F,children:"Enregistrer la fiche"})]})]})]})]})}const sm={getAll:async()=>ut.get("/vehicles"),getByParc:async e=>ut.get(`/vehicles/${e}`),create:async e=>ut.post("/vehicles",e),update:async(e,t)=>ut.put(`/vehicles/${e}`,t),delete:async e=>ut.delete(`/vehicles/${e}`)},Ji={getAll:async()=>ut.get("/events"),getById:async e=>ut.get(`/events/${e}`),create:async e=>ut.post("/events",e),update:async(e,t)=>ut.put(`/events/${e}`,t),delete:async e=>ut.delete(`/events/${e}`),publish:async(e,t)=>ut.put(`/events/${e}`,{status:t})},sN="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,""),GC=()=>{const e=localStorage.getItem("token");return e?{Authorization:`Bearer ${e}`}:{}},Tle=async e=>{const t=(e.headers.get("content-type")||"").toLowerCase();if(!(t.includes("application/json")||t.includes("+json"))){const n=await e.text().catch(()=>"");throw new Error(`Rponse non-JSON (${e.status}) ${n?.slice(0,200)||""}`)}},YC=(e,t={},n=8e3)=>{const s=new AbortController,i=setTimeout(()=>s.abort(),n);return fetch(e,{...t,signal:s.signal}).finally(()=>clearTimeout(i))},Bp=e=>{const t=String(e||"").replace(/^\/+|\/+$/g,"");return sN?`${sN}/${t}`:`/${t}`},KC=["api/members","members","api/v1/members","v1/members"];async function jp(e,t,n){let s=null;for(const i of KC)try{const o=Bp(i),l=await YC(o,{method:e,headers:{Accept:"application/json","Content-Type":t instanceof FormData?void 0:"application/json",...GC(),...n||{}},body:t==null?void 0:t instanceof FormData?t:JSON.stringify(t)});if(!l.ok){s=new Error(`HTTP ${l.status}`);continue}return await Tle(l),await l.json()}catch(o){s=o;continue}throw s||new Error("Aucun endpoint membre valide")}const nl={async getAll(){try{const e=await jp("GET");return Array.isArray(e)?{members:e}:Array.isArray(e?.members)?e:Array.isArray(e?.data)?{members:e.data}:{members:[]}}catch{return{members:[]}}},async testConnectivity(){const e=[Bp("api/health"),Bp("health"),Bp(KC[0])];for(const t of e)try{if((await YC(t,{method:"GET",headers:{...GC()}},3e3)).ok)return!0}catch{}return!1},async create(e){const t=await jp("POST",e);return t?.member||t?.data||t},async update(e,t){try{const n=await jp("PATCH",{id:e,...t},{"X-Method-Override":"PATCH"});return n?.member||n?.data||n}catch{const n=await jp("PUT",{id:e,...t});return n?.member||n?.data||n}},async delete(e){const t={id:e};try{const n=await jp("DELETE",t);return n?.ok===!0?n:{ok:!0}}catch(n){for(const s of KC)try{const i=Bp(`${s}/${encodeURIComponent(e)}`);if((await YC(i,{method:"DELETE",headers:{...GC()}})).ok)return{ok:!0}}catch{}throw n}}},Mle="rbe:announcements";function Rle(){try{const e=localStorage.getItem(Mle);if(!e)return[];const t=JSON.parse(e);if(!Array.isArray(t))return[];const n=Date.now();return t.filter(s=>s&&s.active&&(!s.expiresAt||new Date(s.expiresAt).getTime()>n))}catch(e){return console.warn("loadFlashes:",e),[]}}function q1(){const e=Cs(),[t,n]=j.useState([]),[s,i]=j.useState({vehicles:{total:0,active:0,loading:!0},events:{total:0,upcoming:0,published:0,loading:!0},members:{total:0,active:0,loading:!0}}),[o,l]=j.useState([]),[u,d]=j.useState(!0),[h,p]=j.useState([]),[m,x]=j.useState([]),[y,b]=j.useState(0);mn();const C=ir("white","gray.800"),S=ir("linear(to-r, blue.500, purple.600)","linear(to-r, blue.600, purple.700)"),E=ir("gray.200","gray.700");j.useEffect(()=>{n(Rle()),k();const U=setInterval(k,300*1e3);return()=>clearInterval(U)},[]);const k=async()=>{console.log(" Chargement des donnes du dashboard..."),T(),M(),D(),$(),W(),A()},A=async()=>{try{const U="https://attractive-kindness-rbe-serveurs.up.railway.app",oe=[`${U}/api/retro-news`,`${U}/retro-news`,"/data/retro-news.json"];for(const xe of oe)try{const ie=await fetch(xe);if(!ie.ok)continue;const H=await ie.json();x(Array.isArray(H)?H:[]);return}catch(ie){console.warn(`chec chargement depuis ${xe}:`,ie)}x([])}catch(U){console.error("Erreur chargement RtroActus:",U),x([])}},T=async()=>{try{if(console.log(" Chargement des vhicules..."),!sm||typeof sm.getAll!="function"){console.warn("vehiculesAPI non disponible"),i(ie=>({...ie,vehicles:{total:0,active:0,loading:!1}}));return}const U=await sm.getAll();console.log(" Rponse vhicules:",U);let oe=[];U?.data?oe=Array.isArray(U.data)?U.data:[U.data]:Array.isArray(U)&&(oe=U);const xe={total:oe.length,active:oe.filter(ie=>{const H=ie?.statut||ie?.status||ie?.etat||"";return H==="ACTIF"||H==="ACTIVE"||H==="active"||H==="En service"}).length,loading:!1};if(console.log(" Stats vhicules:",xe),i(ie=>({...ie,vehicles:xe})),oe.length>0){const ie=oe.filter(H=>{const F=new Date(H.createdAt||H.dateCreation||H.created_at),_=new Date(Date.now()-1440*60*1e3);return F>_});ie.length>0&&l(H=>[{id:`vehicles-${Date.now()}`,type:"vehicle",title:`${ie.length} nouveau(x) vhicule(s) ajout(s)`,time:"Aujourd'hui",icon:yc,color:"blue"},...H.filter(F=>F.type!=="vehicle")])}}catch(U){console.error(" Erreur chargement vhicules:",U),i(oe=>({...oe,vehicles:{total:0,active:0,loading:!1}}))}},M=async()=>{try{if(console.log(" Chargement des vnements..."),!Ji||typeof Ji.getAll!="function"){console.warn("eventsAPI non disponible"),i(H=>({...H,events:{total:0,upcoming:0,published:0,loading:!1}}));return}const U=await Ji.getAll();console.log(" Rponse vnements:",U);let oe=[];U?.data?oe=Array.isArray(U.data)?U.data:[U.data]:Array.isArray(U)&&(oe=U);const xe=new Date,ie={total:oe.length,upcoming:oe.filter(H=>{try{const F=new Date(H?.date||H?.dateEvent||H?.startDate),_=H?.status||H?.statut||"";return F>xe&&(_==="PUBLISHED"||_==="published"||_==="Publi")}catch{return!1}}).length,published:oe.filter(H=>{const F=H?.status||H?.statut||"";return F==="PUBLISHED"||F==="published"||F==="Publi"}).length,loading:!1};if(console.log(" Stats vnements:",ie),i(H=>({...H,events:ie})),oe.length>0){const H=oe.filter(F=>{const _=new Date(F.createdAt||F.dateCreation||F.created_at),B=new Date(Date.now()-1440*60*1e3);return _>B});H.length>0&&l(F=>[{id:`events-${Date.now()}`,type:"event",title:`${H.length} nouvel(s) vnement(s) cr(s)`,time:"Aujourd'hui",icon:si,color:"green"},...F.filter(_=>_.type!=="event")])}}catch(U){console.error(" Erreur chargement vnements:",U),i(oe=>({...oe,events:{total:0,upcoming:0,published:0,loading:!1}}))}},D=async()=>{try{if(console.log(" Chargement des membres..."),!nl||typeof nl.getAll!="function"){console.warn("membersAPI non disponible"),i(ie=>({...ie,members:{total:0,active:0,loading:!1}}));return}const U=await nl.getAll();console.log(" Rponse membres:",U);let oe=[];U?.members?oe=Array.isArray(U.members)?U.members:[U.members]:U?.data?oe=Array.isArray(U.data)?U.data:[U.data]:Array.isArray(U)&&(oe=U);const xe={total:oe.length,active:oe.filter(ie=>{const H=ie?.membershipStatus||ie?.statut||ie?.status||ie?.adhesionStatus||"";return H==="ACTIVE"||H==="active"||H==="Actif"||H===" jour"}).length,loading:!1};if(console.log(" Stats membres:",xe),i(ie=>({...ie,members:xe})),oe.length>0){const ie=oe.filter(H=>{const F=new Date(H.createdAt||H.dateCreation||H.dateAdhesion||H.created_at),_=new Date(Date.now()-1440*60*1e3);return F>_});ie.length>0&&l(H=>[{id:`members-${Date.now()}`,type:"member",title:`${ie.length} nouvelle(s) adhsion(s)`,time:"Aujourd'hui",icon:wi,color:"purple"},...H.filter(F=>F.type!=="member")])}}catch(U){console.error(" Erreur chargement membres:",U),i(oe=>({...oe,members:{total:0,active:0,loading:!1}}))}},$=()=>{const U=[{id:"system-1",type:"system",title:"Dashboard mis  jour",time:" l'instant",icon:Za,color:"gray"}];l(oe=>oe.length>0?oe:U)},W=()=>{p([{title:"Nouveau vhicule",icon:Pn,to:"/dashboard/vehicules",color:"blue"},{title:"Crer vnement",icon:si,to:"/dashboard/events-management",color:"green"},{title:"Gestion membres",icon:wi,to:"/dashboard/members-management",color:"purple"},{title:"Finance",icon:Zu,to:"/admin",color:"orange"}])};j.useEffect(()=>{!s.vehicles.loading&&!s.events.loading&&!s.members.loading&&u&&(console.log(" Toutes les donnes sont charges"),d(!1))},[s,u]);const te=()=>{const U=new Date().getHours();return U<12?"Bonjour":U<17?"Bon aprs-midi":"Bonsoir"},re=j.useMemo(()=>t.map(U=>({id:U.id,message:U.message,category:U.category||"info",createdAt:U.createdAt})),[t]);return u?r.jsx(Ws,{maxW:"container.xl",py:8,children:r.jsxs(Q,{spacing:8,children:[r.jsxs(de,{bgGradient:S,color:"white",p:8,borderRadius:"xl",textAlign:"center",w:"full",children:[r.jsx(we,{size:"xl",children:"Chargement des donnes..."}),r.jsx(O,{mt:2,opacity:.9,children:"Rcupration des vhicules, vnements et membres"})]}),r.jsx(sn,{size:"xl",color:"blue.500"})]})}):r.jsxs(Ws,{maxW:"container.xl",py:8,fontFamily:"Montserrat, sans-serif",children:[r.jsxs(de,{bgGradient:S,color:"white",p:8,borderRadius:"xl",mb:8,textAlign:"center",children:[r.jsxs(we,{size:"xl",mb:4,children:[te(),", ",e?.prenom||e?.email||"Utilisateur"," ! "]}),r.jsx(O,{fontSize:"lg",opacity:.9,children:"Voici un aperu de votre activit RtrobuS Essonne"})]}),r.jsxs(tt,{columns:{base:1,lg:4},spacing:8,children:[r.jsx(OC,{colSpan:{base:1,lg:3},children:r.jsxs(Q,{spacing:8,align:"stretch",children:[r.jsxs(tt,{columns:{base:2,md:4},spacing:6,children:[r.jsx(Me,{bg:C,borderColor:E,shadow:"lg",children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{color:"gray.600",children:"Vhicules actifs"}),r.jsx(ft,{color:"blue.500",children:r.jsxs(ne,{children:[r.jsx(Wn,{as:yc}),s.vehicles.loading?r.jsx(sn,{size:"sm"}):r.jsxs(O,{children:[s.vehicles.active,"/",s.vehicles.total]})]})}),r.jsx(gc,{value:s.vehicles.total>0?s.vehicles.active/s.vehicles.total*100:0,colorScheme:"blue",size:"sm",mt:2,isIndeterminate:s.vehicles.loading})]})})}),r.jsx(Me,{bg:C,borderColor:E,shadow:"lg",children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{color:"gray.600",children:"vnements  venir"}),r.jsx(ft,{color:"green.500",children:r.jsxs(ne,{children:[r.jsx(Wn,{as:si}),s.events.loading?r.jsx(sn,{size:"sm"}):r.jsxs(O,{children:[s.events.upcoming,"/",s.events.total]})]})}),r.jsx(gc,{value:s.events.total>0?s.events.upcoming/s.events.total*100:0,colorScheme:"green",size:"sm",mt:2,isIndeterminate:s.events.loading})]})})}),r.jsx(Me,{bg:C,borderColor:E,shadow:"lg",children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{color:"gray.600",children:"Membres actifs"}),r.jsx(ft,{color:"purple.500",children:r.jsxs(ne,{children:[r.jsx(Wn,{as:wi}),s.members.loading?r.jsx(sn,{size:"sm"}):r.jsxs(O,{children:[s.members.active,"/",s.members.total]})]})}),r.jsx(gc,{value:s.members.total>0?s.members.active/s.members.total*100:0,colorScheme:"purple",size:"sm",mt:2,isIndeterminate:s.members.loading})]})})})]}),r.jsxs(Me,{bg:C,borderColor:E,shadow:"lg",children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",fontWeight:"700",children:"Actions rapides"})}),r.jsx(Ae,{children:r.jsx(tt,{columns:{base:2,md:4},spacing:4,children:h.map(U=>r.jsx(Y,{as:$n,to:U.to,leftIcon:r.jsx(Wn,{as:U.icon}),colorScheme:U.color,variant:"outline",size:"sm",h:"auto",py:4,flexDirection:"column",textAlign:"center",children:U.title},U.title))})})]}),m.length>0&&r.jsxs(Me,{bg:C,borderColor:E,shadow:"lg",children:[r.jsx(Ct,{children:r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",fontWeight:"700",children:" Les RtroActus"}),r.jsxs(ne,{spacing:2,children:[r.jsx(et,{icon:r.jsx(GL,{}),size:"sm",variant:"ghost",onClick:()=>b(U=>U===0?m.length-1:U-1),"aria-label":"Actu prcdente",isDisabled:m.length<=1}),r.jsxs(O,{fontSize:"xs",color:"gray.500",children:[y+1," / ",m.length]}),r.jsx(et,{icon:r.jsx(iy,{}),size:"sm",variant:"ghost",onClick:()=>b(U=>(U+1)%m.length),"aria-label":"Actu suivante",isDisabled:m.length<=1})]})]})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"start",spacing:3,children:[r.jsx(we,{size:"sm",color:"blue.600",children:m[y]?.title||"Sans titre"}),m[y]?.date&&r.jsxs(ne,{spacing:2,color:"gray.500",fontSize:"sm",children:[r.jsx(Wn,{as:si}),r.jsx(O,{children:new Date(m[y].date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})]}),r.jsx(O,{fontSize:"sm",color:"gray.700",children:m[y]?.content||""}),m[y]?.imageUrl&&r.jsx(ui,{src:m[y].imageUrl,alt:m[y]?.title,maxH:"150px",w:"100%",objectFit:"cover",borderRadius:"md"})]})})]}),r.jsxs(Me,{bg:C,borderColor:E,shadow:"lg",children:[r.jsx(Ct,{children:r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",fontWeight:"700",children:"Activit rcente"}),r.jsx(et,{icon:r.jsx(ao,{}),size:"sm",variant:"ghost",onClick:k,title:"Actualiser"})]})}),r.jsx(Ae,{children:r.jsx(Q,{spacing:4,align:"stretch",children:o.length===0?r.jsx(O,{color:"gray.500",textAlign:"center",py:4,children:"Aucune activit rcente"}):o.slice(0,5).map(U=>r.jsxs(ne,{spacing:4,p:3,bg:"gray.50",borderRadius:"lg",children:[r.jsx(Wn,{as:U.icon,color:`${U.color}.500`}),r.jsxs(Q,{align:"start",spacing:0,flex:1,children:[r.jsx(O,{fontWeight:"600",fontSize:"sm",children:U.title}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:U.time})]}),r.jsx(Ge,{colorScheme:U.color,variant:"subtle",children:U.type})]},U.id))})})]})]})}),r.jsx(OC,{children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(Me,{bg:C,borderColor:E,shadow:"lg",children:[r.jsx(Ct,{children:r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",fontWeight:"700",children:"Notifications"}),r.jsx(Ge,{colorScheme:"blue",variant:"subtle",children:t.length})]})}),r.jsx(Ae,{children:r.jsx(Q,{spacing:3,align:"stretch",children:re.length===0?r.jsx(O,{color:"gray.500",fontSize:"sm",textAlign:"center",py:4,children:"Aucune notification"}):re.slice(0,5).map(U=>r.jsx(de,{p:3,borderRadius:"lg",bg:"gray.50",children:r.jsxs(ne,{justify:"space-between",align:"start",children:[r.jsxs(Q,{align:"start",spacing:1,flex:1,children:[r.jsx(O,{fontSize:"sm",fontWeight:"600",children:U.message}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:U.createdAt?new Date(U.createdAt).toLocaleDateString("fr-FR"):""})]}),r.jsx(Ge,{colorScheme:"blue",variant:"subtle",fontSize:"xs",children:U.category})]})},U.id))})})]}),r.jsxs(Me,{bg:C,borderColor:E,shadow:"lg",children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",fontWeight:"700",children:"Liens utiles"})}),r.jsx(Ae,{children:r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsx(Y,{as:$n,to:"/dashboard/myrbe",variant:"ghost",justifyContent:"flex-start",leftIcon:r.jsx(Kae,{}),size:"sm",children:"MyRBE"}),r.jsxs(Y,{as:$n,to:"/dashboard/vehicules",variant:"ghost",justifyContent:"flex-start",leftIcon:r.jsx(yc,{}),size:"sm",children:["Vhicules (",s.vehicles.total,")"]}),r.jsxs(Y,{as:$n,to:"/dashboard/events-management",variant:"ghost",justifyContent:"flex-start",leftIcon:r.jsx(si,{}),size:"sm",children:["vnements (",s.events.total,")"]}),r.jsxs(Y,{as:$n,to:"/dashboard/members-management",variant:"ghost",justifyContent:"flex-start",leftIcon:r.jsx(wi,{}),size:"sm",children:["Membres (",s.members.total,")"]}),r.jsx(Y,{as:$n,to:"/admin",variant:"ghost",justifyContent:"flex-start",leftIcon:r.jsx(Zu,{}),size:"sm",children:"Finance"}),r.jsx(rn,{my:1}),r.jsx(Y,{as:$n,to:"/dashboard/api-diagnostics",variant:"ghost",justifyContent:"flex-start",leftIcon:r.jsx(qae,{}),size:"sm",colorScheme:"orange",children:" Diagnostiques API"})]})})]}),r.jsxs(Ft,{status:"info",borderRadius:"md",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"bold",fontSize:"sm",children:"APIs disponibles"}),r.jsx(O,{fontSize:"xs",children:"Les donnes sont rcupres en temps rel quand les APIs sont disponibles."})]})]})]})})]})]})}const sh="https://attractive-kindness-rbe-serveurs.up.railway.app";function G1(e){return`retromail:read:${e||"anon"}`}function iN(e){return`retromail:released:${e}`}function Dle(){const{matricule:e,prenom:t,isAdmin:n}=Cs(),s=mn(),[i,o]=j.useState(!0),[l,u]=j.useState([]),[d,h]=j.useState([]),[p,m]=j.useState(null),[x,y]=j.useState("");j.useEffect(()=>{let T=!0;return(async()=>{o(!0);try{const M=await fetch(`${sh.replace(/\/$/,"")}/retromail/list`);if(!T)return;if(!M.ok)throw new Error(`status ${M.status}`);const D=await M.json();u(Array.isArray(D)?D:[])}catch(M){console.warn("retromail list failed",M),u(null)}finally{T&&o(!1)}})(),()=>{T=!1}},[]),j.useEffect(()=>{let T=!0;if(!l||l.length===0){h([]);return}return(async()=>{try{const M=await Promise.all(l.map(async $=>{try{const W=await fetch(`${sh.replace(/\/$/,"")}/retromail/${encodeURIComponent($)}`);if(!W.ok)return null;const te=await W.json();return{filename:$,json:te}}catch{return null}}));if(!T)return;const D=M.filter(Boolean).sort(($,W)=>{const te=new Date($.json.createdAt||0).getTime();return new Date(W.json.createdAt||0).getTime()-te});h(D),!p&&D.length>0&&m(D[0].filename)}catch(M){console.error(M)}})(),()=>{T=!1}},[l]);const b=T=>{const M=G1(e);try{const D=localStorage.getItem(M),$=D?JSON.parse(D):{};$[T]=Date.now(),localStorage.setItem(M,JSON.stringify($))}catch{}},C=T=>{try{const M=localStorage.getItem(G1(e));if(!M)return!1;const D=JSON.parse(M);return!!(D&&D[T])}catch{return!1}},S=T=>{try{localStorage.setItem(iN(T),"1"),s({status:"success",title:"Vido libre",description:"Le tlchargement est maintenant autoris localement."}),h(M=>[...M])}catch(M){s({status:"error",title:"Impossible",description:String(M.message)})}},E=T=>localStorage.getItem(iN(T))==="1",k=j.useMemo(()=>{if(!d)return[];const T=(x||"").trim().toLowerCase();return T?d.filter(M=>{const D=M.json||{};return String(D.parc||"").toLowerCase().includes(T)||String(D.id||"").toLowerCase().includes(T)||String(D.description||"").toLowerCase().includes(T)}):d},[d,x]),A=d.find(T=>T.filename===p);return j.useEffect(()=>{p&&(b(p),h(T=>[...T]))},[p]),r.jsxs(de,{p:6,children:[r.jsx(we,{size:"lg",mb:4,children:"RtroMail"}),r.jsxs(qn,{gap:6,align:"stretch",children:[r.jsxs(de,{w:{base:"100%",md:"360px"},borderWidth:"1px",borderRadius:"md",p:3,bg:"white",children:[r.jsxs(ne,{mb:3,children:[r.jsx(pe,{placeholder:"Rechercher par parc / id / texte",value:x,onChange:T=>y(T.target.value)}),r.jsx(Y,{size:"sm",onClick:()=>{y("")},children:"Effacer"})]}),i&&r.jsx(cn,{p:6,children:r.jsx(sn,{})}),!i&&l===null&&r.jsxs(de,{p:4,bg:"orange.50",borderRadius:"md",children:[r.jsx(O,{color:"orange.800",fontWeight:"600",children:"API Retromail non disponible"}),r.jsxs(O,{fontSize:"sm",color:"gray.600",children:["Aucune liste trouve. Vrifie que le serveur expose ",r.jsx("code",{children:"/retromail/list"}),"."]})]}),!i&&k&&k.length===0&&r.jsx(O,{color:"gray.600",mt:3,children:"Aucun message."}),r.jsx(Q,{align:"stretch",spacing:2,mt:3,children:k.map(T=>{const M=T.json||{},D=M.parc?`Parc ${M.parc}`:`Fiche ${M.id||T.filename}`,$=(M.description||"").slice(0,120),W=!C(T.filename);return r.jsx(Me,{size:"sm",onClick:()=>m(T.filename),cursor:"pointer",bg:p===T.filename?"gray.50":"white",children:r.jsx(Ct,{children:r.jsxs(qn,{justify:"space-between",align:"center",children:[r.jsxs(de,{children:[r.jsxs(O,{fontWeight:"600",children:[D," ",M.id?r.jsx(Ge,{ml:2,children:`#${M.id}`}):null]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:$||r.jsx("i",{children:"(Pas de description)"})})]}),r.jsxs(de,{textAlign:"right",children:[W?r.jsx(Ge,{colorScheme:"red",children:"Nouveau"}):r.jsx(O,{fontSize:"xs",color:"gray.500",children:"Lu"}),r.jsx(O,{fontSize:"xs",color:"gray.400",children:M.createdAt?new Date(M.createdAt).toLocaleString():""})]})]})})},T.filename)})})]}),r.jsx(de,{flex:"1",borderWidth:"1px",borderRadius:"md",p:4,bg:"white",children:A?r.jsxs(r.Fragment,{children:[r.jsxs(qn,{justify:"space-between",align:"center",mb:3,children:[r.jsxs(de,{children:[r.jsxs(we,{size:"md",children:["Fiche pointage  ",A.json.parc?`Parc ${A.json.parc}`:A.json.id]}),r.jsxs(O,{fontSize:"sm",color:"gray.600",children:["ID: ",A.json.id||A.filename,"  ",A.json.createdAt?new Date(A.json.createdAt).toLocaleString():""]})]}),r.jsx(de,{children:r.jsxs(ne,{spacing:2,children:[r.jsx(Y,{size:"sm",as:"a",href:`${sh.replace(/\/$/,"")}/retromail/${encodeURIComponent(A.filename.replace(/\.json$/,"")+".pdf")}`,target:"_blank",rel:"noreferrer",children:"Tlcharger PDF"}),r.jsx(Y,{size:"sm",variant:"outline",onClick:()=>{const T=G1(e),M=localStorage.getItem(T),D=M?JSON.parse(M):{};D[A.filename]?delete D[A.filename]:D[A.filename]=Date.now(),localStorage.setItem(T,JSON.stringify(D)),h($=>[...$])},children:C(A.filename)?"Marquer non lu":"Marquer lu"})]})})]}),r.jsx(rn,{mb:3}),r.jsxs(de,{mb:4,children:[r.jsx(O,{fontWeight:"600",children:"Initiateur :"}),r.jsx(O,{mb:2,children:A.json.conducteur||""}),r.jsx(O,{fontWeight:"600",children:"Participants :"}),r.jsx(O,{mb:2,children:(A.json.participants||[]).join(", ")||""}),r.jsx(O,{fontWeight:"600",children:"Description :"}),r.jsx(O,{mb:3,whiteSpace:"pre-wrap",children:A.json.description||""}),r.jsx(O,{fontWeight:"600",mb:2,children:"Images :"}),(A.json.files||[]).filter(T=>(T.mime||"").startsWith("image/")).length===0?r.jsx(O,{color:"gray.600",mb:2,children:"Aucune image."}):r.jsx(tt,{columns:{base:1,md:3},gap:3,mb:3,children:(A.json.files||[]).filter(T=>(T.mime||"").startsWith("image/")).map((T,M)=>r.jsxs(de,{borderWidth:"1px",p:2,borderRadius:"md",bg:"gray.50",children:[r.jsx(ui,{src:`${sh.replace(/\/$/,"")}/retromail/uploads/${encodeURIComponent(T.filename)}`,alt:T.originalname||T.filename,objectFit:"cover",maxH:"160px",w:"100%"}),r.jsxs(ne,{mt:2,justify:"space-between",children:[r.jsx(O,{fontSize:"sm",noOfLines:1,children:T.originalname||T.filename}),r.jsx(Y,{size:"sm",as:"a",href:`${sh.replace(/\/$/,"")}/retromail/uploads/${encodeURIComponent(T.filename)}`,target:"_blank",rel:"noreferrer",children:"Ouvrir"})]})]},M))}),r.jsx(O,{fontWeight:"600",mb:2,children:"Vidos (spares)"}),(A.json.files||[]).filter(T=>(T.mime||"").startsWith("video/")||/\.(mp4|mov|avi|mkv)$/i.test(T.originalname||T.filename)).length===0?r.jsx(O,{color:"gray.600",children:"Aucune vido."}):r.jsx(Q,{align:"stretch",spacing:2,mb:3,children:(A.json.files||[]).filter(T=>(T.mime||"").startsWith("video/")||/\.(mp4|mov|avi|mkv)$/i.test(T.originalname||T.filename)).map((T,M)=>{const D=E(T.filename);return r.jsx(de,{p:3,borderWidth:"1px",borderRadius:"md",children:r.jsxs(qn,{justify:"space-between",align:"center",children:[r.jsxs(de,{children:[r.jsx(O,{fontWeight:"600",noOfLines:1,children:T.originalname||T.filename}),r.jsxs(O,{fontSize:"sm",color:"gray.500",children:[T.size/1024|0," KB"]}),!D&&r.jsx(O,{fontSize:"xs",color:"orange.600",children:"Tlchargement restreint ( analyser)"})]}),r.jsxs(ne,{children:[n&&!D&&r.jsx(Y,{size:"sm",colorScheme:"green",onClick:()=>S(T.filename),children:"Librer le tlchargement"}),r.jsx(Y,{size:"sm",as:"a",href:D?`${sh.replace(/\/$/,"")}/retromail/uploads/${encodeURIComponent(T.filename)}`:"#",target:"_blank",rel:"noreferrer",isDisabled:!D,children:D?"Tlcharger":"Demand"})]})]})},M)})})]})]}):r.jsx(cn,{p:6,children:r.jsx(O,{color:"gray.600",children:"Slectionne un message  lire."})})})]})]})}const Ole={},Nle=()=>{const[e,t]=j.useState(!1),[n,s]=j.useState(0),[i,o]=j.useState(0),[l,u]=j.useState(null),[d,h]=j.useState(!0),[p,m]=j.useState({balance:0,totalCredits:0,totalDebits:0,monthlyBalance:0,scheduledMonthlyImpact:0,scheduledCount:0}),[x,y]=j.useState([]),[b,C]=j.useState({type:"CREDIT",amount:"",description:"",category:"ADHESION",date:new Date().toISOString().split("T")[0]}),[S,E]=j.useState([]),[k,A]=j.useState({categoryId:"",allocatedAmount:"",notes:""}),[T,M]=j.useState([]),[D,$]=j.useState({type:"SCHEDULED_PAYMENT",amount:"",description:"",frequency:"MONTHLY",nextDate:new Date().toISOString().split("T")[0],totalAmount:""}),[W,te]=j.useState(null),[re,U]=j.useState(()=>{const L=new Date;return`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`}),[oe,xe]=j.useState(""),[ie,H]=j.useState(null),[F,_]=j.useState([]),[B,fe]=j.useState(!1),[I,ee]=j.useState(""),[ae,P]=j.useState(""),[R,N]=j.useState(""),[Z,ke]=j.useState([]),[Te,je]=j.useState({scenarios:[],activeScenario:null,projectionMonths:12}),[Ke,Xe]=j.useState(null),[He,pt]=j.useState(null),[De,Tt]=j.useState(null),[ue,Ee]=j.useState({name:"",description:"",projectionMonths:12}),[nt,X]=j.useState({description:"",amount:"",category:"ADHESION",frequency:"MONTHLY"}),[le,Ve]=j.useState({description:"",amount:"",category:"MAINTENANCE",frequency:"MONTHLY"}),[at,dn]=j.useState([]),[Fn,Oe]=j.useState({description:"",amount:"",date:new Date().toISOString().split("T")[0]}),We=new Date().getFullYear(),[bt,Be]=j.useState(We),[ot,vn]=j.useState(null),[Le,ct]=j.useState([]),[Ht,hn]=j.useState([]),[_t,Sn]=j.useState(null),[fn,yr]=j.useState({type:"QUOTE",number:"",title:"",date:new Date().toISOString().split("T")[0],amount:"",status:"DRAFT",eventId:""}),{isOpen:ar,onOpen:rs,onClose:jn}=jt(),[lr,ss]=j.useState(null),{isOpen:jl,onOpen:Sl,onClose:lo}=jt(),[co,Cl]=j.useState(null),[zs,Xs]=j.useState(""),{isOpen:Br,onOpen:Kr,onClose:hi}=jt(),Je=mn(),{isOpen:Do,onOpen:ff,onClose:wl}=jt(),{isOpen:ma,onOpen:Bc,onClose:Di}=jt(),{isOpen:Is,onOpen:Oo,onClose:Oi}=jt(),{isOpen:br,onOpen:dd,onClose:El}=jt(),{isOpen:uo,onOpen:Js,onClose:hd}=jt(),{isOpen:ga,onOpen:kl,onClose:fd}=jt(),{isOpen:ho,onOpen:xa,onClose:Ls}=jt(),{isOpen:$c,onOpen:pd,onClose:Ni}=jt(),Fc=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="5173")?Ole?.VITE_API_BASE_URL||"https://attractive-kindness-rbe-serveurs.up.railway.app":"",pf=String(Fc||"").replace(/\/$/,""),gn=L=>`${pf}${L}`,cr=L=>{const K=String(L||"");return K.startsWith("/api/")?[K,K.replace(/^\/api/,"")]:[K,`/api${K}`]},fo=async(L,K={})=>{const Ye=Array.isArray(L)?L:[L];let Mt=null;for(const jr of Ye)try{const on=await fetch(gn(jr),K);if(!on.ok)throw new Error(`${on.status} ${on.statusText}`);return(on.headers.get("content-type")||"").includes("application/json")?await on.json():{}}catch(on){Mt=on}if(Mt)throw Mt;return{}},gd=async(L,K={})=>{const Ye=Array.isArray(L)?L:[L];let Mt=null;for(const jr of Ye)try{const on=await fetch(gn(jr),{method:"DELETE",headers:K});if(!on.ok)throw new Error(`${on.status} ${on.statusText}`);return!0}catch(on){Mt=on}if(Mt)throw Mt;return!1},ya=()=>{try{const L=localStorage.getItem("rbe:finance:documents");return L?JSON.parse(L):[]}catch{return[]}},Al=L=>{try{localStorage.setItem("rbe:finance:documents",JSON.stringify(L||[]))}catch{}},ba=async()=>{try{t(!0),await Promise.all([hr(),po(),va(),Pi(),Vc(),ja(),No(),zi(bt),xd()])}catch(L){console.error(" Erreur chargement donnes financires:",L),Je({status:"error",title:"Erreur de chargement",description:"Impossible de charger les donnes financires",duration:4e3,isClosable:!0})}finally{t(!1)}},No=async()=>{try{const L=cr("/api/finance/documents"),K=await fo(L,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),Ye=Array.isArray(K?.documents)?K.documents:Array.isArray(K?.items)?K.items:Array.isArray(K)?K:[];if(Ye.length===0){const Mt=ya();hn(Mt)}else hn(Ye),Al(Ye)}catch{const K=ya();hn(K)}},hr=async()=>{try{const L=await fetch(gn("/api/finance/balance"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(L.ok){const K=await L.json();o(K.balance||0),u(K.lastUpdate),h(K.isLocked!==!1)}else console.warn(" Solde non disponible, utilisation de 0"),o(0)}catch(L){console.error(" Erreur chargement solde:",L),o(0)}},po=async()=>{try{const L=await fetch(gn("/api/finance/transactions"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(L.ok){const K=await L.json();y(K.transactions||[])}else console.warn(" Transactions non disponibles"),y([])}catch(L){console.error(" Erreur chargement transactions:",L),y([])}},va=async()=>{try{const L=await fetch(gn("/api/finance/scheduled-operations"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(L.ok){const K=await L.json();M(K.operations||[])}else console.warn(" Oprations programmes non disponibles"),M([])}catch(L){console.error(" Erreur chargement oprations programmes:",L),M([])}},Tl=async L=>{try{const K=await fetch(gn(`/api/finance/scheduled-operations/${L}/payments`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(K.ok){const Ye=await K.json();_(Ye.payments||[])}else _([])}catch(K){console.error(" Erreur chargement paiements chance:",K),_([])}},Pi=async()=>{try{const L=await fetch(gn("/api/finance/simulations"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(L.ok){const K=await L.json();je(Ye=>({...Ye,scenarios:K.scenarios||[]}))}else console.warn(" Simulations non disponibles"),je(K=>({...K,scenarios:[]}))}catch(L){console.error(" Erreur chargement simulations:",L),je(K=>({...K,scenarios:[]}))}},Vc=async()=>{try{const L=await fetch(gn("/api/finance/balance/history"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(L.ok){const K=await L.json();ke(K.history||[])}else console.warn(" Historique non disponible"),ke([])}catch(L){console.error(" Erreur chargement historique:",L),ke([])}},ja=async()=>{try{const L=await fetch(gn("/api/finance/expense-reports"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(L.ok){const K=await L.json();dn(K.reports||[])}else dn([])}catch(L){console.error(" Erreur chargement notes de frais:",L),dn([])}},zi=async L=>{try{const K=await fetch(gn(`/api/finance/reports?year=${encodeURIComponent(L)}`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(K.ok){const Ye=await K.json();vn(Ye)}else vn(null)}catch(K){console.error(" Erreur chargement rapports:",K),vn(null)}},mf=async()=>{try{const L=await fetch(gn(`/api/finance/reports/pdf?year=${encodeURIComponent(bt)}`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!L.ok){Je({status:"error",title:"Export PDF chou"});return}const K=await L.blob(),Ye=URL.createObjectURL(K),Mt=document.createElement("a");Mt.href=Ye,Mt.download=`rapport-financier-${bt}.pdf`,document.body.appendChild(Mt),Mt.click(),Mt.remove(),URL.revokeObjectURL(Ye)}catch(L){console.error(" Export PDF:",L),Je({status:"error",title:"Export PDF chou"})}},xd=async()=>{try{const L=await fetch(gn("/api/finance/categories"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(L.ok){const K=await L.json();ct(Array.isArray(K)?K:[])}}catch(L){console.error(" Erreur chargement catgories:",L)}},[gf,Sa]=j.useState(!1),[Hc,xf]=j.useState(null),Ca=(Hc?.roles||[]).some(L=>String(L).toUpperCase()==="TRESORIER"),Po=async()=>{try{const L=await fetch(gn("/api/me"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(L.ok){const K=await L.json();xf(K),Sa(!0),console.log(" Utilisateur connect:",K.matricule,"- Modification du solde contrle par code")}}catch(L){console.error(" Erreur chargement utilisateur:",L)}},wa=()=>{const L=x.filter(zn=>zn.type==="CREDIT").reduce((zn,Xr)=>zn+(Xr.amount||0),0),K=x.filter(zn=>zn.type==="DEBIT").reduce((zn,Xr)=>zn+(Xr.amount||0),0),Ye=new Date,Mt=new Date(Ye.getFullYear(),Ye.getMonth(),1),jr=new Date(Ye.getFullYear(),Ye.getMonth()+1,0),on=x.filter(zn=>{const Xr=new Date(zn.date||zn.createdAt);return Xr>=Mt&&Xr<=jr}),ps=on.filter(zn=>zn.type==="CREDIT").reduce((zn,Xr)=>zn+(Xr.amount||0),0),zo=on.filter(zn=>zn.type==="DEBIT").reduce((zn,Xr)=>zn+(Xr.amount||0),0),ks=ps-zo,Io=T.filter(zn=>zn.isActive).reduce((zn,Xr)=>{const bf=Rl(Xr.frequency),jd=Xr.type==="SCHEDULED_CREDIT"?Xr.amount||0:-(Xr.amount||0);return zn+jd*bf},0);m({balance:i,totalCredits:L,totalDebits:K,monthlyBalance:ks,scheduledMonthlyImpact:Io,scheduledCount:T.filter(zn=>zn.isActive).length})},fi=({percent:L,color:K="gray"})=>{const Ye=typeof L=="number"?Math.max(0,Math.min(1,L)):null,Mt=50,jr=60,on=60,ps=Math.PI,zo=Math.PI*(1-(Ye??0)),ks=jr+Mt*Math.cos(ps),Io=on-Mt*Math.sin(ps),zn=jr+Mt*Math.cos(zo),Xr=on-Mt*Math.sin(zo),bf=0,jd=0,Yb=`M ${ks} ${Io} A ${Mt} ${Mt} 0 ${bf} ${jd} ${zn} ${Xr}`;return r.jsxs("svg",{viewBox:"0 0 120 70",width:"100%",height:"70",role:"img","aria-label":Ye!=null?`${Math.round(Ye*100)}%`:"N/A",children:[r.jsx("path",{d:`M ${ks} ${Io} A ${Mt} ${Mt} 0 0 ${jd} ${jr+Mt} ${on}`,stroke:"#E2E8F0",strokeWidth:"10",fill:"none"}),Ye!=null&&Ye>0&&r.jsx("path",{d:Yb,stroke:K,strokeWidth:"10",fill:"none",strokeLinecap:"round"}),r.jsx("text",{x:"60",y:"65",textAnchor:"middle",fontSize:"10",fill:"#4A5568",children:Ye!=null?`${Math.round(Ye*100)}%`:"N/A"})]})},rt=L=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(L||0),ws=L=>L?new Date(L).toLocaleDateString("fr-FR"):"N/A",Ml=L=>({ADHESION:"Adhsion",MAINTENANCE:"Maintenance",CARBURANT:"Carburant",ASSURANCE:"Assurance",AUTRE:"Autre"})[L]||L,Rl=L=>{switch(L){case"SEMI_ANNUAL":return .5;case"ONE_SHOT":return 0;case"WEEKLY":return 4.33;case"QUARTERLY":return 1/3;case"YEARLY":return 1/12;case"MONTHLY":default:return 1}},mo=L=>{switch(L){case"ONE_SHOT":return"Ponctuel";case"SEMI_ANNUAL":return"Semestriel (6 mois)";case"WEEKLY":return"Hebdomadaire";case"QUARTERLY":return"Trimestriel";case"YEARLY":return"Annuel";case"MONTHLY":default:return"Mensuel"}},$r=async()=>{if(!I||I.length!==4){Je({status:"warning",title:"Code requis",description:"Veuillez saisir le code  4 chiffres (0920)",duration:3e3,isClosable:!0});return}if(I!=="0920"){Je({status:"error",title:"Code incorrect",description:"Le code de scurit n'est pas valide",duration:4e3,isClosable:!0});return}if(!ae||isNaN(parseFloat(ae))){Je({status:"warning",title:"Montant invalide",description:"Veuillez saisir un montant valide",duration:3e3,isClosable:!0});return}try{t(!0);const L=await fetch(gn("/api/finance/balance/configure"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({code:I,newBalance:parseFloat(ae),reason:R?.trim()||`Mise  jour manuelle du solde par ${Hc?.matricule||Hc?.username||"inconnu"} - ${new Date().toLocaleDateString("fr-FR")}`})});if(L.ok){const K=await L.json();o(K.newBalance),ee(""),P(""),N(""),fe(!1),wl(),Je({status:"success",title:"Solde mis  jour",description:`Nouveau solde: ${rt(K.newBalance)} (diffrence: ${K.difference>=0?"+":""}${rt(K.difference)})`,duration:5e3,isClosable:!0}),await Vc(),await hr()}else{const K=await L.text().catch(()=>"");let Ye={};try{Ye=K?JSON.parse(K):{}}catch{Ye={message:K?.slice(0,200)||"Erreur inconnue"}}L.status===403?Je({status:"error",title:"Accs refus",description:"Vous n'avez pas l'autorisation de modifier le solde",duration:5e3,isClosable:!0}):L.status===401?Je({status:"error",title:"Code incorrect",description:"Le code de scurit 0920 est incorrect",duration:4e3,isClosable:!0}):Je({status:"error",title:"Erreur de configuration",description:Ye.message||"Erreur serveur",duration:4e3,isClosable:!0})}}catch(L){console.error(" Erreur configuration solde:",L),Je({status:"error",title:"Erreur",description:"Impossible de configurer le solde. Vrifiez votre connexion.",duration:4e3,isClosable:!0})}finally{t(!1)}},go=async()=>{if(!Fn.description||!Fn.amount){Je({status:"warning",title:"Champs requis",description:"Description et montant sont obligatoires"});return}try{t(!0);const L=await fetch(gn("/api/finance/expense-reports"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({description:Fn.description,amount:parseFloat(Fn.amount),date:Fn.date})});if(L.ok)Je({status:"success",title:"Note de frais ajoute"}),Oe({description:"",amount:"",date:new Date().toISOString().split("T")[0]}),await ja();else{const K=await L.json().catch(()=>({}));Je({status:"error",title:"Erreur",description:K.message||"Impossible d'ajouter la note de frais"})}}catch(L){console.error(" Erreur cration note de frais:",L),Je({status:"error",title:"Erreur",description:"Impossible d'ajouter la note de frais"})}finally{t(!1)}},xo=async(L,K)=>{try{(await fetch(gn(`/api/finance/expense-reports/${L}`),{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({status:K})})).ok?await ja():Je({status:"error",title:"Erreur",description:"Mise  jour du statut impossible"})}catch(Ye){console.error(" Erreur MAJ statut note de frais:",Ye),Je({status:"error",title:"Erreur",description:"Mise  jour du statut impossible"})}},pi=async L=>{try{(await fetch(gn(`/api/finance/expense-reports/${L}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok?(Je({status:"success",title:"Note de frais supprime"}),await ja()):Je({status:"error",title:"Erreur",description:"Suppression impossible"})}catch(K){console.error(" Erreur suppression note de frais:",K),Je({status:"error",title:"Erreur",description:"Suppression impossible"})}},Uc=async()=>{if(!b.type||!b.amount||!b.description){Je({status:"warning",title:"Champs requis",description:"Type, montant et description sont obligatoires",duration:3e3,isClosable:!0});return}try{t(!0);const L=cr("/api/finance/transactions"),K=await fo(L,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...b,amount:parseFloat(b.amount)})});if(K){if(S.length>0){const Ye=cr(`/api/finance/transactions/${K.id}/categories`),Mt=S.map(jr=>({categoryId:jr.categoryId,allocatedAmount:parseFloat(jr.allocatedAmount),notes:jr.notes||null}));await fo(Ye,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({allocations:Mt})})}Je({status:"success",title:"Transaction ajoute",description:S.length>0?`Transaction ajoute avec ${S.length} allocation(s)`:"La transaction a t enregistre avec succs",duration:3e3,isClosable:!0}),C({type:"CREDIT",amount:"",description:"",category:"ADHESION",date:new Date().toISOString().split("T")[0]}),E([]),A({categoryId:"",allocatedAmount:"",notes:""}),Di(),await po(),await hr()}}catch(L){console.error(" Erreur ajout transaction:",L),Je({status:"error",title:"Erreur",description:"Impossible d'ajouter la transaction. Vrifiez votre connexion.",duration:4e3,isClosable:!0})}finally{t(!1)}},Ea=L=>{ss({...L}),rs()},yd=async()=>{if(!(!lr||!lr.id))try{t(!0);const L=cr(`/api/finance/transactions/${encodeURIComponent(lr.id)}`);await fo(L,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({description:lr.description,category:lr.category,type:lr.type,amount:parseFloat(lr.amount),date:lr.date})}),Je({status:"success",title:"Transaction mise  jour"}),jn(),await po(),await hr()}catch(L){console.error(" Erreur modification transaction:",L),Je({status:"error",title:"Erreur",description:"Impossible de modifier la transaction"})}finally{t(!1)}},Dl=async L=>{try{if(!confirm("Supprimer cette transaction ?"))return;const K=cr(`/api/finance/transactions/${encodeURIComponent(L)}`);await gd(K,{Authorization:`Bearer ${localStorage.getItem("token")}`}),Je({status:"success",title:"Transaction supprime"}),await po(),await hr()}catch(K){console.error(" Erreur suppression transaction:",K),Je({status:"error",title:"Erreur",description:"Suppression impossible"})}},ka=L=>{Cl(L),Xs(L?.documentId||""),Sl()},bd=async()=>{try{if(!co)return;const L=cr(`/api/finance/transactions/${encodeURIComponent(co.id)}`);await fo(L,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({documentId:zs||null})}),y(K=>K.map(Ye=>Ye.id===co.id?{...Ye,documentId:zs||null}:Ye)),lo(),Cl(null),Xs(""),Je({status:"success",title:"Transaction lie au document"})}catch(L){console.error(" Erreur liaison transaction/document:",L),Je({status:"error",title:"Erreur",description:"Impossible de lier la transaction"})}},J=()=>{Sn(null),yr({type:"QUOTE",number:"",title:"",date:new Date().toISOString().split("T")[0],amount:"",status:"DRAFT",eventId:""}),Kr()},he=L=>{Sn(L),yr({type:L.type||"QUOTE",number:L.number||"",title:L.title||"",date:(L.date||new Date().toISOString()).slice(0,10),amount:String(L.amount??""),status:L.status||"DRAFT",eventId:L.eventId||""}),Kr()},Ce=async()=>{try{const L=!!_t?.id,K=cr(L?`/api/finance/documents/${encodeURIComponent(_t.id)}`:"/api/finance/documents"),Ye={...fn,amount:fn.amount===""?0:parseFloat(fn.amount)},Mt=await fo(K,{method:L?"PUT":"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(Ye)});await No(),hi(),Je({status:"success",title:L?"Document modifi":"Document cr"})}catch{const K=_t?.id||`local-${Date.now()}`,Ye=_t?Ht.map(Mt=>Mt.id===_t.id?{..._t,...fn,id:K}:Mt):[{id:K,...fn},...Ht];Al(Ye),hn(Ye),hi(),Je({status:"info",title:"Document enregistr en local"})}},st=async L=>{try{const K=cr(`/api/finance/documents/${encodeURIComponent(L)}`);await gd(K,{Authorization:`Bearer ${localStorage.getItem("token")}`}),await No(),Je({status:"success",title:"Document supprim"})}catch{const Ye=Ht.filter(Mt=>Mt.id!==L);Al(Ye),hn(Ye),Je({status:"info",title:"Document supprim (local)"})}},Xt=async()=>{const L=n===2;if(!D.amount||!D.description||!D.nextDate||!L&&!D.type||!L&&!D.frequency){Je({status:"warning",title:"Champs requis",description:"Tous les champs sont obligatoires",duration:3e3,isClosable:!0});return}try{t(!0);const K=await fetch(gn("/api/finance/scheduled-operations"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...D,type:L?"SCHEDULED_PAYMENT":D.type,frequency:L?"MONTHLY":D.frequency,amount:parseFloat(D.amount),totalAmount:D.totalAmount!==""&&D.totalAmount!==null?parseFloat(D.totalAmount):void 0})});if(K.ok)Je({status:"success",title:L?"chancier cr":"Opration programme",description:L?"L'chancier a t cr avec succs":"L'opration a t programme avec succs",duration:3e3,isClosable:!0}),$({type:"SCHEDULED_PAYMENT",amount:"",description:"",frequency:"MONTHLY",nextDate:new Date().toISOString().split("T")[0],totalAmount:""}),Oi(),await va();else{const Ye=await K.json();Je({status:"error",title:"Erreur",description:Ye.message||"Impossible de programmer l'opration",duration:4e3,isClosable:!0})}}catch(K){console.error(" Erreur programmation opration:",K),Je({status:"error",title:"Erreur",description:"Impossible de programmer l'opration. Vrifiez votre connexion.",duration:4e3,isClosable:!0})}finally{t(!1)}},xn=async L=>{try{if(!confirm("Supprimer cette opration programme et tous ses paiements ?"))return;const K=await fetch(gn(`/api/finance/scheduled-operations/${L}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(K.ok)Je({status:"success",title:"Opration supprime"}),await va();else{const Ye=await K.json().catch(()=>({}));Je({status:"error",title:"Erreur",description:Ye.message||"Suppression impossible"})}}catch(K){console.error(" Erreur suppression opration programme:",K),Je({status:"error",title:"Erreur",description:"Suppression impossible"})}},En=L=>{te(L),xe(L.amount||"");const K=L.nextDate?new Date(L.nextDate):new Date,Ye=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}`;U(Ye),H(null),xa()},Yt=async()=>{if(W){if(!re||!/^\d{4}-\d{2}$/.test(re)){Je({status:"warning",title:"Priode invalide",description:"Format attendu: YYYY-MM"});return}if(!oe||isNaN(parseFloat(oe))){Je({status:"warning",title:"Montant invalide",description:"Veuillez saisir un montant valide"});return}try{t(!0);const L=new FormData;L.append("period",re),L.append("amount",String(parseFloat(oe))),ie&&L.append("attachment",ie);const K=await fetch(gn(`/api/finance/scheduled-operations/${W.id}/payments`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:L});if(K.ok)Je({status:"success",title:"Mensualit dclare paye"}),Ls(),await Promise.all([va(),po(),hr()]);else{const Ye=await K.json().catch(()=>({}));Je({status:"error",title:"Erreur",description:Ye.message||"Dclaration impossible"})}}catch(L){console.error(" Erreur dclaration paiement:",L),Je({status:"error",title:"Erreur",description:"Dclaration impossible"})}finally{t(!1)}}},Cn=async L=>{te(L),await Tl(L.id),pd()};j.useEffect(()=>{(async()=>{await Po(),await ba()})()},[]),j.useEffect(()=>{x.length>=0&&T.length>=0&&wa()},[x,T,i]);const Es=async()=>{if(!ue.name||!ue.description){Je({status:"warning",title:"Champs requis",description:"Nom et description sont obligatoires",duration:3e3,isClosable:!0});return}try{t(!0);const L=await fetch(gn("/api/finance/simulations"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(ue)});if(L.ok){const K=await L.json();Je({status:"success",title:"Scnario cr",description:"Vous pouvez maintenant ajouter les recettes et dpenses",duration:4e3,isClosable:!0}),Ee({name:"",description:"",projectionMonths:12}),await Pi(),El(),Tt(K.scenario),Js()}else{const K=await L.json();Je({status:"error",title:"Erreur",description:K.message||"Impossible de crer le scnario",duration:4e3,isClosable:!0})}}catch(L){console.error(" Erreur cration scnario:",L),Je({status:"error",title:"Erreur",description:"Impossible de crer le scnario. Vrifiez votre connexion.",duration:4e3,isClosable:!0})}finally{t(!1)}},vr=async L=>{try{const K=await fetch(gn(`/api/finance/simulations/${L}`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(K.ok){const Ye=await K.json();Tt(Ye.scenario)}else Je({status:"error",title:"Erreur",description:"Impossible de charger les dtails du scnario",duration:4e3,isClosable:!0})}catch(K){console.error(" Erreur chargement dtails scnario:",K),Je({status:"error",title:"Erreur",description:"Impossible de charger les dtails du scnario",duration:4e3,isClosable:!0})}},Aa=async()=>{if(!nt.description||!nt.amount){Je({status:"warning",title:"Champs requis",description:"Description et montant sont obligatoires",duration:3e3,isClosable:!0});return}try{const L=await fetch(gn(`/api/finance/simulations/${De.id}/income`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...nt,amount:parseFloat(nt.amount)})});if(L.ok)Je({status:"success",title:"Recette ajoute",duration:2e3,isClosable:!0}),X({description:"",amount:"",category:"ADHESION",frequency:"MONTHLY"}),await vr(De.id);else{const K=await L.json();Je({status:"error",title:"Erreur",description:K.message||"Impossible d'ajouter la recette",duration:4e3,isClosable:!0})}}catch(L){console.error(" Erreur ajout recette:",L),Je({status:"error",title:"Erreur",description:"Impossible d'ajouter la recette",duration:4e3,isClosable:!0})}},Wc=async()=>{if(!le.description||!le.amount){Je({status:"warning",title:"Champs requis",description:"Description et montant sont obligatoires",duration:3e3,isClosable:!0});return}try{const L=await fetch(gn(`/api/finance/simulations/${De.id}/expense`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...le,amount:parseFloat(le.amount)})});if(L.ok)Je({status:"success",title:"Dpense ajoute",duration:2e3,isClosable:!0}),Ve({description:"",amount:"",category:"MAINTENANCE",frequency:"MONTHLY"}),await vr(De.id);else{const K=await L.json();Je({status:"error",title:"Erreur",description:K.message||"Impossible d'ajouter la dpense",duration:4e3,isClosable:!0})}}catch(L){console.error(" Erreur ajout dpense:",L),Je({status:"error",title:"Erreur",description:"Impossible d'ajouter la dpense",duration:4e3,isClosable:!0})}},Ta=async L=>{try{(await fetch(gn(`/api/finance/simulations/income/${L}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok?(Je({status:"success",title:"Recette supprime",duration:2e3,isClosable:!0}),await vr(De.id)):Je({status:"error",title:"Erreur",description:"Impossible de supprimer la recette",duration:4e3,isClosable:!0})}catch(K){console.error(" Erreur suppression recette:",K),Je({status:"error",title:"Erreur",description:"Impossible de supprimer la recette",duration:4e3,isClosable:!0})}},vd=async L=>{try{(await fetch(gn(`/api/finance/simulations/expense/${L}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok?(Je({status:"success",title:"Dpense supprime",duration:2e3,isClosable:!0}),await vr(De.id)):Je({status:"error",title:"Erreur",description:"Impossible de supprimer la dpense",duration:4e3,isClosable:!0})}catch(K){console.error(" Erreur suppression dpense:",K),Je({status:"error",title:"Erreur",description:"Impossible de supprimer la dpense",duration:4e3,isClosable:!0})}},yf=async L=>{try{t(!0);const K=await fetch(gn(`/api/finance/simulations/${L}/run`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(K.ok){const Ye=await K.json();pt(Ye.simulation),kl()}else{const Ye=await K.json();Je({status:"error",title:"Erreur",description:Ye.message||"Impossible d'excuter la simulation",duration:4e3,isClosable:!0})}}catch(K){console.error(" Erreur excution simulation:",K),Je({status:"error",title:"Erreur",description:"Impossible d'excuter la simulation",duration:4e3,isClosable:!0})}finally{t(!1)}},qb=async L=>{try{(await fetch(gn(`/api/finance/simulations/${L}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok?(Je({status:"success",title:"Scnario supprim",duration:2e3,isClosable:!0}),await Pi()):Je({status:"error",title:"Erreur",description:"Impossible de supprimer le scnario",duration:4e3,isClosable:!0})}catch(K){console.error(" Erreur suppression scnario:",K),Je({status:"error",title:"Erreur",description:"Impossible de supprimer le scnario",duration:4e3,isClosable:!0})}},Gb=async(L,K="simulation")=>{try{const Ye=await fetch(gn(`/api/finance/simulations/${L}/report.pdf`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Ye.ok){Je({status:"error",title:"Export PDF",description:"chec de la gnration du PDF"});return}const Mt=await Ye.blob(),jr=URL.createObjectURL(Mt),on=document.createElement("a");on.href=jr;const ps=(K||"simulation").replace(/[^a-z0-9-_]+/gi,"_");on.download=`simulation-${ps}.pdf`,document.body.appendChild(on),on.click(),document.body.removeChild(on),URL.revokeObjectURL(jr),Je({status:"success",title:"Export PDF",description:"Tlchargement dmarr"})}catch(Ye){console.error(" Erreur export PDF:",Ye),Je({status:"error",title:"Export PDF",description:"Erreur lors du tlchargement"})}};return r.jsx(de,{p:6,children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",align:"center",children:[r.jsx(we,{size:"lg",color:"blue.600",children:" Gestion Financire"}),r.jsxs(ne,{children:[r.jsx(et,{icon:r.jsx(ao,{}),onClick:ba,isLoading:e,variant:"outline",size:"sm"}),r.jsx(et,{icon:r.jsx(mg,{}),onClick:ff,variant:"outline",size:"sm",colorScheme:"purple"}),r.jsxs(Ge,{colorScheme:p.balance>=0?"green":"red",fontSize:"lg",p:2,borderRadius:"md",cursor:"pointer",onClick:()=>fe(!B),children:[d?r.jsx(Wn,{as:ed,mr:1}):r.jsx(Wn,{as:qC,mr:1}),"Solde: ",rt(p.balance)]})]})]}),B&&r.jsxs(Ft,{status:"warning",borderRadius:"md",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"stretch",spacing:3,flex:1,children:[r.jsx(O,{fontWeight:"bold",children:"Configuration du solde (Code requis)"}),r.jsxs(ne,{children:[r.jsxs(ne,{children:[r.jsx(O,{fontSize:"sm",children:"Code:"}),r.jsx(ne,{children:r.jsxs(BC,{value:I,onChange:ee,type:"number",children:[r.jsx(qa,{}),r.jsx(qa,{}),r.jsx(qa,{}),r.jsx(qa,{})]})})]}),r.jsxs(Qn,{value:ae,onChange:P,precision:2,step:.01,width:"150px",children:[r.jsx(Zn,{placeholder:"Nouveau solde"}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]}),r.jsx(pe,{value:R,onChange:L=>N(L.target.value),placeholder:"Motif de rgularisation",width:"280px",size:"sm"}),r.jsx(Y,{size:"sm",colorScheme:"orange",onClick:$r,isLoading:e,leftIcon:r.jsx(sy,{}),children:"Appliquer"}),r.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>fe(!1),leftIcon:r.jsx(Im,{}),children:"Annuler"})]})]})]}),r.jsxs(tt,{columns:{base:2,md:6},spacing:4,children:[r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Solde Actuel"}),r.jsx(ft,{color:p.balance>=0?"green.600":"red.600",children:rt(p.balance)}),l&&r.jsxs(Si,{fontSize:"xs",children:["MAJ: ",ws(l)]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Recettes Total"}),r.jsx(ft,{color:"green.600",children:rt(p.totalCredits)}),r.jsxs(Si,{children:[r.jsx(Ch,{type:"increase"}),"Entres"]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Dpenses Total"}),r.jsx(ft,{color:"red.600",children:rt(p.totalDebits)}),r.jsxs(Si,{children:[r.jsx(Ch,{type:"decrease"}),"Sorties"]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Ce Mois"}),r.jsx(ft,{color:p.monthlyBalance>=0?"green.600":"red.600",children:rt(p.monthlyBalance)}),r.jsxs(Si,{children:[r.jsx(Ch,{type:p.monthlyBalance>=0?"increase":"decrease"}),"Rsultat mensuel"]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Programm/Mois"}),r.jsx(ft,{color:p.scheduledMonthlyImpact>=0?"green.600":"red.600",children:rt(p.scheduledMonthlyImpact)}),r.jsxs(Si,{children:[p.scheduledCount," oprations"]})]})})})]}),r.jsxs(gl,{index:n,onChange:s,children:[r.jsxs(xl,{children:[r.jsx(an,{children:" Transactions"}),r.jsx(an,{children:" Devis & Factures"}),r.jsx(an,{children:" chanciers"}),r.jsx(an,{children:" Paiements programms"}),r.jsx(an,{children:" Notes de frais"}),r.jsx(an,{children:" Simulations"}),r.jsx(an,{children:" Rapports"}),r.jsx(an,{children:" Configuration"})]}),r.jsxs(yl,{children:[r.jsx(ln,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",children:"Transactions"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:Bc,size:"sm",children:"Nouvelle transaction"})]}),e?r.jsxs(de,{textAlign:"center",p:8,children:[r.jsx(sn,{size:"lg"}),r.jsx(O,{mt:2,children:"Chargement..."})]}):x.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Aucune transaction enregistre"]}):r.jsx(Me,{children:r.jsx(Ae,{p:0,children:r.jsxs(Tr,{variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{children:"Description"}),r.jsx(Ie,{children:"Catgorie"}),r.jsx(Ie,{children:"Document"}),r.jsx(Ie,{children:"Type"}),r.jsx(Ie,{isNumeric:!0,children:"Montant"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:x.map((L,K)=>r.jsxs($t,{children:[r.jsx(Pe,{children:ws(L.date||L.createdAt)}),r.jsx(Pe,{children:L.description}),r.jsx(Pe,{children:r.jsx(Ge,{size:"sm",variant:"outline",children:Ml(L.category)})}),r.jsx(Pe,{children:(()=>{const Ye=Ht.find(Mt=>Mt.id===L.documentId);return Ye?r.jsxs(ne,{spacing:2,children:[r.jsx(Ge,{colorScheme:Ye.type==="INVOICE"?"purple":"gray",children:Ye.type==="INVOICE"?"Facture":"Devis"}),r.jsx(O,{fontSize:"sm",children:Ye.number||Ye.title||Ye.id})]}):r.jsx(O,{fontSize:"sm",color:"gray.500",children:""})})()}),r.jsx(Pe,{children:r.jsx(Ge,{colorScheme:L.type==="CREDIT"?"green":"red",size:"sm",children:L.type==="CREDIT"?"Recette":"Dpense"})}),r.jsx(Pe,{isNumeric:!0,children:r.jsxs(O,{color:L.type==="CREDIT"?"green.600":"red.600",fontWeight:"bold",children:[L.type==="CREDIT"?"+":"-",rt(Math.abs(L.amount))]})}),r.jsx(Pe,{children:r.jsxs(oa,{children:[r.jsx(aa,{as:et,icon:r.jsx(zh,{}),variant:"ghost",size:"sm"}),r.jsxs(la,{children:[r.jsx(Zt,{icon:r.jsx(_p,{}),onClick:()=>Ea(L),children:"Modifier"}),r.jsx(Zt,{onClick:()=>ka(L),children:"Lier  devis/facture"}),r.jsx(Zt,{icon:r.jsx(Yn,{}),color:"red.500",onClick:()=>Dl(L.id),children:"Supprimer"})]})]})})]},L.id||K))})]})})})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",children:"Devis & Factures"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"purple",size:"sm",onClick:J,children:"Nouveau document"})]}),e?r.jsxs(de,{textAlign:"center",p:8,children:[r.jsx(sn,{size:"lg"}),r.jsx(O,{mt:2,children:"Chargement"})]}):r.jsx(Me,{children:r.jsx(Ae,{p:0,children:r.jsxs(Tr,{variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Type"}),r.jsx(Ie,{children:"Numro"}),r.jsx(Ie,{children:"Titre"}),r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{isNumeric:!0,children:"Montant"}),r.jsx(Ie,{children:"vnement"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:Ht.map(L=>r.jsxs($t,{children:[r.jsx(Pe,{children:r.jsx(Ge,{colorScheme:L.type==="INVOICE"?"purple":"gray",children:L.type==="INVOICE"?"Facture":"Devis"})}),r.jsx(Pe,{children:L.number||""}),r.jsx(Pe,{children:L.title||""}),r.jsx(Pe,{children:ws(L.date)}),r.jsx(Pe,{isNumeric:!0,children:rt(Number(L.amount||0))}),r.jsx(Pe,{children:L.eventId?r.jsx(Ge,{children:L.eventId}):r.jsx(O,{fontSize:"sm",color:"gray.500",children:""})}),r.jsx(Pe,{children:r.jsx(Ge,{variant:"outline",children:L.status||"DRAFT"})}),r.jsx(Pe,{children:r.jsxs(oa,{children:[r.jsx(aa,{as:et,icon:r.jsx(zh,{}),variant:"ghost",size:"sm"}),r.jsxs(la,{children:[r.jsx(Zt,{icon:r.jsx(_p,{}),onClick:()=>he(L),children:"Modifier"}),r.jsx(Zt,{icon:r.jsx(Yn,{}),color:"red.500",onClick:()=>st(L.id),children:"Supprimer"})]})]})})]},L.id))})]})})})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",children:"chanciers"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"purple",onClick:Oo,size:"sm",children:"Nouvel chancier"})]}),e?r.jsxs(de,{textAlign:"center",p:8,children:[r.jsx(sn,{size:"lg"}),r.jsx(O,{mt:2,children:"Chargement..."})]}):(()=>{const L=T.filter(K=>K.type==="SCHEDULED_PAYMENT"&&String(K.frequency||"").toUpperCase()==="MONTHLY");return L.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Aucun chancier (mensualits) enregistr"]}):r.jsx(tt,{columns:{base:1,md:2,lg:3},spacing:4,children:L.map((K,Ye)=>{const Mt=Number.isFinite(K.totalAmount)&&K.totalAmount>0,jr=Mt?Math.max(K.totalAmount-(K.remainingTotalAmount||0),0):null,on=Number.isFinite(K.plannedCountYear)&&K.plannedCountYear>0,ps=on?Math.max((K.plannedCountYear||0)-(K.remainingCountYear||0),0):null,zo=on?Math.max(0,Math.min(1,ps/K.plannedCountYear)):null,ks=Mt?Math.max(0,Math.min(1,jr/K.totalAmount)):zo,Io=ks==null?"gray.400":ks>=.75?"red":ks>=.4?"orange":"red";return r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"sm",noOfLines:2,children:K.description}),r.jsxs(ne,{children:[r.jsx(Ge,{variant:"outline",children:"Mensuel"}),r.jsx(Ge,{colorScheme:"red",children:"DPENSE"})]})]})}),r.jsx(Ae,{children:r.jsxs(ne,{align:"center",spacing:4,children:[r.jsx(de,{minW:"120px",w:"120px",children:r.jsx(fi,{percent:ks,color:Io})}),r.jsxs(Q,{align:"start",spacing:1,flex:1,children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Prochaine date"}),r.jsx(O,{fontWeight:"medium",children:K.nextDate?ws(K.nextDate):""}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Mensualit"}),r.jsxs(O,{fontWeight:"bold",color:"red.600",children:["- ",rt(Math.abs(K.amount))]}),r.jsxs(ne,{spacing:3,children:[r.jsxs(Ge,{variant:"subtle",colorScheme:"blue",children:["Payes: ",K.paymentsCount??0]}),Mt&&r.jsxs(Ge,{variant:"subtle",children:["Restant total: ",rt(K.remainingTotalAmount||0)]}),!Mt&&on&&r.jsxs(Ge,{variant:"subtle",colorScheme:"purple",children:["Payes cette anne: ",ps]})]}),K.monthsRemainingTotal&&r.jsxs(O,{fontSize:"sm",color:"gray.600",children:["Mensualits restantes: ",K.monthsRemainingTotal]}),K.estimatedEndDate&&r.jsxs(O,{fontSize:"sm",color:"gray.600",children:["Fin estime: ",ws(K.estimatedEndDate)]})]})]})}),r.jsx(Ae,{pt:0,children:r.jsxs(ne,{children:[r.jsx(Y,{size:"sm",onClick:()=>En(K),children:"Dclarer pay"}),r.jsx(Y,{size:"sm",variant:"outline",onClick:()=>Cn(K),children:"Voir paiements"}),r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(Yn,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>xn(K.id)})]})})]},K.id||Ye)})})})()]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",children:"Paiements programms (mensuels)"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"purple",onClick:Oo,size:"sm",children:"Ajouter un prlvement"})]}),e?r.jsxs(de,{textAlign:"center",p:8,children:[r.jsx(sn,{size:"lg"}),r.jsx(O,{mt:2,children:"Chargement..."})]}):(()=>{const L=T.filter(K=>K.type==="SCHEDULED_PAYMENT"&&String(K.frequency||"").toUpperCase()==="MONTHLY");return L.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Aucun paiement mensuel programm"]}):r.jsx(tt,{columns:{base:1,md:2,lg:3},spacing:4,children:L.map((K,Ye)=>{const Mt=Number.isFinite(K.totalAmount)&&K.totalAmount>0,jr=Mt?Math.max(K.totalAmount-(K.remainingTotalAmount||0),0):null,on=Number.isFinite(K.plannedCountYear)&&K.plannedCountYear>0,ps=on?Math.max((K.plannedCountYear||0)-(K.remainingCountYear||0),0):null,zo=on?Math.max(0,Math.min(1,ps/K.plannedCountYear)):null,ks=Mt?Math.max(0,Math.min(1,jr/K.totalAmount)):zo,Io=ks==null?"gray.400":ks>=.75?"red":ks>=.4?"orange":"red";return r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"sm",noOfLines:2,children:K.description}),r.jsxs(ne,{children:[r.jsx(Ge,{variant:"outline",children:"Mensuel"}),r.jsx(Ge,{colorScheme:"red",children:"DPENSE"})]})]})}),r.jsx(Ae,{children:r.jsxs(ne,{align:"center",spacing:4,children:[r.jsx(de,{minW:"120px",w:"120px",children:r.jsx(fi,{percent:ks,color:Io})}),r.jsxs(Q,{align:"start",spacing:1,flex:1,children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Prochaine date"}),r.jsx(O,{fontWeight:"medium",children:K.nextDate?ws(K.nextDate):""}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Mensualit"}),r.jsxs(O,{fontWeight:"bold",color:"red.600",children:["- ",rt(Math.abs(K.amount))]}),r.jsxs(ne,{spacing:3,children:[r.jsxs(Ge,{variant:"subtle",colorScheme:"blue",children:["Payes: ",K.paymentsCount??0]}),Mt&&r.jsxs(Ge,{variant:"subtle",children:["Restant total: ",rt(K.remainingTotalAmount||0)]}),!Mt&&on&&r.jsxs(Ge,{variant:"subtle",colorScheme:"purple",children:["Payes cette anne: ",ps]})]}),K.estimatedEndDate&&r.jsxs(O,{fontSize:"sm",color:"gray.600",children:["Fin estime: ",ws(K.estimatedEndDate)]})]})]})}),r.jsx(Ae,{pt:0,children:r.jsxs(ne,{children:[r.jsx(Y,{size:"sm",onClick:()=>En(K),children:"Dclarer pay"}),r.jsx(Y,{size:"sm",variant:"outline",onClick:()=>Cn(K),children:"Voir paiements"}),r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(Yn,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>xn(K.id)})]})})]},K.id||Ye)})})})()]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsx(ne,{justify:"space-between",children:r.jsx(we,{size:"md",children:"Notes de frais"})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(ne,{spacing:3,align:"end",children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Description"}),r.jsx(pe,{value:Fn.description,onChange:L=>Oe(K=>({...K,description:L.target.value})),placeholder:"Ex: Achat fournitures"})]}),r.jsxs(G,{isRequired:!0,width:"220px",children:[r.jsx(q,{children:"Montant ()"}),r.jsxs(Qn,{value:Fn.amount,onChange:L=>Oe(K=>({...K,amount:L})),precision:2,step:.01,children:[r.jsx(Zn,{placeholder:"0.00"}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]})]}),r.jsxs(G,{width:"220px",children:[r.jsx(q,{children:"Date"}),r.jsx(pe,{type:"date",value:Fn.date,onChange:L=>Oe(K=>({...K,date:L.target.value}))})]}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:go,children:"Ajouter"})]})})}),at.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Aucune note de frais pour le moment"]}):r.jsx(Me,{children:r.jsx(Ae,{p:0,children:r.jsxs(Tr,{variant:"simple",size:"sm",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{children:"Description"}),r.jsx(Ie,{isNumeric:!0,children:"Montant"}),r.jsx(Ie,{children:"Statut"}),Ca&&r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:at.map(L=>r.jsxs($t,{children:[r.jsx(Pe,{children:ws(L.date||L.createdAt)}),r.jsx(Pe,{children:L.description}),r.jsx(Pe,{isNumeric:!0,children:rt(L.amount)}),r.jsx(Pe,{children:r.jsx(Ge,{colorScheme:L.status==="PAID"?"green":L.status==="APPROVED"?"blue":L.status==="REJECTED"?"red":"orange",children:L.status})}),Ca&&r.jsx(Pe,{children:r.jsxs(ne,{children:[r.jsx(Y,{size:"xs",onClick:()=>xo(L.id,"APPROVED"),leftIcon:r.jsx(sy,{}),colorScheme:"blue",variant:"outline",children:"Approuver"}),r.jsx(Y,{size:"xs",onClick:()=>xo(L.id,"PAID"),leftIcon:r.jsx(Zu,{}),colorScheme:"green",variant:"outline",children:"Pay"}),r.jsx(Y,{size:"xs",onClick:()=>xo(L.id,"REJECTED"),leftIcon:r.jsx(Im,{}),colorScheme:"red",variant:"outline",children:"Rejeter"}),r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(Yn,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:()=>pi(L.id)})]})})]},L.id))})]})})})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",children:"Simulations Financires"}),r.jsx(Y,{leftIcon:r.jsx(Za,{}),colorScheme:"teal",onClick:dd,size:"sm",children:"Nouveau scnario"})]}),Te.scenarios.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:2,children:[r.jsx(O,{fontWeight:"bold",children:"Aucun scnario de simulation"}),r.jsx(O,{fontSize:"sm",children:"Crez des scnarios pour simuler l'volution de votre trsorerie. tape 1: Crer le contexte, tape 2: Ajouter recettes/dpenses."})]})]}):r.jsx(tt,{columns:{base:1,md:2},spacing:4,children:Te.scenarios.map(L=>{const K=L.itemsCount>0,Ye=L.totalMonthlyIncome-L.totalMonthlyExpenses;return r.jsxs(Me,{borderWidth:2,borderColor:K?"green.200":"orange.200",children:[r.jsx(Ct,{children:r.jsxs(ne,{justify:"space-between",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"sm",children:L.name}),r.jsxs(ne,{children:[r.jsx(Ge,{colorScheme:K?"green":"orange",size:"sm",children:K?"Complet":"Brouillon"}),r.jsxs(Ge,{variant:"outline",size:"sm",children:[L.itemsCount," lment(s)"]})]})]}),r.jsxs(oa,{children:[r.jsx(aa,{as:et,icon:r.jsx(zh,{}),variant:"ghost",size:"sm"}),r.jsxs(la,{children:[r.jsx(Zt,{icon:r.jsx(_p,{}),onClick:async()=>{await vr(L.id),Js()},children:"diter"}),r.jsx(Zt,{icon:r.jsx(Za,{}),onClick:()=>yf(L.id),isDisabled:!K,children:"Excuter"}),r.jsx(Zt,{icon:r.jsx(ml,{}),onClick:()=>Gb(L.id,L.name),isDisabled:!K,children:"Exporter PDF"}),r.jsx(rn,{}),r.jsx(Zt,{icon:r.jsx(Yn,{}),color:"red.500",onClick:()=>{confirm("Supprimer ce scnario ?")&&qb(L.id)},children:"Supprimer"})]})]})]})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[r.jsx(O,{fontSize:"sm",color:"gray.600",noOfLines:2,children:L.description}),K?r.jsxs(tt,{columns:3,spacing:2,children:[r.jsxs(dt,{size:"sm",children:[r.jsx(ht,{fontSize:"xs",children:"Revenus"}),r.jsx(ft,{fontSize:"sm",color:"green.600",children:rt(L.totalMonthlyIncome)})]}),r.jsxs(dt,{size:"sm",children:[r.jsx(ht,{fontSize:"xs",children:"Dpenses"}),r.jsx(ft,{fontSize:"sm",color:"red.600",children:rt(L.totalMonthlyExpenses)})]}),r.jsxs(dt,{size:"sm",children:[r.jsx(ht,{fontSize:"xs",children:"Rsultat"}),r.jsx(ft,{fontSize:"sm",color:Ye>=0?"green.600":"red.600",children:rt(Ye)})]})]}):r.jsxs(Ft,{status:"warning",size:"sm",children:[r.jsx(Vt,{}),r.jsx(O,{fontSize:"xs",children:"Ajoutez des recettes et dpenses pour complter le scnario"})]}),r.jsxs(ne,{children:[r.jsx(Y,{size:"xs",variant:"outline",leftIcon:r.jsx(_p,{}),onClick:async()=>{await vr(L.id),Js()},children:"diter"}),r.jsx(Y,{size:"xs",colorScheme:"teal",leftIcon:r.jsx(Za,{}),onClick:()=>yf(L.id),isDisabled:!K,isLoading:e,children:"Simuler"})]})]})})]},L.id)})})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",children:"Rapports Financiers"}),r.jsxs(ne,{children:[r.jsxs(G,{width:"150px",children:[r.jsx(q,{children:"Anne"}),r.jsx(Qe,{value:bt,onChange:L=>Be(parseInt(L.target.value,10)),children:[0,1,2,3,4].map(L=>{const K=new Date().getFullYear()-L;return r.jsx("option",{value:K,children:K},K)})})]}),r.jsx(Y,{leftIcon:r.jsx(ao,{}),onClick:()=>zi(bt),isLoading:e,children:"Actualiser"}),r.jsx(Y,{leftIcon:r.jsx(ml,{}),colorScheme:"purple",onClick:mf,children:"Export PDF"})]})]}),ot?r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(tt,{columns:{base:1,md:4},spacing:4,children:[r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Total recettes (priode)"}),r.jsx(ft,{color:"green.600",children:rt(ot?.totals?.credits||0)})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Total dpenses (priode)"}),r.jsx(ft,{color:"red.600",children:rt(ot?.totals?.debits||0)})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Net (priode)"}),r.jsx(ft,{color:(ot?.totals?.net||0)>=0?"green.600":"red.600",children:rt(ot?.totals?.net||0)})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Solde actuel"}),r.jsx(ft,{children:rt(i)})]})})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Soldes de priode"})}),r.jsx(Ae,{children:r.jsxs(tt,{columns:{base:1,md:3},spacing:4,children:[r.jsxs(dt,{children:[r.jsx(ht,{children:"Solde d'ouverture"}),r.jsx(ft,{children:rt(ot?.balances?.opening||0)})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"Solde de clture (calcul)"}),r.jsx(ft,{children:rt(ot?.balances?.closing||0)})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"Ouverture + Net"}),r.jsx(ft,{children:rt(ot?.balances?.closingFromOpeningPlusNet||0)})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(we,{size:"sm",children:["Par mois (",bt,")"]})}),r.jsx(Ae,{p:0,children:r.jsxs(Tr,{size:"sm",variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Mois"}),r.jsx(Ie,{isNumeric:!0,children:"Recettes"}),r.jsx(Ie,{isNumeric:!0,children:"Dpenses"}),r.jsx(Ie,{isNumeric:!0,children:"Net"})]})}),r.jsx(zr,{children:(ot?.monthly||[]).map(L=>r.jsxs($t,{children:[r.jsx(Pe,{children:String(L.month).padStart(2,"0")}),r.jsx(Pe,{isNumeric:!0,children:rt(L.credits)}),r.jsx(Pe,{isNumeric:!0,children:rt(L.debits)}),r.jsx(Pe,{isNumeric:!0,children:r.jsx(O,{color:(L.net||0)>=0?"green.600":"red.600",children:rt(L.net)})})]},L.month))})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Par catgorie"})}),r.jsx(Ae,{p:0,children:r.jsxs(Tr,{size:"sm",variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Catgorie"}),r.jsx(Ie,{isNumeric:!0,children:"Recettes"}),r.jsx(Ie,{isNumeric:!0,children:"Dpenses"}),r.jsx(Ie,{isNumeric:!0,children:"Net"})]})}),r.jsx(zr,{children:Object.entries(ot?.byCategory||{}).map(([L,K])=>r.jsxs($t,{children:[r.jsx(Pe,{children:L}),r.jsx(Pe,{isNumeric:!0,children:rt(K.credits)}),r.jsx(Pe,{isNumeric:!0,children:rt(K.debits)}),r.jsx(Pe,{isNumeric:!0,children:r.jsx(O,{color:(K.net||0)>=0?"green.600":"red.600",children:rt(K.net)})})]},L))})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Transactions rcentes (extrait)"})}),r.jsx(Ae,{p:0,children:r.jsxs(Tr,{size:"sm",variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{children:"Description"}),r.jsx(Ie,{children:"Catgorie"}),r.jsx(Ie,{isNumeric:!0,children:"Montant"})]})}),r.jsx(zr,{children:(ot?.sample||[]).map(L=>r.jsxs($t,{children:[r.jsx(Pe,{children:ws(L.date)}),r.jsx(Pe,{children:L.description}),r.jsx(Pe,{children:(L.category||"AUTRE").toUpperCase()}),r.jsx(Pe,{isNumeric:!0,children:r.jsx(O,{color:String(L.type).toUpperCase()==="CREDIT"?"green.600":"red.600",children:rt(L.amount)})})]},`${L.id}-${L.date}`))})]})})]})]}):r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsxs(O,{children:["Aucun rapport disponible pour ",bt,". Essayez d'actualiser."]})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsx(we,{size:"md",children:"Configuration Avance"}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Historique des Modifications de Solde"})}),r.jsx(Ae,{children:Z.length===0?r.jsx(O,{color:"gray.500",fontSize:"sm",children:"Aucune modification enregistre"}):r.jsxs(Tr,{variant:"simple",size:"sm",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{children:"Ancien solde"}),r.jsx(Ie,{children:"Nouveau solde"}),r.jsx(Ie,{children:"Diffrence"}),r.jsx(Ie,{children:"Raison"})]})}),r.jsx(zr,{children:Z.slice(0,10).map((L,K)=>r.jsxs($t,{children:[r.jsx(Pe,{children:ws(L.date)}),r.jsx(Pe,{children:rt(L.oldBalance)}),r.jsx(Pe,{children:rt(L.newBalance)}),r.jsx(Pe,{children:r.jsxs(O,{color:L.newBalance-L.oldBalance>=0?"green.600":"red.600",children:[L.newBalance-L.oldBalance>=0?"+":"",rt(L.newBalance-L.oldBalance)]})}),r.jsx(Pe,{fontSize:"sm",children:L.reason})]},K))})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Paramtres de Simulation"})}),r.jsx(Ae,{children:r.jsxs(G,{children:[r.jsx(q,{children:"Nombre de mois  projeter"}),r.jsxs(Qn,{value:Te.projectionMonths,onChange:L=>je(K=>({...K,projectionMonths:parseInt(L)||12})),min:1,max:60,children:[r.jsx(Zn,{}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]}),r.jsxs(O,{fontSize:"xs",color:"gray.500",mt:1,children:["Entre 1 et 60 mois (actuellement: ",Te.projectionMonths," mois)"]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Scurit"})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[r.jsxs(ne,{children:[r.jsx(Wn,{as:d?ed:qC,color:d?"red.500":"green.500"}),r.jsxs(O,{fontSize:"sm",children:["Solde ",d?"verrouill":"dverrouill"," -",d?" Code requis pour modification":" Modification libre"]})]}),r.jsxs(Ft,{status:"warning",size:"sm",children:[r.jsx(Vt,{}),r.jsx(O,{fontSize:"xs",children:"Le code de scurit  4 chiffres est requis pour toute modification directe du solde. Contactez l'administrateur systme si vous avez oubli le code."})]})]})})]})]})})]})]}),r.jsxs(mt,{isOpen:ar,onClose:jn,isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Modifier la transaction"}),r.jsx(kt,{}),r.jsx(gt,{children:lr&&r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(pe,{value:lr.description||"",onChange:L=>ss(K=>({...K,description:L.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Catgorie"}),r.jsxs(Qe,{value:lr.category||"ADHESION",onChange:L=>ss(K=>({...K,category:L.target.value})),children:[r.jsx("option",{value:"ADHESION",children:"Adhsion"}),r.jsx("option",{value:"EVENEMENT",children:"vnement"}),r.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),r.jsx("option",{value:"CARBURANT",children:"Carburant"}),r.jsx("option",{value:"AUTRE",children:"Autre"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Type"}),r.jsxs(Qe,{value:lr.type||"CREDIT",onChange:L=>ss(K=>({...K,type:L.target.value})),children:[r.jsx("option",{value:"CREDIT",children:"Recette"}),r.jsx("option",{value:"DEBIT",children:"Dpense"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Montant"}),r.jsxs(Qn,{value:lr.amount,onChange:L=>ss(K=>({...K,amount:L})),precision:2,step:.5,children:[r.jsx(Zn,{}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date"}),r.jsx(pe,{type:"date",value:(lr.date||"").slice(0,10),onChange:L=>ss(K=>({...K,date:L.target.value}))})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:jn,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:yd,children:"Enregistrer"})]})]})]}),r.jsxs(mt,{isOpen:jl,onClose:lo,isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Lier  un devis/une facture"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsx(Q,{spacing:3,align:"stretch",children:r.jsxs(G,{children:[r.jsx(q,{children:"Document"}),r.jsx(Qe,{placeholder:"Slectionner un document",value:zs,onChange:L=>Xs(L.target.value),children:Ht.map(L=>r.jsxs("option",{value:L.id,children:[L.type==="INVOICE"?"Facture":"Devis","  ",L.number||L.title||L.id,"  ",rt(Number(L.amount||0))]},L.id))})]})})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:lo,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:bd,children:"Lier"})]})]})]}),r.jsxs(mt,{isOpen:Br,onClose:hi,isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:_t?"Modifier le document":"Nouveau document"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsxs(ne,{children:[r.jsxs(G,{children:[r.jsx(q,{children:"Type"}),r.jsxs(Qe,{value:fn.type,onChange:L=>yr(K=>({...K,type:L.target.value})),children:[r.jsx("option",{value:"QUOTE",children:"Devis"}),r.jsx("option",{value:"INVOICE",children:"Facture"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date"}),r.jsx(pe,{type:"date",value:fn.date,onChange:L=>yr(K=>({...K,date:L.target.value}))})]})]}),r.jsxs(ne,{children:[r.jsxs(G,{children:[r.jsx(q,{children:"Numro"}),r.jsx(pe,{value:fn.number,onChange:L=>yr(K=>({...K,number:L.target.value})),placeholder:"ex: 2025-INV-001"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Montant"}),r.jsxs(Qn,{value:fn.amount,onChange:L=>yr(K=>({...K,amount:L})),precision:2,step:.5,children:[r.jsx(Zn,{}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Titre"}),r.jsx(pe,{value:fn.title,onChange:L=>yr(K=>({...K,title:L.target.value})),placeholder:"Objet du document"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Statut"}),r.jsxs(Qe,{value:fn.status,onChange:L=>yr(K=>({...K,status:L.target.value})),children:[r.jsx("option",{value:"DRAFT",children:"Brouillon"}),r.jsx("option",{value:"SENT",children:"Envoy"}),r.jsx("option",{value:"PAID",children:"Pay"}),r.jsx("option",{value:"CANCELLED",children:"Annul"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"vnement (optionnel)"}),r.jsx(pe,{value:fn.eventId,onChange:L=>yr(K=>({...K,eventId:L.target.value})),placeholder:"ID d'vnement"})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",onClick:hi,children:"Annuler"}),r.jsx(Y,{colorScheme:"purple",onClick:Ce,children:_t?"Enregistrer":"Crer"})]})]})]}),r.jsxs(mt,{isOpen:Do,onClose:wl,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Configuration Rapide"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsx(O,{fontSize:"sm",children:"Configuration scurise du solde de base. Un code  4 chiffres est requis."})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Code de scurit (4 chiffres)"}),r.jsx(ne,{children:r.jsxs(BC,{value:I,onChange:ee,type:"number",children:[r.jsx(qa,{}),r.jsx(qa,{}),r.jsx(qa,{}),r.jsx(qa,{})]})})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nouveau solde ()"}),r.jsxs(Qn,{value:ae,onChange:P,precision:2,step:.01,children:[r.jsx(Zn,{placeholder:"Entrez le nouveau solde"}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]})]}),ae&&!isNaN(parseFloat(ae))&&r.jsxs(Ft,{status:parseFloat(ae)>=i?"success":"warning",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontSize:"sm",fontWeight:"bold",children:"Aperu de la modification"}),r.jsxs(O,{fontSize:"sm",children:["Solde actuel: ",rt(i)]}),r.jsxs(O,{fontSize:"sm",children:["Nouveau solde: ",rt(parseFloat(ae))]}),r.jsxs(O,{fontSize:"sm",color:parseFloat(ae)-i>=0?"green.600":"red.600",children:["Diffrence: ",parseFloat(ae)-i>=0?"+":"",rt(parseFloat(ae)-i)]})]})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:wl,children:"Annuler"}),r.jsx(Y,{colorScheme:"orange",onClick:$r,isLoading:e,leftIcon:r.jsx(xc,{}),children:"Configurer le solde"})]})]})]}),r.jsxs(mt,{isOpen:ho,onClose:Ls,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Dclarer une mensualit paye"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Priode"}),r.jsx(pe,{type:"month",value:re,onChange:L=>U(L.target.value)})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Montant ()"}),r.jsxs(Qn,{value:oe,onChange:L=>xe(L),precision:2,step:.01,children:[r.jsx(Zn,{}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Attestation / Photo"}),r.jsx(pe,{type:"file",accept:"image/*,application/pdf",onChange:L=>H(L.target.files?.[0]||null)}),r.jsx(O,{fontSize:"xs",color:"gray.500",mt:1,children:"Pice justificative obligatoire"})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:Ls,children:"Annuler"}),r.jsx(Y,{colorScheme:"green",onClick:Yt,isLoading:e,children:"Dclarer"})]})]})]}),r.jsxs(mt,{isOpen:$c,onClose:Ni,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsxs(xt,{children:["Paiements  ",W?.description]}),r.jsx(kt,{}),r.jsx(gt,{children:F.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Aucun paiement enregistr"]}):r.jsxs(Tr,{size:"sm",variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Priode"}),r.jsx(Ie,{children:"Pay le"}),r.jsx(Ie,{isNumeric:!0,children:"Montant"}),r.jsx(Ie,{children:"Justificatif"})]})}),r.jsx(zr,{children:F.map(L=>r.jsxs($t,{children:[r.jsx(Pe,{children:L.period}),r.jsx(Pe,{children:ws(L.paidAt)}),r.jsx(Pe,{isNumeric:!0,children:rt(L.amount)}),r.jsx(Pe,{children:L.attachment?.dataUrl?r.jsx(fE,{href:L.attachment.dataUrl,target:"_blank",color:"blue.600",children:"Ouvrir"}):r.jsx(O,{fontSize:"xs",color:"gray.500",children:"N/A"})})]},L.id))})]})}),r.jsx(Nt,{children:r.jsx(Y,{onClick:Ni,children:"Fermer"})})]})]}),r.jsxs(mt,{isOpen:ma,onClose:Di,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{maxH:"90vh",overflowY:"auto",children:[r.jsx(xt,{children:"Nouvelle Transaction"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:6,children:[r.jsxs(Q,{spacing:4,width:"full",children:[r.jsx(we,{size:"sm",children:"Informations de la transaction"}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Type"}),r.jsxs(Qe,{value:b.type,onChange:L=>C(K=>({...K,type:L.target.value})),children:[r.jsx("option",{value:"CREDIT",children:"Recette"}),r.jsx("option",{value:"DEBIT",children:"Dpense"})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Montant ()"}),r.jsxs(Qn,{value:b.amount,onChange:L=>C(K=>({...K,amount:L})),precision:2,step:.01,children:[r.jsx(Zn,{placeholder:"0.00"}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Description"}),r.jsx(pe,{value:b.description,onChange:L=>C(K=>({...K,description:L.target.value})),placeholder:"Description de la transaction"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date"}),r.jsx(pe,{type:"date",value:b.date,onChange:L=>C(K=>({...K,date:L.target.value}))})]})]}),r.jsx(rn,{}),r.jsxs(Q,{spacing:3,width:"full",children:[r.jsx(we,{size:"sm",children:"Allouer par catgorie"}),r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Vous pouvez diviser ce montant entre plusieurs catgories (ex: 100 gasoil + 13 assurance)"}),S.length>0&&r.jsxs(de,{width:"full",children:[r.jsx(O,{fontSize:"sm",fontWeight:"bold",mb:2,children:"Allocations actuelles:"}),r.jsx(Q,{spacing:2,align:"stretch",children:S.map((L,K)=>r.jsxs(ne,{p:2,borderRadius:"md",bg:ir("gray.100","gray.600"),justify:"space-between",children:[r.jsxs(Q,{align:"start",spacing:0,children:[r.jsxs(ne,{children:[r.jsx(de,{w:3,h:3,borderRadius:"full",bg:L.category?.color}),r.jsx(O,{fontWeight:"bold",children:L.category?.name})]}),L.notes&&r.jsx(O,{fontSize:"xs",color:"gray.500",children:L.notes})]}),r.jsxs(ne,{children:[r.jsx(O,{fontWeight:"bold",children:rt(L.allocatedAmount)}),r.jsx(et,{size:"sm",icon:r.jsx(Yn,{}),colorScheme:"red",variant:"ghost",onClick:()=>{E(S.filter((Ye,Mt)=>Mt!==K))}})]})]},K))}),r.jsxs(O,{fontSize:"xs",color:"gray.500",mt:2,children:["Total allou: ",rt(S.reduce((L,K)=>L+(parseFloat(K.allocatedAmount)||0),0))," / ",rt(parseFloat(b.amount)||0)]})]}),r.jsx(Me,{width:"full",children:r.jsx(Ae,{children:r.jsxs(Q,{spacing:3,children:[r.jsx(we,{size:"xs",children:"Ajouter une allocation"}),r.jsxs(G,{children:[r.jsx(q,{fontSize:"sm",children:"Catgorie"}),r.jsxs(Qe,{value:k.categoryId,onChange:L=>A({...k,categoryId:L.target.value}),size:"sm",children:[r.jsx("option",{value:"",children:"Slectionner une catgorie"}),Le.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]})]}),r.jsxs(G,{children:[r.jsx(q,{fontSize:"sm",children:"Montant ()"}),r.jsxs(Qn,{value:k.allocatedAmount,onChange:L=>A({...k,allocatedAmount:L}),precision:2,step:.01,size:"sm",children:[r.jsx(Zn,{placeholder:"0.00"}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]})]}),r.jsxs(G,{children:[r.jsx(q,{fontSize:"sm",children:"Notes (optionnel)"}),r.jsx(Gt,{value:k.notes,onChange:L=>A({...k,notes:L.target.value}),placeholder:"ex: gasoil station Shell",rows:2,size:"sm"})]}),r.jsxs(Y,{colorScheme:"blue",width:"full",size:"sm",onClick:()=>{if(!k.categoryId||!k.allocatedAmount){Je({status:"error",title:"Remplissez catgorie et montant"});return}const L=Le.find(K=>K.id===k.categoryId);E([...S,{categoryId:k.categoryId,category:L,allocatedAmount:parseFloat(k.allocatedAmount),notes:k.notes}]),A({categoryId:"",allocatedAmount:"",notes:""})},children:[r.jsx(Pn,{})," Ajouter l'allocation"]})]})})})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:Di,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:()=>{if(!b.type||!b.amount||!b.description){Je({status:"error",title:"Remplissez les champs obligatoires"});return}Uc()},isLoading:e,children:"Ajouter"})]})]})]}),r.jsxs(mt,{isOpen:Is,onClose:Oi,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:n===2?"Nouvel chancier":"Nouvelle Opration Programme"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[n!==2&&r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Type"}),r.jsxs(Qe,{value:D.type,onChange:L=>$(K=>({...K,type:L.target.value})),children:[r.jsx("option",{value:"SCHEDULED_PAYMENT",children:"Paiement programm"}),r.jsx("option",{value:"SCHEDULED_CREDIT",children:"Crdit programm"})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:n===2?"Mensualit ( / mois)":"Montant ()"}),r.jsxs(Qn,{value:D.amount,onChange:L=>$(K=>({...K,amount:L})),precision:2,step:.01,children:[r.jsx(Zn,{placeholder:"0.00"}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Description"}),r.jsx(pe,{value:D.description,onChange:L=>$(K=>({...K,description:L.target.value})),placeholder:"Description de l'opration"})]}),n!==2&&r.jsxs(G,{children:[r.jsx(q,{children:"Frquence"}),r.jsxs(Qe,{value:D.frequency,onChange:L=>$(K=>({...K,frequency:L.target.value})),children:[r.jsx("option",{value:"MONTHLY",children:"Mensuel"}),r.jsx("option",{value:"WEEKLY",children:"Hebdomadaire"}),r.jsx("option",{value:"QUARTERLY",children:"Trimestriel"}),r.jsx("option",{value:"YEARLY",children:"Annuel"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Prochaine excution"}),r.jsx(pe,{type:"date",value:D.nextDate,onChange:L=>$(K=>({...K,nextDate:L.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:n===2?"Montant total (optionnel)":"Total  amortir (optionnel)"}),r.jsxs(Qn,{value:D.totalAmount,onChange:L=>$(K=>({...K,totalAmount:L})),precision:2,step:.01,children:[r.jsx(Zn,{placeholder:"Ex: 4000.00"}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:"Permet de calculer le nombre de mensualits restantes et la date de fin estime."})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:Oi,children:"Annuler"}),r.jsx(Y,{colorScheme:"purple",onClick:Xt,isLoading:e,children:n===2?"Crer lchancier":"Programmer"})]})]})]}),r.jsxs(mt,{isOpen:br,onClose:El,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Nouveau Scnario de Simulation"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontSize:"sm",fontWeight:"bold",children:"tape 1: Contexte du scnario"}),r.jsx(O,{fontSize:"xs",children:"Dfinissez le nom et la description. Vous pourrez ajouter les recettes et dpenses dans l'tape suivante."})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nom du scnario"}),r.jsx(pe,{value:ue.name,onChange:L=>Ee(K=>({...K,name:L.target.value})),placeholder:"ex: Scnario optimiste 2024"})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{value:ue.description,onChange:L=>Ee(K=>({...K,description:L.target.value})),placeholder:"Dcrivez les hypothses et le contexte de ce scnario...",rows:4})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Priode de projection (mois)"}),r.jsxs(Qn,{value:ue.projectionMonths,onChange:L=>Ee(K=>({...K,projectionMonths:parseInt(L)||12})),min:1,max:60,children:[r.jsx(Zn,{}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]}),r.jsx(O,{fontSize:"xs",color:"gray.500",mt:1,children:"Entre 1 et 60 mois"})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:El,children:"Annuler"}),r.jsx(Y,{colorScheme:"teal",onClick:Es,isLoading:e,leftIcon:r.jsx(Za,{}),children:"Crer le scnario"})]})]})]}),r.jsxs(mt,{isOpen:uo,onClose:hd,size:"6xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:r.jsxs(ne,{children:[r.jsxs(O,{children:["dition: ",De?.name]}),r.jsx(Ge,{colorScheme:"blue",variant:"outline",children:"tape 2: Recettes & Dpenses"})]})}),r.jsx(kt,{}),r.jsxs(gt,{children:[De&&r.jsxs(so,{templateColumns:"1fr 1fr",gap:6,children:[r.jsx(Q,{align:"stretch",spacing:4,children:r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(we,{size:"sm",color:"green.600",children:[" Recettes (",De.incomeItems?.length||0,")"]})}),r.jsx(Ae,{children:r.jsxs(Q,{spacing:3,children:[r.jsxs(ne,{width:"100%",children:[r.jsx(pe,{placeholder:"Description",size:"sm",value:nt.description,onChange:L=>X(K=>({...K,description:L.target.value}))}),r.jsx(Qn,{size:"sm",width:"120px",value:nt.amount,onChange:L=>X(K=>({...K,amount:L})),children:r.jsx(Zn,{placeholder:"Montant"})}),r.jsxs(Qe,{size:"sm",width:"120px",value:nt.frequency,onChange:L=>X(K=>({...K,frequency:L.target.value})),children:[r.jsx("option",{value:"ONE_SHOT",children:"Ponctuel"}),r.jsx("option",{value:"SEMI_ANNUAL",children:"Semestriel (6 mois)"}),r.jsx("option",{value:"MONTHLY",children:"Mensuel"}),r.jsx("option",{value:"QUARTERLY",children:"Trimestriel"}),r.jsx("option",{value:"YEARLY",children:"Annuel"})]}),r.jsx(et,{icon:r.jsx(Pn,{}),size:"sm",colorScheme:"green",onClick:Aa})]}),r.jsx(Q,{width:"100%",spacing:2,children:De.incomeItems?.map((L,K)=>r.jsxs(ne,{width:"100%",justify:"space-between",p:2,bg:"green.50",borderRadius:"md",children:[r.jsxs(Q,{align:"start",spacing:0,flex:1,children:[r.jsx(O,{fontSize:"sm",fontWeight:"bold",children:L.description}),r.jsxs(O,{fontSize:"xs",color:"gray.600",children:[rt(L.amount)," - ",mo(L.frequency)]})]}),r.jsx(et,{icon:r.jsx(Yn,{}),size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>Ta(L.id)})]},L.id))}),r.jsx(de,{width:"100%",p:2,bg:"green.100",borderRadius:"md",children:r.jsxs(O,{fontSize:"sm",fontWeight:"bold",color:"green.700",children:["Total mensuel: ",rt(De.totalMonthlyIncome||0)]})})]})})]})}),r.jsx(Q,{align:"stretch",spacing:4,children:r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(we,{size:"sm",color:"red.600",children:[" Dpenses (",De.expenseItems?.length||0,")"]})}),r.jsx(Ae,{children:r.jsxs(Q,{spacing:3,children:[r.jsxs(ne,{width:"100%",children:[r.jsx(pe,{placeholder:"Description",size:"sm",value:le.description,onChange:L=>Ve(K=>({...K,description:L.target.value}))}),r.jsx(Qn,{size:"sm",width:"120px",value:le.amount,onChange:L=>Ve(K=>({...K,amount:L})),children:r.jsx(Zn,{placeholder:"Montant"})}),r.jsxs(Qe,{size:"sm",width:"120px",value:le.frequency,onChange:L=>Ve(K=>({...K,frequency:L.target.value})),children:[r.jsx("option",{value:"ONE_SHOT",children:"Ponctuel"}),r.jsx("option",{value:"SEMI_ANNUAL",children:"Semestriel (6 mois)"}),r.jsx("option",{value:"MONTHLY",children:"Mensuel"}),r.jsx("option",{value:"QUARTERLY",children:"Trimestriel"}),r.jsx("option",{value:"YEARLY",children:"Annuel"})]}),r.jsx(et,{icon:r.jsx(Pn,{}),size:"sm",colorScheme:"red",onClick:Wc})]}),r.jsx(Q,{width:"100%",spacing:2,children:De.expenseItems?.map((L,K)=>r.jsxs(ne,{width:"100%",justify:"space-between",p:2,bg:"red.50",borderRadius:"md",children:[r.jsxs(Q,{align:"start",spacing:0,flex:1,children:[r.jsx(O,{fontSize:"sm",fontWeight:"bold",children:L.description}),r.jsxs(O,{fontSize:"xs",color:"gray.600",children:[rt(L.amount)," - ",mo(L.frequency)]})]}),r.jsx(et,{icon:r.jsx(Yn,{}),size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>vd(L.id)})]},L.id))}),r.jsx(de,{width:"100%",p:2,bg:"red.100",borderRadius:"md",children:r.jsxs(O,{fontSize:"sm",fontWeight:"bold",color:"red.700",children:["Total mensuel: ",rt(De.totalMonthlyExpenses||0)]})})]})})]})})]}),De&&r.jsx(Me,{mt:4,children:r.jsx(Ae,{children:r.jsxs(tt,{columns:4,spacing:4,children:[r.jsxs(dt,{children:[r.jsx(ht,{children:"Recettes/mois"}),r.jsx(ft,{color:"green.600",children:rt(De.totalMonthlyIncome||0)})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"Dpenses/mois"}),r.jsx(ft,{color:"red.600",children:rt(De.totalMonthlyExpenses||0)})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"Rsultat/mois"}),r.jsx(ft,{color:De.monthlyNet>=0?"green.600":"red.600",children:rt(De.monthlyNet||0)})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"lments"}),r.jsx(ft,{children:(De.incomeItems?.length||0)+(De.expenseItems?.length||0)})]})]})})}),r.jsxs(G,{children:[r.jsx(q,{children:"Motif de rgularisation"}),r.jsx(pe,{value:R,onChange:L=>N(L.target.value),placeholder:"Ex: Correction comptable, ajustement bancaire, etc."})]})]}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:hd,children:"Fermer"}),r.jsx(Y,{colorScheme:"teal",onClick:()=>yf(De?.id),isLoading:e,leftIcon:r.jsx(Za,{}),isDisabled:!De||De.itemsCount===0,children:"Excuter la simulation"})]})]})]}),r.jsxs(mt,{isOpen:ga,onClose:fd,size:"6xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:r.jsxs(ne,{children:[r.jsxs(O,{children:["Rsultats: ",He?.scenarioName]}),r.jsx(Ge,{colorScheme:He?.summary?.isPositive?"green":"red",children:He?.summary?.isPositive?"Positif":"Dficitaire"})]})}),r.jsx(kt,{}),r.jsx(gt,{children:He&&r.jsxs(Q,{spacing:6,children:[r.jsxs(tt,{columns:4,spacing:4,width:"100%",children:[r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Solde initial"}),r.jsx(ft,{children:rt(He.startingBalance)})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Solde final"}),r.jsx(ft,{color:He.finalBalance>=0?"green.600":"red.600",children:rt(He.finalBalance)})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"volution totale"}),r.jsxs(ft,{color:He.totalChange>=0?"green.600":"red.600",children:[r.jsx(Ch,{type:He.totalChange>=0?"increase":"decrease"}),rt(Math.abs(He.totalChange))]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Rsultat/mois"}),r.jsx(ft,{color:He.monthlyNet>=0?"green.600":"red.600",children:rt(He.monthlyNet)})]})})})]}),r.jsxs(Me,{width:"100%",children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"volution mensuelle"})}),r.jsxs(Ae,{children:[r.jsx(de,{overflowX:"auto",children:r.jsxs(Tr,{variant:"simple",size:"sm",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Mois"}),r.jsx(Ie,{children:"Solde dbut"}),r.jsx(Ie,{isNumeric:!0,children:"Recettes"}),r.jsx(Ie,{isNumeric:!0,children:"Dpenses"}),r.jsx(Ie,{isNumeric:!0,children:"Rsultat"}),r.jsx(Ie,{isNumeric:!0,children:"Solde fin"})]})}),r.jsx(zr,{children:He.projection.slice(0,12).map(L=>r.jsxs($t,{children:[r.jsxs(Pe,{children:["Mois ",L.month]}),r.jsx(Pe,{children:rt(L.startBalance)}),r.jsxs(Pe,{isNumeric:!0,color:"green.600",children:["+",rt(L.income)]}),r.jsxs(Pe,{isNumeric:!0,color:"red.600",children:["-",rt(L.expenses)]}),r.jsxs(Pe,{isNumeric:!0,color:L.net>=0?"green.600":"red.600",children:[L.net>=0?"+":"",rt(L.net)]}),r.jsx(Pe,{isNumeric:!0,fontWeight:"bold",color:L.endBalance>=0?"green.600":"red.600",children:rt(L.endBalance)})]},L.month))})]})}),He.projection.length>12&&r.jsxs(O,{fontSize:"sm",color:"gray.500",mt:2,textAlign:"center",children:["... et ",He.projection.length-12," mois supplmentaires"]})]})]}),He.summary.breakEvenMonth&&r.jsxs(Ft,{status:"warning",width:"100%",children:[r.jsx(Vt,{}),r.jsxs(O,{children:["Attention: Le solde devient ngatif au mois ",He.summary.breakEvenMonth]})]})]})}),r.jsx(Nt,{children:r.jsx(Y,{onClick:fd,children:"Fermer"})})]})]})]})})},Y1={public_open_access:{name:"Ouvert au Public",icon:Ph,color:"green",defaults:{isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:null,registrationDeadline:"",registrationMethod:"none",status:"PUBLISHED"},description:"vnement ouvert au public, accs libre sans inscription"},public_with_registration:{name:"Public avec Inscription",icon:wi,color:"blue",defaults:{isVisible:!0,allowPublicRegistration:!0,requiresRegistration:!0,isFree:!1,adultPrice:15,childPrice:8,maxParticipants:100,registrationDeadline:"",registrationMethod:"internal",status:"PUBLISHED"},description:"vnement public avec inscription ouverte directement au public"},private_outing:{name:"Sortie Prive",icon:UC,color:"yellow",defaults:{isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:null,registrationDeadline:"",registrationMethod:"none",status:"PUBLISHED"},description:"Sortie visible publiquement mais rserve (pas d'inscription possible)"},public_contact_required:{name:"Contact Association Requis",icon:UC,color:"orange",defaults:{isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!0,isFree:!1,adultPrice:12,childPrice:6,maxParticipants:30,registrationDeadline:"",registrationMethod:"none",status:"PUBLISHED"},description:"Visible par tous mais inscription uniquement en contactant l'association"},members_only:{name:"Adhrents Seulement",icon:ed,color:"purple",defaults:{isVisible:!1,allowPublicRegistration:!1,requiresRegistration:!0,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:50,registrationDeadline:"",registrationMethod:"internal",status:"PUBLISHED"},description:"Rserv aux adhrents, non visible sur le site public"},private_internal:{name:"vnement Interne",icon:ed,color:"red",defaults:{isVisible:!1,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:null,registrationDeadline:"",registrationMethod:"none",status:"DRAFT"},description:"vnement interne, compltement priv"},public_pdf_form:{name:"Formulaire PDF Public",icon:ml,color:"teal",defaults:{isVisible:!0,allowPublicRegistration:!0,requiresRegistration:!0,isFree:!1,adultPrice:12,childPrice:6,maxParticipants:null,registrationDeadline:"",registrationMethod:"pdf",status:"PUBLISHED"},description:"vnement public avec formulaire PDF  tlcharger"},parade_classic_vehicles:{name:" Dfil Anciennes",icon:yc,color:"red",defaults:{isVisible:!0,allowPublicRegistration:!0,requiresRegistration:!0,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:null,registrationDeadline:"",registrationMethod:"internal",status:"PUBLISHED",registrationType:"parade_vehicles"},description:"Dfil de vhicules anciens - Inscription avec nom, vhicule et club"}},Ple=()=>{const[e,t]=j.useState([]),[n,s]=j.useState([]),[i,o]=j.useState(!1),[l,u]=j.useState(!1),[d,h]=j.useState("cards"),[p,m]=j.useState(""),x=mn(),{isOpen:y,onOpen:b,onClose:C}=jt(),[S,E]=j.useState(null),[k,A]=j.useState(null),[T,M]=j.useState({title:"",date:"",time:"",location:"",description:"",adultPrice:"",childPrice:"",helloAssoUrl:"",vehicleId:"",status:"DRAFT",isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,maxParticipants:"",registrationDeadline:"",registrationMethod:"none",pdfUrl:"",eventType:"public_info_only"}),D=async()=>{const R=localStorage.getItem("token");if(console.log(" Testing API connection..."),console.log("Token exists:",!!R),!R){x({status:"error",title:"Pas de token",description:"Veuillez vous reconnecter"});return}try{const N=await fetch("https://refreshing-adaptation-rbe-serveurs.up.railway.app/events",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`}});if(console.log("GET /events status:",N.status),N.ok){const Z=await N.json();console.log(" GET API works, events:",Z.length),t(Array.isArray(Z)?Z:[]),console.log(" Testing POST with minimal data...");const ke={id:`test-${Date.now()}`,title:"Test Event",date:"2025-12-31",status:"DRAFT"},Te=await fetch("https://refreshing-adaptation-rbe-serveurs.up.railway.app/events",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify(ke)});if(console.log("POST /events status:",Te.status),Te.ok){const je=await Te.json();console.log(" POST works, created:",je),await fetch(`https://refreshing-adaptation-rbe-serveurs.up.railway.app/events/${ke.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${R}`}}),x({status:"success",title:"API entirement fonctionnelle",description:"GET et POST fonctionnent correctement"})}else{const je=await Te.text();console.log(" POST error:",Te.status,je),x({status:"error",title:`Erreur POST ${Te.status}`,description:je})}}else{const Z=await N.text();console.log(" GET error:",N.status,Z),x({status:"error",title:`Erreur GET ${N.status}`,description:Z})}}catch(N){console.error("Network error:",N),x({status:"error",title:"Erreur rseau",description:N.message})}},$=j.useCallback(async()=>{try{o(!0);const R=localStorage.getItem("token");if(!R){x({status:"warning",title:"Session expire",description:"Veuillez vous reconnecter."}),window.location.href="/login";return}try{const Z=R.split(".");if(Z.length!==3)throw new Error("Format de token invalide");const ke=JSON.parse(atob(Z[1])),Te=Math.floor(Date.now()/1e3);if(ke.exp&&ke.exp<Te)throw new Error("Token expir")}catch(Z){console.error("Token invalide:",Z),localStorage.removeItem("token"),localStorage.removeItem("user"),x({status:"error",title:"Session invalide",description:"Veuillez vous reconnecter."}),window.location.href="/login";return}const N=await Ji.getAll();t(Array.isArray(N)?N:[])}catch(R){if(console.error("Erreur events API:",R),R.message.includes("401")){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}R.message.includes("400")?x({status:"error",title:"Erreur 400 - Bad Request",description:"Problme avec la requte. Cliquez sur 'Tester API' pour diagnostiquer."}):x({status:"error",title:"Erreur de chargement",description:"Impossible de charger les vnements."}),t([])}finally{o(!1)}},[x]),W=j.useCallback(async()=>{try{const R=await sm.getAll();s(Array.isArray(R)?R:[])}catch(R){console.error(R),s([])}},[]);j.useEffect(()=>{$(),W()},[$,W]);const te=()=>{M({title:"",date:"",time:"",location:"",description:"",adultPrice:"",childPrice:"",helloAssoUrl:"",vehicleId:"",status:"DRAFT",isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,maxParticipants:"",registrationDeadline:"",registrationMethod:"none",pdfUrl:"",eventType:"public_info_only"}),m("")},re=R=>{const N=Y1[R];N&&(M(Z=>({...Z,...N.defaults,eventType:R,title:Z.title,date:Z.date,time:Z.time,location:Z.location,description:Z.description,vehicleId:Z.vehicleId})),m(R),x({status:"info",title:"Template appliqu",description:N.description}))},U=()=>{E(null),te(),b()},oe=R=>{E(R);let N={};try{N=R.extras?JSON.parse(R.extras):{}}catch(Z){console.log("Impossible de parser extras:",Z)}M({title:R.title||"",date:R.date||"",time:R.time||"",location:R.location||"",description:R.description||"",adultPrice:R.adultPrice||"",childPrice:R.childPrice||"",helloAssoUrl:R.helloAssoUrl||"",vehicleId:R.vehicleId||"",status:R.status||"DRAFT",isVisible:N.isVisible!==!1,allowPublicRegistration:N.allowPublicRegistration||!1,requiresRegistration:N.requiresRegistration||!!R.helloAssoUrl,isFree:N.isFree!==!1,maxParticipants:N.maxParticipants||"",registrationDeadline:N.registrationDeadline||"",registrationMethod:N.registrationMethod||(R.helloAssoUrl?"helloasso":"none"),pdfUrl:N.pdfUrl||"",eventType:N.eventType||"public_info_only"}),m(N.eventType||""),b()},xe=(R,N)=>{const Z=R.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,30),ke=N.replace(/-/g,""),Te=Math.random().toString(36).substring(2,6);return`${Z}-${ke}-${Te}`},ie=async()=>{if(!T.title.trim()){x({status:"warning",title:"Le titre est requis"});return}if(!T.date){x({status:"warning",title:"La date est requise"});return}try{u(!0);const R={title:T.title.trim(),date:T.date,time:T.time||null,location:T.location.trim()||null,description:T.description.trim()||null,adultPrice:T.adultPrice?parseFloat(T.adultPrice):null,childPrice:T.childPrice?parseFloat(T.childPrice):null,helloAssoUrl:T.helloAssoUrl.trim()||null,vehicleId:T.vehicleId||null,status:T.status,extras:{isVisible:T.isVisible,allowPublicRegistration:T.allowPublicRegistration,requiresRegistration:T.requiresRegistration,isFree:T.isFree,maxParticipants:T.maxParticipants?parseInt(T.maxParticipants):null,registrationDeadline:T.registrationDeadline||null,registrationMethod:T.registrationMethod,pdfUrl:T.pdfUrl||null,eventType:T.eventType}};S||(R.id=xe(T.title,T.date),console.log(" Generated ID:",R.id)),console.log(" Saving event data:",R),S?(await Ji.update(S.id,R),x({status:"success",title:"vnement modifi avec succs"})):(await Ji.create(R),x({status:"success",title:"vnement cr avec succs"})),await $(),C(),te()}catch(R){console.error("Save error:",R),R.message.includes("409")||R.message.includes("ID dj utilis")?x({status:"error",title:"ID dj utilis",description:"Un vnement avec ce nom et cette date existe dj. Modifiez le titre ou la date."}):R.message.includes("400")?(console.log("Dtails erreur 400 - Data envoye:",eventData),x({status:"error",title:"Erreur 400 - Donnes invalides",description:"Vrifiez la console pour voir les donnes envoyes."})):x({status:"error",title:"Erreur lors de la sauvegarde",description:R.message})}finally{u(!1)}},H=async R=>{if(confirm(`tes-vous sr de vouloir supprimer l'vnement "${R.title}" ?`))try{await Ji.delete(R.id),x({status:"success",title:"vnement supprim"}),await $()}catch(N){x({status:"error",title:"Erreur lors de la suppression",description:N.message})}},F=async R=>{const N=R.status==="PUBLISHED"?"DRAFT":"PUBLISHED";try{console.log(" Toggling status from",R.status,"to",N),await Ji.update(R.id,{status:N}),x({status:"success",title:`vnement ${N==="PUBLISHED"?"publi":"dpubli"}`}),await $()}catch(Z){console.error("Erreur toggle publish:",Z),x({status:"error",title:"Erreur lors de la publication",description:Z.message})}},_=R=>R==="PUBLISHED"?r.jsx(Ge,{colorScheme:"green",children:"Publi"}):r.jsx(Ge,{colorScheme:"gray",children:"Brouillon"}),B=R=>{try{const Z=(R.extras?JSON.parse(R.extras):{}).eventType||"public_info_only",ke=Y1[Z];if(ke)return r.jsxs(Ge,{colorScheme:ke.color,variant:"subtle",children:[r.jsx(Wn,{as:ke.icon,mr:1}),ke.name]})}catch(N){console.log("Error parsing event extras:",N)}return r.jsx(Ge,{colorScheme:"gray",children:"Standard"})},fe=R=>{try{const N=R.extras?JSON.parse(R.extras):{};return console.log(` Internal - Event "${R.title}" extras:`,N),N.isVisible?N.requiresRegistration?N.requiresRegistration&&!N.allowPublicRegistration?r.jsx(Y,{size:"sm",leftIcon:r.jsx(UC,{}),colorScheme:"orange",variant:"outline",isDisabled:!0,children:"Contact requis"}):N.requiresRegistration&&N.allowPublicRegistration?r.jsx(Y,{size:"sm",leftIcon:r.jsx(wi,{}),colorScheme:"blue",variant:"solid",isDisabled:!0,children:"Inscription publique"}):r.jsx(Y,{size:"sm",leftIcon:r.jsx(Ph,{}),colorScheme:"gray",variant:"outline",isDisabled:!0,children:"Indtermin"}):r.jsx(Y,{size:"sm",leftIcon:r.jsx(Ph,{}),colorScheme:"green",variant:"outline",isDisabled:!0,children:"Ouvert au public"}):r.jsx(Y,{size:"sm",leftIcon:r.jsx(ed,{}),colorScheme:"red",variant:"solid",isDisabled:!0,children:"Priv/Interne"})}catch(N){return console.log(`Error parsing extras for ${R.title}:`,N),r.jsx(Y,{size:"sm",leftIcon:r.jsx(Ph,{}),colorScheme:"green",variant:"outline",isDisabled:!0,children:"Legacy (ouvert)"})}},I=R=>{const N=n.find(Z=>Z.parc===R);return N?`${N.parc} - ${N.modele}`:"Aucun vhicule"},ee=e.find(R=>R.id===k);ee&&n.find(R=>R.parc===ee.vehicleId);const ae=()=>r.jsx(tt,{columns:{base:1,md:2,lg:3},spacing:6,children:e.map(R=>r.jsxs(Me,{shadow:"md",position:"relative",children:[r.jsx(Ct,{pb:2,children:r.jsxs(Q,{align:"start",spacing:2,children:[r.jsxs(ne,{justify:"space-between",w:"100%",children:[r.jsx(we,{size:"md",noOfLines:2,flex:1,children:R.title}),fe(R)]}),r.jsxs(ne,{spacing:2,wrap:"wrap",children:[_(R.status),B(R)]})]})}),r.jsx(Ae,{pt:0,children:r.jsxs(Q,{align:"start",spacing:2,children:[r.jsxs(ne,{children:[r.jsx(si,{}),r.jsxs(O,{fontSize:"sm",children:[R.date," ",R.time&&` ${R.time}`]})]}),R.location&&r.jsxs(ne,{children:[r.jsx(Mb,{}),r.jsx(O,{fontSize:"sm",children:R.location})]}),R.vehicleId&&r.jsxs(O,{fontSize:"sm",children:[" ",I(R.vehicleId)]}),R.description&&r.jsx(O,{fontSize:"sm",color:"gray.600",noOfLines:3,children:R.description}),(R.adultPrice||R.childPrice)&&r.jsxs(ne,{spacing:4,children:[R.adultPrice&&r.jsxs(O,{fontSize:"sm",fontWeight:"bold",color:"green.600",children:["Adulte: ",R.adultPrice,""]}),R.childPrice&&r.jsxs(O,{fontSize:"sm",fontWeight:"bold",color:"green.600",children:["Enfant: ",R.childPrice,""]})]}),r.jsxs(ne,{spacing:2,pt:4,w:"100%",wrap:"wrap",children:[r.jsx(Y,{leftIcon:r.jsx(us,{}),size:"sm",onClick:()=>oe(R),children:"Modifier"}),r.jsx(Y,{leftIcon:r.jsx(zm,{}),size:"sm",colorScheme:R.status==="PUBLISHED"?"red":"green",onClick:()=>F(R),children:R.status==="PUBLISHED"?"Dpublier":"Publier"}),r.jsx(Y,{leftIcon:r.jsx(Yn,{}),size:"sm",colorScheme:"red",variant:"outline",onClick:()=>H(R),children:"Supprimer"})]})]})})]},R.id))}),P=()=>r.jsx(de,{overflowX:"auto",children:r.jsxs(Tr,{variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Titre"}),r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{children:"Type"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:e.map(R=>r.jsxs($t,{bg:R.id===k?"blue.50":void 0,cursor:"pointer",onClick:()=>A(R.id===k?null:R.id),_hover:{bg:"gray.50"},children:[r.jsx(Pe,{fontWeight:"semibold",children:R.title}),r.jsxs(Pe,{children:[R.date," ",R.time&&` ${R.time}`]}),r.jsx(Pe,{children:B(R)}),r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:1,children:[_(R.status),fe(R)]})}),r.jsx(Pe,{children:r.jsxs(ne,{spacing:1,children:[r.jsx(Y,{size:"sm",onClick:N=>{N.stopPropagation(),oe(R)},children:"diter"}),r.jsx(Y,{size:"sm",colorScheme:R.status==="PUBLISHED"?"red":"green",onClick:N=>{N.stopPropagation(),F(R)},children:R.status==="PUBLISHED"?"Dpublier":"Publier"}),r.jsx(Y,{size:"sm",colorScheme:"red",variant:"outline",onClick:N=>{N.stopPropagation(),H(R)},children:"Supprimer"})]})})]},R.id))})]})});return r.jsxs(de,{p:6,children:[r.jsxs(qn,{justify:"space-between",align:"center",mb:6,children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{children:" Cration des vnements"}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Crez et configurez de nouveaux vnements pour l'association"})]}),r.jsxs(ne,{spacing:3,children:[r.jsx(Y,{leftIcon:r.jsx(us,{}),size:"sm",colorScheme:"purple",variant:"outline",onClick:D,children:"Tester API"}),r.jsx(Y,{leftIcon:d==="cards"?r.jsx(RE,{}):r.jsx(ME,{}),size:"sm",variant:"outline",onClick:()=>h(d==="cards"?"table":"cards"),children:d==="cards"?"Vue tableau":"Vue cartes"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:U,children:"Nouvel vnement"})]})]}),i?r.jsx(cn,{py:20,children:r.jsx(sn,{size:"xl"})}):e.length===0?r.jsx(cn,{py:20,children:r.jsxs(Q,{spacing:4,children:[r.jsx(O,{color:"gray.500",fontSize:"lg",children:"Aucun vnement trouv"}),r.jsxs(ne,{spacing:3,children:[r.jsx(Y,{leftIcon:r.jsx(us,{}),colorScheme:"purple",variant:"outline",onClick:D,children:"Tester API"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:U,children:"Crer le premier vnement"})]})]})}):d==="cards"?r.jsx(ae,{}):r.jsx(P,{}),r.jsxs(mt,{isOpen:y,onClose:C,size:"6xl",children:[r.jsx(yt,{}),r.jsxs(vt,{maxH:"90vh",overflowY:"auto",children:[r.jsx(xt,{children:S?"Modifier l'vnement":"Nouvel vnement"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(gl,{children:[r.jsxs(xl,{children:[r.jsx(an,{children:" Informations de base"}),r.jsx(an,{children:" Configuration"}),r.jsx(an,{children:" Templates"})]}),r.jsxs(yl,{children:[r.jsx(ln,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Titre"}),r.jsx(pe,{value:T.title,onChange:R=>M(N=>({...N,title:R.target.value})),placeholder:"Nom de l'vnement"})]}),r.jsxs(ne,{w:"100%",spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Date"}),r.jsx(pe,{type:"date",value:T.date,onChange:R=>M(N=>({...N,date:R.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Heure"}),r.jsx(pe,{type:"time",value:T.time,onChange:R=>M(N=>({...N,time:R.target.value}))})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Lieu"}),r.jsx(pe,{value:T.location,onChange:R=>M(N=>({...N,location:R.target.value})),placeholder:"Lieu de l'vnement"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Vhicule participant"}),r.jsx(Qe,{value:T.vehicleId,onChange:R=>M(N=>({...N,vehicleId:R.target.value})),placeholder:"Slectionner un vhicule (optionnel)",children:n.map(R=>r.jsxs("option",{value:R.parc,children:[R.parc," - ",R.modele," (",R.marque,")"]},R.parc))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{value:T.description,onChange:R=>M(N=>({...N,description:R.target.value})),placeholder:"Description de l'vnement",rows:4})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:6,children:[r.jsxs(de,{w:"100%",p:4,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:[r.jsx(we,{size:"sm",mb:3,children:" Visibilit"}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(sr,{isChecked:T.isVisible,onChange:R=>M(N=>({...N,isVisible:R.target.checked}))}),r.jsx(q,{mb:0,children:"Visible sur le site public"})]}),r.jsxs(Ft,{status:T.isVisible?"success":"warning",mt:2,borderRadius:"md",children:[r.jsx(Vt,{}),r.jsx(O,{fontSize:"sm",children:T.isVisible?" L'vnement apparatra sur la page Events du site externe":" vnement priv, visible seulement dans l'interface interne"})]})]})]}),r.jsxs(de,{w:"100%",p:4,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:[r.jsx(we,{size:"sm",mb:3,children:" Gestion des inscriptions"}),r.jsxs(Q,{spacing:4,align:"start",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(sr,{isChecked:T.requiresRegistration,onChange:R=>M(N=>({...N,requiresRegistration:R.target.checked}))}),r.jsx(q,{mb:0,children:"Inscription requise pour participer"})]}),r.jsxs(Ft,{status:T.requiresRegistration?"info":"success",mt:2,borderRadius:"md",children:[r.jsx(Vt,{}),r.jsx(O,{fontSize:"sm",children:T.requiresRegistration?" Une inscription sera ncessaire pour participer  cet vnement":" Bouton 'Ouvert au public' - Aucune inscription ncessaire"})]})]}),T.requiresRegistration&&r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(sr,{isChecked:T.allowPublicRegistration,onChange:R=>M(N=>({...N,allowPublicRegistration:R.target.checked}))}),r.jsx(q,{mb:0,children:"Le public peut s'inscrire directement"})]}),r.jsxs(Ft,{status:T.allowPublicRegistration?"success":"warning",mt:2,borderRadius:"md",children:[r.jsx(Vt,{}),r.jsx(O,{fontSize:"sm",children:T.allowPublicRegistration?" Bouton d'inscription disponible sur le site externe":" Bouton 'Contacter l'association' - Inscription via contact uniquement"})]})]})]})]}),r.jsxs(de,{w:"100%",p:4,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:[r.jsx(we,{size:"sm",mb:3,children:" Tarification"}),r.jsxs(Q,{spacing:3,align:"start",children:[r.jsx(G,{children:r.jsxs(ne,{children:[r.jsx(sr,{isChecked:T.isFree,onChange:R=>M(N=>({...N,isFree:R.target.checked,adultPrice:R.target.checked?"":N.adultPrice,childPrice:R.target.checked?"":N.childPrice}))}),r.jsx(q,{mb:0,children:"vnement gratuit"})]})}),!T.isFree&&r.jsxs(ne,{w:"100%",spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Prix adulte ()"}),r.jsx(pe,{type:"number",step:"0.01",value:T.adultPrice,onChange:R=>M(N=>({...N,adultPrice:R.target.value})),placeholder:"15.00"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Prix enfant ()"}),r.jsx(pe,{type:"number",step:"0.01",value:T.childPrice,onChange:R=>M(N=>({...N,childPrice:R.target.value})),placeholder:"8.00"})]})]})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Statut de publication"}),r.jsxs(Qe,{value:T.status,onChange:R=>M(N=>({...N,status:R.target.value})),children:[r.jsx("option",{value:"DRAFT",children:"Brouillon"}),r.jsx("option",{value:"PUBLISHED",children:"Publi"})]})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,children:[r.jsx(O,{fontSize:"lg",fontWeight:"bold",mb:4,children:" Choisissez un template pour configurer rapidement votre vnement"}),r.jsx(tt,{columns:{base:1,md:2},spacing:4,w:"100%",children:Object.entries(Y1).map(([R,N])=>r.jsx(Me,{cursor:"pointer",onClick:()=>re(R),bg:p===R?`${N.color}.50`:"white",borderColor:p===R?`${N.color}.200`:"gray.200",borderWidth:"2px",_hover:{borderColor:`${N.color}.300`},children:r.jsx(Ae,{children:r.jsxs(Q,{align:"start",spacing:2,children:[r.jsxs(ne,{children:[r.jsx(Wn,{as:N.icon,color:`${N.color}.500`}),r.jsx(O,{fontWeight:"bold",color:`${N.color}.700`,children:N.name})]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:N.description}),p===R&&r.jsx(Ge,{colorScheme:N.color,children:"Slectionn"})]})})},R))}),p&&r.jsxs(Ft,{status:"info",borderRadius:"md",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"bold",children:"Template appliqu"}),r.jsx(O,{fontSize:"sm",children:`Vous pouvez maintenant personnaliser les paramtres dans l'onglet "Configuration"`})]})]})]})})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:()=>{C(),te()},children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:ie,isLoading:l,children:S?"Modifier":"Crer"})]})]})]})]})},zle=e=>{const t={DRAFT:{cs:"gray",label:"Brouillon"},PUBLISHED:{cs:"green",label:"Publi"},ARCHIVED:{cs:"orange",label:"Archiv"}},n=t[e]??t.DRAFT;return r.jsx(Ge,{colorScheme:n.cs,children:n.label})},Ile=e=>{if(!e)return"Date non dfinie";try{return new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}catch{return"Date invalide"}};function Lle(){const e=mn(),[t,n]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(""),[u,d]=j.useState("ALL"),[h,p]=j.useState(null),[m,x]=j.useState([]),[y,b]=j.useState([]),[C,S]=j.useState({revenue:0,expenses:0,profit:0,capacity:0,occupancy:0,rate:0,breakdown:null}),[E,k]=j.useState({url:"",org:"",event:""}),{isOpen:A,onOpen:T,onClose:M}=jt(),[D,$]=j.useState(!1);j.useEffect(()=>{(async()=>{i(!0);try{const N=await Ji.getAll();n(Array.isArray(N)?N:[])}catch{e({status:"error",title:"Erreur",description:"Impossible de charger les vnements"})}finally{i(!1)}})()},[e]);const W=j.useMemo(()=>{const N=o.trim().toLowerCase();return(t||[]).filter(Z=>{const ke=Z.title?.toLowerCase().includes(N)||Z.location?.toLowerCase().includes(N),Te=u==="ALL"||Z.status===u;return ke&&Te})},[t,o,u]),te=j.useMemo(()=>{const N=t.length,Z=t.filter(Te=>Te.status==="PUBLISHED").length,ke=t.filter(Te=>Te.status==="PUBLISHED"&&new Date(Te.date)>new Date).length;return{total:N,published:Z,upcoming:ke,totalParticipants:0,totalRevenue:0}},[t]),re=N=>{p(N),x([]),b([{id:1,name:"Trajet principal",vehicle:N.vehicleId||"Bus",capacity:45,stops:[{name:"Dpart",time:"09:00",address:""},{name:N.location||"Arrive",time:"10:00",address:N.location||""}]}]),k({url:N.helloAssoUrl||"",org:N.helloAssoOrg||"",event:N.helloAssoEvent||""}),T()},U=N=>{if(!N?.name||!N?.email){e({status:"warning",title:"Nom et email requis"});return}const Z=y.reduce((Te,je)=>Te+(je.capacity||0),0),ke=m.filter(Te=>Te.status==="confirmed").length;if(N.status==="confirmed"&&ke>=Z){e({status:"error",title:"Capacit atteinte"});return}x(Te=>[...Te,{id:Date.now(),type:"adult",status:"pending",...N}])},oe=(N,Z)=>{x(ke=>ke.map(Te=>Te.id===N?{...Te,...Z}:Te))},xe=N=>x(Z=>Z.filter(ke=>ke.id!==N)),ie=()=>{b(N=>[...N,{id:Date.now(),name:"Nouveau trajet",vehicle:"",capacity:0,stops:[]}])},H=(N,Z)=>{const ke=parseInt(Z||0,10);b(Te=>Te.map(je=>je.id===N?{...je,capacity:ke}:je))},F=j.useMemo(()=>{if(!h)return null;const N=parseFloat(h.adultPrice||0),Z=parseFloat(h.childPrice||0),ke=m.filter(ue=>ue.status==="confirmed"),Te=ke.filter(ue=>ue.type==="adult").length,je=ke.filter(ue=>ue.type==="child").length,Ke=Math.round(Te*N+je*Z),Xe=y.reduce((ue,Ee)=>ue+(Ee.capacity||0),0),He=ke.length,pt=Xe>0?Math.round(He/Xe*100):0,De=Math.round(Ke*.25+Xe*2+He*3),Tt=Ke-De;return{revenue:Ke,expenses:De,profit:Tt,capacity:Xe,occupancy:He,rate:pt,breakdown:{adult:{price:N,count:Te,total:N*Te},child:{price:Z,count:je,total:Z*je},expenseLines:[{label:"Base (25%)",amount:Math.round(Ke*.25)},{label:`Capacit (${Xe})`,amount:Math.round(Xe*2)},{label:`Participants (${He})`,amount:Math.round(He*3)}]}}},[h,m,y]);j.useEffect(()=>{F&&S(F)},[F]);const _=async()=>{$(!0);try{e({status:"success",title:"Modifications sauvegardes"})}catch{e({status:"error",title:"Erreur de sauvegarde"})}finally{$(!1)}},[B,fe]=j.useState({type:"recette",description:"",amount:0,category:""}),[I,ee]=j.useState(!1),[ae,P]=j.useState([]),R=async()=>{if(h){ee(!0);try{const N={id:Date.now(),...B,date:new Date};P(Z=>[...Z,N]),fe({type:"recette",description:"",amount:0,category:""}),e({status:"success",title:"Transaction ajoute"})}catch{e({status:"error",title:"Erreur d'ajout de transaction"})}finally{ee(!1)}}};return r.jsxs(Ws,{maxW:"7xl",py:6,children:[r.jsxs(Q,{align:"start",spacing:6,mb:8,children:[r.jsxs(ne,{w:"100%",justify:"space-between",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"lg",children:" Gestion des vnements"}),r.jsx(O,{color:"gray.600",children:"Administration des vnements, participants et finances"})]}),r.jsxs(ne,{children:[r.jsx(Y,{as:$n,to:"/dashboard/evenements",leftIcon:r.jsx(Pn,{}),colorScheme:"blue",variant:"outline",children:"Crer un vnement"}),r.jsx(Y,{leftIcon:r.jsx(ao,{}),onClick:()=>window.location.reload(),variant:"outline",children:"Actualiser"})]})]}),r.jsxs(tt,{columns:{base:2,md:5},spacing:4,w:"100%",children:[r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Total"}),r.jsx(ft,{color:"blue.500",children:te.total})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Publis"}),r.jsx(ft,{color:"green.500",children:te.published})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:" venir"}),r.jsx(ft,{color:"orange.500",children:te.upcoming})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Participants"}),r.jsx(ft,{color:"purple.500",children:te.totalParticipants})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Revenus"}),r.jsxs(ft,{color:"green.600",children:[te.totalRevenue,""]})]})})})]})]}),r.jsx(Me,{mb:6,children:r.jsx(Ae,{children:r.jsxs(ne,{spacing:4,children:[r.jsxs(Gu,{maxW:"320px",children:[r.jsx(Yu,{pointerEvents:"none",children:r.jsx(Rb,{})}),r.jsx(pe,{placeholder:"Rechercher un vnement...",value:o,onChange:N=>l(N.target.value)})]}),r.jsxs(Qe,{maxW:"220px",value:u,onChange:N=>d(N.target.value),children:[r.jsx("option",{value:"ALL",children:"Tous les statuts"}),r.jsx("option",{value:"PUBLISHED",children:"Publis"}),r.jsx("option",{value:"DRAFT",children:"Brouillons"}),r.jsx("option",{value:"ARCHIVED",children:"Archivs"})]})]})})}),s?r.jsx(cn,{py:20,children:r.jsx(sn,{size:"xl"})}):W.length===0?r.jsx(Me,{children:r.jsx(Ae,{children:r.jsx(cn,{py:16,children:r.jsxs(Q,{spacing:4,children:[r.jsx(O,{color:"gray.500",children:"Aucun vnement trouv"}),r.jsx(Y,{as:$n,to:"/dashboard/evenements",leftIcon:r.jsx(Pn,{}),colorScheme:"blue",children:"Crer le premier"})]})})})}):r.jsx(Me,{children:r.jsx(Ae,{p:0,children:r.jsxs(Tr,{variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"vnement"}),r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:W.map(N=>r.jsxs($t,{children:[r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"semibold",children:N.title}),N.location&&r.jsxs(ne,{fontSize:"sm",color:"gray.600",children:[r.jsx(Mb,{}),r.jsx(O,{children:N.location})]}),N.vehicleId&&r.jsxs(ne,{fontSize:"sm",color:"blue.600",children:[r.jsx(yc,{}),r.jsx(O,{children:N.vehicleId})]})]})}),r.jsxs(Pe,{children:[Ile(N.date),N.time?r.jsx(O,{fontSize:"sm",color:"gray.600",children:N.time}):null]}),r.jsx(Pe,{children:zle(N.status)}),r.jsx(Pe,{children:r.jsxs(ne,{spacing:1,children:[r.jsx(Bn,{label:"Gestion complte",children:r.jsx(et,{"aria-label":"Grer",icon:r.jsx(zm,{}),size:"sm",variant:"ghost",onClick:()=>re(N)})}),r.jsx(Bn,{label:"Modifier l'vnement",children:r.jsx(et,{as:$n,to:"/dashboard/evenements","aria-label":"Modifier",icon:r.jsx(us,{}),size:"sm",variant:"ghost"})}),r.jsx(Bn,{label:"Exporter ( venir)",children:r.jsx(et,{"aria-label":"Exporter",icon:r.jsx(ml,{}),size:"sm",variant:"ghost",onClick:()=>e({status:"info",title:"Bientt disponible"})})})]})})]},N.id))})]})})}),r.jsxs(mt,{isOpen:A,onClose:M,size:"6xl",children:[r.jsx(yt,{}),r.jsxs(vt,{maxH:"90vh",children:[r.jsx(xt,{children:r.jsxs(ne,{children:[r.jsx(zm,{}),r.jsxs(O,{ml:2,children:["Gestion : ",h?.title]})]})}),r.jsx(kt,{}),r.jsx(gt,{overflow:"auto",children:r.jsxs(gl,{children:[r.jsxs(xl,{children:[r.jsx(an,{children:" Participants"}),r.jsx(an,{children:" Trajets"}),r.jsx(an,{children:" Finances"}),r.jsx(an,{children:" HelloAsso"})]}),r.jsxs(yl,{children:[r.jsx(ln,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsxs(ne,{justify:"space-between",children:[r.jsxs(we,{size:"md",children:["Participants (",m.length,")"]}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",size:"sm",onClick:()=>U({name:"Nouveau participant",email:`user${Date.now()}@mail.com`,type:"adult",status:"pending"}),children:"Ajouter vite (dmo)"})]}),m.length===0?r.jsx(cn,{py:8,children:r.jsx(O,{color:"gray.500",children:"Aucun participant"})}):r.jsxs(Tr,{size:"sm",variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Nom"}),r.jsx(Ie,{children:"Email"}),r.jsx(Ie,{children:"Type"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{})]})}),r.jsx(zr,{children:m.map(N=>r.jsxs($t,{children:[r.jsx(Pe,{fontWeight:"bold",children:N.name}),r.jsx(Pe,{children:N.email}),r.jsx(Pe,{children:r.jsxs(Qe,{size:"sm",value:N.type,onChange:Z=>oe(N.id,{type:Z.target.value}),children:[r.jsx("option",{value:"adult",children:"Adulte"}),r.jsx("option",{value:"child",children:"Enfant"})]})}),r.jsx(Pe,{children:r.jsxs(Qe,{size:"sm",value:N.status,onChange:Z=>oe(N.id,{status:Z.target.value}),children:[r.jsx("option",{value:"pending",children:"En attente"}),r.jsx("option",{value:"confirmed",children:"Confirm"}),r.jsx("option",{value:"cancelled",children:"Annul"})]})}),r.jsx(Pe,{isNumeric:!0,children:r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(Yn,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>xe(N.id)})})]},N.id))})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"md",children:"Trajets"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),size:"sm",colorScheme:"blue",onClick:ie,children:"Ajouter un trajet"})]}),r.jsx(Me,{bg:"blue.50",borderLeft:"4px solid",borderLeftColor:"blue.400",children:r.jsx(Ae,{children:r.jsxs(ne,{spacing:8,children:[r.jsxs(dt,{children:[r.jsx(ht,{children:"Capacit totale"}),r.jsxs(ft,{color:"blue.600",children:[C.capacity," places"]})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"Confirms"}),r.jsx(ft,{color:"green.600",children:C.occupancy})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"Taux d'occupation"}),r.jsxs(ft,{color:"purple.600",children:[C.rate,"%"]})]})]})})}),r.jsx(tt,{columns:{base:1,lg:2},spacing:4,children:y.map(N=>r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"sm",children:N.name}),N.vehicle&&r.jsx(Ge,{colorScheme:"blue",children:N.vehicle})]})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[r.jsxs(ne,{children:[r.jsx(wi,{}),r.jsx(O,{fontSize:"sm",children:"Capacit:"}),r.jsxs(Qn,{size:"sm",min:0,max:200,value:N.capacity||0,onChange:Z=>H(N.id,Z),w:"90px",children:[r.jsx(Zn,{}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"places"})]}),r.jsxs(ne,{spacing:3,children:[r.jsxs(O,{fontSize:"sm",fontWeight:"bold",children:[C.occupancy," / ",N.capacity||0]}),r.jsx(gc,{value:(N.capacity||0)>0?Math.min(100,Math.round(C.occupancy/N.capacity*100)):0,size:"sm",colorScheme:(N.capacity||0)>0&&C.occupancy/(N.capacity||1)>.9?"red":(N.capacity||0)>0&&C.occupancy/(N.capacity||1)>.75?"orange":"green",flex:1})]}),r.jsx(de,{fontSize:"sm",color:"gray.600",children:N.stops?.length?r.jsx("ul",{style:{marginLeft:"1rem"},children:N.stops.map((Z,ke)=>r.jsxs("li",{children:[Z.time?`${Z.time}  `:"",Z.name]},ke))}):r.jsx(O,{children:"Aucun arrt"})})]})})]},N.id))})]})}),r.jsx(ln,{children:r.jsxs(Q,{align:"stretch",spacing:6,children:[r.jsx(we,{size:"md",children:"Finances"}),r.jsxs(tt,{columns:{base:1,md:4},spacing:4,children:[r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Revenus"}),r.jsxs(ft,{color:"green.500",children:[C.revenue,""]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Dpenses"}),r.jsxs(ft,{color:"red.500",children:[C.expenses,""]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Bnfice"}),r.jsxs(ft,{color:C.profit>=0?"green.500":"red.500",children:[C.profit,""]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Taux d'occupation"}),r.jsxs(ft,{color:"blue.500",children:[C.rate,"%"]}),r.jsxs(O,{fontSize:"xs",color:"gray.600",children:[C.occupancy," / ",C.capacity," places"]})]})})})]}),r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Revenus"})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[r.jsxs(ne,{justify:"space-between",children:[r.jsxs(O,{children:["Adulte (",C.breakdown?.adult.count,")"]}),r.jsxs(O,{fontWeight:"bold",children:[Math.round(C.breakdown?.adult.total||0),""]})]}),r.jsxs(ne,{justify:"space-between",children:[r.jsxs(O,{children:["Enfant (",C.breakdown?.child.count,")"]}),r.jsxs(O,{fontWeight:"bold",children:[Math.round(C.breakdown?.child.total||0),""]})]}),r.jsx(rn,{}),r.jsxs(ne,{justify:"space-between",children:[r.jsx(O,{fontWeight:"bold",children:"Total"}),r.jsxs(O,{fontWeight:"bold",color:"green.500",children:[C.revenue,""]})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Dpenses"})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[C.breakdown?.expenseLines?.map((N,Z)=>r.jsxs(ne,{justify:"space-between",children:[r.jsx(O,{fontSize:"sm",children:N.label}),r.jsxs(O,{fontWeight:"bold",children:[N.amount,""]})]},Z)),r.jsx(rn,{}),r.jsxs(ne,{justify:"space-between",children:[r.jsx(O,{fontWeight:"bold",children:"Total"}),r.jsxs(O,{fontWeight:"bold",color:"red.500",children:[C.expenses,""]})]})]})})]})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsx(we,{size:"md",children:"Configuration HelloAsso"}),r.jsxs(G,{children:[r.jsx(q,{children:"URL de l'vnement"}),r.jsx(pe,{placeholder:"https://www.helloasso.com/associations/.../evenements/...",value:E.url,onChange:N=>k(Z=>({...Z,url:N.target.value}))}),r.jsx(O,{fontSize:"xs",color:"gray.500",mt:1,children:"Optionnel : on peut parser plus tard"})]}),r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Organisation"}),r.jsx(pe,{value:E.org,onChange:N=>k(Z=>({...Z,org:N.target.value})),placeholder:"nom-organisation"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"vnement"}),r.jsx(pe,{value:E.event,onChange:N=>k(Z=>({...Z,event:N.target.value})),placeholder:"nom-evenement"})]})]}),r.jsx(Y,{leftIcon:r.jsx(xc,{}),onClick:()=>e({status:"success",title:"Paramtres enregistrs"}),colorScheme:"blue",children:"Sauvegarder"}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"sm",children:"Participants HelloAsso"}),r.jsx(Ge,{colorScheme:"gray",children:"Non synchronis"})]})}),r.jsxs(Ae,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"La synchronisation sera ajoute ultrieurement."}),r.jsxs(de,{mt:3,children:[r.jsxs(Q0,{fontSize:"xs",children:["org: ",E.org||"-"]}),"  ",r.jsxs(Q0,{fontSize:"xs",children:["event: ",E.event||"-"]})]})]})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsx(we,{size:"md",children:"Transactions lies  lvnement"}),r.jsxs(ne,{children:[r.jsxs(Qe,{maxW:"160px",value:B.type,onChange:N=>fe(Z=>({...Z,type:N.target.value})),children:[r.jsx("option",{value:"recette",children:"Recette"}),r.jsx("option",{value:"depense",children:"Dpense"})]}),r.jsx(pe,{placeholder:"Description",value:B.description,onChange:N=>fe(Z=>({...Z,description:N.target.value}))}),r.jsxs(Qn,{maxW:"160px",value:B.amount,min:0,precision:2,step:1,onChange:(N,Z)=>fe(ke=>({...ke,amount:Number.isFinite(Z)?Z:0})),children:[r.jsx(Zn,{placeholder:"Montant"}),r.jsxs(Bs,{children:[r.jsx(Fs,{}),r.jsx($s,{})]})]}),r.jsxs(Qe,{maxW:"220px",placeholder:"Catgorie",value:B.category,onChange:N=>fe(Z=>({...Z,category:N.target.value})),children:[r.jsx("option",{value:"evenements",children:"vnements"}),r.jsx("option",{value:"carburant",children:"Carburant"}),r.jsx("option",{value:"maintenance",children:"Maintenance"}),r.jsx("option",{value:"materiel",children:"Matriel"}),r.jsx("option",{value:"autres",children:"Autres"})]}),r.jsx(Y,{leftIcon:r.jsx(xc,{}),colorScheme:"blue",onClick:R,children:"Ajouter"})]}),r.jsx(Me,{children:r.jsx(Ae,{p:0,children:I?r.jsx(cn,{py:8,children:r.jsx(sn,{})}):ae.length===0?r.jsx(cn,{py:10,children:r.jsx(O,{color:"gray.500",children:"Aucune transaction lie"})}):r.jsxs(Tr,{size:"sm",variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{children:"Type"}),r.jsx(Ie,{children:"Description"}),r.jsx(Ie,{children:"Catgorie"}),r.jsx(Ie,{isNumeric:!0,children:"Montant"})]})}),r.jsx(zr,{children:ae.map(N=>r.jsxs($t,{children:[r.jsx(Pe,{children:N.date?new Date(N.date).toLocaleDateString("fr-FR"):"-"}),r.jsx(Pe,{children:r.jsx(Ge,{colorScheme:N.type==="recette"?"green":"red",children:N.type==="recette"?"Recette":"Dpense"})}),r.jsx(Pe,{children:N.description}),r.jsx(Pe,{children:r.jsx(Ge,{variant:"subtle",children:N.category||"-"})}),r.jsx(Pe,{isNumeric:!0,children:r.jsx(O,{fontWeight:"bold",color:N.type==="recette"?"green.500":"red.500",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(N.amount||0)})})]},N.id))})]})})})]})})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:M,children:"Fermer"}),r.jsx(Y,{colorScheme:"blue",leftIcon:r.jsx(xc,{}),onClick:_,isLoading:D,children:"Sauvegarder"})]})]})]})]})}const _le=({value:e,onChange:t,isRequired:n=!1})=>{const[s,i]=j.useState([]),[o,l]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const h=localStorage.getItem("token"),p=await fetch("https://refreshing-adaptation-rbe-serveurs.up.railway.app/vehicles",{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(p.ok){const m=await p.json();i(m)}}catch(h){console.error("Erreur lors du chargement des vhicules:",h)}finally{l(!1)}})()},[]);const u=s.find(d=>d.parc===e);return r.jsxs(de,{children:[r.jsxs(q,{children:["Vhicule participant ",n&&r.jsx(O,{as:"span",color:"red.500",children:"*"})]}),o?r.jsxs(qn,{align:"center",justify:"center",py:4,children:[r.jsx(sn,{size:"sm",mr:2}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Chargement des vhicules..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Qe,{placeholder:"Slectionner un vhicule (optionnel)",value:e,onChange:d=>t(d.target.value),bg:"white",children:s.map(d=>r.jsxs("option",{value:d.parc,children:[d.marque," ",d.modele," - ",d.parc,d.immat&&` (${d.immat})`]},d.parc))}),u&&r.jsxs(de,{mt:3,p:3,bg:"blue.50",borderRadius:"md",border:"1px solid",borderColor:"blue.200",children:[r.jsxs(qn,{align:"center",children:[u.gallery&&u.gallery[0]&&r.jsx(ui,{src:`https://refreshing-adaptation-rbe-serveurs.up.railway.app${u.gallery[0]}`,alt:`${u.marque} ${u.modele}`,boxSize:"60px",objectFit:"cover",borderRadius:"md",mr:3}),r.jsxs(de,{flex:1,children:[r.jsxs(O,{fontWeight:"bold",color:"blue.700",children:[u.marque," ",u.modele]}),r.jsxs(ne,{spacing:2,mt:1,children:[r.jsx(Ge,{colorScheme:"blue",fontSize:"xs",children:u.parc}),u.immat&&r.jsx(Ge,{colorScheme:"green",fontSize:"xs",children:u.immat}),u.miseEnCirculation&&r.jsx(Ge,{colorScheme:"orange",fontSize:"xs",children:new Date(u.miseEnCirculation).getFullYear()})]}),u.subtitle&&r.jsx(O,{fontSize:"sm",color:"gray.600",mt:1,children:u.subtitle})]})]}),r.jsxs(Q,{spacing:2,align:"start",mt:3,children:[r.jsx(O,{fontSize:"xs",color:"blue.600",fontStyle:"italic",fontWeight:"semibold",children:" Ce vhicule sera mis en avant sur sa page individuelle avec une banderole spciale pour cet vnement"}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:"Les visiteurs verront une banderole thmatique adapte au type d'vnement sur la page de ce vhicule."})]})]})]}),r.jsx(O,{fontSize:"xs",color:"gray.500",mt:2,children:"Slectionnez un vhicule pour qu'il soit associ  cet vnement. Une banderole apparatra sur sa page pour informer les visiteurs de sa participation."})]})},K1={public_info_only:{name:"Information publique",color:"blue",description:"vnement d'information sans inscription",defaults:{isVisible:!0,requiresRegistration:!1,allowPublicRegistration:!1,isFree:!0,registrationMethod:"none",eventType:"public_info_only"}},paid_event:{name:"vnement payant",color:"green",description:"vnement avec tarifs et inscription",defaults:{isVisible:!0,requiresRegistration:!0,allowPublicRegistration:!0,isFree:!1,registrationMethod:"helloasso",eventType:"paid_event"}},free_registration:{name:"Inscription gratuite",color:"purple",description:"vnement gratuit avec inscription",defaults:{isVisible:!0,requiresRegistration:!0,allowPublicRegistration:!0,isFree:!0,registrationMethod:"internal",eventType:"free_registration"}},internal_only:{name:"vnement interne",color:"orange",description:"vnement rserv aux membres",defaults:{isVisible:!1,requiresRegistration:!1,allowPublicRegistration:!1,isFree:!0,registrationMethod:"none",eventType:"internal_only"}},maintenance:{name:"Maintenance/Atelier",color:"red",description:"Activit de maintenance ou atelier technique",defaults:{isVisible:!1,requiresRegistration:!1,allowPublicRegistration:!1,isFree:!0,registrationMethod:"none",eventType:"maintenance"}}};function Ble(){const[e,t]=j.useState([]),[n,s]=j.useState([]),[i,o]=j.useState(!0),[l,u]=j.useState(!1),[d,h]=j.useState("cards"),[p,m]=j.useState(""),{isOpen:x,onOpen:y,onClose:b}=jt(),[C,S]=j.useState(null),[E,k]=j.useState({title:"",date:"",time:"",location:"",description:"",adultPrice:"",childPrice:"",helloAssoUrl:"",vehicleId:"",status:"DRAFT",isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,maxParticipants:"",registrationDeadline:"",registrationMethod:"none",pdfUrl:"",eventType:"public_info_only"}),A=mn(),T=j.useCallback(async()=>{try{o(!0);const H=await Ji.getAll();t(Array.isArray(H)?H:[])}catch(H){console.error(H),A({status:"error",title:"Erreur de chargement",description:"Impossible de charger les vnements"}),t([])}finally{o(!1)}},[A]),M=j.useCallback(async()=>{try{const H=await sm.getAll();s(Array.isArray(H)?H:[])}catch(H){console.error(H),s([])}},[]);j.useEffect(()=>{T(),M()},[T,M]);const D=()=>{k({title:"",date:"",time:"",location:"",description:"",adultPrice:"",childPrice:"",helloAssoUrl:"",vehicleId:"",status:"DRAFT",isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,maxParticipants:"",registrationDeadline:"",registrationMethod:"none",pdfUrl:"",eventType:"public_info_only"}),m(""),S(null)},$=H=>{const F=K1[H];F&&(k(_=>({..._,...F.defaults,eventType:H})),m(H),A({status:"info",title:"Template appliqu",description:F.description}))},W=()=>{S(null),D(),y()},te=H=>{S(H);let F={};try{F=H.extras?JSON.parse(H.extras):{}}catch(_){console.log("Impossible de parser extras:",_)}k({title:H.title||"",date:H.date?H.date.split("T")[0]:"",time:H.time||"",location:H.location||"",description:H.description||"",adultPrice:H.adultPrice?H.adultPrice.toString():"",childPrice:H.childPrice?H.childPrice.toString():"",helloAssoUrl:H.helloAssoUrl||"",vehicleId:H.vehicleId||"",status:H.status||"DRAFT",isVisible:F.isVisible!==void 0?F.isVisible:!0,allowPublicRegistration:F.allowPublicRegistration||!1,requiresRegistration:F.requiresRegistration||!1,isFree:F.isFree!==void 0?F.isFree:!0,maxParticipants:F.maxParticipants?F.maxParticipants.toString():"",registrationDeadline:F.registrationDeadline||"",registrationMethod:F.registrationMethod||"none",pdfUrl:F.pdfUrl||"",eventType:F.eventType||"public_info_only"}),m(F.eventType||""),y()},re=async()=>{if(!E.title.trim()||!E.date){A({status:"error",title:"Champs requis",description:"Le titre et la date sont obligatoires"});return}try{u(!0);const H={title:E.title.trim(),date:E.date,time:E.time||null,location:E.location.trim()||null,description:E.description.trim()||null,adultPrice:E.adultPrice?parseFloat(E.adultPrice):null,childPrice:E.childPrice?parseFloat(E.childPrice):null,helloAssoUrl:E.helloAssoUrl.trim()||null,vehicleId:E.vehicleId||null,status:E.status,extras:JSON.stringify({isVisible:E.isVisible,allowPublicRegistration:E.allowPublicRegistration,requiresRegistration:E.requiresRegistration,isFree:E.isFree,maxParticipants:E.maxParticipants?parseInt(E.maxParticipants):null,registrationDeadline:E.registrationDeadline||null,registrationMethod:E.registrationMethod,pdfUrl:E.pdfUrl||null,eventType:E.eventType})};if(C)await Ji.update(C.id,H),A({status:"success",title:"vnement modifi",description:"Les modifications ont t sauvegardes"});else{const F=E.title.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"").substring(0,20)+new Date().getFullYear();await Ji.create({id:F,...H}),A({status:"success",title:"vnement cr",description:"Le nouvel vnement a t cr avec succs"})}T(),b(),D()}catch(H){console.error(H),A({status:"error",title:"Erreur de sauvegarde",description:"Impossible de sauvegarder l'vnement"})}finally{u(!1)}},U=async()=>{const H=localStorage.getItem("token");if(console.log(" Testing API connection..."),!H){A({status:"error",title:"Pas de token",description:"Veuillez vous reconnecter"});return}try{const F=await fetch("https://refreshing-adaptation-rbe-serveurs.up.railway.app/events",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`}});F.ok?A({status:"success",title:"API fonctionnelle",description:"La connexion API fonctionne"}):A({status:"error",title:"Erreur API",description:`Status: ${F.status}`})}catch(F){A({status:"error",title:"Erreur rseau",description:F.message})}},oe=H=>{const F={DRAFT:{colorScheme:"gray",label:"Brouillon"},PUBLISHED:{colorScheme:"green",label:"Publi"},ARCHIVED:{colorScheme:"orange",label:"Archiv"}},_=F[H]||F.DRAFT;return r.jsx(Ge,{colorScheme:_.colorScheme,children:_.label})},xe=H=>{const F=typeof H.extras=="string"?JSON.parse(H.extras||"{}"):H.extras||{},_=K1[F.eventType];return _?r.jsx(Ge,{colorScheme:_.color,variant:"outline",children:_.name}):null},ie=H=>{const F=n.find(_=>_.parc===H);return F?`${F.parc} - ${F.modele}`:"Aucun vhicule"};return r.jsxs(de,{p:6,children:[r.jsxs(qn,{justify:"space-between",align:"center",mb:6,children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{children:" Cration des vnements"}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Crez et configurez de nouveaux vnements pour l'association"})]}),r.jsxs(ne,{spacing:3,children:[r.jsx(Y,{leftIcon:r.jsx(us,{}),size:"sm",colorScheme:"purple",variant:"outline",onClick:U,children:"Tester API"}),r.jsx(Y,{leftIcon:d==="cards"?r.jsx(RE,{}):r.jsx(ME,{}),size:"sm",variant:"outline",onClick:()=>h(d==="cards"?"table":"cards"),children:d==="cards"?"Vue tableau":"Vue cartes"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:W,children:"Nouvel vnement"})]})]}),i?r.jsx(cn,{py:20,children:r.jsx(sn,{size:"xl"})}):e.length===0?r.jsx(cn,{py:20,children:r.jsxs(Q,{spacing:4,children:[r.jsx(O,{color:"gray.500",fontSize:"lg",children:"Aucun vnement trouv"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:W,children:"Crer le premier vnement"})]})}):r.jsx(tt,{columns:{base:1,md:2,lg:3},spacing:6,children:e.map(H=>r.jsxs(Me,{shadow:"md",position:"relative",children:[r.jsx(Ct,{pb:2,children:r.jsxs(Q,{align:"start",spacing:2,children:[r.jsx(ne,{justify:"space-between",w:"100%",children:r.jsx(we,{size:"md",noOfLines:2,flex:1,children:H.title})}),r.jsxs(ne,{spacing:2,wrap:"wrap",children:[oe(H.status),xe(H)]})]})}),r.jsx(Ae,{pt:0,children:r.jsxs(Q,{align:"start",spacing:2,children:[r.jsxs(ne,{children:[r.jsx(si,{}),r.jsxs(O,{fontSize:"sm",children:[H.date," ",H.time&&` ${H.time}`]})]}),H.location&&r.jsxs(ne,{children:[r.jsx(Mb,{}),r.jsx(O,{fontSize:"sm",children:H.location})]}),H.vehicleId&&r.jsxs(ne,{children:[r.jsx(O,{fontSize:"sm",children:""}),r.jsx(O,{fontSize:"sm",fontWeight:"semibold",color:"blue.600",children:ie(H.vehicleId)})]}),H.description&&r.jsx(O,{fontSize:"sm",color:"gray.600",noOfLines:3,children:H.description}),r.jsx(Y,{size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>te(H),w:"100%",children:"Modifier"})]})})]},H.id))}),r.jsxs(mt,{isOpen:x,onClose:b,size:"6xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:C?"Modifier l'vnement":"Crer un nouvel vnement"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(gl,{children:[r.jsxs(xl,{children:[r.jsx(an,{children:"Informations de base"}),r.jsx(an,{children:"Configuration"}),r.jsx(an,{children:"Inscription & Prix"})]}),r.jsxs(yl,{children:[r.jsx(ln,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",mb:2,children:"Dmarrage rapide :"}),r.jsx(ne,{spacing:2,wrap:"wrap",children:Object.entries(K1).map(([H,F])=>r.jsx(Y,{size:"sm",colorScheme:F.color,variant:p===H?"solid":"outline",onClick:()=>$(H),children:F.name},H))})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Titre"}),r.jsx(pe,{value:E.title,onChange:H=>k(F=>({...F,title:H.target.value})),placeholder:"Nom de l'vnement"})]}),r.jsxs(ne,{w:"100%",spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Date"}),r.jsx(pe,{type:"date",value:E.date,onChange:H=>k(F=>({...F,date:H.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Heure"}),r.jsx(pe,{type:"time",value:E.time,onChange:H=>k(F=>({...F,time:H.target.value}))})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Lieu"}),r.jsx(pe,{value:E.location,onChange:H=>k(F=>({...F,location:H.target.value})),placeholder:"Lieu de l'vnement"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Vhicule assign"}),r.jsx(_le,{vehicles:n,value:E.vehicleId,onChange:H=>k(F=>({...F,vehicleId:H}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{value:E.description,onChange:H=>k(F=>({...F,description:H.target.value})),placeholder:"Description de l'vnement",rows:4})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Statut"}),r.jsxs(Qe,{value:E.status,onChange:H=>k(F=>({...F,status:H.target.value})),children:[r.jsx("option",{value:"DRAFT",children:"Brouillon"}),r.jsx("option",{value:"PUBLISHED",children:"Publi"}),r.jsx("option",{value:"ARCHIVED",children:"Archiv"})]})]}),r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{mb:"0",children:"Visible sur le site public"}),r.jsx(sr,{isChecked:E.isVisible,onChange:H=>k(F=>({...F,isVisible:H.target.checked}))})]}),r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{mb:"0",children:"Inscription requise"}),r.jsx(sr,{isChecked:E.requiresRegistration,onChange:H=>k(F=>({...F,requiresRegistration:H.target.checked}))})]}),E.requiresRegistration&&r.jsxs(G,{children:[r.jsx(q,{children:"Mthode d'inscription"}),r.jsxs(Qe,{value:E.registrationMethod,onChange:H=>k(F=>({...F,registrationMethod:H.target.value})),children:[r.jsx("option",{value:"none",children:"Aucune"}),r.jsx("option",{value:"helloasso",children:"HelloAsso"}),r.jsx("option",{value:"pdf",children:"Formulaire PDF"}),r.jsx("option",{value:"internal",children:"Systme interne"})]})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{mb:"0",children:"vnement gratuit"}),r.jsx(sr,{isChecked:E.isFree,onChange:H=>k(F=>({...F,isFree:H.target.checked}))})]}),!E.isFree&&r.jsxs(ne,{w:"100%",spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Prix adulte ()"}),r.jsx(pe,{type:"number",step:"0.01",value:E.adultPrice,onChange:H=>k(F=>({...F,adultPrice:H.target.value})),placeholder:"0.00"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Prix enfant ()"}),r.jsx(pe,{type:"number",step:"0.01",value:E.childPrice,onChange:H=>k(F=>({...F,childPrice:H.target.value})),placeholder:"0.00"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Nombre maximum de participants"}),r.jsx(pe,{type:"number",value:E.maxParticipants,onChange:H=>k(F=>({...F,maxParticipants:H.target.value})),placeholder:"Illimit"})]}),E.registrationMethod==="helloasso"&&r.jsxs(G,{children:[r.jsx(q,{children:"URL HelloAsso"}),r.jsx(pe,{value:E.helloAssoUrl,onChange:H=>k(F=>({...F,helloAssoUrl:H.target.value})),placeholder:"https://www.helloasso.com/..."})]}),E.registrationMethod==="pdf"&&r.jsxs(G,{children:[r.jsx(q,{children:"URL du formulaire PDF"}),r.jsx(pe,{value:E.pdfUrl,onChange:H=>k(F=>({...F,pdfUrl:H.target.value})),placeholder:"https://exemple.com/formulaire.pdf"})]})]})})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:()=>{b(),D()},children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:re,isLoading:l,children:C?"Modifier":"Crer"})]})]})]})]})}function $le(){return r.jsxs(de,{p:6,bg:"green.100",minH:"100vh",children:[r.jsx(we,{color:"green.800",mb:4,children:" TEST - Gestion des vnements"}),r.jsx(O,{color:"green.700",mb:4,children:"Si vous voyez cette page, la redirection depuis MyRBE fonctionne !"}),r.jsx(Y,{as:$n,to:"/dashboard/myrbe",colorScheme:"green",children:"Retour  MyRBE"})]})}function X1(e){return qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(e)}function Fle(e){return qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function Vle(e){return qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function e5(e){return qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function oN(e){return qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function aN(e){return qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(e)}function Hle(e){return qe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function lN(e){return qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Ule(e){return qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function t5(e){return qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function n5(e){return qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function DE(e,{preferUpperLast:t=!0}={}){if(!e)return"Utilisateur";const n=e.firstName||e.prenom||e.given_name||"",s=e.lastName||e.nom||e.family_name||"",i=e.username||e.matricule||"",o=e.email||"",l=[];return t&&s&&l.push(String(s).toUpperCase()),n&&l.push(n),l.length?l.join(" ").trim():s||n?[n,s].filter(Boolean).join(" ").trim():i||o||"Utilisateur"}function OE(e){if(!e)return"Adhrent";const t=e.firstName||"",n=e.lastName||"",s=e.memberNumber||"",i=e.email||"",l=[n?String(n).toUpperCase():"",t].filter(Boolean).join(" ").trim()||i||s||"Adhrent";return s?`${l} - #${s}`:l}const $p={async getAll(e){const t=await fetch("/api/email-templates",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Failed to fetch templates: ${t.statusText}`);return t.json()},async getById(e,t){const n=await fetch(`/api/email-templates/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error(`Failed to fetch template: ${n.statusText}`);return n.json()},async create(e,t){const n=await fetch("/api/email-templates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to create template")}return n.json()},async update(e,t,n){const s=await fetch(`/api/email-templates/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update template")}return s.json()},async delete(e,t){const n=await fetch(`/api/email-templates/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete template")}return n.json()},async preview(e,t,n){const s=await fetch(`/api/email-templates/preview/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to preview template")}return s.json()}};function Wle({isOpen:e,onClose:t,template:n,onSave:s,isLoading:i}){const[o,l]=j.useState({name:"",subject:"",body:"",description:"",variables:"",active:!0});j.useEffect(()=>{l(n||{name:"",subject:"",body:"",description:"",variables:"",active:!0})},[n,e]);const u=h=>{const{name:p,value:m,checked:x,type:y}=h.target;l(b=>({...b,[p]:y==="checkbox"?x:m}))},d=()=>{if(!o.name.trim()||!o.subject.trim()||!o.body.trim()){alert("Name, subject, and body are required");return}s(o)};return r.jsxs(mt,{isOpen:e,onClose:t,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:n?.id?"Edit Template":"Create New Template"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(pa,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Template Name (unique, lowercase)"}),r.jsx(pe,{name:"name",value:o.name,onChange:u,placeholder:"e.g., ticket_created",isDisabled:!!n?.id}),r.jsx(A0,{children:"Use lowercase letters, numbers, and underscores. Cannot be changed after creation."})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Subject (supports variables)"}),r.jsx(pe,{name:"subject",value:o.subject,onChange:u,placeholder:"New ticket: {{ticket.id}}"}),r.jsx(A0,{children:"Use double curly braces for variables, e.g.: ticket.id, creator.name"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Body (supports variables)"}),r.jsx(Gt,{name:"body",value:o.body,onChange:u,placeholder:"Enter email body...",minH:"200px"}),r.jsx(A0,{children:"Use double curly braces for variables. Supports plain text."})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{name:"description",value:o.description,onChange:u,placeholder:"Describe when and how this template is used...",minH:"80px"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Available Variables (comma-separated, for documentation)"}),r.jsx(Gt,{name:"variables",value:o.variables,onChange:u,placeholder:"ticket.id, ticket.title, creator.name, creator.email",minH:"60px"})]}),r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{htmlFor:"active",mb:"0",children:"Active"}),r.jsx(sr,{id:"active",name:"active",isChecked:o.active,onChange:u,ml:4})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:t,children:"Cancel"}),r.jsxs(Y,{colorScheme:"blue",onClick:d,isLoading:i,children:[n?.id?"Update":"Create"," Template"]})]})]})]})}function qle({isOpen:e,onClose:t,template:n,token:s}){const[i,o]=j.useState(`{
  "ticket": {
    "id": "T-001",
    "title": "Test ticket"
  },
  "creator": {
    "name": "John Doe",
    "email": "john@example.com"
  }
}`),[l,u]=j.useState(null),[d,h]=j.useState(!1),[p,m]=j.useState(null),x=mn(),y=async()=>{try{h(!0),m(null);const b=JSON.parse(i),C=await $p.preview(n.name,b,s);u(C.preview)}catch(b){m(b.message),x({title:"Error",description:b.message,status:"error",duration:3})}finally{h(!1)}};return r.jsxs(mt,{isOpen:e,onClose:t,size:"2xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsxs(xt,{children:["Preview Template: ",n?.name]}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(pa,{spacing:4,children:[r.jsxs(de,{children:[r.jsx(q,{children:"Test Data (JSON)"}),r.jsx(Gt,{value:i,onChange:b=>o(b.target.value),fontFamily:"monospace",fontSize:"xs",minH:"150px"})]}),r.jsx(Y,{onClick:y,colorScheme:"blue",isLoading:d,children:"Generate Preview"}),p&&r.jsxs(de,{p:3,bg:"red.50",borderRadius:"md",color:"red.800",children:["Error: ",p]}),l&&r.jsxs(Q,{align:"start",spacing:3,p:3,bg:"gray.50",borderRadius:"md",children:[r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",fontSize:"sm",color:"gray.600",children:"Subject:"}),r.jsx(O,{fontFamily:"monospace",fontSize:"sm",children:l.subject})]}),r.jsx(rn,{}),r.jsxs(de,{w:"100%",children:[r.jsx(O,{fontWeight:"bold",fontSize:"sm",color:"gray.600",children:"Body:"}),r.jsx(de,{p:3,bg:"white",borderRadius:"md",border:"1px solid",borderColor:"gray.200",fontSize:"sm",whiteSpace:"pre-wrap",fontFamily:"monospace",children:l.body})]})]})]})}),r.jsx(Nt,{children:r.jsx(Y,{colorScheme:"blue",onClick:t,children:"Close"})})]})]})}function Gle({token:e}){const[t,n]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(null),[u,d]=j.useState(null),[h,p]=j.useState(null),{isOpen:m,onOpen:x,onClose:y}=jt(),{isOpen:b,onOpen:C,onClose:S}=jt(),E=mn();j.useEffect(()=>{k()},[e]);const k=async()=>{try{i(!0),l(null);const W=await $p.getAll(e);n(W.templates||[])}catch(W){l(W.message),E({title:"Error loading templates",description:W.message,status:"error",duration:3})}finally{i(!1)}},A=()=>{d(null),x()},T=W=>{d(W),x()},M=W=>{p(W),C()},D=async W=>{if(confirm(`Are you sure you want to delete template "${W.name}"?`))try{await $p.delete(W.id,e),E({title:"Template deleted",status:"success",duration:2}),k()}catch(te){E({title:"Error deleting template",description:te.message,status:"error",duration:3})}},$=async W=>{try{u?.id?(await $p.update(u.id,W,e),E({title:"Template updated",status:"success",duration:2})):(await $p.create(W,e),E({title:"Template created",status:"success",duration:2})),y(),k()}catch(te){E({title:"Error saving template",description:te.message,status:"error",duration:3})}};return r.jsxs(de,{p:6,children:[r.jsxs(qn,{justify:"space-between",align:"center",mb:6,children:[r.jsx(we,{size:"lg",children:"Email Templates"}),r.jsx(Y,{leftIcon:r.jsx(Doe,{}),colorScheme:"green",onClick:A,children:"Create Template"})]}),o&&r.jsx(de,{p:4,mb:6,bg:"red.50",borderRadius:"md",color:"red.800",children:o}),s?r.jsx(qn,{justify:"center",py:12,children:r.jsx(sn,{size:"lg"})}):t.length===0?r.jsx(Me,{children:r.jsx(Ae,{textAlign:"center",py:12,children:r.jsx(O,{color:"gray.500",children:"No templates yet. Create your first one!"})})}):r.jsx(so,{templateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:4,children:t.map(W=>r.jsxs(Me,{children:[r.jsx(Ct,{pb:2,children:r.jsx(qn,{justify:"space-between",align:"start",children:r.jsxs(Q,{align:"start",spacing:1,flex:1,children:[r.jsx(we,{size:"md",children:W.name}),r.jsx(Ge,{colorScheme:W.active?"green":"gray",children:W.active?"Active":"Inactive"})]})})}),r.jsx(rn,{}),r.jsx(Ae,{children:r.jsxs(pa,{spacing:3,children:[r.jsxs(de,{children:[r.jsx(O,{fontSize:"xs",color:"gray.600",fontWeight:"bold",children:"Subject:"}),r.jsx(O,{fontSize:"sm",noOfLines:2,children:W.subject})]}),W.description&&r.jsxs(de,{children:[r.jsx(O,{fontSize:"xs",color:"gray.600",fontWeight:"bold",children:"Description:"}),r.jsx(O,{fontSize:"sm",noOfLines:2,children:W.description})]}),r.jsxs(ne,{spacing:2,pt:2,children:[r.jsx(Bn,{label:"Preview",children:r.jsx(Y,{size:"sm",variant:"outline",colorScheme:"blue",onClick:()=>M(W),children:r.jsx(AL,{})})}),r.jsx(Bn,{label:"Edit",children:r.jsx(Y,{size:"sm",variant:"outline",colorScheme:"orange",onClick:()=>T(W),children:r.jsx(Poe,{})})}),r.jsx(Bn,{label:"Delete",children:r.jsx(Y,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>D(W),children:r.jsx(Noe,{})})})]})]})})]},W.id))}),r.jsx(Wle,{isOpen:m,onClose:y,template:u,onSave:$,isLoading:s}),h&&r.jsx(qle,{isOpen:b,onClose:S,template:h,token:e})]})}function Yle(){const e=mn(),{user:t,refreshPermissions:n}=Cs(),[s,i]=j.useState([]),[o,l]=j.useState(!0),[u,d]=j.useState(null),[h,p]=j.useState({}),[m,x]=j.useState({}),[y,b]=j.useState(!1),[C,S]=j.useState(""),{isOpen:E,onOpen:k,onClose:A}=jt();j.useEffect(()=>{T()},[]);const T=async()=>{try{l(!0);const U=await ut.get("/api/member-permissions/available");p(U);const oe=await ut.get("/api/site-users");i(Array.isArray(oe)?oe:oe.users||[])}catch(U){console.error("Erreur chargement donnes:",U),e({title:"Erreur",description:"Impossible de charger les donnes",status:"error",duration:3e3})}finally{l(!1)}},M=async U=>{try{d(U);const xe=(await ut.get(`/api/member-permissions/${U.id}`)).customPermissions||{},ie={};for(const[H,F]of Object.entries(xe))h[H]?ie[H]=F:console.warn(`  Filtered out invalid permission key: ${H}`);x(ie),k()}catch(oe){console.error("Erreur chargement permissions utilisateur:",oe),e({title:"Erreur",description:"Impossible de charger les permissions",status:"error",duration:3e3})}},D=U=>{x(oe=>({...oe,[U]:!oe[U]}))},$=async()=>{if(u)try{b(!0);const U={};for(const[oe,xe]of Object.entries(m))h[oe]?U[oe]=xe:console.warn(`  Skipping invalid permission key: ${oe}`);await ut.put(`/api/member-permissions/${u.id}`,{permissions:U}),e({title:"Succs",description:"Les permissions ont t mises  jour",status:"success",duration:3e3}),t?.id===u.id&&await n(),T(),A()}catch(U){console.error("Erreur sauvegarde permissions:",U);const oe=U?.response?.data?.message||U?.response?.data?.error||"Erreur lors de la sauvegarde",xe=U?.response?.data?.invalid;e({title:"Erreur",description:oe+(xe?`

Permissions invalides: ${xe.join(", ")}`:""),status:"error",duration:5e3,isClosable:!0}),xe&&console.error(" Backend rejected invalid permission keys:",xe)}finally{b(!1)}},W=async()=>{if(u)try{b(!0),await ut.post(`/api/member-permissions/${u.id}/reset`),e({title:"Succs",description:"Les permissions ont t rinitialises aux permissions du rle",status:"success",duration:3e3}),t?.id===u.id&&await n(),T(),A()}catch(U){console.error("Erreur rinitialisation permissions:",U),e({title:"Erreur",description:"Erreur lors de la rinitialisation",status:"error",duration:3e3})}finally{b(!1)}},te=s.filter(U=>U.username?.toLowerCase().includes(C.toLowerCase())||U.email?.toLowerCase().includes(C.toLowerCase())||U.firstName?.toLowerCase().includes(C.toLowerCase())||U.lastName?.toLowerCase().includes(C.toLowerCase())),re={Vhicules:Object.entries(h).filter(([U])=>U.startsWith("vehicles:")),vnements:Object.entries(h).filter(([U])=>U.startsWith("events:")),Finances:Object.entries(h).filter(([U])=>U.startsWith("finance:")),Membres:Object.entries(h).filter(([U])=>U.startsWith("members:")),Stocks:Object.entries(h).filter(([U])=>U.startsWith("stock:")),Communications:Object.entries(h).filter(([U])=>U.startsWith("newsletter:")||U.startsWith("retromail:")),RtroPlanning:Object.entries(h).filter(([U])=>U.startsWith("retroplanning:")),RtroSupport:Object.entries(h).filter(([U])=>U.startsWith("retrosupport:")),MyRBE:Object.entries(h).filter(([U])=>U.startsWith("myrbe:")),Administration:Object.entries(h).filter(([U])=>U.startsWith("admin:"))};return o?r.jsx(cn,{py:8,children:r.jsxs(Q,{children:[r.jsx(sn,{size:"lg"}),r.jsx(O,{children:"Chargement des donnes..."})]})}):r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(de,{children:[r.jsx(we,{size:"lg",mb:2,children:" Permissions par Membre"}),r.jsx(O,{color:"gray.600",children:"Grez les permissions individuelles de chaque utilisateur du site"})]}),r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontSize:"sm",fontWeight:"bold",children:"Comment a marche?"}),r.jsx(O,{fontSize:"xs",children:" Les permissions de base dpendent du rle de l'utilisateur"}),r.jsx(O,{fontSize:"xs",children:" Vous pouvez ajouter/retirer des permissions individuelles"}),r.jsx(O,{fontSize:"xs",children:' Cliquez sur "Rinitialiser" pour revenir aux permissions du rle'})]})]}),r.jsx(pe,{placeholder:"Rechercher un utilisateur...",value:C,onChange:U=>S(U.target.value),size:"sm"}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Utilisateurs"})}),r.jsxs(Ae,{overflowX:"auto",children:[r.jsxs(Tr,{size:"sm",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Nom"}),r.jsx(Ie,{children:"Email"}),r.jsx(Ie,{children:"Rle"}),r.jsx(Ie,{children:"Permissions personnalises"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:te.map(U=>{const oe=Object.keys(m).length>0;return r.jsxs($t,{children:[r.jsxs(Pe,{children:[r.jsxs(O,{fontWeight:"medium",fontSize:"sm",children:[U.firstName," ",U.lastName]}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:U.username})]}),r.jsx(Pe,{fontSize:"sm",children:U.email}),r.jsx(Pe,{children:r.jsx(Ge,{size:"sm",children:U.role})}),r.jsx(Pe,{children:oe&&r.jsx(Ge,{colorScheme:"blue",size:"sm",children:"Personnalises"})}),r.jsx(Pe,{children:r.jsx(Y,{size:"sm",leftIcon:r.jsx(us,{}),onClick:()=>M(U),colorScheme:"blue",variant:"outline",children:"Grer"})})]},U.id)})})]}),te.length===0&&r.jsx(O,{color:"gray.500",textAlign:"center",py:4,children:"Aucun utilisateur trouv"})]})]}),r.jsxs(mt,{isOpen:E,onClose:A,size:"2xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsxs(xt,{children:["Permissions de ",u?.firstName," ",u?.lastName]}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsxs(Ft,{status:"info",fontSize:"sm",children:[r.jsx(Vt,{}),"Rle actuel: ",r.jsx("strong",{children:u?.role})]}),Object.entries(re).map(([U,oe])=>oe.length>0&&r.jsxs(de,{children:[r.jsxs(we,{size:"sm",mb:3,children:[" ",U]}),r.jsx(so,{templateColumns:"repeat(2, 1fr)",gap:3,pl:4,children:oe.map(([xe,ie])=>r.jsxs(ne,{spacing:2,children:[r.jsx(Pu,{isChecked:!!m[xe],onChange:()=>D(xe)}),r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontSize:"sm",children:ie}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:xe})]})]},xe))}),r.jsx(rn,{my:3})]},U))]})}),r.jsx(Nt,{children:r.jsxs(ne,{spacing:3,children:[r.jsx(Y,{variant:"outline",onClick:W,isLoading:y,leftIcon:r.jsx(sle,{}),children:"Rinitialiser"}),r.jsx(Y,{variant:"ghost",onClick:A,children:"Annuler"}),r.jsx(Y,{colorScheme:"green",onClick:$,isLoading:y,leftIcon:r.jsx(xc,{}),children:"Sauvegarder"})]})})]})]})]})}var df={};const Hr={siteUsers:["api/site-users","site-users"],members:["api/members","members"],siteConfig:["api/site-config","site-config"],changelog:["api/changelog","changelog"],retroNews:["api/retro-news","retro-news"],notifications:["api/notifications","notifications"]},ju=()=>"api/site-users",XC=()=>"api/members",Sp=()=>"api/site-config",qx=()=>"api/changelog",Su=()=>df.VITE_API_URL||"",JC=()=>df.VITE_API_URL||"",Cp=()=>df.VITE_API_URL||"",Gx=()=>df.VITE_API_URL||"",Kle=()=>df.VITE_API_URL||"",im=e=>String(e||"").trim().replace(/^\/+|\/+$/g,""),Xle=()=>{const e=df.VITE_API_PREFIX||"";return im(e)},Ur=(e,t,n="",s)=>{const i=im(n),o=Xle(),l=new Set;typeof window<"u"&&window.location?.origin&&window.location.origin.replace(/\/+$/,"");const u=h=>{const p=[im(h)];i&&p.push(i);const m=p.filter(Boolean).join("/");m&&l.add(m)},d=h=>{if(!o)return;const p=im(h);p.startsWith(`${o}/`)||u(`${o}/${p}`)};return t&&u(t),e.forEach(h=>d(h)),e.forEach(h=>u(h)),Array.from(l)},gg=async(e,t,n)=>{Array.isArray(e)||(e=[e]);const s=[];for(const i of e)try{const o=im(i);if(!o)continue;const l=o.startsWith("/")?o:`/${o}`;let u;return t==="GET"?u=await ut.get(l):t==="POST"?u=await ut.post(l,n):t==="PUT"?u=await ut.put(l,n):t==="PATCH"?u=await ut.patch(l,n):t==="DELETE"&&(u=await ut.delete(l)),console.log(` Success with URL: ${l}`),{data:u,headers:{},url:l}}catch(o){s.push(`${i}: ${o.message}`),console.log(` Failed URL ${i}: ${o.message}`)}throw new Error(`All URLs failed: ${s.join(" | ")}`)},rl=async e=>gg(e,"GET"),NE=async(e,t)=>gg(e,"POST",t),Fp=async(e,t)=>gg(e,"PUT",t),Jle=async(e,t)=>gg(e,"PATCH",t),r5=async e=>gg(e,"DELETE");function Qle(){const[e,t]=j.useState([]),[n,s]=j.useState([]),[i,o]=j.useState(!0),[l,u]=j.useState(""),[d,h]=j.useState("ALL"),[p,m]=j.useState("ALL"),[x,y]=j.useState(null),[b,C]=j.useState({}),[S,E]=j.useState([]),[k,A]=j.useState(0),{isOpen:T,onOpen:M,onClose:D}=jt(),{isOpen:$,onOpen:W,onClose:te}=jt(),re=mn(),U=ir("white","gray.800");j.useEffect(()=>{oe(),xe(),ie(),H()},[]);const oe=async()=>{try{o(!0);const R=(await rl(Ur(Hr.siteUsers,ju(),"",Su()))).data;t(Array.isArray(R)?R:R?.users||[])}catch(P){console.error("Erreur chargement utilisateurs:",P),re({title:"Erreur API",description:`${P.message}${P.urlsTried?`  Test: ${P.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3})}finally{o(!1)}},xe=async()=>{try{const R=(await rl(Ur(Hr.members,XC(),"",JC()),{params:{status:"ACTIVE"}})).data;s(Array.isArray(R)?R:R?.members||[])}catch(P){console.error("Erreur chargement membres:",P),re({title:"Erreur API",description:`${P.message}${P.urlsTried?`  Test: ${P.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3})}},ie=async()=>{try{const P=await rl(Ur(Hr.siteUsers,ju(),"stats",Su()));C(P.data||{})}catch(P){if(console.error("Erreur chargement stats:",P),Array.isArray(e)&&e.length>0){const R=e.length,N=e.filter(je=>je.isActive).length,Z=e.filter(je=>!!je.linkedMember).length,ke=Date.now()-1440*60*1e3,Te=e.filter(je=>je.lastLoginAt&&new Date(je.lastLoginAt).getTime()>=ke).length;C({totalUsers:R,activeUsers:N,linkedUsers:Z,recentLogins:Te}),re({title:"Stats calcules localement",description:"Endpoint /site-users/stats indisponible, valeurs estimes  partir des utilisateurs chargs.",status:"info",duration:4e3})}else re({title:"Erreur API",description:`${P.message}${P.urlsTried?`  Test: ${P.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3})}},H=async()=>{try{const R=(await rl(Ur(Hr.retroNews,"","",Kle()))).data||[];E(Array.isArray(R)?R:[])}catch(P){console.error("Erreur chargement RtroNews:",P),E([])}},F=()=>{oe(),xe(),ie()},_=e.filter(P=>{const R=P.username?.toLowerCase().includes(l.toLowerCase())||P.email?.toLowerCase().includes(l.toLowerCase())||P.firstName?.toLowerCase().includes(l.toLowerCase())||P.lastName?.toLowerCase().includes(l.toLowerCase()),N=d==="ALL"||P.role===d,Z=p==="ALL"||p==="ACTIVE"&&P.isActive||p==="INACTIVE"&&!P.isActive;return R&&N&&Z});return r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"md",children:" Gestion des Accs Sites"}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Gestion des comptes d'accs aux sites interne et externe"})]}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:M,children:"Crer un accs"})]}),r.jsxs(tt,{columns:{base:2,md:3},spacing:4,children:[r.jsx(Me,{bg:U,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Total accs"}),r.jsx(ft,{color:"blue.500",children:b.totalUsers||0})]})})}),r.jsx(Me,{bg:U,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Lis aux adhsions"}),r.jsx(ft,{color:"purple.500",children:b.linkedUsers||0})]})})}),r.jsx(Me,{bg:U,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Connexions 24h"}),r.jsx(ft,{color:"orange.500",children:b.recentLogins||0})]})})})]}),S.length>0&&r.jsxs(Me,{bg:U,children:[r.jsx(Ct,{children:r.jsxs(ne,{justify:"space-between",children:[r.jsx(we,{size:"sm",children:" RtroNews"}),r.jsxs(ne,{spacing:2,children:[r.jsx(et,{icon:r.jsx(GL,{}),size:"sm",onClick:()=>A(P=>P===0?S.length-1:P-1),"aria-label":"News prcdente",isDisabled:S.length<=1}),r.jsxs(O,{fontSize:"xs",color:"gray.500",children:[k+1," / ",S.length]}),r.jsx(et,{icon:r.jsx(iy,{}),size:"sm",onClick:()=>A(P=>(P+1)%S.length),"aria-label":"News suivante",isDisabled:S.length<=1})]})]})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"start",spacing:2,children:[r.jsx(we,{size:"md",children:S[k]?.title||"Sans titre"}),S[k]?.date&&r.jsx(O,{fontSize:"sm",color:"gray.500",children:new Date(S[k].date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}),r.jsx(O,{children:S[k]?.content||""}),S[k]?.imageUrl&&r.jsx(ui,{src:S[k].imageUrl,alt:S[k]?.title,maxH:"200px",objectFit:"cover",borderRadius:"md"})]})})]}),r.jsx(Me,{bg:U,children:r.jsx(Ae,{children:r.jsxs(ne,{spacing:4,children:[r.jsxs(Gu,{flex:1,children:[r.jsx(Yu,{children:r.jsx(Rb,{})}),r.jsx(pe,{placeholder:"Rechercher par nom, email ou identifiant...",value:l,onChange:P=>u(P.target.value)})]}),r.jsxs(Qe,{value:d,onChange:P=>h(P.target.value),maxW:"220px",children:[r.jsx("option",{value:"ALL",children:"Tous rles"}),r.jsx("option",{value:"PRESIDENT",children:"Prsident"}),r.jsx("option",{value:"VICE_PRESIDENT",children:"Vice-Prsident"}),r.jsx("option",{value:"TRESORIER",children:"Trsorier"}),r.jsx("option",{value:"SECRETAIRE_GENERAL",children:"Secrtaire Gnral"}),r.jsx("option",{value:"MEMBER",children:"Membre"}),r.jsx("option",{value:"PRESTATAIRE",children:"Prestataire"})]}),r.jsxs(Qe,{value:p,onChange:P=>m(P.target.value),maxW:"150px",children:[r.jsx("option",{value:"ALL",children:"Tous statuts"}),r.jsx("option",{value:"ACTIVE",children:"Actif"}),r.jsx("option",{value:"INACTIVE",children:"Inactif"})]}),r.jsx(Y,{leftIcon:r.jsx(ao,{}),onClick:oe,size:"sm",children:"Actualiser"})]})})}),i?r.jsx(cn,{py:8,children:r.jsxs(Q,{spacing:4,children:[r.jsx(sn,{size:"lg"}),r.jsx(O,{children:"Chargement des accs..."})]})}):r.jsx(Me,{bg:U,children:r.jsxs(Ae,{children:[r.jsxs(Tr,{size:"sm",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Utilisateur"}),r.jsx(Ie,{children:"Matricule"}),r.jsx(Ie,{children:"Rle"}),r.jsx(Ie,{children:"Accs"}),r.jsx(Ie,{children:"Adhsion lie"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{children:"Dernire connexion"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:_.map(P=>r.jsx(Zle,{user:P,onEdit:()=>B(P),onToggleStatus:()=>fe(P),onLink:()=>I(P),onViewLogs:()=>ee(P),onDelete:()=>ae(P)},P.id))})]}),_.length===0&&r.jsxs(Ft,{status:"info",mt:4,children:[r.jsx(Vt,{}),"Aucun utilisateur trouv avec ces critres"]})]})}),r.jsx(ece,{isOpen:T,onClose:()=>{D(),y(null)},members:n,user:x,onUserSaved:F}),r.jsx(tce,{isOpen:$,onClose:te,user:x,members:n,onLinked:F})]});function B(P){y(P),M()}async function fe(P){try{await Jle(Ur(Hr.siteUsers,ju(),`${P.id}`,Su()),{isActive:!P.isActive}),re({title:"Succs",description:`Accs ${P.isActive?"dsactiv":"activ"}`,status:"success",duration:3e3}),F()}catch(R){console.error(R),re({title:"Erreur",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:4e3})}}function I(P){y(P),W()}function ee(P){re({title:"Info",description:`Affichage des logs pour ${P.username}  venir`,status:"info",duration:3e3})}async function ae(P){if(window.confirm(`Supprimer dfinitivement l'accs de ${DE(P)} (${P.username}) ?`))try{await r5(Ur(Hr.siteUsers,ju(),`${P.id}`,Su())),re({title:"Accs supprim",description:`L'utilisateur ${P.username} a t supprim`,status:"success",duration:3e3}),F()}catch(R){console.error(R),re({title:"Erreur",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:4e3})}}}function Zle({user:e,onEdit:t,onToggleStatus:n,onLink:s,onViewLogs:i,onDelete:o}){const l={PRESIDENT:"Prsident",VICE_PRESIDENT:"Vice-Prsident",TRESORIER:"Trsorier",SECRETAIRE_GENERAL:"Secrtaire Gnral",MEMBER:"Membre"},u=d=>({PRESIDENT:"red",VICE_PRESIDENT:"pink",TRESORIER:"green",SECRETAIRE_GENERAL:"purple",MEMBER:"blue"})[d]||"gray";return r.jsxs($t,{children:[r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontWeight:"medium",fontSize:"sm",children:DE(e)}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:e.email})]})}),r.jsx(Pe,{children:r.jsx(O,{fontFamily:"mono",fontSize:"sm",children:e.username})}),r.jsx(Pe,{children:r.jsx(Ge,{colorScheme:u(e.role),size:"sm",children:l[e.role]||e.role})}),r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:1,children:[e.hasInternalAccess&&r.jsx(Ge,{colorScheme:"blue",size:"xs",children:"Interne"}),e.hasExternalAccess&&r.jsx(Ge,{colorScheme:"green",size:"xs",children:"Externe"})]})}),r.jsx(Pe,{children:e.linkedMember?r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontSize:"sm",color:"green.600",children:OE(e.linkedMember)}),e.linkedMember.memberNumber&&r.jsxs(O,{fontSize:"xs",color:"gray.500",children:["#",e.linkedMember.memberNumber]})]}):r.jsxs(Y,{size:"xs",variant:"outline",onClick:s,children:[r.jsx(tle,{style:{marginRight:"4px"}}),"Fusionner"]})}),r.jsx(Pe,{children:r.jsx(Ge,{colorScheme:e.isActive?"green":"red",size:"sm",children:e.isActive?"Actif":"Inactif"})}),r.jsx(Pe,{children:r.jsx(O,{fontSize:"xs",children:e.lastLoginAt?new Date(e.lastLoginAt).toLocaleDateString("fr-FR"):"Jamais"})}),r.jsx(Pe,{children:r.jsxs(oa,{children:[r.jsx(aa,{as:et,icon:r.jsx(mg,{}),size:"sm",variant:"ghost"}),r.jsxs(la,{children:[r.jsx(Zt,{icon:r.jsx(us,{}),onClick:t,children:"Modifier"}),r.jsx(Zt,{icon:r.jsx(Za,{}),onClick:i,children:"Logs de connexion"}),r.jsx(Zt,{icon:e.isActive?r.jsx(ed,{}):r.jsx(qC,{}),onClick:n,color:e.isActive?"red.500":"green.500",children:e.isActive?"Dsactiver":"Activer"}),r.jsx(Zt,{icon:r.jsx(Yn,{}),onClick:o,color:"red.600",children:"Supprimer"})]})]})})]})}function ece({isOpen:e,onClose:t,members:n,onUserSaved:s,user:i}){const o=!!i,[l,u]=j.useState({username:"",firstName:"",lastName:"",email:"",role:"MEMBER",hasInternalAccess:!0,hasExternalAccess:!1,linkedMemberId:"",generatePassword:!0,customPassword:""}),[d,h]=j.useState(!1),p=mn();j.useEffect(()=>{u(o?{username:i?.username||"",firstName:i?.firstName||"",lastName:i?.lastName||"",email:i?.email||"",role:i?.role||"MEMBER",hasInternalAccess:!!i?.hasInternalAccess,hasExternalAccess:!!i?.hasExternalAccess,linkedMemberId:i?.linkedMember?.id||"",generatePassword:!1,customPassword:""}:{username:"",firstName:"",lastName:"",email:"",role:"MEMBER",hasInternalAccess:!0,hasExternalAccess:!1,linkedMemberId:"",generatePassword:!0,customPassword:""})},[o,i,e]);const m=async()=>{try{h(!0);const x={username:l.username,firstName:l.firstName,lastName:l.lastName,email:l.email,role:l.role,hasInternalAccess:l.hasInternalAccess,hasExternalAccess:l.hasExternalAccess,linkedMemberId:l.linkedMemberId||null};if(o)l.customPassword?.trim()&&(x.password=l.customPassword.trim()),await Fp(Ur(Hr.siteUsers,ju(),`${i.id}`,Su()),x),p({title:"Accs mis  jour",description:"L'utilisateur a t mis  jour avec succs",status:"success",duration:3e3});else{x.generatePassword=!!l.generatePassword,!l.generatePassword&&l.customPassword&&(x.customPassword=l.customPassword);const b=(await NE(Ur(Hr.siteUsers,ju(),"",Su()),x)).data;p({title:"Accs cr",description:b?.temporaryPassword?`Mot de passe temporaire: ${b.temporaryPassword}`:"L'utilisateur a t cr avec succs",status:"success",duration:b?.temporaryPassword?1e4:5e3,isClosable:!0})}s?.(),t(),u({username:"",firstName:"",lastName:"",email:"",role:"MEMBER",hasInternalAccess:!0,hasExternalAccess:!1,linkedMemberId:"",generatePassword:!0,customPassword:""})}catch(x){console.error(x),p({title:"Erreur",description:`${x?.response?.data?.message||x.message}${x.urlsTried?`  Test: ${x.urlsTried.join(", ")}`:""}`,status:"error",duration:6e3})}finally{h(!1)}};return r.jsxs(mt,{isOpen:e,onClose:t,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:o?" Modifier un accs aux sites":" Crer un accs aux sites"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsx(O,{fontSize:"sm",children:o?"Mettez  jour le profil d'accs. Le matricule est l'identifiant utilis sur le site.":"Crez un compte d'accs aux sites. Le matricule est l'identifiant utilis sur le site."})]}),r.jsxs(tt,{columns:2,spacing:4,w:"full",children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Prnom"}),r.jsx(pe,{value:l.firstName,onChange:x=>u(y=>({...y,firstName:x.target.value})),placeholder:"Prnom"})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nom"}),r.jsx(pe,{value:l.lastName,onChange:x=>u(y=>({...y,lastName:x.target.value})),placeholder:"Nom"})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Matricule (identifiant de connexion)"}),r.jsx(pe,{value:l.username,onChange:x=>u(y=>({...y,username:x.target.value})),placeholder:"Ex: w.belaidi"}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:"Format recommand: premire lettre du prnom + point + nom"})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Email"}),r.jsx(pe,{type:"email",value:l.email,onChange:x=>u(y=>({...y,email:x.target.value})),placeholder:"email@example.com"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Rle"}),r.jsxs(Qe,{value:l.role,onChange:x=>u(y=>({...y,role:x.target.value})),children:[r.jsx("option",{value:"PRESIDENT",children:"Prsident"}),r.jsx("option",{value:"VICE_PRESIDENT",children:"Vice-Prsident"}),r.jsx("option",{value:"TRESORIER",children:"Trsorier"}),r.jsx("option",{value:"SECRETAIRE_GENERAL",children:"Secrtaire Gnral"}),r.jsx("option",{value:"MEMBER",children:"Membre"}),r.jsx("option",{value:"PRESTATAIRE",children:"Prestataire"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Lier  une adhsion existante (optionnel)"}),r.jsxs(Qe,{value:l.linkedMemberId,onChange:x=>u(y=>({...y,linkedMemberId:x.target.value})),children:[r.jsx("option",{value:"",children:"Aucune liaison"}),n.map(x=>r.jsx("option",{value:x.id,children:OE(x)},x.id))]})]}),r.jsx(rn,{}),r.jsxs(Q,{align:"start",spacing:3,w:"full",children:[r.jsx(O,{fontWeight:"medium",children:"Autorisations d'accs"}),r.jsxs(ne,{w:"full",justify:"space-between",children:[r.jsx(O,{fontSize:"sm",children:"Accs site interne"}),r.jsx(sr,{isChecked:l.hasInternalAccess,onChange:x=>u(y=>({...y,hasInternalAccess:x.target.checked}))})]}),r.jsxs(ne,{w:"full",justify:"space-between",children:[r.jsx(O,{fontSize:"sm",children:"Accs site externe"}),r.jsx(sr,{isChecked:l.hasExternalAccess,onChange:x=>u(y=>({...y,hasExternalAccess:x.target.checked}))})]})]}),!o&&r.jsxs(r.Fragment,{children:[r.jsx(rn,{}),r.jsxs(Q,{align:"start",spacing:3,w:"full",children:[r.jsx(O,{fontWeight:"medium",children:"Mot de passe"}),r.jsxs(ne,{w:"full",justify:"space-between",children:[r.jsx(O,{fontSize:"sm",children:"Gnrer automatiquement"}),r.jsx(sr,{isChecked:l.generatePassword,onChange:x=>u(y=>({...y,generatePassword:x.target.checked}))})]}),!l.generatePassword&&r.jsxs(G,{children:[r.jsx(q,{children:"Mot de passe personnalis"}),r.jsx(pe,{type:"password",value:l.customPassword,onChange:x=>u(y=>({...y,customPassword:x.target.value})),placeholder:"Minimum 6 caractres"})]})]})]}),o&&r.jsxs(r.Fragment,{children:[r.jsx(rn,{}),r.jsxs(Q,{align:"start",spacing:3,w:"full",children:[r.jsx(O,{fontWeight:"medium",children:"Changer le mot de passe (optionnel)"}),r.jsxs(G,{children:[r.jsx(q,{children:"Nouveau mot de passe"}),r.jsx(pe,{type:"password",value:l.customPassword,onChange:x=>u(y=>({...y,customPassword:x.target.value})),placeholder:"Laissez vide pour ne pas changer"})]})]})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:t,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:m,isLoading:d,loadingText:o?"Enregistrement...":"Cration...",children:o?"Enregistrer":"Crer l'accs"})]})]})]})}function tce({isOpen:e,onClose:t,user:n,members:s,onLinked:i}){const[o,l]=j.useState(""),[u,d]=j.useState(!1),[h,p]=j.useState(s||[]),m=mn();j.useEffect(()=>{e&&(async()=>{try{const C=(await rl(Ur(Hr.members,XC(),"",JC()))).data,S=Array.isArray(C)?C:C?.members||[];p(S)}catch{console.warn("Chargement membres (fusion) chou, utilisation des props existantes"),p(s||[])}})()},[e]);const x=async()=>{if(!o){m({title:"Erreur",description:"Veuillez slectionner un membre",status:"error",duration:3e3});return}try{d(!0),await NE(Ur(Hr.siteUsers,ju(),`${n.id}/link-member`,Su()),{memberId:o}),m({title:"Liaison cre",description:"Accs li  l'adhsion. L'utilisateur verra la page Mon Adhsion aprs actualisation ou reconnexion.",status:"success",duration:5e3}),i?.(),t(),l("")}catch(y){m({title:"Erreur",description:`${y?.response?.data?.message||y.message}${y.urlsTried?`  Test: ${y.urlsTried.join(", ")}`:""}`,status:"error",duration:6e3})}finally{d(!1)}};return r.jsxs(mt,{isOpen:e,onClose:t,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:" Fusionner avec une adhsion"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsxs(O,{fontSize:"sm",children:["Fusionner l'accs de ",r.jsx("strong",{children:DE(n)})," avec une adhsion existante."]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Slectionner une adhsion"}),r.jsx(Qe,{value:o,onChange:y=>l(y.target.value),placeholder:"Choisir un membre...",children:(h||[]).filter(y=>!y.hasLinkedAccess).map(y=>r.jsxs("option",{value:y.id,children:[OE(y),y.email?` (${y.email})`:""]},y.id))}),r.jsx(O,{fontSize:"xs",color:"gray.500",mt:2,children:"Seuls les membres sans accs dj li sont affichs"})]}),r.jsx(ne,{w:"full",justify:"flex-end",children:r.jsx(Y,{size:"sm",variant:"outline",onClick:async()=>{try{const b=(await rl(Ur(Hr.members,XC(),"",JC()))).data;p(Array.isArray(b)?b:b?.members||[]),m({title:"Liste mise  jour",status:"success",duration:2e3})}catch(y){m({title:"Erreur rafrachissement",description:y.message,status:"error",duration:3e3})}},children:"Actualiser"})})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:t,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:x,isLoading:u,loadingText:"Fusion...",children:"Fusionner"})]})]})]})}function nce(){const e=ir("white","gray.800"),[t,n]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(null),[u,d]=j.useState({title:"",version:"",date:"",entryType:"update",changes:[{tag:"update",text:""}]}),[h,p]=j.useState(localStorage.getItem("rbe_site_helloasso_url")||"https://www.helloasso.com/associations/retrobus-essonne"),{isOpen:m,onOpen:x,onClose:y}=jt(),{isOpen:b,onOpen:C,onClose:S}=jt(),{isOpen:E,onOpen:k,onClose:A}=jt(),T=mn(),M=async()=>{try{i(!0);const N=(await rl(Ur(Hr.changelog,qx(),"",Gx()))).data;Array.isArray(N)?n(N):N&&Array.isArray(N.entries)?n(N.entries):N&&Array.isArray(N.items)?n(N.items):(console.warn("Rponse inattendue de l'API:",N),n([]))}catch(R){console.error("Erreur lors du chargement des changelogs:",R),n([]),T({title:"Erreur",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3,isClosable:!0})}finally{i(!1)}};j.useEffect(()=>{M()},[]);const[D,$]=j.useState({headerBgFocalX:50,headerBgFocalY:50,headerBgSize:"cover",logoWidth:44}),W=async()=>{try{const N=(await rl(Ur(Hr.siteConfig,Sp(),"",Cp())))?.data||{};$(Z=>({...Z,headerBgFocalX:Number.isFinite(N.headerBgFocalX)?N.headerBgFocalX:Z.headerBgFocalX,headerBgFocalY:Number.isFinite(N.headerBgFocalY)?N.headerBgFocalY:Z.headerBgFocalY,headerBgSize:N.headerBgSize||Z.headerBgSize,logoWidth:Number.isFinite(N.logoWidth)?N.logoWidth:Z.logoWidth}))}catch(R){console.warn("Chargement site-config (header) chou:",R?.message||R)}};j.useEffect(()=>{b&&W()},[b]);const te=async()=>{try{const R={headerBgFocalX:D.headerBgFocalX,headerBgFocalY:D.headerBgFocalY,headerBgSize:D.headerBgSize,logoWidth:D.logoWidth};await Fp(Ur(Hr.siteConfig,Sp(),"",Cp()),R),T({title:"Configuration du header mise  jour",status:"success",duration:2500}),S()}catch(R){T({title:"Erreur sauvegarde Header",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:6e3})}},re=async()=>{try{if(!h||!/^https?:\/\//i.test(h)){T({title:"Lien invalide",description:"Fournissez une URL complte commenant par http(s)://",status:"error",duration:3e3});return}localStorage.setItem("rbe_site_helloasso_url",h);const R=Ur(Hr.siteConfig,Sp(),"",Cp()),N=await Fp(R,{helloAssoUrl:h});return T({title:"Lien mis  jour",description:'Le bouton "Soutenir" utilisera le nouveau lien.',status:"success",duration:3e3}),N}catch(R){console.error("Erreur sauvegarde HelloAsso:",R),T({title:"Erreur",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:6e3})}},U=async()=>{try{const R=Ur(Hr.siteConfig,Sp(),"",Cp()),Z=(await rl(R))?.data||{};T({title:"Config dtecte",description:`helloAssoUrl=${Z.helloAssoUrl||"non dfini"}`,status:"success",duration:3e3})}catch(R){T({title:"Config indisponible",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"warning",duration:5e3})}},oe=()=>{d({title:"",version:"",date:new Date().toISOString().split("T")[0],entryType:"update",changes:[{tag:"update",text:""}]}),l(null)},xe=()=>{oe(),x()},ie=R=>{l(R);let N=[{tag:"update",text:""}];if(R.changes){if(Array.isArray(R.changes))R.changes.length>0&&(N=R.changes.map(Z=>typeof Z=="string"?{tag:"update",text:Z.replace(/^([\p{Emoji_Presentation}\p{Extended_Pictographic}]\s*)/u,"").trim()}:{tag:Z.tag||"update",text:Z.text||""}));else if(typeof R.changes=="string")try{const Z=JSON.parse(R.changes);N=Array.isArray(Z)?Z.map(ke=>typeof ke=="string"?{tag:"update",text:ke}:ke):[{tag:"update",text:String(R.changes)}]}catch{console.warn("Impossible de parser changes:",R.changes),N=[{tag:"update",text:R.changes}]}}else R.description&&typeof R.description=="string"&&(N=R.description.split(/\n|\r\n/).map(Z=>({tag:"update",text:Z.replace(/^\s*/,"")})));d({title:R.title||"",version:R.version||"",date:R.date?R.date.split("T")[0]:new Date().toISOString().split("T")[0],entryType:R.type||"update",changes:N}),x()},H=()=>{d(R=>({...R,changes:[...R.changes,{tag:"update",text:""}]}))},F=R=>{u.changes.length>1&&d(N=>({...N,changes:N.changes.filter((Z,ke)=>ke!==R)}))},_=(R,N)=>{d(Z=>({...Z,changes:Z.changes.map((ke,Te)=>Te===R?{...ke,text:N}:ke)}))},B=(R,N)=>{d(Z=>({...Z,changes:Z.changes.map((ke,Te)=>Te===R?{...ke,tag:N}:ke)}))},fe=[{key:"feature",label:"Fonctionnalit",emoji:""},{key:"fix",label:"Correction",emoji:""},{key:"update",label:"Mise  jour",emoji:""},{key:"security",label:"Scurit",emoji:""},{key:"perf",label:"Performance",emoji:""},{key:"ui",label:"Interface",emoji:""},{key:"content",label:"Contenu",emoji:""},{key:"deps",label:"Dpendances",emoji:""},{key:"docs",label:"Documentation",emoji:""}],I=R=>fe.find(N=>N.key===R)?.emoji||"",ee=async()=>{try{if(!u.title.trim()||!u.version.trim()){T({title:"Erreur de validation",description:"Le titre et la version sont requis",status:"error",duration:3e3,isClosable:!0});return}const R=(u.changes||[]).filter(Te=>Te&&String(Te.text||"").trim()!==""),N=R.map(Te=>`${I(Te.tag)} ${Te.text.trim()}`),Z=N.join(`
`),ke={title:u.title.trim(),version:u.version.trim(),date:u.date,type:u.entryType||"update",changes:R,changesText:N,description:Z};o?(await Fp(Ur(Hr.changelog,qx(),`${o.id}`,Gx()),ke),T({title:"Succs",description:"Changelog mis  jour avec succs",status:"success",duration:3e3,isClosable:!0})):(await NE(Ur(Hr.changelog,qx(),"",Gx()),ke),T({title:"Succs",description:"Changelog cr avec succs",status:"success",duration:3e3,isClosable:!0})),M(),y();try{u.version?.trim()&&(await Fp(Ur(Hr.siteConfig,Sp(),"",Cp()),{siteVersion:u.version.trim()}),T({title:"Version du site mise  jour",description:`v${u.version.trim()}`,status:"success",duration:2500}))}catch(Te){console.warn("MJ siteVersion choue:",Te),T({title:"Version non synchronise",description:"Impossible de mettre  jour la version du site.",status:"warning",duration:3500})}}catch(R){console.error("Erreur lors de la sauvegarde:",R),T({title:"Erreur",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3,isClosable:!0})}},ae=async R=>{if(window.confirm("tes-vous sr de vouloir supprimer ce changelog ?"))try{await r5(Ur(Hr.changelog,qx(),`${R}`,Gx())),T({title:"Succs",description:"Changelog supprim avec succs",status:"success",duration:3e3,isClosable:!0}),M()}catch(N){console.error("Erreur lors de la suppression:",N),T({title:"Erreur",description:`${N.message}${N.urlsTried?`  Test: ${N.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3,isClosable:!0})}},P=R=>{if(!R)return null;let N=[];if(Array.isArray(R))N=R;else if(typeof R=="string")try{const Z=JSON.parse(R);N=Array.isArray(Z)?Z:[R]}catch{N=[R]}return N.map((Z,ke)=>r.jsxs(O,{fontSize:"sm",children:[" ",Z]},ke))};return s?r.jsx(cn,{minH:"400px",children:r.jsxs(Q,{children:[r.jsx(sn,{size:"xl",color:"var(--rbe-red)"}),r.jsx(O,{children:"Chargement des changelogs..."})]})}):r.jsx(Ws,{maxW:"container.xl",py:8,children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(we,{size:"xl",display:"flex",alignItems:"center",children:[r.jsx(Ph,{style:{marginRight:"12px"}}),"Gestion du Site Web"]}),r.jsxs(gl,{variant:"enclosed",colorScheme:"blue",children:[r.jsxs(xl,{children:[r.jsx(an,{children:" Changelog & Versions"}),r.jsx(an,{children:" Accs aux Sites"}),r.jsx(an,{children:" Configuration"}),r.jsx(an,{children:" Permissions des Rles"})]}),r.jsxs(yl,{children:[r.jsxs(ln,{children:[r.jsxs(qn,{mb:6,align:"center",children:[r.jsx(we,{size:"lg",children:"Gestion du Site"}),r.jsx(Pm,{}),r.jsx(Y,{leftIcon:r.jsx(t5,{}),colorScheme:"blue",onClick:xe,children:"Nouveau Changelog"})]}),r.jsx(Q,{spacing:4,align:"stretch",children:t.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Aucun changelog trouv. Crez le premier !"]}):t.map(R=>r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(qn,{align:"center",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"md",children:R.title}),r.jsxs(ne,{children:[r.jsxs(Ge,{colorScheme:"blue",children:["v",R.version]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:R.date?new Date(R.date).toLocaleDateString("fr-FR"):"Date inconnue"})]})]}),r.jsx(Pm,{}),r.jsxs(ne,{children:[r.jsx(et,{icon:r.jsx(e5,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>ie(R),"aria-label":"Modifier"}),r.jsx(et,{icon:r.jsx(n5,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>ae(R.id),"aria-label":"Supprimer"})]})]})}),r.jsx(Ae,{pt:0,children:r.jsx(Q,{align:"start",spacing:2,children:Array.isArray(R.changes)&&R.changes.length>0?R.changes.map((N,Z)=>r.jsx(O,{fontSize:"sm",children:typeof N=="string"?N:`${I(N.tag)} ${N.text}`},Z)):P(R.changesText||R.description||[])})})]},R.id))})]}),r.jsx(ln,{children:r.jsx(Qle,{})}),r.jsx(ln,{children:r.jsxs(tt,{columns:{base:1,md:2},spacing:6,children:[r.jsxs(Me,{bg:e,children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:" Pages et contenu"})}),r.jsx(Ae,{children:r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsx(Y,{leftIcon:r.jsx(us,{}),size:"sm",variant:"outline",onClick:C,children:"Modifier le Header"}),r.jsx(Y,{leftIcon:r.jsx(us,{}),size:"sm",variant:"outline",children:"Grer les vnements"}),r.jsx(Y,{leftIcon:r.jsx(us,{}),size:"sm",variant:"outline",children:'Mettre  jour " propos"'}),r.jsx(rn,{my:2}),r.jsx(we,{size:"xs",children:`Bouton "Soutenir l'association" (Navbar externe)`}),r.jsx(O,{fontSize:"xs",color:"gray.600",children:"Configure le lien HelloAsso utilis sur la navbar du site public."}),r.jsxs(ne,{children:[r.jsx(pe,{value:h,onChange:R=>p(R.target.value),placeholder:"https://www.helloasso.com/associations/retrobus-essonne"}),r.jsx(Y,{size:"sm",colorScheme:"blue",onClick:re,children:"Enregistrer"}),r.jsx(Y,{size:"sm",variant:"outline",onClick:U,children:"Tester"})]})]})})]}),r.jsxs(Me,{bg:e,children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:" Configuration"})}),r.jsx(Ae,{children:r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsx(Y,{leftIcon:r.jsx(Hae,{}),size:"sm",variant:"outline",children:"Notifications Flash"}),r.jsx(Y,{leftIcon:r.jsx(Tc,{}),size:"sm",variant:"outline",children:"Configuration Newsletter"}),r.jsx(Y,{leftIcon:r.jsx(mg,{}),size:"sm",variant:"outline",children:"Paramtres gnraux"}),r.jsx(rn,{my:2}),r.jsx(Y,{leftIcon:r.jsx(Tc,{}),size:"sm",variant:"outline",colorScheme:"purple",onClick:k,children:" Grer les templates d'email"})]})})]})]})}),r.jsx(ln,{children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(de,{children:[r.jsx(we,{size:"lg",mb:2,children:" Gestion des Permissions par Membre"}),r.jsx(O,{color:"gray.600",children:"Dfinissez les autorisations individuelles de chaque utilisateur du site"})]}),r.jsx(Yle,{})]})})]})]}),r.jsxs(mt,{isOpen:E,onClose:A,size:"4xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:" Gestion des Templates d'Email"}),r.jsx(kt,{}),r.jsx(gt,{maxH:"80vh",overflowY:"auto",children:r.jsx(Gle,{token:localStorage.getItem("token")})})]})]}),r.jsxs(mt,{isOpen:b,onClose:S,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:" Modifier le Header"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Image de fond"})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[r.jsxs(Ft,{status:"info",fontSize:"sm",children:[r.jsx(Vt,{}),"Pour modifier l'image : ditez manuellement ",r.jsx("strong",{children:"externe/public/assets/header.jpg"})]}),r.jsx(ne,{children:r.jsxs(G,{maxW:"220px",children:[r.jsx(q,{children:"Taille d'affichage"}),r.jsxs(Qe,{value:D.headerBgSize,onChange:R=>$(N=>({...N,headerBgSize:R.target.value})),children:[r.jsx("option",{value:"cover",children:"Cover (remplit tout)"}),r.jsx("option",{value:"contain",children:"Contain (contient tout)"})]})]})}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",mb:2,children:"Point focal (cliquez/glissez pour ajuster)"}),r.jsx(de,{position:"relative",borderRadius:"md",overflow:"hidden",border:"1px solid",borderColor:"gray.200",w:"100%",h:"180px",style:{backgroundImage:`url(/assets/header.jpg?t=${Date.now()})`,backgroundSize:D.headerBgSize||"cover",backgroundPosition:`${D.headerBgFocalX}% ${D.headerBgFocalY}%`},onMouseDown:R=>{const N=R.currentTarget.getBoundingClientRect(),Z=(R.clientX-N.left)/N.width*100,ke=(R.clientY-N.top)/N.height*100;$(Te=>({...Te,headerBgFocalX:Math.round(Z),headerBgFocalY:Math.round(ke)}))},onMouseMove:R=>{if(R.buttons!==1)return;const N=R.currentTarget.getBoundingClientRect(),Z=(R.clientX-N.left)/N.width*100,ke=(R.clientY-N.top)/N.height*100;$(Te=>({...Te,headerBgFocalX:Math.round(Math.max(0,Math.min(100,Z))),headerBgFocalY:Math.round(Math.max(0,Math.min(100,ke)))}))},children:r.jsx(de,{position:"absolute",left:`calc(${D.headerBgFocalX}% - 6px)`,top:`calc(${D.headerBgFocalY}% - 6px)`,w:"12px",h:"12px",borderRadius:"full",bg:"var(--rbe-red)",border:"2px solid white",boxShadow:"sm",pointerEvents:"none"})}),r.jsx(ne,{mt:2,fontSize:"xs",color:"gray.500",children:r.jsxs(O,{children:["Position: ",D.headerBgFocalX,"% , ",D.headerBgFocalY,"%"]})})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Logo"})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[r.jsxs(Ft,{status:"info",fontSize:"sm",children:[r.jsx(Vt,{}),"Pour modifier le logo : ditez manuellement les fichiers dans ",r.jsx("strong",{children:"externe/src/assets/"})]}),r.jsx(ne,{children:r.jsxs(G,{maxW:"240px",children:[r.jsx(q,{children:"Hauteur du logo (px)"}),r.jsx(pe,{type:"number",min:24,max:240,value:D.logoWidth,onChange:R=>$(N=>({...N,logoWidth:parseInt(R.target.value||"44",10)}))})]})})]})})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:S,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:te,children:"Enregistrer"})]})]})]}),r.jsxs(mt,{isOpen:m,onClose:y,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:o?" Modifier un changelog":" Nouveau changelog"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Titre"}),r.jsx(pe,{value:u.title,onChange:R=>d(N=>({...N,title:R.target.value})),placeholder:"Ex: Amliorations sur la page d'accueil"})]}),r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Version"}),r.jsx(pe,{value:u.version,onChange:R=>d(N=>({...N,version:R.target.value})),placeholder:"Ex: 1.3.0"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date"}),r.jsx(pe,{type:"date",value:u.date,onChange:R=>d(N=>({...N,date:R.target.value}))})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Type de publication"}),r.jsxs(Qe,{value:u.entryType,onChange:R=>d(N=>({...N,entryType:R.target.value})),children:[r.jsx("option",{value:"feature",children:"Fonctionnalit "}),r.jsx("option",{value:"fix",children:"Correction "}),r.jsx("option",{value:"update",children:"Mise  jour "}),r.jsx("option",{value:"security",children:"Scurit "})]})]}),r.jsxs(Q,{align:"stretch",spacing:2,children:[r.jsx(q,{children:"Changements"}),u.changes.map((R,N)=>r.jsxs(ne,{align:"start",children:[r.jsx(Qe,{maxW:"180px",value:R.tag,onChange:Z=>B(N,Z.target.value),children:fe.map(Z=>r.jsxs("option",{value:Z.key,children:[Z.emoji," ",Z.label]},Z.key))}),r.jsx(pe,{value:R.text,onChange:Z=>_(N,Z.target.value),placeholder:` Entre ${N+1}`}),r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(Yn,{}),size:"sm",colorScheme:"red",variant:"outline",onClick:()=>F(N)})]},N)),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),onClick:H,size:"sm",alignSelf:"flex-start",children:"Ajouter une ligne"})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:y,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:ee,children:o?"Enregistrer":"Crer"})]})]})]})]})})}const J1={getByMember:e=>ut.get(`/api/documents/member/${e}`),delete:e=>ut.delete(`/api/documents/${e}`),updateStatus:(e,t)=>ut.put(`/api/documents/${e}/status`,t),getExpiring:(e=60)=>ut.get(`/api/documents/expiring?days=${e}`)},Yx={getAll:()=>ut.get("/newsletter"),create:e=>ut.post("/newsletter",e),delete:e=>ut.delete(`/newsletter/${e}`),updateStatus:(e,t)=>ut.put(`/newsletter/${e}/status`,{status:t}),getStats:()=>ut.get("/newsletter/stats"),export:(e="csv")=>ut.get(`/newsletter/export?format=${e}`),campaigns:{getAll:e=>ut.get("/newsletter/campaigns",{params:e}),getById:e=>ut.get(`/newsletter/campaigns/${e}`),create:e=>ut.post("/newsletter/campaigns",e),update:(e,t)=>ut.put(`/newsletter/campaigns/${e}`,t),delete:e=>ut.delete(`/newsletter/campaigns/${e}`),preview:e=>ut.get(`/newsletter/campaigns/${e}/preview`),sendTest:(e,t)=>ut.post(`/newsletter/campaigns/${e}/test`,{email:t}),prepare:e=>ut.post(`/newsletter/campaigns/${e}/prepare`),send:e=>ut.post(`/newsletter/campaigns/${e}/send`),getStats:e=>ut.get(`/newsletter/campaigns/${e}/stats`)}},Q1={PIECES_DETACHEES:"Pices dtaches",CONSOMMABLES:"Consommables",OUTILLAGE:"Outillage",EQUIPEMENT:"quipement",DOCUMENTATION:"Documentation",MERCHANDISING:"Merchandising",FOURNITURES:"Fournitures",SECURITE:"Scurit",GENERAL:"Gnral"},Z1={PIECE:"Pice",KG:"Kg",LITRE:"Litre",METRE:"Mtre",PAQUET:"Paquet",BOITE:"Bote",ROULEAU:"Rouleau",SET:"Set",AUTRE:"Autre"},cN={AVAILABLE:"Disponible",LOW_STOCK:"Stock bas",OUT_OF_STOCK:"Rupture",DISCONTINUED:"Discontinu",RESERVED:"Rserv"},rce={AVAILABLE:"green",LOW_STOCK:"orange",OUT_OF_STOCK:"red",DISCONTINUED:"gray",RESERVED:"blue"};function sce(){const[e,t]=j.useState([]),[n,s]=j.useState({}),[i,o]=j.useState(!0),[l,u]=j.useState({search:"",category:"ALL",status:"ALL",lowStock:!1}),[d,h]=j.useState(null),[p,m]=j.useState({reference:"",name:"",description:"",category:"GENERAL",subcategory:"",quantity:0,minQuantity:0,unit:"PIECE",location:"",supplier:"",purchasePrice:"",salePrice:"",notes:""}),[x,y]=j.useState({type:"IN",quantity:1,reason:"",notes:""}),[b,C]=j.useState(null),S=mn(),{isOpen:E,onOpen:k,onClose:A}=jt(),{isOpen:T,onOpen:M,onClose:D}=jt(),{isOpen:$,onOpen:W,onClose:te}=jt();j.useEffect(()=>{re(),U()},[l]);const re=async()=>{try{o(!0);const I=new URLSearchParams;l.search&&I.append("search",l.search),l.category!=="ALL"&&I.append("category",l.category),l.status!=="ALL"&&I.append("status",l.status),l.lowStock&&I.append("lowStock","true");const ee=await ut.get(`/api/stocks?${I.toString()}`),ae=ee?.stocks??(Array.isArray(ee)?ee:[]);t(ae)}catch(I){console.error("Erreur lors du chargement des stocks:",I),t([]),S({title:"Stocks indisponibles",description:"LAPI des stocks nest pas encore prte ou a renvoy une erreur",status:"warning",duration:3e3})}finally{o(!1)}},U=async()=>{try{const I=await ut.get("/api/stocks/stats");s(I||{})}catch(I){console.error("Erreur lors du chargement des statistiques:",I),s({})}},oe=()=>{h(null),m({reference:"",name:"",description:"",category:"GENERAL",subcategory:"",quantity:0,minQuantity:0,unit:"PIECE",location:"",supplier:"",purchasePrice:"",salePrice:"",notes:""}),k()},xe=I=>{h(I),m({reference:I.reference||"",name:I.name||"",description:I.description||"",category:I.category||"GENERAL",subcategory:I.subcategory||"",quantity:I.quantity||0,minQuantity:I.minQuantity||0,unit:I.unit||"PIECE",location:I.location||"",supplier:I.supplier||"",purchasePrice:I.purchasePrice||"",salePrice:I.salePrice||"",notes:I.notes||""}),k()},ie=async()=>{try{const I=d?"put":"post",ee=d?`/api/stocks/${d.id}`:"/api/stocks";await ut[I](ee,p),S({title:"Succs",description:`Article ${d?"modifi":"cr"} avec succs`,status:"success",duration:3e3}),A(),re(),U()}catch(I){console.error("Erreur lors de la sauvegarde:",I),S({title:"Erreur",description:"Impossible de sauvegarder l'article",status:"error",duration:3e3})}},H=async()=>{if(b)try{await ut.delete(`/api/stocks/${b.id}`),S({title:"Succs",description:"Article supprim avec succs",status:"success",duration:3e3}),te(),C(null),re(),U()}catch(I){console.error("Erreur lors de la suppression:",I),S({title:"Erreur",description:"Impossible de supprimer l'article",status:"error",duration:3e3})}},F=async()=>{if(b)try{await ut.post(`/api/stocks/${b.id}/movement`,x),S({title:"Succs",description:"Mouvement enregistr avec succs",status:"success",duration:3e3}),D(),y({type:"IN",quantity:1,reason:"",notes:""}),re(),U()}catch(I){console.error("Erreur lors du mouvement:",I),S({title:"Erreur",description:I.response?.data?.error||"Impossible d'enregistrer le mouvement",status:"error",duration:3e3})}},_=I=>{C(I),y({type:"IN",quantity:1,reason:"",notes:""}),M()},B=I=>{C(I),W()},fe={totalItems:n.totalItems||0,totalQuantity:n.totalQuantity||0,lowStockCount:n.lowStockCount||0,outOfStockCount:n.outOfStockCount||0};return r.jsxs(de,{p:6,children:[r.jsxs(qn,{align:"center",mb:6,children:[r.jsx(we,{size:"lg",color:"teal.600",children:"Gestion des Stocks"}),r.jsx(Pm,{}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"teal",onClick:oe,children:"Nouvel article"})]}),r.jsxs(tt,{columns:{base:1,md:4},spacing:4,mb:6,children:[r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Articles totaux"}),r.jsx(ft,{children:fe.totalItems}),r.jsxs(Si,{children:[r.jsx(oy,{style:{display:"inline",marginRight:"4px"}}),"Articles rfrencs"]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Quantit totale"}),r.jsx(ft,{children:fe.totalQuantity}),r.jsxs(Si,{children:[r.jsx(Vae,{style:{display:"inline",marginRight:"4px"}}),"Units en stock"]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Stock bas"}),r.jsx(ft,{color:"orange.500",children:fe.lowStockCount}),r.jsxs(Si,{children:[r.jsx(zae,{style:{display:"inline",marginRight:"4px"}})," rapprovisionner"]})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Ruptures"}),r.jsx(ft,{color:"red.500",children:fe.outOfStockCount}),r.jsxs(Si,{children:[r.jsx(ao,{style:{display:"inline",marginRight:"4px"}}),"Stock puis"]})]})})})]}),r.jsx(Me,{mb:6,children:r.jsx(Ae,{children:r.jsxs(ne,{spacing:4,wrap:"wrap",children:[r.jsx(pe,{placeholder:"Rechercher...",value:l.search,onChange:I=>u(ee=>({...ee,search:I.target.value})),maxW:"300px"}),r.jsxs(Qe,{value:l.category,onChange:I=>u(ee=>({...ee,category:I.target.value})),maxW:"200px",children:[r.jsx("option",{value:"ALL",children:"Toutes catgories"}),Object.entries(Q1).map(([I,ee])=>r.jsx("option",{value:I,children:ee},I))]}),r.jsxs(Qe,{value:l.status,onChange:I=>u(ee=>({...ee,status:I.target.value})),maxW:"200px",children:[r.jsx("option",{value:"ALL",children:"Tous statuts"}),Object.entries(cN).map(([I,ee])=>r.jsx("option",{value:I,children:ee},I))]}),r.jsx(Y,{variant:l.lowStock?"solid":"outline",colorScheme:"orange",onClick:()=>u(I=>({...I,lowStock:!I.lowStock})),children:"Stock bas uniquement"})]})})}),r.jsx(Me,{children:r.jsx(Ae,{children:r.jsxs(Tr,{variant:"simple",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Rfrence"}),r.jsx(Ie,{children:"Nom"}),r.jsx(Ie,{children:"Catgorie"}),r.jsx(Ie,{children:"Quantit"}),r.jsx(Ie,{children:"Unit"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{children:"Emplacement"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:i?r.jsx($t,{children:r.jsx(Pe,{colSpan:8,textAlign:"center",children:"Chargement..."})}):e.length===0?r.jsx($t,{children:r.jsx(Pe,{colSpan:8,textAlign:"center",children:"Aucun article trouv"})}):e.map(I=>r.jsxs($t,{children:[r.jsx(Pe,{children:I.reference||"-"}),r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"medium",children:I.name}),I.description&&r.jsx(O,{fontSize:"sm",color:"gray.600",noOfLines:1,children:I.description})]})}),r.jsx(Pe,{children:Q1[I.category]}),r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{color:I.quantity<=I.minQuantity?"red.500":"inherit",fontWeight:I.quantity<=I.minQuantity?"bold":"normal",children:I.quantity}),I.minQuantity>0&&r.jsxs(O,{fontSize:"xs",color:"gray.500",children:["Min: ",I.minQuantity]})]})}),r.jsx(Pe,{children:Z1[I.unit]}),r.jsx(Pe,{children:r.jsx(Ge,{colorScheme:rce[I.status],children:cN[I.status]})}),r.jsx(Pe,{children:I.location||"-"}),r.jsx(Pe,{children:r.jsxs(ne,{spacing:2,children:[r.jsx(et,{icon:r.jsx(Gae,{}),size:"sm",variant:"outline",onClick:()=>xe(I),"aria-label":"Modifier"}),r.jsx(et,{icon:r.jsx(Bae,{}),size:"sm",colorScheme:"green",variant:"outline",onClick:()=>_(I),"aria-label":"Mouvement de stock"}),r.jsx(et,{icon:r.jsx(Yn,{}),size:"sm",colorScheme:"red",variant:"outline",onClick:()=>B(I),"aria-label":"Supprimer"})]})})]},I.id))})]})})}),r.jsxs(mt,{isOpen:E,onClose:A,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:d?"Modifier l'article":"Nouvel article"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(ne,{spacing:4,w:"full",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Rfrence"}),r.jsx(pe,{value:p.reference,onChange:I=>m(ee=>({...ee,reference:I.target.value})),placeholder:"REF-001"})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nom"}),r.jsx(pe,{value:p.name,onChange:I=>m(ee=>({...ee,name:I.target.value})),placeholder:"Nom de l'article"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{value:p.description,onChange:I=>m(ee=>({...ee,description:I.target.value})),placeholder:"Description dtaille"})]}),r.jsxs(ne,{spacing:4,w:"full",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Catgorie"}),r.jsx(Qe,{value:p.category,onChange:I=>m(ee=>({...ee,category:I.target.value})),children:Object.entries(Q1).map(([I,ee])=>r.jsx("option",{value:I,children:ee},I))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Sous-catgorie"}),r.jsx(pe,{value:p.subcategory,onChange:I=>m(ee=>({...ee,subcategory:I.target.value})),placeholder:"Sous-catgorie"})]})]}),r.jsxs(ne,{spacing:4,w:"full",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Quantit"}),r.jsx(Qn,{value:p.quantity,onChange:I=>m(ee=>({...ee,quantity:parseInt(I)||0})),children:r.jsx(Zn,{})})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Quantit minimale"}),r.jsx(Qn,{value:p.minQuantity,onChange:I=>m(ee=>({...ee,minQuantity:parseInt(I)||0})),children:r.jsx(Zn,{})})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Unit"}),r.jsx(Qe,{value:p.unit,onChange:I=>m(ee=>({...ee,unit:I.target.value})),children:Object.entries(Z1).map(([I,ee])=>r.jsx("option",{value:I,children:ee},I))})]})]}),r.jsxs(ne,{spacing:4,w:"full",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Emplacement"}),r.jsx(pe,{value:p.location,onChange:I=>m(ee=>({...ee,location:I.target.value})),placeholder:"tagre A1, Atelier..."})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Fournisseur"}),r.jsx(pe,{value:p.supplier,onChange:I=>m(ee=>({...ee,supplier:I.target.value})),placeholder:"Nom du fournisseur"})]})]}),r.jsxs(ne,{spacing:4,w:"full",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Prix d'achat ()"}),r.jsx(Qn,{value:p.purchasePrice,onChange:I=>m(ee=>({...ee,purchasePrice:I})),precision:2,children:r.jsx(Zn,{})})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Prix de vente ()"}),r.jsx(Qn,{value:p.salePrice,onChange:I=>m(ee=>({...ee,salePrice:I})),precision:2,children:r.jsx(Zn,{})})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Notes"}),r.jsx(Gt,{value:p.notes,onChange:I=>m(ee=>({...ee,notes:I.target.value})),placeholder:"Notes diverses"})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:A,children:"Annuler"}),r.jsx(Y,{colorScheme:"teal",onClick:ie,children:d?"Modifier":"Crer"})]})]})]}),r.jsxs(mt,{isOpen:T,onClose:D,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsxs(xt,{children:["Mouvement de stock - ",b?.name]}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Type de mouvement"}),r.jsxs(Qe,{value:x.type,onChange:I=>y(ee=>({...ee,type:I.target.value})),children:[r.jsx("option",{value:"IN",children:"Entre (IN)"}),r.jsx("option",{value:"OUT",children:"Sortie (OUT)"}),r.jsx("option",{value:"ADJUSTMENT",children:"Correction (ADJUSTMENT)"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Quantit"}),r.jsx(Qn,{value:x.quantity,onChange:I=>y(ee=>({...ee,quantity:parseInt(I)||1})),children:r.jsx(Zn,{})}),b&&r.jsxs(O,{fontSize:"sm",color:"gray.600",children:["Stock actuel: ",b.quantity," ",Z1[b.unit]]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Raison"}),r.jsx(pe,{value:x.reason,onChange:I=>y(ee=>({...ee,reason:I.target.value})),placeholder:"Achat, utilisation, correction..."})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Notes"}),r.jsx(Gt,{value:x.notes,onChange:I=>y(ee=>({...ee,notes:I.target.value})),placeholder:"Notes sur ce mouvement"})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:D,children:"Annuler"}),r.jsx(Y,{colorScheme:"teal",onClick:F,children:"Enregistrer"})]})]})]}),r.jsx(hie,{isOpen:$,onClose:te,leastDestructiveRef:Lt.useRef(),children:r.jsx(yt,{children:r.jsxs(fie,{children:[r.jsx(xt,{children:"Confirmer la suppression"}),r.jsxs(gt,{children:[`tes-vous sr de vouloir supprimer l'article "`,b?.name,'" ? Cette action est irrversible.']}),r.jsxs(Nt,{children:[r.jsx(Y,{onClick:te,children:"Annuler"}),r.jsx(Y,{colorScheme:"red",onClick:H,ml:3,children:"Supprimer"})]})]})})})]})}const eS={info:{label:"Information",color:"blue",icon:Ule},warning:{label:"Attention",color:"orange",icon:oN},success:{label:"Succs",color:"green",icon:Fle},error:{label:"Erreur",color:"red",icon:oN}};function ice(){const[e,t]=j.useState([]),[n,s]=j.useState(!0),[i,o]=j.useState(null),[l,u]=j.useState({content:"",type:"info",active:!0,showOnExternal:!1,expiresAt:""}),{isOpen:d,onOpen:h,onClose:p}=jt(),m=mn(),x=ir("white","gray.700"),y=ir("gray.200","gray.600"),b=async()=>{try{s(!0);const D=await ut.get("/flashes");D.data&&Array.isArray(D.data)?t(D.data):(console.warn("Rponse inattendue de l'API:",D.data),t([]))}catch(D){console.error("Erreur lors du chargement des flashs:",D),t([]),m({title:"Erreur",description:"Impossible de charger les flashs",status:"error",duration:3e3,isClosable:!0})}finally{s(!1)}};j.useEffect(()=>{b()},[]);const C=()=>{u({content:"",type:"info",active:!0,showOnExternal:!1,expiresAt:""}),o(null)},S=()=>{C(),h()},E=D=>{o(D),u({content:D.content||"",type:D.type||"info",active:D.active!==void 0?D.active:!0,showOnExternal:D.showOnExternal||!1,expiresAt:D.expiresAt?new Date(D.expiresAt).toISOString().slice(0,16):""}),h()},k=async()=>{try{if(!l.content.trim()){m({title:"Erreur de validation",description:"Le contenu du flash est requis",status:"error",duration:3e3,isClosable:!0});return}const D={...l,expiresAt:l.expiresAt||null};i?(await ut.put(`/flashes/${i.id}`,D),m({title:"Succs",description:"Flash mis  jour avec succs",status:"success",duration:3e3,isClosable:!0})):(await ut.post("/flashes",D),m({title:"Succs",description:"Flash cr avec succs",status:"success",duration:3e3,isClosable:!0})),b(),p()}catch(D){console.error("Erreur lors de la sauvegarde:",D),m({title:"Erreur",description:"Impossible de sauvegarder le flash",status:"error",duration:3e3,isClosable:!0})}},A=async D=>{try{await ut.patch(`/flashes/${D.id}/toggle`),m({title:"Succs",description:`Flash ${D.active?"dsactiv":"activ"}`,status:"success",duration:2e3,isClosable:!0}),b()}catch($){console.error("Erreur lors du toggle:",$),m({title:"Erreur",description:"Impossible de modifier le statut",status:"error",duration:3e3,isClosable:!0})}},T=async D=>{if(window.confirm("tes-vous sr de vouloir supprimer ce flash ?"))try{await ut.delete(`/flashes/${D}`),m({title:"Succs",description:"Flash supprim avec succs",status:"success",duration:3e3,isClosable:!0}),b()}catch($){console.error("Erreur lors de la suppression:",$),m({title:"Erreur",description:"Impossible de supprimer le flash",status:"error",duration:3e3,isClosable:!0})}},M=D=>D.expiresAt?new Date(D.expiresAt)<new Date:!1;return n?r.jsx(cn,{minH:"400px",children:r.jsxs(Q,{children:[r.jsx(sn,{size:"xl",color:"var(--rbe-red)"}),r.jsx(O,{children:"Chargement des flashs..."})]})}):r.jsxs(de,{p:6,children:[r.jsxs(qn,{mb:6,align:"center",children:[r.jsxs(ne,{spacing:3,children:[r.jsx(X1,{color:"var(--rbe-red)",size:24}),r.jsx(we,{size:"lg",children:"Gestion des Flashs Info"})]}),r.jsx(Pm,{}),r.jsx(Y,{leftIcon:r.jsx(t5,{}),colorScheme:"blue",onClick:S,children:"Nouveau Flash"})]}),r.jsxs(so,{templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:4,mb:6,children:[r.jsx(Me,{bg:x,borderWidth:1,borderColor:y,children:r.jsx(Ae,{children:r.jsxs(ne,{children:[r.jsx(X1,{color:"blue"}),r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Total"}),r.jsx(O,{fontSize:"2xl",fontWeight:"bold",children:e.length})]})]})})}),r.jsx(Me,{bg:x,borderWidth:1,borderColor:y,children:r.jsx(Ae,{children:r.jsxs(ne,{children:[r.jsx(lN,{color:"green"}),r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Actifs"}),r.jsx(O,{fontSize:"2xl",fontWeight:"bold",color:"green.500",children:e.filter(D=>D.active&&!M(D)).length})]})]})})}),r.jsx(Me,{bg:x,borderWidth:1,borderColor:y,children:r.jsx(Ae,{children:r.jsxs(ne,{children:[r.jsx(aN,{color:"purple"}),r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Sur l'externe"}),r.jsx(O,{fontSize:"2xl",fontWeight:"bold",color:"purple.500",children:e.filter(D=>D.showOnExternal&&D.active&&!M(D)).length})]})]})})}),r.jsx(Me,{bg:x,borderWidth:1,borderColor:y,children:r.jsx(Ae,{children:r.jsxs(ne,{children:[r.jsx(Vle,{color:"orange"}),r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Expirs"}),r.jsx(O,{fontSize:"2xl",fontWeight:"bold",color:"orange.500",children:e.filter(D=>M(D)).length})]})]})})})]}),r.jsx(Q,{spacing:4,align:"stretch",children:e.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Aucun flash trouv. Crez le premier !"]}):e.map(D=>{const $=eS[D.type]||eS.info,W=$.icon,te=M(D);return r.jsxs(Me,{bg:x,borderWidth:1,borderColor:D.active&&!te?`${$.color}.200`:"gray.300",opacity:D.active&&!te?1:.6,children:[r.jsx(Ct,{children:r.jsxs(qn,{align:"center",children:[r.jsxs(ne,{spacing:3,flex:1,children:[r.jsx(W,{color:`var(--chakra-colors-${$.color}-500)`}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsxs(ne,{spacing:2,children:[r.jsx(Ge,{colorScheme:$.color,children:$.label}),D.active?r.jsx(Ge,{colorScheme:"green",children:"Actif"}):r.jsx(Ge,{colorScheme:"gray",children:"Inactif"}),D.showOnExternal&&r.jsx(Ge,{colorScheme:"purple",leftIcon:r.jsx(aN,{}),children:"Externe"}),te&&r.jsx(Ge,{colorScheme:"red",children:"Expir"})]}),r.jsxs(O,{fontSize:"sm",color:"gray.600",children:["Cr le ",new Date(D.createdAt).toLocaleDateString("fr-FR"),D.expiresAt&&r.jsxs(r.Fragment,{children:["  Expire le ",new Date(D.expiresAt).toLocaleDateString("fr-FR")]})]})]})]}),r.jsxs(ne,{spacing:1,children:[r.jsx(Bn,{label:D.active?"Dsactiver":"Activer",children:r.jsx(et,{icon:D.active?r.jsx(Hle,{}):r.jsx(lN,{}),size:"sm",colorScheme:D.active?"orange":"green",variant:"ghost",onClick:()=>A(D)})}),r.jsx(Bn,{label:"Modifier",children:r.jsx(et,{icon:r.jsx(e5,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>E(D)})}),r.jsx(Bn,{label:"Supprimer",children:r.jsx(et,{icon:r.jsx(n5,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>T(D.id)})})]})]})}),r.jsx(Ae,{pt:0,children:r.jsx(O,{children:D.content})})]},D.id)})}),r.jsxs(mt,{isOpen:d,onClose:p,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:r.jsxs(ne,{children:[r.jsx(X1,{}),r.jsx(O,{children:i?"Modifier le flash":"Nouveau flash"})]})}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Type"}),r.jsx(Qe,{value:l.type,onChange:D=>u($=>({...$,type:D.target.value})),children:Object.entries(eS).map(([D,$])=>r.jsx("option",{value:D,children:$.label},D))})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Contenu du message"}),r.jsx(Gt,{value:l.content,onChange:D=>u($=>({...$,content:D.target.value})),placeholder:"Message  afficher...",rows:4})]}),r.jsxs(so,{templateColumns:"1fr 1fr",gap:4,width:"100%",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Statut"}),r.jsxs(ne,{children:[r.jsx(sr,{isChecked:l.active,onChange:D=>u($=>({...$,active:D.target.checked}))}),r.jsx(O,{children:l.active?"Actif":"Inactif"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Afficher sur l'externe"}),r.jsxs(ne,{children:[r.jsx(sr,{isChecked:l.showOnExternal,onChange:D=>u($=>({...$,showOnExternal:D.target.checked}))}),r.jsx(O,{children:l.showOnExternal?"Oui":"Non"})]})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date d'expiration (optionnelle)"}),r.jsx(pe,{type:"datetime-local",value:l.expiresAt,onChange:D=>u($=>({...$,expiresAt:D.target.value}))}),r.jsx(O,{fontSize:"sm",color:"gray.500",mt:1,children:"Laissez vide pour un flash permanent"})]}),l.showOnExternal&&r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Ce flash sera visible sur le site public externe"]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:p,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:k,children:i?"Mettre  jour":"Crer"})]})]})]})]})}const uu="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),oce={PENDING:{label:"En attente",color:"yellow",progress:25},ACTIVE:{label:"Actif",color:"green",progress:100},EXPIRED:{label:"Expir",color:"red",progress:0},SUSPENDED:{label:"Suspendu",color:"orange",progress:50}},tS={STANDARD:"Adhsion Standard",FAMILY:"Adhsion Famille",STUDENT:"Adhsion tudiant",HONORARY:"Membre d'Honneur",BIENFAITEUR:"Bienfaiteur"},nS={CASH:"Espces",CHECK:"Chque",BANK_TRANSFER:"Virement",CARD:"Carte bancaire",PAYPAL:"PayPal",HELLOASSO:"HelloAsso"};function ace(){const{user:e,member:t,memberLoading:n,memberError:s,memberApiBase:i,refreshMember:o}=Cs(),[l,u]=j.useState(null),[d,h]=j.useState(!0),[p,m]=j.useState(null),[x,y]=j.useState(null),[b,C]=j.useState(!1),[S,E]=j.useState({}),[k,A]=j.useState([]),[T,M]=j.useState(!1),[D,$]=j.useState({currentPassword:"",newPassword:"",confirmPassword:""}),{isOpen:W,onOpen:te,onClose:re}=jt(),{isOpen:U,onOpen:oe,onClose:xe}=jt(),{isOpen:ie,onOpen:H,onClose:F}=jt(),[_,B]=j.useState({reason:"",notes:"",pv:null,resignation:null}),[fe,I]=j.useState(!1),[ee,ae]=j.useState([]),[P,R]=j.useState(""),N=mn();j.useEffect(()=>{o()},[]),j.useEffect(()=>{u(t||null),h(n),m(s),y(i||null)},[t,n,s,i]),j.useEffect(()=>{l&&l.id?je():A([])},[l?.id]);const Z=async()=>{await o(!0)},ke=()=>{C(!0),E({...l})},Te=async()=>{try{if(!S.firstName||!S.lastName)throw new Error("Prnom et nom requis");const Oe=[x??"",uu||""];let We=null;for(const Be of Oe)try{const ot=await fetch(`${Be}/api/members/me`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(S)});if(ot.ok){We=ot;break}}catch{}if(!We)throw new Error("Erreur de sauvegarde");const bt=await We.json();u(bt),C(!1),N({status:"success",title:"Profil mis  jour",description:"Vos informations ont t sauvegardes",duration:3e3})}catch(Oe){N({status:"error",title:"Erreur",description:Oe.message,duration:5e3})}},je=async()=>{try{M(!0);const Oe=[x??"",uu||""];let We=!1;for(const bt of Oe)try{const Be=await fetch(`${bt}/api/members/me/documents`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Be.ok){const ot=await Be.json();A(ot?.documents||[]),We=!0;break}}catch{}if(!We)throw new Error("Chargement des documents impossible")}catch(Oe){console.error("Docs error",Oe),A([])}finally{M(!1)}},Ke=async Oe=>{try{const We=[x??"",uu||""];let bt=null;for(const Le of We)try{const ct=await fetch(`${Le}/api/documents/${Oe.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(ct.ok){bt=ct;break}}catch{}if(!bt)throw new Error("Tlchargement impossible");const Be=await bt.blob(),ot=URL.createObjectURL(Be),vn=document.createElement("a");vn.href=ot,vn.download=Oe.fileName||"document",document.body.appendChild(vn),vn.click(),vn.remove(),URL.revokeObjectURL(ot)}catch(We){N({status:"error",title:"Erreur",description:We.message})}},Xe=()=>{C(!1),E({...l})},He=async()=>{if(D.newPassword!==D.confirmPassword){N({status:"error",title:"Erreur",description:"Les mots de passe ne correspondent pas",duration:3e3});return}if(D.newPassword.length<6){N({status:"error",title:"Erreur",description:"Le mot de passe doit faire au moins 6 caractres",duration:3e3});return}try{const Oe=await fetch(`${uu}/api/members/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({currentPassword:D.currentPassword,newPassword:D.newPassword})});if(!Oe.ok){const We=await Oe.json();throw new Error(We.error||"Erreur de changement de mot de passe")}N({status:"success",title:"Mot de passe modifi",description:"Votre mot de passe a t mis  jour avec succs",duration:3e3}),$({currentPassword:"",newPassword:"",confirmPassword:""}),re()}catch(Oe){N({status:"error",title:"Erreur",description:Oe.message,duration:5e3})}};if(d)return r.jsx(cn,{h:"400px",children:r.jsx(sn,{size:"xl"})});const pt=Oe=>{try{const We=typeof Oe=="string"?new Date(Oe):Oe;return We?We.toLocaleDateString("fr-FR"):"-"}catch{return"-"}},De=(Oe,We)=>{const bt=new Date(Oe.getTime());return bt.setFullYear(bt.getFullYear()+We),bt},Tt=(Oe,We)=>Math.ceil((We.getTime()-Oe.getTime())/(1e3*60*60*24)),ue=l?.membershipStartDate?new Date(l.membershipStartDate):null,Ee=l?.membershipEndDate?new Date(l.membershipEndDate):null,nt=ue?De(ue,1):null,X=Ee||nt,le=new Date,Ve=X?X<le:!1,at=X?Tt(le,X):null,dn=Oe=>{switch(Oe){case"ACTIVE":return"green";case"PENDING":return"orange";case"EXPIRED":return"red";case"SUSPENDED":return"gray";default:return"gray"}},Fn=oce[l?.membershipStatus]||{label:l?.membershipStatus||"Non dfini",progress:0};return r.jsxs(de,{p:6,maxW:"4xl",mx:"auto",children:[r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsxs(we,{size:"lg",display:"flex",alignItems:"center",children:[r.jsx(U1,{style:{marginRight:"8px"}}),"Mon Adhsion"]}),b?r.jsxs(ne,{children:[r.jsx(Y,{leftIcon:r.jsx(xc,{}),colorScheme:"green",onClick:Te,children:"Sauvegarder"}),r.jsx(Y,{leftIcon:r.jsx(Im,{}),variant:"outline",onClick:Xe,children:"Annuler"})]}):r.jsx(Y,{leftIcon:r.jsx(us,{}),onClick:ke,children:"Modifier"})]}),!l&&r.jsxs(Ft,{status:"warning",children:[r.jsx(Vt,{}),r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",children:"Profil adhrent introuvable"}),r.jsx(O,{fontSize:"sm",children:p===401?"Vous ntes pas autoris. Veuillez vous reconnecter.":p===404?"Votre profil nest pas encore li. Si vous venez de raliser une liaison, actualisez la page ou reconnectez-vous. Sinon, merci de contacter un administrateur pour lassocier depuis la Gestion des Adhrents.":p===500?"Erreur serveur lors de la rcupration du profil.":p==="network-error"?"Impossible de joindre lAPI. Rseau ou CORS ? Essayez  nouveau.":"Votre profil n'est pas encore li. Merci de contacter un administrateur pour l'associer depuis la Gestion des Adhrents."}),r.jsxs(ne,{mt:3,children:[r.jsx(Y,{size:"sm",onClick:Z,children:"Ressayer"}),(e?.roles||[]).map(bt=>String(bt).toUpperCase()).some(bt=>["ADMIN","PRESIDENT","VICE_PRESIDENT","TRESORIER","SECRETAIRE_GENERAL"].includes(bt))?r.jsx(Y,{size:"sm",variant:"outline",onClick:async()=>{try{I(!0);const bt=[x??"",uu||""];let Be=null;for(const ot of bt)try{const vn=await fetch(`${ot}/api/members?limit=500`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(vn.ok){Be=await vn.json();break}}catch{}ae(Be?.members||[]),H()}finally{I(!1)}},isLoading:fe,children:"Associer mon compte"}):null]})]})]}),l&&r.jsxs(r.Fragment,{children:[r.jsxs(gl,{variant:"enclosed",colorScheme:"blue",children:[r.jsxs(xl,{children:[r.jsx(an,{children:"Informations personnelles"}),r.jsx(an,{children:"Informations Adhrent"}),r.jsx(an,{children:"Documents d'adhsions"})]}),r.jsxs(yl,{children:[r.jsx(ln,{px:0,children:r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:"Informations personnelles"})}),r.jsx(Ae,{children:r.jsx(Q,{spacing:4,align:"stretch",children:b?r.jsxs(r.Fragment,{children:[r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Prnom"}),r.jsx(pe,{value:S.firstName||"",onChange:Oe=>E(We=>({...We,firstName:Oe.target.value}))})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nom"}),r.jsx(pe,{value:S.lastName||"",onChange:Oe=>E(We=>({...We,lastName:Oe.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Email"}),r.jsx(pe,{type:"email",value:S.email||"",onChange:Oe=>E(We=>({...We,email:Oe.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Tlphone"}),r.jsx(pe,{value:S.phone||"",onChange:Oe=>E(We=>({...We,phone:Oe.target.value}))})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Adresse"}),r.jsx(pe,{value:S.address||"",onChange:Oe=>E(We=>({...We,address:Oe.target.value}))})]}),r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Code postal"}),r.jsx(pe,{value:S.postalCode||"",onChange:Oe=>E(We=>({...We,postalCode:Oe.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Ville"}),r.jsx(pe,{value:S.city||"",onChange:Oe=>E(We=>({...We,city:Oe.target.value}))})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date de naissance"}),r.jsx(pe,{type:"date",value:S.birthDate?S.birthDate.split("T")[0]:"",onChange:Oe=>E(We=>({...We,birthDate:Oe.target.value}))})]})]}):r.jsxs(tt,{columns:{base:1,md:2},spacing:6,children:[r.jsxs(de,{children:[r.jsxs(ne,{mb:4,children:[r.jsx(U1,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Nom complet"}),r.jsxs(O,{fontWeight:"bold",children:[l.firstName," ",l.lastName]})]})]}),l.email&&r.jsxs(ne,{mb:4,children:[r.jsx(Tc,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Email"}),r.jsx(O,{fontWeight:"bold",children:l.email})]})]}),l.phone&&r.jsxs(ne,{mb:4,children:[r.jsx(XL,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Tlphone"}),r.jsx(O,{fontWeight:"bold",children:l.phone})]})]})]}),r.jsxs(de,{children:[(l.address||l.city)&&r.jsxs(ne,{mb:4,children:[r.jsx(Mb,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Adresse"}),r.jsxs(O,{fontWeight:"bold",children:[l.address&&`${l.address}, `,l.postalCode," ",l.city]})]})]}),l.birthDate&&r.jsxs(ne,{mb:4,children:[r.jsx(si,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Date de naissance"}),r.jsx(O,{fontWeight:"bold",children:new Date(l.birthDate).toLocaleDateString("fr-FR")})]})]})]})]})})})]})}),r.jsx(ln,{px:0,children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:"Statut de l'Adhsion"})}),r.jsxs(Ae,{children:[r.jsxs(tt,{columns:{base:1,md:3},spacing:{base:4,md:6},children:[r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",mb:2,children:"Statut actuel"}),r.jsx(Ge,{colorScheme:dn(l.membershipStatus),fontSize:"md",p:2,children:Fn.label}),r.jsx(gc,{value:Fn.progress,colorScheme:dn(l.membershipStatus),mt:2,size:"sm"})]}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",mb:2,children:"Type d'adhsion"}),r.jsx(O,{fontWeight:"bold",children:tS[l.membershipType]||l.membershipType})]}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",mb:2,children:"Matricule"}),r.jsx(O,{fontWeight:"bold",color:"blue.600",children:l.matricule}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:"Utilis pour se connecter au site"})]}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",mb:2,children:"Numro d'adhrent"}),r.jsx(O,{fontWeight:"bold",color:"purple.600",children:l.memberNumber}),r.jsx(O,{fontSize:"xs",color:"gray.500",children:"Numro unique d'adhsion"})]})]}),r.jsx(rn,{my:4}),r.jsxs(tt,{columns:{base:1,md:3},spacing:{base:4,md:6},children:[r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",mb:1,children:"Dbut d'adhsion"}),r.jsx(O,{fontWeight:"bold",children:ue?pt(ue):"-"})]}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",mb:1,children:"Expiration prvue"}),r.jsx(O,{fontWeight:"bold",color:Ve?"red.600":"gray.800",children:X?pt(X):"-"}),X&&r.jsx(O,{fontSize:"xs",color:Ve?"red.500":"gray.500",children:Ve?"Adhsion expire":`${at} jour(s) restant(s)`})]}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",mb:1,children:"Dernier paiement"}),r.jsx(O,{fontWeight:"bold",children:ue?pt(ue):"-"}),l?.paymentAmount&&r.jsxs(O,{fontSize:"xs",color:"gray.600",children:[l.paymentAmount," (",nS[l.paymentMethod]||l.paymentMethod,")"]})]})]}),!Ve&&at!==null&&at<=60&&r.jsxs(Ft,{status:"warning",mt:4,borderRadius:"md",children:[r.jsx(Vt,{}),"Votre adhsion arrive  chance dans ",at," jour(s). Pensez  la renouveler."]}),Ve&&r.jsxs(Ft,{status:"error",mt:4,borderRadius:"md",children:[r.jsx(Vt,{}),"Votre adhsion est expire. Veuillez procder au renouvellement."]})]})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:"Dtails d'adhsion"})}),r.jsx(Ae,{children:b?r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Type d'adhsion"}),r.jsx(Qe,{value:S.membershipType||"STANDARD",onChange:Oe=>E(We=>({...We,membershipType:Oe.target.value})),children:Object.entries(tS).map(([Oe,We])=>r.jsx("option",{value:Oe,children:We},Oe))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Montant cotisation ()"}),r.jsx(pe,{type:"number",value:S.paymentAmount||"",onChange:Oe=>E(We=>({...We,paymentAmount:Oe.target.value}))})]})]}),r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Mode de paiement"}),r.jsx(Qe,{value:S.paymentMethod||"CASH",onChange:Oe=>E(We=>({...We,paymentMethod:Oe.target.value})),children:Object.entries(nS).map(([Oe,We])=>r.jsx("option",{value:Oe,children:We},Oe))})]}),r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{htmlFor:"newsletter",mb:"0",children:"Newsletter"}),r.jsx(sr,{id:"newsletter",isChecked:S.newsletter,onChange:Oe=>E(We=>({...We,newsletter:Oe.target.checked}))})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Notes"}),r.jsx(Gt,{value:S.notes||"",onChange:Oe=>E(We=>({...We,notes:Oe.target.value})),placeholder:"Notes personnelles..."})]})]}):r.jsxs(tt,{columns:{base:1,md:2},spacing:{base:4,md:6},children:[r.jsxs(de,{children:[l.paymentAmount&&r.jsxs(ne,{mb:4,children:[r.jsx(HC,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Cotisation"}),r.jsxs(O,{fontWeight:"bold",children:[l.paymentAmount," (",nS[l.paymentMethod]||l.paymentMethod,")"]})]})]}),r.jsxs(ne,{mb:4,children:[r.jsx(U1,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Type"}),r.jsx(O,{fontWeight:"bold",children:tS[l.membershipType]||l.membershipType})]})]}),ue&&r.jsxs(ne,{mb:4,children:[r.jsx(si,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Dbut d'adhsion"}),r.jsx(O,{fontWeight:"bold",children:pt(ue)})]})]})]}),r.jsxs(de,{children:[r.jsxs(ne,{mb:4,children:[r.jsx(Lu,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Matricule"}),r.jsx(O,{fontWeight:"bold",color:"blue.600",children:l.matricule})]})]}),r.jsxs(ne,{mb:4,children:[r.jsx(Lu,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Numro d'adhrent"}),r.jsx(O,{fontWeight:"bold",color:"purple.600",children:l.memberNumber})]})]}),X&&r.jsxs(ne,{mb:4,children:[r.jsx(si,{}),r.jsxs(de,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Expiration prvue"}),r.jsx(O,{fontWeight:"bold",color:Ve?"red.600":"gray.800",children:pt(X)})]})]})]})]})})]})]})}),r.jsx(ln,{px:0,children:r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:"Documents d'adhsions"})}),r.jsx(Ae,{children:T?r.jsx(cn,{children:r.jsx(sn,{})}):k.length===0?r.jsx(O,{color:"gray.600",children:"Aucun document pour le moment."}):r.jsxs(Tr,{size:"sm",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Fichier"}),r.jsx(Ie,{children:"Type"}),r.jsx(Ie,{children:"Ajout le"}),r.jsx(Ie,{children:"Expiration"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{})]})}),r.jsx(zr,{children:k.map(Oe=>r.jsxs($t,{children:[r.jsx(Pe,{children:Oe.fileName}),r.jsx(Pe,{children:Oe.documentType||"-"}),r.jsx(Pe,{children:Oe.uploadedAt?new Date(Oe.uploadedAt).toLocaleString("fr-FR"):"-"}),r.jsx(Pe,{children:Oe.expiryDate?new Date(Oe.expiryDate).toLocaleDateString("fr-FR"):"-"}),r.jsx(Pe,{children:r.jsx(Ge,{children:Oe.status||"PENDING"})}),r.jsx(Pe,{textAlign:"right",children:r.jsx(Y,{size:"sm",leftIcon:r.jsx(ml,{}),onClick:()=>Ke(Oe),children:"Tlcharger"})})]},Oe.id))})]})})]})})]})]}),!b&&r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:"Actions"})}),r.jsx(Ae,{children:r.jsxs(ne,{spacing:4,wrap:"wrap",children:[r.jsx(Y,{leftIcon:r.jsx(Lu,{}),onClick:te,children:"Changer le mot de passe"}),r.jsx(Y,{leftIcon:r.jsx(ml,{}),variant:"outline",children:"Tlcharger ma carte d'adhrent"}),(e?.roles||[]).map(bt=>String(bt).toUpperCase()).some(bt=>["PRESIDENT","VICE_PRESIDENT","TRESORIER","SECRETAIRE_GENERAL"].includes(bt))&&r.jsx(Y,{colorScheme:"red",variant:"outline",onClick:oe,children:"Supprimer l'adhsion"})]})})]}),l.notes&&!b&&r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:"Notes"})}),r.jsx(Ae,{children:r.jsx(O,{children:l.notes})})]})]})]}),r.jsxs(mt,{isOpen:W,onClose:re,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Changer le mot de passe"}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Mot de passe actuel"}),r.jsx(pe,{type:"password",value:D.currentPassword,onChange:Oe=>$(We=>({...We,currentPassword:Oe.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Nouveau mot de passe"}),r.jsx(pe,{type:"password",value:D.newPassword,onChange:Oe=>$(We=>({...We,newPassword:Oe.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Confirmer le nouveau mot de passe"}),r.jsx(pe,{type:"password",value:D.confirmPassword,onChange:Oe=>$(We=>({...We,confirmPassword:Oe.target.value}))})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:re,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:He,children:"Modifier"})]})]})]}),r.jsxs(mt,{isOpen:U,onClose:xe,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Supprimer l'adhsion"}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(Ft,{status:"warning",children:[r.jsx(Vt,{}),"Cette action met fin  l'adhsion. L'accs site associ sera dsactiv."]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Motif"}),r.jsxs(Qe,{value:_.reason,onChange:Oe=>B(We=>({...We,reason:Oe.target.value})),children:[r.jsx("option",{value:"",children:"Choisir un motif..."}),r.jsx("option",{value:"FIN",children:"Fin d'adhsion"}),r.jsx("option",{value:"NON_RECONDUITE",children:"Non reconduite"}),r.jsx("option",{value:"EXCLUSION",children:"Exclusion vote (joindre le PV)"}),r.jsx("option",{value:"DEMISSION",children:"Dmission (joindre PV et lettre de dmission)"}),r.jsx("option",{value:"INFORMATIQUE",children:"INFORMATIQUE"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Notes (optionnel)"}),r.jsx(Gt,{value:_.notes,onChange:Oe=>B(We=>({...We,notes:Oe.target.value}))})]}),_.reason==="EXCLUSION"||_.reason==="DEMISSION"?r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Procs-verbal (PDF/Image)"}),r.jsx(pe,{type:"file",accept:"application/pdf,image/*",onChange:Oe=>B(We=>({...We,pv:Oe.target.files?.[0]||null}))})]}):null,_.reason==="DEMISSION"?r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Lettre de dmission (PDF/Image)"}),r.jsx(pe,{type:"file",accept:"application/pdf,image/*",onChange:Oe=>B(We=>({...We,resignation:Oe.target.files?.[0]||null}))})]}):null]})}),r.jsx(Nt,{children:r.jsxs(ne,{children:[r.jsx(Y,{variant:"ghost",onClick:xe,children:"Annuler"}),r.jsx(Y,{colorScheme:"red",onClick:async()=>{try{if(!_.reason){N({title:"Motif requis",status:"error"});return}if(_.reason==="EXCLUSION"&&!_.pv){N({title:"PV obligatoire",status:"error"});return}if(_.reason==="DEMISSION"&&(!_.pv||!_.resignation)){N({title:"PV et lettre requis",status:"error"});return}const Oe=new FormData;Oe.append("reason",_.reason),_.notes&&Oe.append("notes",_.notes),_.pv&&Oe.append("pv",_.pv),_.resignation&&Oe.append("resignation",_.resignation);let We=null,bt=null;for(const Be of[x??"",uu||""])try{const ot=await fetch(`${Be}/api/members/${l?.id}/terminate`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:Oe});if(ot.ok){We=ot,bt=await ot.json();break}else bt=await ot.json().catch(()=>({}))}catch{}if(!We)throw new Error(bt?.error||"Erreur de suppression");N({title:"Adhsion supprime",status:"success",duration:3e3}),xe(),Z()}catch(Oe){N({title:"Erreur",description:Oe.message,status:"error"})}},children:"Confirmer"})]})})]})]}),r.jsxs(mt,{isOpen:ie,onClose:F,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Associer mon compte  un adhrent"}),r.jsx(gt,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Slectionnez ladhrent correspondant  votre compte afin dactiver la page Mon Adhsion."}),r.jsxs(G,{children:[r.jsx(q,{children:"Adhrent"}),r.jsx(Qe,{value:P,onChange:Oe=>R(Oe.target.value),placeholder:"Choisir",children:ee.map(Oe=>r.jsxs("option",{value:Oe.id,children:[Oe.lastName?.toUpperCase()," ",Oe.firstName,"  ",Oe.email," ",Oe.memberNumber?`(${Oe.memberNumber})`:""]},Oe.id))})]})]})}),r.jsx(Nt,{children:r.jsxs(ne,{children:[r.jsx(Y,{variant:"ghost",onClick:F,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",isDisabled:!P,onClick:async()=>{try{I(!0);let Oe=!1,We=null;for(const bt of[x??"",uu||""])try{const Be=await fetch(`${bt}/api/members/${P}/link-access`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({username:(e?.username||"").toLowerCase()})}),ot=await Be.json().catch(()=>({}));if(Be.ok){Oe=!0;break}else We=ot?.error||"Erreur de liaison"}catch{}if(!Oe)throw new Error(We||"Erreur de liaison");N({status:"success",title:"Compte associ"}),F(),await o(!0)}catch(Oe){N({status:"error",title:"chec",description:Oe.message})}finally{I(!1)}},children:"Associer"})]})})]})]})]})}const s5={"w.belaidi":{password:"Waiyl9134#",prenom:"Waiyl",nom:"BELAIDI",roles:["ADMIN"]},"m.ravichandran":{password:"RBE2025",prenom:"Mthusan",nom:"RAVICHANDRAN",roles:["MEMBER"]},"g.champenois":{password:"RBE2026",prenom:"Galle",nom:"CHAMPENOIS",roles:["MEMBER"]},"n.tetillon":{password:"RBE185C",prenom:"Nathan",nom:"TETILLON",roles:["MEMBER"]}};async function lce(e,t){const s=`${"https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,"")}/auth/login`;try{const l=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(l.ok)return await l.json()}catch{}const i=String(e||"").toLowerCase(),o=s5[i];if(!o||o.password!==t)throw new Error("chec de connexion");return{token:`local-dev-token-${i}`,user:{username:i,prenom:o.prenom,nom:o.nom,firstName:o.prenom,lastName:o.nom,roles:o.roles}}}async function cce(e,t){const s=`${"https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,"")}/auth/member-login`;try{const l=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(l.ok)return await l.json()}catch{}const i=String(e||"").toLowerCase(),o=s5[i];if(!o||o.password!==t)throw new Error("chec de connexion");return{token:`local-dev-token-${i}`,user:{username:i,prenom:o.prenom,nom:o.nom,firstName:o.prenom,lastName:o.nom,roles:o.roles}}}const uce="/univers_rbe.png";function dce(){const[e,t]=j.useState(""),[n,s]=j.useState(""),[i,o]=j.useState(""),[l,u]=j.useState(!1),d=ha(),{setToken:h,setUser:p}=Cs(),m=ir("rbe.500","rbe.300"),x=ir("gray.100","gray.700"),y=async()=>{if(!e.trim()||!n.trim()){o("Champs requis.");return}u(!0),o("");try{const C=e.trim(),E=/^\d{4}-\d{3}$/i.test(C)||C.includes("@")?await cce(C,n):await lce(C.toLowerCase(),n);h(E.token),p(E.user),d("/dashboard")}catch(C){o(C.message)}finally{u(!1)}},b=C=>C.key==="Enter"&&y();return r.jsxs(de,{minH:"100vh",bg:"white",overflowX:"hidden",children:[r.jsx(de,{as:"header",w:"100%",bg:"gray.50",borderBottom:"1px solid",borderColor:"gray.200",children:r.jsx(de,{maxW:"2000px",mx:"auto",children:r.jsx(ui,{src:uce,alt:"Bannire Intranet",w:"100%",h:{base:"100px",md:"200px",lg:"300px"},objectFit:"cover",fallbackSrc:"https://via.placeholder.com/2000x600?text=Intranet+Banner"})})}),r.jsx(de,{as:"main",px:4,pb:12,children:r.jsx(de,{maxW:"xs",w:"full",mx:"auto",mt:{base:-12,md:-20},position:"relative",children:r.jsxs(Q,{spacing:3,bg:"white",p:6,borderRadius:"md",shadow:"xl",border:"1px solid",borderColor:x,borderTop:"4px solid",borderTopColor:"rbe.500",children:[r.jsx(O,{fontSize:"xl",fontWeight:"bold",textAlign:"center",children:"Connexion Intranet"}),r.jsx(O,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Accs rserv aux membres et bnvoles"}),i&&r.jsx(O,{color:"red.500",textAlign:"center",children:i}),r.jsx(pe,{size:"sm",placeholder:"Identifiant",value:e,onChange:C=>t(C.target.value),onKeyDown:b,_focus:{borderColor:m,boxShadow:`0 0 0 1px ${m}`}}),r.jsx(pe,{size:"sm",placeholder:"Mot de passe",type:"password",value:n,onChange:C=>s(C.target.value),onKeyDown:b,_focus:{borderColor:m,boxShadow:`0 0 0 1px ${m}`}}),r.jsx(Y,{size:"sm",colorScheme:"rbe",w:"full",onClick:y,isLoading:l,loadingText:"Connexion...",children:"Se connecter"})]})})})]})}function hce(){const[e,t]=j.useState([]),[n,s]=j.useState(!1),[i,o]=j.useState(!1),[l,u]=j.useState(""),[d,h]=j.useState("CONFIRMED"),[p,m]=j.useState(!1),[x,y]=j.useState({total:0,confirmed:0,pending:0}),[b,C]=j.useState(null),[S,E]=j.useState("ALL"),k=mn(),{token:A,isAuthenticated:T}=Cs(),M=ha(),{isOpen:D,onOpen:$,onClose:W}=jt(),te=j.useCallback(async(F={manual:!1})=>{if(!A){console.log("[Newsletter] Waiting for token...");return}s(!0),m(!1);try{console.log("[Newsletter] Fetching subscribers...");const _=await Yx.getAll();console.log("[Newsletter] Received:",_),t(Array.isArray(_)?_:[]);const B=_.length,fe=_.filter(ee=>ee.status==="CONFIRMED").length,I=_.filter(ee=>ee.status==="PENDING").length;y({total:B,confirmed:fe,pending:I})}catch(_){if(console.error("[Newsletter] fetch error:",_),_.status===401){k({status:"error",title:"Session expire",description:"Veuillez vous reconnecter"}),t([]);return}m(!0),F.manual||k({status:"warning",title:"Mode dgrad",description:"Affichage de donnes de dmonstration (chec API)"}),t([{id:"demo1",email:"demo@example.com",status:"CONFIRMED",createdAt:new Date().toISOString()},{id:"demo2",email:"test@rbe.fr",status:"PENDING",createdAt:new Date().toISOString()}]),y({total:2,confirmed:1,pending:1})}finally{s(!1)}},[A,k]);j.useEffect(()=>{A&&te()},[A,te]);const re=async()=>{if(!l.includes("@")){k({status:"error",title:"Email invalide"});return}if(!A){k({status:"error",title:"Authentification requise"});return}o(!0);try{await Yx.create({email:l.trim().toLowerCase(),status:d}),k({status:"success",title:"Abonn ajout avec succs"}),u(""),h("CONFIRMED"),te({manual:!0})}catch(F){if(F.status===401){k({status:"error",title:"Session expire"});return}if(F.status===409){k({status:"info",title:"Email dj existant",description:"Cet email est dj dans la liste"});return}k({status:"error",title:"Erreur lors de l'ajout"})}finally{o(!1)}},U=async(F,_)=>{if(confirm(`Supprimer l'abonn ${_} ?`)){if(!A){k({status:"error",title:"Authentification requise"});return}try{await Yx.delete(F),k({status:"success",title:"Abonn supprim"}),t(B=>B.filter(fe=>fe.id!==F)),y(B=>({...B,total:B.total-1,confirmed:B.confirmed-(e.find(fe=>fe.id===F)?.status==="CONFIRMED"?1:0),pending:B.pending-(e.find(fe=>fe.id===F)?.status==="PENDING"?1:0)}))}catch(B){if(B.status===401){k({status:"error",title:"Session expire"});return}k({status:"error",title:"Erreur lors de la suppression"})}}},oe=F=>{C(F),$()},xe=async F=>{if(b)try{await Yx.updateStatus(b.id,F),k({status:"success",title:"Statut mis  jour",description:`${b.email}  ${F}`}),t(_=>_.map(B=>B.id===b.id?{...B,status:F}:B)),W(),te({manual:!0})}catch{k({status:"error",title:"Erreur lors de la mise  jour"})}},ie=async()=>{try{k({status:"info",title:"Export en cours...",description:"Gnration du fichier CSV"});const F=e.map(I=>({Email:I.email,Statut:I.status,"Date inscription":new Date(I.createdAt).toLocaleDateString("fr-FR")})),_=[Object.keys(F[0]).join(";"),...F.map(I=>Object.values(I).join(";"))].join(`
`),B=new Blob([_],{type:"text/csv;charset=utf-8;"}),fe=document.createElement("a");fe.href=URL.createObjectURL(B),fe.download=`newsletter-subscribers-${new Date().toISOString().split("T")[0]}.csv`,fe.click(),k({status:"success",title:"Export termin"})}catch{k({status:"error",title:"Erreur lors de l'export"})}},H=S==="ALL"?e:e.filter(F=>F.status===S);return T?r.jsx(de,{p:6,children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"lg",children:" Gestion Newsletter"}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Grez les abonnements  la newsletter RtroBus Essonne"})]}),r.jsxs(ne,{children:[r.jsx(Y,{leftIcon:r.jsx(ao,{}),size:"sm",variant:"outline",onClick:()=>te({manual:!0}),isLoading:n,children:"Rafrachir"}),r.jsx(Y,{leftIcon:r.jsx(ml,{}),size:"sm",colorScheme:"green",variant:"outline",onClick:ie,isDisabled:e.length===0,children:"Exporter CSV"}),r.jsx(Y,{leftIcon:r.jsx(Tc,{}),size:"sm",colorScheme:"blue",onClick:()=>M("/dashboard/newsletter-campaigns"),title:"Grer les campagnes de mailing",children:"Campagnes"})]})]}),r.jsxs(wE,{children:[r.jsxs(dt,{children:[r.jsx(ht,{children:"Total abonns"}),r.jsx(ft,{color:"blue.500",children:x.total})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"Confirms"}),r.jsx(ft,{color:"green.500",children:x.confirmed})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"En attente"}),r.jsx(ft,{color:"orange.500",children:x.pending})]})]}),p&&r.jsxs(Ft,{status:"warning",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"bold",children:"Mode dgrad"}),r.jsx(O,{fontSize:"sm",children:"Donnes de dmonstration affiches (API indisponible)"})]})]}),r.jsx(de,{p:4,borderWidth:"1px",borderRadius:"lg",bg:"gray.50",children:r.jsxs(Q,{spacing:4,children:[r.jsx(we,{size:"sm",children:" Ajouter un nouvel abonn"}),r.jsxs(ne,{w:"100%",spacing:4,children:[r.jsxs(G,{flex:2,children:[r.jsx(q,{fontSize:"sm",children:"Email"}),r.jsx(pe,{placeholder:"nouvel.abonne@email.com",value:l,onChange:F=>u(F.target.value),bg:"white"})]}),r.jsxs(G,{flex:1,children:[r.jsx(q,{fontSize:"sm",children:"Statut"}),r.jsxs(Qe,{value:d,onChange:F=>h(F.target.value),bg:"white",children:[r.jsx("option",{value:"CONFIRMED",children:"Confirm"}),r.jsx("option",{value:"PENDING",children:"En attente"})]})]}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"green",onClick:re,isLoading:i,alignSelf:"end",children:"Ajouter"})]})]})}),r.jsxs(ne,{justify:"space-between",children:[r.jsxs(ne,{children:[r.jsx(O,{fontSize:"sm",fontWeight:"medium",children:"Filtrer par statut :"}),r.jsxs(Qe,{size:"sm",value:S,onChange:F=>E(F.target.value),maxW:"150px",children:[r.jsx("option",{value:"ALL",children:"Tous"}),r.jsx("option",{value:"CONFIRMED",children:"Confirms"}),r.jsx("option",{value:"PENDING",children:"En attente"})]})]}),r.jsxs(Xu,{size:"lg",variant:"subtle",colorScheme:"purple",children:[r.jsxs(Ju,{children:[r.jsx(wi,{style:{marginRight:"4px"}}),H.length," affich",H.length>1?"s":""]}),e.length>0&&r.jsx(EE,{title:"Vider la liste locale (ne supprime pas en base)",onClick:()=>{confirm("Vider la liste locale affiche ? (ne supprime pas en base)")&&(t([]),y({total:0,confirmed:0,pending:0}))}})]})]}),r.jsx(de,{borderWidth:"1px",borderRadius:"lg",overflowX:"auto",children:n?r.jsx(cn,{py:10,children:r.jsxs(Q,{children:[r.jsx(sn,{size:"lg",color:"blue.500"}),r.jsx(O,{color:"gray.600",children:"Chargement des abonns..."})]})}):r.jsxs(Tr,{size:"sm",children:[r.jsx(Ir,{bg:"gray.50",children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Email"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{children:"Date d'inscription"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsxs(zr,{children:[H.map(F=>r.jsxs($t,{_hover:{bg:"gray.50"},children:[r.jsx(Pe,{fontWeight:"semibold",maxW:"300px",isTruncated:!0,children:F.email}),r.jsx(Pe,{children:r.jsx(Ge,{colorScheme:F.status==="CONFIRMED"?"green":"orange",variant:"subtle",fontSize:"xs",px:2,py:1,borderRadius:"md",cursor:"pointer",onClick:()=>oe(F),_hover:{opacity:.8},title:"Cliquer pour modifier",children:F.status==="CONFIRMED"?" Confirm":" En attente"})}),r.jsx(Pe,{fontSize:"sm",color:"gray.600",children:F.createdAt?new Date(F.createdAt).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"-"}),r.jsx(Pe,{children:r.jsxs(ne,{spacing:1,children:[r.jsx(et,{"aria-label":"Modifier le statut",icon:r.jsx(us,{}),size:"xs",colorScheme:"blue",variant:"ghost",onClick:()=>oe(F),title:"Modifier le statut"}),r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(Yn,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:()=>U(F.id,F.email),title:"Supprimer cet abonn"})]})})]},F.id)),H.length===0&&!n&&r.jsx($t,{children:r.jsx(Pe,{colSpan:4,children:r.jsx(cn,{py:8,children:r.jsxs(Q,{children:[r.jsx(O,{fontSize:"lg",children:""}),r.jsx(O,{fontSize:"sm",color:"gray.500",children:S==="ALL"?"Aucun abonn pour le moment.":`Aucun abonn avec le statut "${S}".`}),S!=="ALL"&&r.jsx(Y,{size:"sm",variant:"link",onClick:()=>E("ALL"),children:"Voir tous les abonns"})]})})})})]})]})}),r.jsx(de,{mt:8,p:4,bg:"blue.50",borderRadius:"lg",children:r.jsxs(Q,{align:"start",spacing:3,children:[r.jsx(we,{size:"sm",color:"blue.700",children:" Feuille de route"}),r.jsxs(Q,{align:"start",spacing:1,fontSize:"sm",color:"blue.600",children:[r.jsx(O,{children:" Ajout / suppression manuelle d'abonns"}),r.jsx(O,{children:" Gestion des statuts (confirm / en attente)"}),r.jsx(O,{children:" Export CSV des abonns"}),r.jsx(O,{children:" Statistiques en temps rel"}),r.jsx(O,{children:" Import CSV en masse"}),r.jsx(O,{children:" Double opt-in avec email de confirmation"}),r.jsx(O,{children:" Intgration service de mailing (Sendinblue, Mailjet...)"}),r.jsx(O,{children:" Templates d'emails personnalisables"}),r.jsx(O,{children:" Segmentation avance des abonns"})]})]})}),r.jsxs(mt,{isOpen:D,onClose:W,isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Modifier le statut de l'abonn"}),r.jsx(kt,{}),r.jsx(gt,{children:b&&r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(O,{fontSize:"sm",color:"gray.600",children:[r.jsx("strong",{children:"Email :"})," ",b.email]}),r.jsxs(O,{fontSize:"sm",color:"gray.600",children:[r.jsx("strong",{children:"Statut actuel :"})," ",b.status]}),r.jsxs(G,{children:[r.jsx(q,{children:"Nouveau statut"}),r.jsxs(Qe,{defaultValue:b.status,onChange:F=>C({...b,newStatus:F.target.value}),children:[r.jsx("option",{value:"CONFIRMED",children:"Confirm"}),r.jsx("option",{value:"PENDING",children:"En attente"})]})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:W,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:()=>xe(b?.newStatus||b?.status),children:"Mettre  jour"})]})]})]})]})}):r.jsx(cn,{minH:"300px",children:r.jsxs(Q,{children:[r.jsx(O,{children:"Veuillez vous connecter pour accder  la gestion newsletter."}),r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Cette section ncessite des droits d'administration."})]})})}var rS={exports:{}},sS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN;function fce(){if(uN)return sS;uN=1;var e=Km();function t(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,i=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function u(m,x){var y=x(),b=s({inst:{value:y,getSnapshot:x}}),C=b[0].inst,S=b[1];return o(function(){C.value=y,C.getSnapshot=x,d(C)&&S({inst:C})},[m,y,x]),i(function(){return d(C)&&S({inst:C}),m(function(){d(C)&&S({inst:C})})},[m]),l(y),y}function d(m){var x=m.getSnapshot;m=m.value;try{var y=x();return!n(m,y)}catch{return!0}}function h(m,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return sS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,sS}var dN;function i5(){return dN||(dN=1,rS.exports=fce()),rS.exports}var o5=i5();function ys(e){this.content=e}ys.prototype={constructor:ys,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var s=n&&n!=e?this.remove(n):this,i=s.find(e),o=s.content.slice();return i==-1?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new ys(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new ys(n)},addToStart:function(e,t){return new ys([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new ys(n)},addBefore:function(e,t,n){var s=this.remove(t),i=s.content.slice(),o=s.find(e);return i.splice(o==-1?i.length:o,0,t,n),new ys(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=ys.from(e),e.size?new ys(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=ys.from(e),e.size?new ys(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ys.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};ys.from=function(e){if(e instanceof ys)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new ys(t)};function a5(e,t,n){for(let s=0;;s++){if(s==e.childCount||s==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(s),o=t.child(s);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)n++;return n}if(i.content.size||o.content.size){let l=a5(i.content,o.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function l5(e,t,n,s){for(let i=e.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:s};let l=e.child(--i),u=t.child(--o),d=l.nodeSize;if(l==u){n-=d,s-=d;continue}if(!l.sameMarkup(u))return{a:n,b:s};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,n--,s--;return{a:n,b:s}}if(l.content.size||u.content.size){let h=l5(l.content,u.content,n-1,s-1);if(h)return h}n-=d,s-=d}}class Fe{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let s=0;s<t.length;s++)this.size+=t[s].nodeSize}nodesBetween(t,n,s,i=0,o){for(let l=0,u=0;u<n;l++){let d=this.content[l],h=u+d.nodeSize;if(h>t&&s(d,i+u,o||null,l)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,t-p),Math.min(d.content.size,n-p),s,i+p)}u=h}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,s,i){let o="",l=!0;return this.nodesBetween(t,n,(u,d)=>{let h=u.isText?u.text.slice(Math.max(t,d)-d,n-d):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&s&&(l?l=!1:o+=s),o+=h},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,s=t.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(s)&&(i[i.length-1]=n.withText(n.text+s.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new Fe(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let s=[],i=0;if(n>t)for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;d>t&&((l<t||d>n)&&(u.isText?u=u.cut(Math.max(0,t-l),Math.min(u.text.length,n-l)):u=u.cut(Math.max(0,t-l-1),Math.min(u.content.size,n-l-1))),s.push(u),i+=u.nodeSize),l=d}return new Fe(s,i)}cutByIndex(t,n){return t==n?Fe.empty:t==0&&n==this.content.length?this:new Fe(this.content.slice(t,n))}replaceChild(t,n){let s=this.content[t];if(s==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-s.nodeSize;return i[t]=n,new Fe(i,o)}addToStart(t){return new Fe([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Fe(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,s=0;n<this.content.length;n++){let i=this.content[n];t(i,s,n),s+=i.nodeSize}}findDiffStart(t,n=0){return a5(this,t,n)}findDiffEnd(t,n=this.size,s=t.size){return l5(this,t,n,s)}findIndex(t){if(t==0)return Kx(0,t);if(t==this.size)return Kx(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,s=0;;n++){let i=this.child(n),o=s+i.nodeSize;if(o>=t)return o==t?Kx(n+1,o):Kx(n,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Fe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fe(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Fe.empty;let n,s=0;for(let i=0;i<t.length;i++){let o=t[i];s+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(n||(n=t.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Fe(n||t,s)}static from(t){if(!t)return Fe.empty;if(t instanceof Fe)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Fe([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fe.empty=new Fe([],0);const iS={index:0,offset:0};function Kx(e,t){return iS.index=e,iS.offset=t,iS}function ly(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!ly(e[s],t[s]))return!1}else{for(let s in e)if(!(s in t)||!ly(e[s],t[s]))return!1;for(let s in t)if(!(s in e))return!1}return!0}let Kn=class QC{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,s=!1;for(let i=0;i<t.length;i++){let o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))n||(n=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!s&&o.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),s=!0),n&&n.push(o)}}return n||(n=t.slice()),s||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&ly(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let s=t.marks[n.type];if(!s)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=s.create(n.attrs);return s.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].eq(n[s]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return QC.none;if(t instanceof QC)return[t];let n=t.slice();return n.sort((s,i)=>s.type.rank-i.type.rank),n}};Kn.none=[];class cy extends Error{}class it{constructor(t,n,s){this.content=t,this.openStart=n,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let s=u5(this.content,t+this.openStart,n);return s&&new it(s,this.openStart,this.openEnd)}removeBetween(t,n){return new it(c5(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return it.empty;let s=n.openStart||0,i=n.openEnd||0;if(typeof s!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new it(Fe.fromJSON(t,n.content),s,i)}static maxOpen(t,n=!0){let s=0,i=0;for(let o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)s++;for(let o=t.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new it(t,s,i)}}it.empty=new it(Fe.empty,0,0);function c5(e,t,n){let{index:s,offset:i}=e.findIndex(t),o=e.maybeChild(s),{index:l,offset:u}=e.findIndex(n);if(i==t||o.isText){if(u!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(s!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(s,o.copy(c5(o.content,t-i-1,n-i-1)))}function u5(e,t,n,s){let{index:i,offset:o}=e.findIndex(t),l=e.maybeChild(i);if(o==t||l.isText)return s&&!s.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let u=u5(l.content,t-o-1,n,l);return u&&e.replaceChild(i,l.copy(u))}function pce(e,t,n){if(n.openStart>e.depth)throw new cy("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new cy("Inconsistent open depths");return d5(e,t,n,0)}function d5(e,t,n,s){let i=e.index(s),o=e.node(s);if(i==t.index(s)&&s<e.depth-n.openStart){let l=d5(e,t,n,s+1);return o.copy(o.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==s&&t.depth==s){let l=e.parent,u=l.content;return Bu(l,u.cut(0,e.parentOffset).append(n.content).append(u.cut(t.parentOffset)))}else{let{start:l,end:u}=mce(n,e);return Bu(o,f5(e,l,u,t,s))}else return Bu(o,uy(e,t,s))}function h5(e,t){if(!t.type.compatibleContent(e.type))throw new cy("Cannot join "+t.type.name+" onto "+e.type.name)}function ZC(e,t,n){let s=e.node(n);return h5(s,t.node(n)),s}function _u(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function om(e,t,n,s){let i=(t||e).node(n),o=0,l=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(_u(e.nodeAfter,s),o++));for(let u=o;u<l;u++)_u(i.child(u),s);t&&t.depth==n&&t.textOffset&&_u(t.nodeBefore,s)}function Bu(e,t){return e.type.checkContent(t),e.copy(t)}function f5(e,t,n,s,i){let o=e.depth>i&&ZC(e,t,i+1),l=s.depth>i&&ZC(n,s,i+1),u=[];return om(null,e,i,u),o&&l&&t.index(i)==n.index(i)?(h5(o,l),_u(Bu(o,f5(e,t,n,s,i+1)),u)):(o&&_u(Bu(o,uy(e,t,i+1)),u),om(t,n,i,u),l&&_u(Bu(l,uy(n,s,i+1)),u)),om(s,null,i,u),new Fe(u)}function uy(e,t,n){let s=[];if(om(null,e,n,s),e.depth>n){let i=ZC(e,t,n+1);_u(Bu(i,uy(e,t,n+1)),s)}return om(t,null,n,s),new Fe(s)}function mce(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)i=t.node(o).copy(Fe.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class _m{constructor(t,n,s){this.pos=t,this.path=n,this.parentOffset=s,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let s=this.pos-this.path[this.path.length-1],i=t.child(n);return s?t.child(n).cut(s):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let s=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<t;o++)i+=s.child(o).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Kn.none;if(this.textOffset)return t.child(n).marks;let s=t.maybeChild(n-1),i=t.maybeChild(n);if(!s){let u=s;s=i,i=u}let o=s.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let s=n.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);s>=0;s--)if(t.pos<=this.end(s)&&(!n||n(this.node(s))))return new dy(this,t,s);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let s=[],i=0,o=n;for(let l=t;;){let{index:u,offset:d}=l.content.findIndex(o),h=o-d;if(s.push(l,u,i+d),!h||(l=l.child(u),l.isText))break;o=h-1,i+=d+1}return new _m(n,s,o)}static resolveCached(t,n){let s=hN.get(t);if(s)for(let o=0;o<s.elts.length;o++){let l=s.elts[o];if(l.pos==n)return l}else hN.set(t,s=new gce);let i=s.elts[s.i]=_m.resolve(t,n);return s.i=(s.i+1)%xce,i}}class gce{constructor(){this.elts=[],this.i=0}}const xce=12,hN=new WeakMap;class dy{constructor(t,n,s){this.$from=t,this.$to=n,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const yce=Object.create(null);let bc=class ew{constructor(t,n,s,i=Kn.none){this.type=t,this.attrs=n,this.marks=i,this.content=s||Fe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,s,i=0){this.content.nodesBetween(t,n,s,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,s,i){return this.content.textBetween(t,n,s,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,s){return this.type==t&&ly(this.attrs,n||t.defaultAttrs||yce)&&Kn.sameSet(this.marks,s||Kn.none)}copy(t=null){return t==this.content?this:new ew(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new ew(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,s=!1){if(t==n)return it.empty;let i=this.resolve(t),o=this.resolve(n),l=s?0:i.sharedDepth(n),u=i.start(l),h=i.node(l).content.cut(i.pos-u,o.pos-u);return new it(h,i.depth-l,o.depth-l)}replace(t,n,s){return pce(this.resolve(t),this.resolve(n),s)}nodeAt(t){for(let n=this;;){let{index:s,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(s),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:s}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:s}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:s}=this.content.findIndex(t);if(s<t)return{node:this.content.child(n),index:n,offset:s};let i=this.content.child(n-1);return{node:i,index:n-1,offset:s-i.nodeSize}}resolve(t){return _m.resolveCached(this,t)}resolveNoCache(t){return _m.resolve(this,t)}rangeHasMark(t,n,s){let i=!1;return n>t&&this.nodesBetween(t,n,o=>(s.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),p5(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,s=Fe.empty,i=0,o=s.childCount){let l=this.contentMatchAt(t).matchFragment(s,i,o),u=l&&l.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let d=i;d<o;d++)if(!this.type.allowsMarks(s.child(d).marks))return!1;return!0}canReplaceWith(t,n,s,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(t).matchType(s),l=o&&o.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Kn.none;for(let n=0;n<this.marks.length;n++){let s=this.marks[n];s.type.checkAttrs(s.attrs),t=s.addToSet(t)}if(!Kn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let s;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,s)}let i=Fe.fromJSON(t,n.content),o=t.nodeType(n.type).create(n.attrs,i,s);return o.type.checkAttrs(o.attrs),o}};bc.prototype.text=void 0;class hy extends bc{constructor(t,n,s,i){if(super(t,n,null,i),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):p5(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new hy(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new hy(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function p5(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class td{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let s=new bce(t,n);if(s.next==null)return td.empty;let i=m5(s);s.next&&s.err("Unexpected trailing text");let o=kce(Ece(i));return Ace(o,s),o}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,s=t.childCount){let i=this;for(let o=n;i&&o<s;o++)i=i.matchType(t.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let s=0;s<t.next.length;s++)if(this.next[n].type==t.next[s].type)return!0;return!1}fillBefore(t,n=!1,s=0){let i=[this];function o(l,u){let d=l.matchFragment(t,s);if(d&&(!n||d.validEnd))return Fe.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let x=o(m,u.concat(p));if(x)return x}}return null}return o(this,[])}findWrapping(t){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==t)return this.wrapCache[s+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let i=s.shift(),o=i.match;if(o.matchType(t)){let l=[];for(let u=i;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:d}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!i.type||d.validEnd)&&(s.push({match:u.contentMatch,type:u,via:i}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(s){t.push(s);for(let i=0;i<s.next.length;i++)t.indexOf(s.next[i].next)==-1&&n(s.next[i].next)}return n(this),t.map((s,i)=>{let o=i+(s.validEnd?"*":" ")+" ";for(let l=0;l<s.next.length;l++)o+=(l?", ":"")+s.next[l].type.name+"->"+t.indexOf(s.next[l].next);return o}).join(`
`)}}td.empty=new td(!0);class bce{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function m5(e){let t=[];do t.push(vce(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function vce(e){let t=[];do t.push(jce(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function jce(e){let t=wce(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=Sce(e,t);else break;return t}function fN(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Sce(e,t){let n=fN(e),s=n;return e.eat(",")&&(e.next!="}"?s=fN(e):s=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:s,expr:t}}function Cce(e,t){let n=e.nodeTypes,s=n[t];if(s)return[s];let i=[];for(let o in n){let l=n[o];l.isInGroup(t)&&i.push(l)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function wce(e){if(e.eat("(")){let t=m5(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=Cce(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function Ece(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function s(l,u,d){let h={term:d,to:u};return t[l].push(h),h}function i(l,u){l.forEach(d=>d.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((d,h)=>d.concat(o(h,u)),[]);if(l.type=="seq")for(let d=0;;d++){let h=o(l.exprs[d],u);if(d==l.exprs.length-1)return h;i(h,u=n())}else if(l.type=="star"){let d=n();return s(u,d),i(o(l.expr,d),d),[s(d)]}else if(l.type=="plus"){let d=n();return i(o(l.expr,u),d),i(o(l.expr,d),d),[s(d)]}else{if(l.type=="opt")return[s(u)].concat(o(l.expr,u));if(l.type=="range"){let d=u;for(let h=0;h<l.min;h++){let p=n();i(o(l.expr,d),p),d=p}if(l.max==-1)i(o(l.expr,d),d);else for(let h=l.min;h<l.max;h++){let p=n();s(d,p),i(o(l.expr,d),p),d=p}return[s(d)]}else{if(l.type=="name")return[s(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function g5(e,t){return t-e}function pN(e,t){let n=[];return s(t),n.sort(g5);function s(i){let o=e[i];if(o.length==1&&!o[0].term)return s(o[0].to);n.push(i);for(let l=0;l<o.length;l++){let{term:u,to:d}=o[l];!u&&n.indexOf(d)==-1&&s(d)}}}function kce(e){let t=Object.create(null);return n(pN(e,0));function n(s){let i=[];s.forEach(l=>{e[l].forEach(({term:u,to:d})=>{if(!u)return;let h;for(let p=0;p<i.length;p++)i[p][0]==u&&(h=i[p][1]);pN(e,d).forEach(p=>{h||i.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=t[s.join(",")]=new td(s.indexOf(e.length-1)>-1);for(let l=0;l<i.length;l++){let u=i[l][1].sort(g5);o.next.push({type:i[l][0],next:t[u.join(",")]||n(u)})}return o}}function Ace(e,t){for(let n=0,s=[e];n<s.length;n++){let i=s[n],o=!i.validEnd,l=[];for(let u=0;u<i.next.length;u++){let{type:d,next:h}=i.next[u];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),s.indexOf(h)==-1&&s.push(h)}o&&t.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function x5(e){let t=Object.create(null);for(let n in e){let s=e[n];if(!s.hasDefault)return null;t[n]=s.default}return t}function y5(e,t){let n=Object.create(null);for(let s in e){let i=t&&t[s];if(i===void 0){let o=e[s];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+s)}n[s]=i}return n}function b5(e,t,n,s){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let o=e[i];o.validate&&o.validate(t[i])}}function v5(e,t){let n=Object.create(null);if(t)for(let s in t)n[s]=new Mce(e,s,t[s]);return n}let mN=class j5{constructor(t,n,s){this.name=t,this.schema=n,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=v5(t,s.attrs),this.defaultAttrs=x5(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==td.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:y5(this.attrs,t)}create(t=null,n,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new bc(this,this.computeAttrs(t),Fe.from(n),Kn.setFrom(s))}createChecked(t=null,n,s){return n=Fe.from(n),this.checkContent(n),new bc(this,this.computeAttrs(t),n,Kn.setFrom(s))}createAndFill(t=null,n,s){if(t=this.computeAttrs(t),n=Fe.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(Fe.empty,!0);return o?new bc(this,t,n.append(o),Kn.setFrom(s)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let s=0;s<t.childCount;s++)if(!this.allowsMarks(t.child(s).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){b5(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let s=0;s<t.length;s++)this.allowsMarkType(t[s].type)?n&&n.push(t[s]):n||(n=t.slice(0,s));return n?n.length?n:Kn.none:t}static compile(t,n){let s=Object.create(null);t.forEach((o,l)=>s[o]=new j5(o,n,l));let i=n.spec.topNode||"doc";if(!s[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let o in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function Tce(e,t,n){let s=n.split("|");return i=>{let o=i===null?"null":typeof i;if(s.indexOf(o)<0)throw new RangeError(`Expected value of type ${s} for attribute ${t} on type ${e}, got ${o}`)}}class Mce{constructor(t,n,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?Tce(t,n,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class Db{constructor(t,n,s,i){this.name=t,this.rank=n,this.schema=s,this.spec=i,this.attrs=v5(t,i.attrs),this.excluded=null;let o=x5(this.attrs);this.instance=o?new Kn(this,o):null}create(t=null){return!t&&this.instance?this.instance:new Kn(this,y5(this.attrs,t))}static compile(t,n){let s=Object.create(null),i=0;return t.forEach((o,l)=>s[o]=new Db(o,i++,n,l)),s}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){b5(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class S5{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=ys.from(t.nodes),n.marks=ys.from(t.marks||{}),this.nodes=mN.compile(this.spec.nodes,this),this.marks=Db.compile(this.spec.marks,this);let s=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=s[l]||(s[l]=td.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?gN(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:gN(this,l.split(" "))}this.nodeFromJSON=i=>bc.fromJSON(this,i),this.markFromJSON=i=>Kn.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,s,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof mN){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,s,i)}text(t,n){let s=this.nodes.text;return new hy(s,s.defaultAttrs,t,Kn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function gN(e,t){let n=[];for(let s=0;s<t.length;s++){let i=t[s],o=e.marks[i],l=o;if(o)n.push(o);else for(let u in e.marks){let d=e.marks[u];(i=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+t[s]+"'")}return n}function Rce(e){return e.tag!=null}function Dce(e){return e.style!=null}class vc{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let s=this.matchedStyles=[];n.forEach(i=>{if(Rce(i))this.tags.push(i);else if(Dce(i)){let o=/[^=]*/.exec(i.style)[0];s.indexOf(o)<0&&s.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=t.nodes[i.node];return o.contentMatch.matchType(o)})}parse(t,n={}){let s=new yN(this,n,!1);return s.addAll(t,Kn.none,n.from,n.to),s.finish()}parseSlice(t,n={}){let s=new yN(this,n,!0);return s.addAll(t,Kn.none,n.from,n.to),it.maxOpen(s.finish())}matchTag(t,n,s){for(let i=s?this.tags.indexOf(s)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(Pce(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(t,n,s,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(t)!=0||l.context&&!s.matchesContext(l.context)||u.length>t.length&&(u.charCodeAt(t.length)!=61||u.slice(t.length+1)!=n))){if(l.getAttrs){let d=l.getAttrs(n);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(t){let n=[];function s(i){let o=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let u=n[l];if((u.priority==null?50:u.priority)<o)break}n.splice(l,0,i)}for(let i in t.marks){let o=t.marks[i].spec.parseDOM;o&&o.forEach(l=>{s(l=bN(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in t.nodes){let o=t.nodes[i].spec.parseDOM;o&&o.forEach(l=>{s(l=bN(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new vc(t,vc.schemaRules(t)))}}const C5={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Oce={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},w5={ol:!0,ul:!0},Bm=1,tw=2,am=4;function xN(e,t,n){return t!=null?(t?Bm:0)|(t==="full"?tw:0):e&&e.whitespace=="pre"?Bm|tw:n&~am}class Xx{constructor(t,n,s,i,o,l){this.type=t,this.attrs=n,this.marks=s,this.solid=i,this.options=l,this.content=[],this.activeMarks=Kn.none,this.match=o||(l&am?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Fe.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let s=this.type.contentMatch,i;return(i=s.findWrapping(t.type))?(this.match=s,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Bm)){let s=this.content[this.content.length-1],i;if(s&&s.isText&&(i=/[ \t\r\n\u000c]+$/.exec(s.text))){let o=s;s.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=Fe.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Fe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!C5.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class yN{constructor(t,n,s){this.parser=t,this.options=n,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,l=xN(null,n.preserveWhitespace,0)|(s?am:0);i?o=new Xx(i.type,i.attrs,Kn.none,!0,n.topMatch||i.type.contentMatch,l):s?o=new Xx(null,null,Kn.none,!0,null,l):o=new Xx(t.schema.topNodeType,null,Kn.none,!0,null,l),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let s=t.nodeValue,i=this.top,o=i.options&tw?"full":this.localPreserveWS||(i.options&Bm)>0,{schema:l}=this.parser;if(o==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(s)){if(o)if(o==="full")s=s.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(s)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=s.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),n,!0),u[d]&&this.insertNode(l.text(u[d]),n,!/\S/.test(u[d]));s=""}else s=s.replace(/\r?\n|\r/g," ");else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let u=i.content[i.content.length-1],d=t.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(s=s.slice(1))}s&&this.insertNode(l.text(s),n,!/\S/.test(s)),this.findInText(t)}else this.findInside(t)}addElement(t,n,s){let i=this.localPreserveWS,o=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let l=t.nodeName.toLowerCase(),u;w5.hasOwnProperty(l)&&this.parser.normalizeLists&&Nce(t);let d=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(u=this.parser.matchTag(t,this,s));e:if(d?d.ignore:Oce.hasOwnProperty(l))this.findInside(t),this.ignoreFallback(t,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(t=d.skip);let h,p=this.needsBlock;if(C5.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let m=d&&d.skip?n:this.readStyles(t,n);m&&this.addAll(t,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(t,n);h&&this.addElementByRule(t,d,h,d.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let s=t.style;if(s&&s.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=s.getPropertyValue(o);if(l)for(let u=void 0;;){let d=this.parser.matchStyle(o,l,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(h=>!d.clearMark(h)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return n}addElementByRule(t,n,s,i){let o,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),s,t.nodeName=="BR")||this.leafFallback(t,s);else{let d=this.enter(l,n.attrs||null,s,n.preserveWhitespace);d&&(o=!0,s=d)}else{let d=this.parser.schema.marks[n.mark];s=s.concat(d.create(n.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(t);else if(i)this.addElement(t,s,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(d=>this.insertNode(d,s,!1));else{let d=t;typeof n.contentElement=="string"?d=t.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(t):n.contentElement&&(d=n.contentElement),this.findAround(t,d,!0),this.addAll(d,s),this.findAround(t,d,!1)}o&&this.sync(u)&&this.open--}addAll(t,n,s,i){let o=s||0;for(let l=s?t.childNodes[s]:t.firstChild,u=i==null?null:t.childNodes[i];l!=u;l=l.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(l,n);this.findAtPoint(t,o)}findPlace(t,n,s){let i,o;for(let l=this.open,u=0;l>=0;l--){let d=this.nodes[l],h=d.findWrapping(t);if(h&&(!i||i.length>h.length+u)&&(i=h,o=d,!h.length))break;if(d.solid){if(s)break;u+=2}}if(!i)return null;this.sync(o);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(t,n,s){if(t.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(t,n,s);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(t.type));let l=Kn.none;for(let u of i.concat(t.marks))(o.type?o.type.allowsMarkType(u.type):vN(u.type,t.type))&&(l=u.addToSet(l));return o.content.push(t.mark(l)),!0}return!1}enter(t,n,s,i){let o=this.findPlace(t.create(n),s,!1);return o&&(o=this.enterInner(t,n,s,!0,i)),o}enterInner(t,n,s,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(t);let u=xN(t,o,l.options);l.options&am&&l.content.length==0&&(u|=am);let d=Kn.none;return s=s.filter(h=>(l.type?l.type.allowsMarkType(h.type):vN(h.type,t))?(d=h.addToSet(d),!1):!0),this.nodes.push(new Xx(t,n,d,i,null,u)),this.open++,s}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Bm)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let s=this.nodes[n].content;for(let i=s.length-1;i>=0;i--)t+=s[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==t&&this.find[s].offset==n&&(this.find[s].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,s){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(s?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),s=this.options.context,i=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),o=-(s?s.depth+1:0)+(i?0:1),l=(u,d)=>{for(;u>=0;u--){let h=n[u];if(h==""){if(u==n.length-1||u==0)continue;for(;d>=o;d--)if(l(u-1,d))return!0;return!1}else{let p=d>0||d==0&&i?this.nodes[d].type:s&&d>=o?s.node(d-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;d--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let s=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let n in this.parser.schema.nodes){let s=this.parser.schema.nodes[n];if(s.isTextblock&&s.defaultAttrs)return s}}}function Nce(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let s=t.nodeType==1?t.nodeName.toLowerCase():null;s&&w5.hasOwnProperty(s)&&n?(n.appendChild(t),t=n):s=="li"?n=t:s&&(n=null)}}function Pce(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function bN(e){let t={};for(let n in e)t[n]=e[n];return t}function vN(e,t){let n=t.schema.nodes;for(let s in n){let i=n[s];if(!i.allowsMarkType(e))continue;let o=[],l=u=>{o.push(u);for(let d=0;d<u.edgeCount;d++){let{type:h,next:p}=u.edge(d);if(h==t||o.indexOf(p)<0&&l(p))return!0}};if(l(i.contentMatch))return!0}}class ud{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},s){s||(s=oS(n).createDocumentFragment());let i=s,o=[];return t.forEach(l=>{if(o.length||l.marks.length){let u=0,d=0;for(;u<o.length&&d<l.marks.length;){let h=l.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,d++}for(;u<o.length;)i=o.pop()[1];for(;d<l.marks.length;){let h=l.marks[d++],p=this.serializeMark(h,l.isInline,n);p&&(o.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),s}serializeNodeInner(t,n){let{dom:s,contentDOM:i}=O0(oS(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return s}serializeNode(t,n={}){let s=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let o=this.serializeMark(t.marks[i],t.isInline,n);o&&((o.contentDOM||o.dom).appendChild(s),s=o.dom)}return s}serializeMark(t,n,s={}){let i=this.marks[t.type.name];return i&&O0(oS(s),i(t,n),null,t.attrs)}static renderSpec(t,n,s=null,i){return O0(t,n,s,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new ud(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=jN(t.nodes);return n.text||(n.text=s=>s.text),n}static marksFromSchema(t){return jN(t.marks)}}function jN(e){let t={};for(let n in e){let s=e[n].spec.toDOM;s&&(t[n]=s)}return t}function oS(e){return e.document||window.document}const SN=new WeakMap;function zce(e){let t=SN.get(e);return t===void 0&&SN.set(e,t=Ice(e)),t}function Ice(e){let t=null;function n(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")t||(t=[]),t.push(s);else for(let i=0;i<s.length;i++)n(s[i]);else for(let i in s)n(s[i])}return n(e),t}function O0(e,t,n,s){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(o=zce(s))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let u,d=n?e.createElementNS(n,i):e.createElement(i),h=t[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let x=m.indexOf(" ");x>0?d.setAttributeNS(m.slice(0,x),m.slice(x+1),h[m]):m=="style"&&d.style?d.style.cssText=h[m]:d.setAttribute(m,h[m])}}for(let m=p;m<t.length;m++){let x=t[m];if(x===0){if(m<t.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:y,contentDOM:b}=O0(e,x,n,s);if(d.appendChild(y),b){if(u)throw new RangeError("Multiple content holes");u=b}}}return{dom:d,contentDOM:u}}const E5=65535,k5=Math.pow(2,16);function Lce(e,t){return e+t*k5}function CN(e){return e&E5}function _ce(e){return(e-(e&E5))/k5}const A5=1,T5=2,N0=4,M5=8;class nw{constructor(t,n,s){this.pos=t,this.delInfo=n,this.recover=s}get deleted(){return(this.delInfo&M5)>0}get deletedBefore(){return(this.delInfo&(A5|N0))>0}get deletedAfter(){return(this.delInfo&(T5|N0))>0}get deletedAcross(){return(this.delInfo&N0)>0}}class Ci{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Ci.empty)return Ci.empty}recover(t){let n=0,s=CN(t);if(!this.inverted)for(let i=0;i<s;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[s*3]+n+_ce(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,s){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?i:0);if(d>t)break;let h=this.ranges[u+o],p=this.ranges[u+l],m=d+h;if(t<=m){let x=h?t==d?-1:t==m?1:n:n,y=d+i+(x<0?0:p);if(s)return y;let b=t==(n<0?d:m)?null:Lce(u/3,t-d),C=t==d?T5:t==m?A5:N0;return(n<0?t!=d:t!=m)&&(C|=M5),new nw(y,C,b)}i+=p-h}return s?t+i:new nw(t+i,0,null)}touches(t,n){let s=0,i=CN(n),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?s:0);if(d>t)break;let h=this.ranges[u+o],p=d+h;if(t<=p&&u==i*3)return!0;s+=this.ranges[u+l]-h}return!1}forEach(t){let n=this.inverted?2:1,s=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],u=l-(this.inverted?o:0),d=l+(this.inverted?0:o),h=this.ranges[i+n],p=this.ranges[i+s];t(u,u+h,d,d+p),o+=p-h}}invert(){return new Ci(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Ci.empty:new Ci(t<0?[0,-t,0]:[0,0,t])}}Ci.empty=new Ci([]);class $m{constructor(t,n,s=0,i=t?t.length:0){this.mirror=n,this.from=s,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new $m(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,s=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?s+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,s=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?s-i-1:void 0)}}invert(){let t=new $m;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let s=this.from;s<this.to;s++)t=this._maps[s].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,s){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(t,n);if(u.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,t=this._maps[d].recover(u.recover);continue}}i|=u.delInfo,t=u.pos}return s?t:new nw(t,i,null)}}const aS=Object.create(null);class Ps{getMap(){return Ci.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=aS[n.stepType];if(!s)throw new RangeError(`No step type ${n.stepType} defined`);return s.fromJSON(t,n)}static jsonID(t,n){if(t in aS)throw new RangeError("Duplicate use of step JSON ID "+t);return aS[t]=n,n.prototype.jsonID=t,n}}class Gr{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Gr(t,null)}static fail(t){return new Gr(null,t)}static fromReplace(t,n,s,i){try{return Gr.ok(t.replace(n,s,i))}catch(o){if(o instanceof cy)return Gr.fail(o.message);throw o}}}function PE(e,t,n){let s=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(PE(o.content,t,o))),o.isInline&&(o=t(o,n,i)),s.push(o)}return Fe.fromArray(s)}class fc extends Ps{constructor(t,n,s){super(),this.from=t,this.to=n,this.mark=s}apply(t){let n=t.slice(this.from,this.to),s=t.resolve(this.from),i=s.node(s.sharedDepth(this.to)),o=new it(PE(n.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return Gr.fromReplace(t,this.from,this.to,o)}invert(){return new Eo(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),s=t.mapResult(this.to,-1);return n.deleted&&s.deleted||n.pos>=s.pos?null:new fc(n.pos,s.pos,this.mark)}merge(t){return t instanceof fc&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new fc(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new fc(n.from,n.to,t.markFromJSON(n.mark))}}Ps.jsonID("addMark",fc);class Eo extends Ps{constructor(t,n,s){super(),this.from=t,this.to=n,this.mark=s}apply(t){let n=t.slice(this.from,this.to),s=new it(PE(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Gr.fromReplace(t,this.from,this.to,s)}invert(){return new fc(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),s=t.mapResult(this.to,-1);return n.deleted&&s.deleted||n.pos>=s.pos?null:new Eo(n.pos,s.pos,this.mark)}merge(t){return t instanceof Eo&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Eo(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Eo(n.from,n.to,t.markFromJSON(n.mark))}}Ps.jsonID("removeMark",Eo);class pc extends Ps{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Gr.fail("No node at mark step's position");let s=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Gr.fromReplace(t,this.pos,this.pos+1,new it(Fe.from(s),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let s=this.mark.addToSet(n.marks);if(s.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(s))return new pc(this.pos,n.marks[i]);return new pc(this.pos,this.mark)}}return new nd(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new pc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new pc(n.pos,t.markFromJSON(n.mark))}}Ps.jsonID("addNodeMark",pc);class nd extends Ps{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Gr.fail("No node at mark step's position");let s=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Gr.fromReplace(t,this.pos,this.pos+1,new it(Fe.from(s),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new pc(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new nd(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nd(n.pos,t.markFromJSON(n.mark))}}Ps.jsonID("removeNodeMark",nd);class cs extends Ps{constructor(t,n,s,i=!1){super(),this.from=t,this.to=n,this.slice=s,this.structure=i}apply(t){return this.structure&&rw(t,this.from,this.to)?Gr.fail("Structure replace would overwrite content"):Gr.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Ci([this.from,this.to-this.from,this.slice.size])}invert(t){return new cs(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),s=t.mapResult(this.to,-1);return n.deletedAcross&&s.deletedAcross?null:new cs(n.pos,Math.max(n.pos,s.pos),this.slice,this.structure)}merge(t){if(!(t instanceof cs)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?it.empty:new it(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new cs(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?it.empty:new it(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new cs(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new cs(n.from,n.to,it.fromJSON(t,n.slice),!!n.structure)}}Ps.jsonID("replace",cs);class ds extends Ps{constructor(t,n,s,i,o,l,u=!1){super(),this.from=t,this.to=n,this.gapFrom=s,this.gapTo=i,this.slice=o,this.insert=l,this.structure=u}apply(t){if(this.structure&&(rw(t,this.from,this.gapFrom)||rw(t,this.gapTo,this.to)))return Gr.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Gr.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,n.content);return s?Gr.fromReplace(t,this.from,this.to,s):Gr.fail("Content does not fit in gap")}getMap(){return new Ci([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new ds(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),s=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?s.pos:t.map(this.gapTo,1);return n.deletedAcross&&s.deletedAcross||i<n.pos||o>s.pos?null:new ds(n.pos,s.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ds(n.from,n.to,n.gapFrom,n.gapTo,it.fromJSON(t,n.slice),n.insert,!!n.structure)}}Ps.jsonID("replaceAround",ds);function rw(e,t,n){let s=e.resolve(t),i=n-t,o=s.depth;for(;i>0&&o>0&&s.indexAfter(o)==s.node(o).childCount;)o--,i--;if(i>0){let l=s.node(o).maybeChild(s.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function Bce(e,t,n,s){let i=[],o=[],l,u;e.doc.nodesBetween(t,n,(d,h,p)=>{if(!d.isInline)return;let m=d.marks;if(!s.isInSet(m)&&p.type.allowsMarkType(s.type)){let x=Math.max(h,t),y=Math.min(h+d.nodeSize,n),b=s.addToSet(m);for(let C=0;C<m.length;C++)m[C].isInSet(b)||(l&&l.to==x&&l.mark.eq(m[C])?l.to=y:i.push(l=new Eo(x,y,m[C])));u&&u.to==x?u.to=y:o.push(u=new fc(x,y,s))}}),i.forEach(d=>e.step(d)),o.forEach(d=>e.step(d))}function $ce(e,t,n,s){let i=[],o=0;e.doc.nodesBetween(t,n,(l,u)=>{if(!l.isInline)return;o++;let d=null;if(s instanceof Db){let h=l.marks,p;for(;p=s.isInSet(h);)(d||(d=[])).push(p),h=p.removeFromSet(h)}else s?s.isInSet(l.marks)&&(d=[s]):d=l.marks;if(d&&d.length){let h=Math.min(u+l.nodeSize,n);for(let p=0;p<d.length;p++){let m=d[p],x;for(let y=0;y<i.length;y++){let b=i[y];b.step==o-1&&m.eq(i[y].style)&&(x=b)}x?(x.to=h,x.step=o):i.push({style:m,from:Math.max(u,t),to:h,step:o})}}}),i.forEach(l=>e.step(new Eo(l.from,l.to,l.style)))}function zE(e,t,n,s=n.contentMatch,i=!0){let o=e.doc.nodeAt(t),l=[],u=t+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),p=u+h.nodeSize,m=s.matchType(h.type);if(!m)l.push(new cs(u,p,it.empty));else{s=m;for(let x=0;x<h.marks.length;x++)n.allowsMarkType(h.marks[x].type)||e.step(new Eo(u,p,h.marks[x]));if(i&&h.isText&&n.whitespace!="pre"){let x,y=/\r?\n|\r/g,b;for(;x=y.exec(h.text);)b||(b=new it(Fe.from(n.schema.text(" ",n.allowedMarks(h.marks))),0,0)),l.push(new cs(u+x.index,u+x.index+x[0].length,b))}}u=p}if(!s.validEnd){let d=s.fillBefore(Fe.empty,!0);e.replace(u,u,new it(d,0,0))}for(let d=l.length-1;d>=0;d--)e.step(l[d])}function Fce(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function hf(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let s=e.depth;;--s){let i=e.$from.node(s),o=e.$from.index(s),l=e.$to.indexAfter(s);if(s<e.depth&&i.canReplace(o,l,n))return s;if(s==0||i.type.spec.isolating||!Fce(i,o,l))break}return null}function Vce(e,t,n){let{$from:s,$to:i,depth:o}=t,l=s.before(o+1),u=i.after(o+1),d=l,h=u,p=Fe.empty,m=0;for(let b=o,C=!1;b>n;b--)C||s.index(b)>0?(C=!0,p=Fe.from(s.node(b).copy(p)),m++):d--;let x=Fe.empty,y=0;for(let b=o,C=!1;b>n;b--)C||i.after(b+1)<i.end(b)?(C=!0,x=Fe.from(i.node(b).copy(x)),y++):h++;e.step(new ds(d,h,l,u,new it(p.append(x),m,y),p.size-m,!0))}function IE(e,t,n=null,s=e){let i=Hce(e,t),o=i&&Uce(s,t);return o?i.map(wN).concat({type:t,attrs:n}).concat(o.map(wN)):null}function wN(e){return{type:e,attrs:null}}function Hce(e,t){let{parent:n,startIndex:s,endIndex:i}=e,o=n.contentMatchAt(s).findWrapping(t);if(!o)return null;let l=o.length?o[0]:t;return n.canReplaceWith(s,i,l)?o:null}function Uce(e,t){let{parent:n,startIndex:s,endIndex:i}=e,o=n.child(s),l=t.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:t).contentMatch;for(let h=s;d&&h<i;h++)d=d.matchType(n.child(h).type);return!d||!d.validEnd?null:l}function Wce(e,t,n){let s=Fe.empty;for(let l=n.length-1;l>=0;l--){if(s.size){let u=n[l].type.contentMatch.matchFragment(s);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=Fe.from(n[l].type.create(n[l].attrs,s))}let i=t.start,o=t.end;e.step(new ds(i,o,i,o,new it(s,0,0),n.length,!0))}function qce(e,t,n,s,i){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(l,u)=>{let d=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(s,d)&&Gce(e.doc,e.mapping.slice(o).map(u),s)){let h=null;if(s.schema.linebreakReplacement){let y=s.whitespace=="pre",b=!!s.contentMatch.matchType(s.schema.linebreakReplacement);y&&!b?h=!1:!y&&b&&(h=!0)}h===!1&&D5(e,l,u,o),zE(e,e.mapping.slice(o).map(u,1),s,void 0,h===null);let p=e.mapping.slice(o),m=p.map(u,1),x=p.map(u+l.nodeSize,1);return e.step(new ds(m,x,m+1,x-1,new it(Fe.from(s.create(d,null,l.marks)),0,0),1,!0)),h===!0&&R5(e,l,u,o),!1}})}function R5(e,t,n,s){t.forEach((i,o)=>{if(i.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(i.text);){let d=e.mapping.slice(s).map(n+1+o+l.index);e.replaceWith(d,d+1,t.type.schema.linebreakReplacement.create())}}})}function D5(e,t,n,s){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=e.mapping.slice(s).map(n+1+o);e.replaceWith(l,l+1,t.type.schema.text(`
`))}})}function Gce(e,t,n){let s=e.resolve(t),i=s.index();return s.parent.canReplaceWith(i,i+1,n)}function Yce(e,t,n,s,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(s,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new ds(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new it(Fe.from(l),0,0),1,!0))}function cl(e,t,n=1,s){let i=e.resolve(t),o=i.depth-n,l=s&&s[s.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=n-2;h>o;h--,p--){let m=i.node(h),x=i.index(h);if(m.type.spec.isolating)return!1;let y=m.content.cutByIndex(x,m.childCount),b=s&&s[p+1];b&&(y=y.replaceChild(0,b.type.create(b.attrs)));let C=s&&s[p]||m;if(!m.canReplace(x+1,m.childCount)||!C.type.validContent(y))return!1}let u=i.indexAfter(o),d=s&&s[0];return i.node(o).canReplaceWith(u,u,d?d.type:i.node(o+1).type)}function Kce(e,t,n=1,s){let i=e.doc.resolve(t),o=Fe.empty,l=Fe.empty;for(let u=i.depth,d=i.depth-n,h=n-1;u>d;u--,h--){o=Fe.from(i.node(u).copy(o));let p=s&&s[h];l=Fe.from(p?p.type.create(p.attrs,l):i.node(u).copy(l))}e.step(new cs(t,t,new it(o.append(l),n,n),!0))}function Lc(e,t){let n=e.resolve(t),s=n.index();return O5(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(s,s+1)}function Xce(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:s}=e.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),l=o.type==s?e.type.schema.nodes.text:o.type;if(n=n.matchType(l),!n||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}function O5(e,t){return!!(e&&t&&!e.isLeaf&&Xce(e,t))}function Ob(e,t,n=-1){let s=e.resolve(t);for(let i=s.depth;;i--){let o,l,u=s.index(i);if(i==s.depth?(o=s.nodeBefore,l=s.nodeAfter):n>0?(o=s.node(i+1),u++,l=s.node(i).maybeChild(u)):(o=s.node(i).maybeChild(u-1),l=s.node(i+1)),o&&!o.isTextblock&&O5(o,l)&&s.node(i).canReplace(u,u+1))return t;if(i==0)break;t=n<0?s.before(i):s.after(i)}}function Jce(e,t,n){let s=null,{linebreakReplacement:i}=e.doc.type.schema,o=e.doc.resolve(t-n),l=o.node().type;if(i&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(i);p&&!m?s=!1:!p&&m&&(s=!0)}let u=e.steps.length;if(s===!1){let p=e.doc.resolve(t+n);D5(e,p.node(),p.before(),u)}l.inlineContent&&zE(e,t+n-1,l,o.node().contentMatchAt(o.index()),s==null);let d=e.mapping.slice(u),h=d.map(t-n);if(e.step(new cs(h,d.map(t+n,-1),it.empty,!0)),s===!0){let p=e.doc.resolve(h);R5(e,p.node(),p.before(),e.steps.length)}return e}function Qce(e,t,n){let s=e.resolve(t);if(s.parent.canReplaceWith(s.index(),s.index(),n))return t;if(s.parentOffset==0)for(let i=s.depth-1;i>=0;i--){let o=s.index(i);if(s.node(i).canReplaceWith(o,o,n))return s.before(i+1);if(o>0)return null}if(s.parentOffset==s.parent.content.size)for(let i=s.depth-1;i>=0;i--){let o=s.indexAfter(i);if(s.node(i).canReplaceWith(o,o,n))return s.after(i+1);if(o<s.node(i).childCount)return null}return null}function N5(e,t,n){let s=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let l=s.depth;l>=0;l--){let u=l==s.depth?0:s.pos<=(s.start(l+1)+s.end(l+1))/2?-1:1,d=s.index(l)+(u>0?1:0),h=s.node(l),p=!1;if(o==1)p=h.canReplace(d,d,i);else{let m=h.contentMatchAt(d).findWrapping(i.firstChild.type);p=m&&h.canReplaceWith(d,d,m[0])}if(p)return u==0?s.pos:u<0?s.before(l+1):s.after(l+1)}return null}function Nb(e,t,n=t,s=it.empty){if(t==n&&!s.size)return null;let i=e.resolve(t),o=e.resolve(n);return P5(i,o,s)?new cs(t,n,s):new Zce(i,o,s).fit()}function P5(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class Zce{constructor(t,n,s){this.$from=t,this.$to=n,this.unplaced=s,this.frontier=[],this.placed=Fe.empty;for(let i=0;i<=t.depth;i++){let o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=Fe.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,s=this.$from,i=this.close(t<0?this.$to:s.doc.resolve(t));if(!i)return null;let o=this.placed,l=s.depth,u=i.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let d=new it(o,l,u);return t>-1?new ds(s.pos,t,this.$to.pos,this.$to.end(),d,n):d.size||s.pos!=this.$to.pos?new cs(s.pos,i.pos,d):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,s=0,i=this.unplaced.openEnd;s<t;s++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=s){t=s;break}n=o.content}for(let n=1;n<=2;n++)for(let s=n==1?t:this.unplaced.openStart;s>=0;s--){let i,o=null;s?(o=lS(this.unplaced.content,s-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:h}=this.frontier[u],p,m=null;if(n==1&&(l?h.matchType(l.type)||(m=h.fillBefore(Fe.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:s,frontierDepth:u,parent:o,inject:m};if(n==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:s,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:t,openStart:n,openEnd:s}=this.unplaced,i=lS(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new it(t,n+1,Math.max(s,i.size+n>=t.size-s?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:s}=this.unplaced,i=lS(t,n);if(i.childCount<=1&&n>0){let o=t.size-n<=n+i.size;this.unplaced=new it(Vp(t,n-1,1),n-1,o?n-1:s)}else this.unplaced=new it(Vp(t,n,1),n,s)}placeNodes({sliceDepth:t,frontierDepth:n,parent:s,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let C=0;C<o.length;C++)this.openFrontierNode(o[C]);let l=this.unplaced,u=s?s.content:l.content,d=l.openStart-t,h=0,p=[],{match:m,type:x}=this.frontier[n];if(i){for(let C=0;C<i.childCount;C++)p.push(i.child(C));m=m.matchFragment(i)}let y=u.size+t-(l.content.size-l.openEnd);for(;h<u.childCount;){let C=u.child(h),S=m.matchType(C.type);if(!S)break;h++,(h>1||d==0||C.content.size)&&(m=S,p.push(z5(C.mark(x.allowedMarks(C.marks)),h==1?d:0,h==u.childCount?y:-1)))}let b=h==u.childCount;b||(y=-1),this.placed=Hp(this.placed,n,Fe.from(p)),this.frontier[n].match=m,b&&y<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,S=u;C<y;C++){let E=S.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),S=E.content}this.unplaced=b?t==0?it.empty:new it(Vp(l.content,t-1,1),t-1,y<0?l.openEnd:t-1):new it(Vp(l.content,t,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!cS(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:s}=this.$to,i=this.$to.after(s);for(;s>1&&i==this.$to.end(--s);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:s,type:i}=this.frontier[n],o=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),l=cS(t,n,i,s,o);if(l){for(let u=n-1;u>=0;u--){let{match:d,type:h}=this.frontier[u],p=cS(t,u,h,d,!0);if(!p||p.childCount)continue e}return{depth:n,fit:l,move:o?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Hp(this.placed,n.depth,n.fit)),t=n.move;for(let s=n.depth+1;s<=t.depth;s++){let i=t.node(s),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(s));this.openFrontierNode(i.type,i.attrs,o)}return t}openFrontierNode(t,n=null,s){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Hp(this.placed,this.depth,Fe.from(t.create(n,s))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Fe.empty,!0);n.childCount&&(this.placed=Hp(this.placed,this.frontier.length,n))}}function Vp(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Vp(e.firstChild.content,t-1,n)))}function Hp(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Hp(e.lastChild.content,t-1,n)))}function lS(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function z5(e,t,n){if(t<=0)return e;let s=e.content;return t>1&&(s=s.replaceChild(0,z5(s.firstChild,t-1,s.childCount==1?n-1:0))),t>0&&(s=e.type.contentMatch.fillBefore(s).append(s),n<=0&&(s=s.append(e.type.contentMatch.matchFragment(s).fillBefore(Fe.empty,!0)))),e.copy(s)}function cS(e,t,n,s,i){let o=e.node(t),l=i?e.indexAfter(t):e.index(t);if(l==o.childCount&&!n.compatibleContent(o.type))return null;let u=s.fillBefore(o.content,!0,l);return u&&!eue(n,o.content,l)?u:null}function eue(e,t,n){for(let s=n;s<t.childCount;s++)if(!e.allowsMarks(t.child(s).marks))return!0;return!1}function tue(e){return e.spec.defining||e.spec.definingForContent}function nue(e,t,n,s){if(!s.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(P5(i,o,s))return e.step(new cs(t,n,s));let l=L5(i,e.doc.resolve(n));l[l.length-1]==0&&l.pop();let u=-(i.depth+1);l.unshift(u);for(let x=i.depth,y=i.pos-1;x>0;x--,y--){let b=i.node(x).type.spec;if(b.defining||b.definingAsContext||b.isolating)break;l.indexOf(x)>-1?u=x:i.before(x)==y&&l.splice(1,0,-x)}let d=l.indexOf(u),h=[],p=s.openStart;for(let x=s.content,y=0;;y++){let b=x.firstChild;if(h.push(b),y==s.openStart)break;x=b.content}for(let x=p-1;x>=0;x--){let y=h[x],b=tue(y.type);if(b&&!y.sameMarkup(i.node(Math.abs(u)-1)))p=x;else if(b||!y.type.isTextblock)break}for(let x=s.openStart;x>=0;x--){let y=(x+p+1)%(s.openStart+1),b=h[y];if(b)for(let C=0;C<l.length;C++){let S=l[(C+d)%l.length],E=!0;S<0&&(E=!1,S=-S);let k=i.node(S-1),A=i.index(S-1);if(k.canReplaceWith(A,A,b.type,b.marks))return e.replace(i.before(S),E?o.after(S):n,new it(I5(s.content,0,s.openStart,y),y,s.openEnd))}}let m=e.steps.length;for(let x=l.length-1;x>=0&&(e.replace(t,n,s),!(e.steps.length>m));x--){let y=l[x];y<0||(t=i.before(y),n=o.after(y))}}function I5(e,t,n,s,i){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(I5(o.content,t+1,n,s,o)))}if(t>s){let o=i.contentMatchAt(0),l=o.fillBefore(e).append(e);e=l.append(o.matchFragment(l).fillBefore(Fe.empty,!0))}return e}function rue(e,t,n,s){if(!s.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=Qce(e.doc,t,s.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new it(Fe.from(s),0,0))}function sue(e,t,n){let s=e.doc.resolve(t),i=e.doc.resolve(n),o=L5(s,i);for(let l=0;l<o.length;l++){let u=o[l],d=l==o.length-1;if(d&&u==0||s.node(u).type.contentMatch.validEnd)return e.delete(s.start(u),i.end(u));if(u>0&&(d||s.node(u-1).canReplace(s.index(u-1),i.indexAfter(u-1))))return e.delete(s.before(u),i.after(u))}for(let l=1;l<=s.depth&&l<=i.depth;l++)if(t-s.start(l)==s.depth-l&&n>s.end(l)&&i.end(l)-n!=i.depth-l&&s.start(l-1)==i.start(l-1)&&s.node(l-1).canReplace(s.index(l-1),i.index(l-1)))return e.delete(s.before(l),n);e.delete(t,n)}function L5(e,t){let n=[],s=Math.min(e.depth,t.depth);for(let i=s;i>=0;i--){let o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&n.push(i)}return n}class Ih extends Ps{constructor(t,n,s){super(),this.pos=t,this.attr=n,this.value=s}apply(t){let n=t.nodeAt(this.pos);if(!n)return Gr.fail("No node at attribute step's position");let s=Object.create(null);for(let o in n.attrs)s[o]=n.attrs[o];s[this.attr]=this.value;let i=n.type.create(s,null,n.marks);return Gr.fromReplace(t,this.pos,this.pos+1,new it(Fe.from(i),0,n.isLeaf?0:1))}getMap(){return Ci.empty}invert(t){return new Ih(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ih(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ih(n.pos,n.attr,n.value)}}Ps.jsonID("attr",Ih);class Fm extends Ps{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let s=t.type.create(n,t.content,t.marks);return Gr.ok(s)}getMap(){return Ci.empty}invert(t){return new Fm(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Fm(n.attr,n.value)}}Ps.jsonID("docAttr",Fm);let Xh=class extends Error{};Xh=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Xh.prototype=Object.create(Error.prototype);Xh.prototype.constructor=Xh;Xh.prototype.name="TransformError";class _5{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new $m}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Xh(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,s=it.empty){let i=Nb(this.doc,t,n,s);return i&&this.step(i),this}replaceWith(t,n,s){return this.replace(t,n,new it(Fe.from(s),0,0))}delete(t,n){return this.replace(t,n,it.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,s){return nue(this,t,n,s),this}replaceRangeWith(t,n,s){return rue(this,t,n,s),this}deleteRange(t,n){return sue(this,t,n),this}lift(t,n){return Vce(this,t,n),this}join(t,n=1){return Jce(this,t,n),this}wrap(t,n){return Wce(this,t,n),this}setBlockType(t,n=t,s,i=null){return qce(this,t,n,s,i),this}setNodeMarkup(t,n,s=null,i){return Yce(this,t,n,s,i),this}setNodeAttribute(t,n,s){return this.step(new Ih(t,n,s)),this}setDocAttribute(t,n){return this.step(new Fm(t,n)),this}addNodeMark(t,n){return this.step(new pc(t,n)),this}removeNodeMark(t,n){let s=this.doc.nodeAt(t);if(!s)throw new RangeError("No node at position "+t);if(n instanceof Kn)n.isInSet(s.marks)&&this.step(new nd(t,n));else{let i=s.marks,o,l=[];for(;o=n.isInSet(i);)l.push(new nd(t,o)),i=o.removeFromSet(i);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(t,n=1,s){return Kce(this,t,n,s),this}addMark(t,n,s){return Bce(this,t,n,s),this}removeMark(t,n,s){return $ce(this,t,n,s),this}clearIncompatible(t,n,s){return zE(this,t,n,s),this}}const uS=Object.create(null);class qt{constructor(t,n,s){this.$anchor=t,this.$head=n,this.ranges=s||[new iue(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=it.empty){let s=n.content.lastChild,i=null;for(let u=0;u<n.openEnd;u++)i=s,s=s.lastChild;let o=t.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:d,$to:h}=l[u],p=t.mapping.slice(o);t.replaceRange(p.map(d.pos),p.map(h.pos),u?it.empty:n),u==0&&AN(t,o,(s?s.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let s=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:u}=i[o],d=t.mapping.slice(s),h=d.map(l.pos),p=d.map(u.pos);o?t.deleteRange(h,p):(t.replaceRangeWith(h,p,n),AN(t,s,n.isInline?-1:1))}}static findFrom(t,n,s=!1){let i=t.parent.inlineContent?new Bt(t):lh(t.node(0),t.parent,t.pos,t.index(),n,s);if(i)return i;for(let o=t.depth-1;o>=0;o--){let l=n<0?lh(t.node(0),t.node(o),t.before(o+1),t.index(o),n,s):lh(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,n,s);if(l)return l}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Ti(t.node(0))}static atStart(t){return lh(t,t,0,0,1)||new Ti(t)}static atEnd(t){return lh(t,t,t.content.size,t.childCount,-1)||new Ti(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=uS[n.type];if(!s)throw new RangeError(`No selection type ${n.type} defined`);return s.fromJSON(t,n)}static jsonID(t,n){if(t in uS)throw new RangeError("Duplicate use of selection JSON ID "+t);return uS[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Bt.between(this.$anchor,this.$head).getBookmark()}}qt.prototype.visible=!0;class iue{constructor(t,n){this.$from=t,this.$to=n}}let EN=!1;function kN(e){!EN&&!e.parent.inlineContent&&(EN=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Bt extends qt{constructor(t,n=t){kN(t),kN(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let s=t.resolve(n.map(this.head));if(!s.parent.inlineContent)return qt.near(s);let i=t.resolve(n.map(this.anchor));return new Bt(i.parent.inlineContent?i:s,s)}replace(t,n=it.empty){if(super.replace(t,n),n==it.empty){let s=this.$from.marksAcross(this.$to);s&&t.ensureMarks(s)}}eq(t){return t instanceof Bt&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Pb(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Bt(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,s=n){let i=t.resolve(n);return new this(i,s==n?i:t.resolve(s))}static between(t,n,s){let i=t.pos-n.pos;if((!s||i)&&(s=i>=0?1:-1),!n.parent.inlineContent){let o=qt.findFrom(n,s,!0)||qt.findFrom(n,-s,!0);if(o)n=o.$head;else return qt.near(n,s)}return t.parent.inlineContent||(i==0?t=n:(t=(qt.findFrom(t,-s,!0)||qt.findFrom(t,s,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Bt(t,n)}}qt.jsonID("text",Bt);class Pb{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Pb(t.map(this.anchor),t.map(this.head))}resolve(t){return Bt.between(t.resolve(this.anchor),t.resolve(this.head))}}class At extends qt{constructor(t){let n=t.nodeAfter,s=t.node(0).resolve(t.pos+n.nodeSize);super(t,s),this.node=n}map(t,n){let{deleted:s,pos:i}=n.mapResult(this.anchor),o=t.resolve(i);return s?qt.near(o):new At(o)}content(){return new it(Fe.from(this.node),0,0)}eq(t){return t instanceof At&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new LE(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new At(t.resolve(n.anchor))}static create(t,n){return new At(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}At.prototype.visible=!1;qt.jsonID("node",At);class LE{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:s}=t.mapResult(this.anchor);return n?new Pb(s,s):new LE(s)}resolve(t){let n=t.resolve(this.anchor),s=n.nodeAfter;return s&&At.isSelectable(s)?new At(n):qt.near(n)}}class Ti extends qt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=it.empty){if(n==it.empty){t.delete(0,t.doc.content.size);let s=qt.atStart(t.doc);s.eq(t.selection)||t.setSelection(s)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Ti(t)}map(t){return new Ti(t)}eq(t){return t instanceof Ti}getBookmark(){return oue}}qt.jsonID("all",Ti);const oue={map(){return this},resolve(e){return new Ti(e)}};function lh(e,t,n,s,i,o=!1){if(t.inlineContent)return Bt.create(e,n);for(let l=s-(i>0?0:1);i>0?l<t.childCount:l>=0;l+=i){let u=t.child(l);if(u.isAtom){if(!o&&At.isSelectable(u))return At.create(e,n-(i<0?u.nodeSize:0))}else{let d=lh(e,u,n+i,i<0?u.childCount:0,i,o);if(d)return d}n+=u.nodeSize*i}return null}function AN(e,t,n){let s=e.steps.length-1;if(s<t)return;let i=e.steps[s];if(!(i instanceof cs||i instanceof ds))return;let o=e.mapping.maps[s],l;o.forEach((u,d,h,p)=>{l==null&&(l=p)}),e.setSelection(qt.near(e.doc.resolve(l),n))}const TN=1,Jx=2,MN=4;class aue extends _5{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|TN)&~Jx,this.storedMarks=null,this}get selectionSet(){return(this.updated&TN)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Jx,this}ensureMarks(t){return Kn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Jx)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Jx,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let s=this.selection;return n&&(t=t.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||Kn.none))),s.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,s){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(s==null&&(s=n),!t)return this.deleteRange(n,s);let o=this.storedMarks;if(!o){let l=this.doc.resolve(n);o=s==n?l.marks():l.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(n,s,i.text(t,o)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(qt.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=MN,this}get scrolledIntoView(){return(this.updated&MN)>0}}function RN(e,t){return!t||!e?e:e.bind(t)}class Up{constructor(t,n,s){this.name=t,this.init=RN(n.init,s),this.apply=RN(n.apply,s)}}const lue=[new Up("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Up("selection",{init(e,t){return e.selection||qt.atStart(t.doc)},apply(e){return e.selection}}),new Up("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,s){return s.selection.$cursor?e.storedMarks:null}}),new Up("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class dS{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=lue.slice(),n&&n.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new Up(s.key,s.spec.state,s))})}}class Eh{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=n){let i=this.config.plugins[s];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],s=this.applyInner(t),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let d=i?i[l].n:0,h=i?i[l].state:this,p=d<n.length&&u.spec.appendTransaction.call(u,d?n.slice(d):n,h,s);if(p&&s.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",t),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<l?{state:s,n:n.length}:{state:this,n:0})}n.push(p),s=s.applyInner(p),o=!0}i&&(i[l]={state:s,n:n.length})}}if(!o)return{state:s,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Eh(this.config),s=this.config.fields;for(let i=0;i<s.length;i++){let o=s[i];n[o.name]=o.apply(t,this[o.name],this,n)}return n}get tr(){return new aue(this)}static create(t){let n=new dS(t.doc?t.doc.type.schema:t.schema,t.plugins),s=new Eh(n);for(let i=0;i<n.fields.length;i++)s[n.fields[i].name]=n.fields[i].init(t,s);return s}reconfigure(t){let n=new dS(this.schema,t.plugins),s=n.fields,i=new Eh(n);for(let o=0;o<s.length;o++){let l=s[o].name;i[l]=this.hasOwnProperty(l)?this[l]:s[o].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(s=>s.toJSON())),t&&typeof t=="object")for(let s in t){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[s],o=i.spec.state;o&&o.toJSON&&(n[s]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,s){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new dS(t.schema,t.plugins),o=new Eh(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=bc.fromJSON(t.schema,n.doc);else if(l.name=="selection")o.selection=qt.fromJSON(o.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(s)for(let u in s){let d=s[u],h=d.spec.state;if(d.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){o[l.name]=h.fromJSON.call(d,t,n[u],o);return}}o[l.name]=l.init(t,o)}}),o}}function B5(e,t,n){for(let s in e){let i=e[s];i instanceof Function?i=i.bind(t):s=="handleDOMEvents"&&(i=B5(i,t,{})),n[s]=i}return n}class Rr{constructor(t){this.spec=t,this.props={},t.props&&B5(t.props,this,this.props),this.key=t.key?t.key.key:$5("plugin")}getState(t){return t[this.key]}}const hS=Object.create(null);function $5(e){return e in hS?e+"$"+ ++hS[e]:(hS[e]=0,e+"$")}class fs{constructor(t="key"){this.key=$5(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const _E=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function F5(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const V5=(e,t,n)=>{let s=F5(e,n);if(!s)return!1;let i=BE(s);if(!i){let l=s.blockRange(),u=l&&hf(l);return u==null?!1:(t&&t(e.tr.lift(l,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(J5(e,i,t,-1))return!0;if(s.parent.content.size==0&&(Jh(o,"end")||At.isSelectable(o)))for(let l=s.depth;;l--){let u=Nb(e.doc,s.before(l),s.after(l),it.empty);if(u&&u.slice.size<u.to-u.from){if(t){let d=e.tr.step(u);d.setSelection(Jh(o,"end")?qt.findFrom(d.doc.resolve(d.mapping.map(i.pos,-1)),-1):At.create(d.doc,i.pos-o.nodeSize)),t(d.scrollIntoView())}return!0}if(l==1||s.node(l-1).childCount>1)break}return o.isAtom&&i.depth==s.depth-1?(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},cue=(e,t,n)=>{let s=F5(e,n);if(!s)return!1;let i=BE(s);return i?H5(e,i,t):!1},uue=(e,t,n)=>{let s=W5(e,n);if(!s)return!1;let i=$E(s);return i?H5(e,i,t):!1};function H5(e,t,n){let s=t.nodeBefore,i=s,o=t.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let l=t.nodeAfter,u=l,d=t.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=Nb(e.doc,o,d,it.empty);if(!h||h.from!=o||h instanceof cs&&h.slice.size>=d-o)return!1;if(n){let p=e.tr.step(h);p.setSelection(Bt.create(p.doc,o)),n(p.scrollIntoView())}return!0}function Jh(e,t,n=!1){for(let s=e;s;s=t=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(n&&s.childCount!=1)return!1}return!1}const U5=(e,t,n)=>{let{$head:s,empty:i}=e.selection,o=s;if(!i)return!1;if(s.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):s.parentOffset>0)return!1;o=BE(s)}let l=o&&o.nodeBefore;return!l||!At.isSelectable(l)?!1:(t&&t(e.tr.setSelection(At.create(e.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function BE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function W5(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const q5=(e,t,n)=>{let s=W5(e,n);if(!s)return!1;let i=$E(s);if(!i)return!1;let o=i.nodeAfter;if(J5(e,i,t,1))return!0;if(s.parent.content.size==0&&(Jh(o,"start")||At.isSelectable(o))){let l=Nb(e.doc,s.before(),s.after(),it.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(Jh(o,"start")?qt.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):At.create(u.doc,u.mapping.map(i.pos))),t(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==s.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},G5=(e,t,n)=>{let{$head:s,empty:i}=e.selection,o=s;if(!i)return!1;if(s.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):s.parentOffset<s.parent.content.size)return!1;o=$E(s)}let l=o&&o.nodeAfter;return!l||!At.isSelectable(l)?!1:(t&&t(e.tr.setSelection(At.create(e.doc,o.pos)).scrollIntoView()),!0)};function $E(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const due=(e,t)=>{let n=e.selection,s=n instanceof At,i;if(s){if(n.node.isTextblock||!Lc(e.doc,n.from))return!1;i=n.from}else if(i=Ob(e.doc,n.from,-1),i==null)return!1;if(t){let o=e.tr.join(i);s&&o.setSelection(At.create(o.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0},hue=(e,t)=>{let n=e.selection,s;if(n instanceof At){if(n.node.isTextblock||!Lc(e.doc,n.to))return!1;s=n.to}else if(s=Ob(e.doc,n.to,1),s==null)return!1;return t&&t(e.tr.join(s).scrollIntoView()),!0},fue=(e,t)=>{let{$from:n,$to:s}=e.selection,i=n.blockRange(s),o=i&&hf(i);return o==null?!1:(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},Y5=(e,t)=>{let{$head:n,$anchor:s}=e.selection;return!n.parent.type.spec.code||!n.sameParent(s)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function FE(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const pue=(e,t)=>{let{$head:n,$anchor:s}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(s))return!1;let i=n.node(-1),o=n.indexAfter(-1),l=FE(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(t){let u=n.after(),d=e.tr.replaceWith(u,u,l.createAndFill());d.setSelection(qt.near(d.doc.resolve(u),1)),t(d.scrollIntoView())}return!0},K5=(e,t)=>{let n=e.selection,{$from:s,$to:i}=n;if(n instanceof Ti||s.parent.inlineContent||i.parent.inlineContent)return!1;let o=FE(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let l=(!s.parentOffset&&i.index()<i.parent.childCount?s:i).pos,u=e.tr.insert(l,o.createAndFill());u.setSelection(Bt.create(u.doc,l+1)),t(u.scrollIntoView())}return!0},X5=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(cl(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let s=n.blockRange(),i=s&&hf(s);return i==null?!1:(t&&t(e.tr.lift(s,i).scrollIntoView()),!0)};function mue(e){return(t,n)=>{let{$from:s,$to:i}=t.selection;if(t.selection instanceof At&&t.selection.node.isBlock)return!s.parentOffset||!cl(t.doc,s.pos)?!1:(n&&n(t.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let o=[],l,u,d=!1,h=!1;for(let y=s.depth;;y--)if(s.node(y).isBlock){d=s.end(y)==s.pos+(s.depth-y),h=s.start(y)==s.pos-(s.depth-y),u=FE(s.node(y-1).contentMatchAt(s.indexAfter(y-1))),o.unshift(d&&u?{type:u}:null),l=y;break}else{if(y==1)return!1;o.unshift(null)}let p=t.tr;(t.selection instanceof Bt||t.selection instanceof Ti)&&p.deleteSelection();let m=p.mapping.map(s.pos),x=cl(p.doc,m,o.length,o);if(x||(o[0]=u?{type:u}:null,x=cl(p.doc,m,o.length,o)),!x)return!1;if(p.split(m,o.length,o),!d&&h&&s.node(l).type!=u){let y=p.mapping.map(s.before(l)),b=p.doc.resolve(y);u&&s.node(l-1).canReplaceWith(b.index(),b.index()+1,u)&&p.setNodeMarkup(p.mapping.map(s.before(l)),u)}return n&&n(p.scrollIntoView()),!0}}const gue=mue(),xue=(e,t)=>{let{$from:n,to:s}=e.selection,i,o=n.sharedDepth(s);return o==0?!1:(i=n.before(o),t&&t(e.tr.setSelection(At.create(e.doc,i))),!0)};function yue(e,t,n){let s=t.nodeBefore,i=t.nodeAfter,o=t.index();return!s||!i||!s.type.compatibleContent(i.type)?!1:!s.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-s.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||Lc(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function J5(e,t,n,s){let i=t.nodeBefore,o=t.nodeAfter,l,u,d=i.type.spec.isolating||o.type.spec.isolating;if(!d&&yue(e,t,n))return!0;let h=!d&&t.parent.canReplace(t.index(),t.index()+1);if(h&&(l=(u=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(n){let y=t.pos+o.nodeSize,b=Fe.empty;for(let E=l.length-1;E>=0;E--)b=Fe.from(l[E].create(null,b));b=Fe.from(i.copy(b));let C=e.tr.step(new ds(t.pos-1,y,t.pos,y,new it(b,1,0),l.length,!0)),S=C.doc.resolve(y+2*l.length);S.nodeAfter&&S.nodeAfter.type==i.type&&Lc(C.doc,S.pos)&&C.join(S.pos),n(C.scrollIntoView())}return!0}let p=o.type.spec.isolating||s>0&&d?null:qt.findFrom(t,1),m=p&&p.$from.blockRange(p.$to),x=m&&hf(m);if(x!=null&&x>=t.depth)return n&&n(e.tr.lift(m,x).scrollIntoView()),!0;if(h&&Jh(o,"start",!0)&&Jh(i,"end")){let y=i,b=[];for(;b.push(y),!y.isTextblock;)y=y.lastChild;let C=o,S=1;for(;!C.isTextblock;C=C.firstChild)S++;if(y.canReplace(y.childCount,y.childCount,C.content)){if(n){let E=Fe.empty;for(let A=b.length-1;A>=0;A--)E=Fe.from(b[A].copy(E));let k=e.tr.step(new ds(t.pos-b.length,t.pos+o.nodeSize,t.pos+S,t.pos+o.nodeSize-S,new it(E,b.length,0),0,!0));n(k.scrollIntoView())}return!0}}return!1}function Q5(e){return function(t,n){let s=t.selection,i=e<0?s.$from:s.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(t.tr.setSelection(Bt.create(t.doc,e<0?i.start(o):i.end(o)))),!0):!1}}const bue=Q5(-1),vue=Q5(1);function jue(e,t=null){return function(n,s){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),u=l&&IE(l,e,t);return u?(s&&s(n.tr.wrap(l,u).scrollIntoView()),!0):!1}}function DN(e,t=null){return function(n,s){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];n.doc.nodesBetween(l,u,(d,h)=>{if(i)return!1;if(!(!d.isTextblock||d.hasMarkup(e,t)))if(d.type==e)i=!0;else{let p=n.doc.resolve(h),m=p.index();i=p.parent.canReplaceWith(m,m+1,e)}})}if(!i)return!1;if(s){let o=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:d}}=n.selection.ranges[l];o.setBlockType(u,d,e,t)}s(o.scrollIntoView())}return!0}}function VE(...e){return function(t,n,s){for(let i=0;i<e.length;i++)if(e[i](t,n,s))return!0;return!1}}VE(_E,V5,U5);VE(_E,q5,G5);VE(Y5,K5,X5,gue);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Sue(e,t=null){return function(n,s){let{$from:i,$to:o}=n.selection,l=i.blockRange(o);if(!l)return!1;let u=s?n.tr:null;return Cue(u,l,e,t)?(s&&s(u.scrollIntoView()),!0):!1}}function Cue(e,t,n,s=null){let i=!1,o=t,l=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let d=l.resolve(t.start-2);o=new dy(d,d,t.depth),t.endIndex<t.parent.childCount&&(t=new dy(t.$from,l.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let u=IE(o,n,s,t);return u?(e&&wue(e,t,u,i,n),!0):!1}function wue(e,t,n,s,i){let o=Fe.empty;for(let p=n.length-1;p>=0;p--)o=Fe.from(n[p].type.create(n[p].attrs,o));e.step(new ds(t.start-(s?2:0),t.end,t.start,t.end,new it(o,0,0),n.length,!0));let l=0;for(let p=0;p<n.length;p++)n[p].type==i&&(l=p+1);let u=n.length-l,d=t.start+n.length-(s?2:0),h=t.parent;for(let p=t.startIndex,m=t.endIndex,x=!0;p<m;p++,x=!1)!x&&cl(e.doc,d,u)&&(e.split(d,u),d+=2*u),d+=h.child(p).nodeSize;return e}function Eue(e){return function(t,n){let{$from:s,$to:i}=t.selection,o=s.blockRange(i,l=>l.childCount>0&&l.firstChild.type==e);return o?n?s.node(o.depth-1).type==e?kue(t,n,e,o):Aue(t,n,o):!0:!1}}function kue(e,t,n,s){let i=e.tr,o=s.end,l=s.$to.end(s.depth);o<l&&(i.step(new ds(o-1,l,o,l,new it(Fe.from(n.create(null,s.parent.copy())),1,0),1,!0)),s=new dy(i.doc.resolve(s.$from.pos),i.doc.resolve(l),s.depth));const u=hf(s);if(u==null)return!1;i.lift(s,u);let d=i.doc.resolve(i.mapping.map(o,-1)-1);return Lc(i.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&i.join(d.pos),t(i.scrollIntoView()),!0}function Aue(e,t,n){let s=e.tr,i=n.parent;for(let y=n.end,b=n.endIndex-1,C=n.startIndex;b>C;b--)y-=i.child(b).nodeSize,s.delete(y-1,y+1);let o=s.doc.resolve(n.start),l=o.nodeAfter;if(s.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,d=n.endIndex==i.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(d?Fe.empty:Fe.from(i))))return!1;let m=o.pos,x=m+l.nodeSize;return s.step(new ds(m-(u?1:0),x+(d?1:0),m+1,x-1,new it((u?Fe.empty:Fe.from(i.copy(Fe.empty))).append(d?Fe.empty:Fe.from(i.copy(Fe.empty))),u?0:1,d?0:1),u?0:1)),t(s.scrollIntoView()),!0}function Tue(e){return function(t,n){let{$from:s,$to:i}=t.selection,o=s.blockRange(i,h=>h.childCount>0&&h.firstChild.type==e);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,d=u.child(l-1);if(d.type!=e)return!1;if(n){let h=d.lastChild&&d.lastChild.type==u.type,p=Fe.from(h?e.create():null),m=new it(Fe.from(e.create(null,Fe.from(u.type.create(null,p)))),h?3:1,0),x=o.start,y=o.end;n(t.tr.step(new ds(x-(h?3:1),y,x,y,m,1,!0)).scrollIntoView())}return!0}}const js=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Qh=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let sw=null;const Ka=function(e,t,n){let s=sw||(sw=document.createRange());return s.setEnd(e,n??e.nodeValue.length),s.setStart(e,t||0),s},Mue=function(){sw=null},rd=function(e,t,n,s){return n&&(ON(e,t,n,s,-1)||ON(e,t,n,s,1))},Rue=/^(img|br|input|textarea|hr)$/i;function ON(e,t,n,s,i){for(var o;;){if(e==n&&t==s)return!0;if(t==(i<0?0:Qi(e))){let l=e.parentNode;if(!l||l.nodeType!=1||xg(e)||Rue.test(e.nodeName)||e.contentEditable=="false")return!1;t=js(e)+(i<0?0:1),e=l}else if(e.nodeType==1){let l=e.childNodes[t+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)t+=i;else return!1;else e=l,t=i<0?Qi(e):0}else return!1}}function Qi(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Due(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Qi(e)}else if(e.parentNode&&!xg(e))t=js(e),e=e.parentNode;else return null}}function Oue(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!xg(e))t=js(e)+1,e=e.parentNode;else return null}}function Nue(e,t,n){for(let s=t==0,i=t==Qi(e);s||i;){if(e==n)return!0;let o=js(e);if(e=e.parentNode,!e)return!1;s=s&&o==0,i=i&&o==Qi(e)}}function xg(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const zb=function(e){return e.focusNode&&rd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function gu(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Pue(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function zue(e,t,n){if(e.caretPositionFromPoint)try{let s=e.caretPositionFromPoint(t,n);if(s)return{node:s.offsetNode,offset:Math.min(Qi(s.offsetNode),s.offset)}}catch{}if(e.caretRangeFromPoint){let s=e.caretRangeFromPoint(t,n);if(s)return{node:s.startContainer,offset:Math.min(Qi(s.startContainer),s.startOffset)}}}const ua=typeof navigator<"u"?navigator:null,NN=typeof document<"u"?document:null,_c=ua&&ua.userAgent||"",iw=/Edge\/(\d+)/.exec(_c),Z5=/MSIE \d/.exec(_c),ow=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_c),li=!!(Z5||ow||iw),jc=Z5?document.documentMode:ow?+ow[1]:iw?+iw[1]:0,to=!li&&/gecko\/(\d+)/i.test(_c);to&&+(/Firefox\/(\d+)/.exec(_c)||[0,0])[1];const aw=!li&&/Chrome\/(\d+)/.exec(_c),Ns=!!aw,e_=aw?+aw[1]:0,qs=!li&&!!ua&&/Apple Computer/.test(ua.vendor),Zh=qs&&(/Mobile\/\w+/.test(_c)||!!ua&&ua.maxTouchPoints>2),Xi=Zh||(ua?/Mac/.test(ua.platform):!1),Iue=ua?/Win/.test(ua.platform):!1,sl=/Android \d/.test(_c),yg=!!NN&&"webkitFontSmoothing"in NN.documentElement.style,Lue=yg?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function _ue(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ha(e,t){return typeof e=="number"?e:e[t]}function Bue(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,s=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*s}}function PN(e,t,n){let s=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let l=n||e.dom;l;){if(l.nodeType!=1){l=Qh(l);continue}let u=l,d=u==o.body,h=d?_ue(o):Bue(u),p=0,m=0;if(t.top<h.top+Ha(s,"top")?m=-(h.top-t.top+Ha(i,"top")):t.bottom>h.bottom-Ha(s,"bottom")&&(m=t.bottom-t.top>h.bottom-h.top?t.top+Ha(i,"top")-h.top:t.bottom-h.bottom+Ha(i,"bottom")),t.left<h.left+Ha(s,"left")?p=-(h.left-t.left+Ha(i,"left")):t.right>h.right-Ha(s,"right")&&(p=t.right-h.right+Ha(i,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let y=u.scrollLeft,b=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let C=u.scrollLeft-y,S=u.scrollTop-b;t={left:t.left-C,top:t.top-S,right:t.right-C,bottom:t.bottom-S}}let x=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(x))break;l=x=="absolute"?l.offsetParent:Qh(l)}}function $ue(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),s,i;for(let o=(t.left+t.right)/2,l=n+1;l<Math.min(innerHeight,t.bottom);l+=5){let u=e.root.elementFromPoint(o,l);if(!u||u==e.dom||!e.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=n-20){s=u,i=d.top;break}}return{refDOM:s,refTop:i,stack:t_(e.dom)}}function t_(e){let t=[],n=e.ownerDocument;for(let s=e;s&&(t.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),e!=n);s=Qh(s));return t}function Fue({refDOM:e,refTop:t,stack:n}){let s=e?e.getBoundingClientRect().top:0;n_(n,s==0?0:s-t)}function n_(e,t){for(let n=0;n<e.length;n++){let{dom:s,top:i,left:o}=e[n];s.scrollTop!=i+t&&(s.scrollTop=i+t),s.scrollLeft!=o&&(s.scrollLeft=o)}}let ih=null;function Vue(e){if(e.setActive)return e.setActive();if(ih)return e.focus(ih);let t=t_(e);e.focus(ih==null?{get preventScroll(){return ih={preventScroll:!0},!0}}:void 0),ih||(ih=!1,n_(t,0))}function r_(e,t){let n,s=2e8,i,o=0,l=t.top,u=t.top,d,h;for(let p=e.firstChild,m=0;p;p=p.nextSibling,m++){let x;if(p.nodeType==1)x=p.getClientRects();else if(p.nodeType==3)x=Ka(p).getClientRects();else continue;for(let y=0;y<x.length;y++){let b=x[y];if(b.top<=l&&b.bottom>=u){l=Math.max(b.bottom,l),u=Math.min(b.top,u);let C=b.left>t.left?b.left-t.left:b.right<t.left?t.left-b.right:0;if(C<s){n=p,s=C,i=C&&n.nodeType==3?{left:b.right<t.left?b.right:b.left,top:t.top}:t,p.nodeType==1&&C&&(o=m+(t.left>=(b.left+b.right)/2?1:0));continue}}else b.top>t.top&&!d&&b.left<=t.left&&b.right>=t.left&&(d=p,h={left:Math.max(b.left,Math.min(b.right,t.left)),top:b.top});!n&&(t.left>=b.right&&t.top>=b.top||t.left>=b.left&&t.top>=b.bottom)&&(o=m+1)}}return!n&&d&&(n=d,i=h,s=0),n&&n.nodeType==3?Hue(n,i):!n||s&&n.nodeType==1?{node:e,offset:o}:r_(n,i)}function Hue(e,t){let n=e.nodeValue.length,s=document.createRange();for(let i=0;i<n;i++){s.setEnd(e,i+1),s.setStart(e,i);let o=oc(s,1);if(o.top!=o.bottom&&HE(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function HE(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Uue(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function Wue(e,t,n){let{node:s,offset:i}=r_(t,n),o=-1;if(s.nodeType==1&&!s.firstChild){let l=s.getBoundingClientRect();o=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return e.docView.posFromDOM(s,i,o)}function que(e,t,n,s){let i=-1;for(let o=t,l=!1;o!=e.dom;){let u=e.docView.nearestDesc(o,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&d.left>s.left||d.top>s.top?i=u.posBefore:(!l&&d.right<s.left||d.bottom<s.top)&&(i=u.posAfter),l=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?s.top<(d.top+d.bottom)/2:s.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function s_(e,t,n){let s=e.childNodes.length;if(s&&n.top<n.bottom)for(let i=Math.max(0,Math.min(s-1,Math.floor(s*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let l=e.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let d=0;d<u.length;d++){let h=u[d];if(HE(t,h))return s_(l,t,h)}}if((o=(o+1)%s)==i)break}return e}function Gue(e,t){let n=e.dom.ownerDocument,s,i=0,o=zue(n,t.left,t.top);o&&({node:s,offset:i}=o);let l=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),u;if(!l||!e.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=e.dom.getBoundingClientRect();if(!HE(t,h)||(l=s_(e.dom,t,h),!l))return null}if(qs)for(let h=l;s&&h;h=Qh(h))h.draggable&&(s=void 0);if(l=Uue(l,t),s){if(to&&s.nodeType==1&&(i=Math.min(i,s.childNodes.length),i<s.childNodes.length)){let p=s.childNodes[i],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=t.left&&m.bottom>t.top&&i++}let h;yg&&i&&s.nodeType==1&&(h=s.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=t.top&&i--,s==e.dom&&i==s.childNodes.length-1&&s.lastChild.nodeType==1&&t.top>s.lastChild.getBoundingClientRect().bottom?u=e.state.doc.content.size:(i==0||s.nodeType!=1||s.childNodes[i-1].nodeName!="BR")&&(u=que(e,s,i,t))}u==null&&(u=Wue(e,l,t));let d=e.docView.nearestDesc(l,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function zN(e){return e.top<e.bottom||e.left<e.right}function oc(e,t){let n=e.getClientRects();if(n.length){let s=n[t<0?0:n.length-1];if(zN(s))return s}return Array.prototype.find.call(n,zN)||e.getBoundingClientRect()}const Yue=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function i_(e,t,n){let{node:s,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),l=yg||to;if(s.nodeType==3)if(l&&(Yue.test(s.nodeValue)||(n<0?!i:i==s.nodeValue.length))){let d=oc(Ka(s,i,i),n);if(to&&i&&/\s/.test(s.nodeValue[i-1])&&i<s.nodeValue.length){let h=oc(Ka(s,i-1,i-1),-1);if(h.top==d.top){let p=oc(Ka(s,i,i+1),-1);if(p.top!=d.top)return wp(p,p.left<h.left)}}return d}else{let d=i,h=i,p=n<0?1:-1;return n<0&&!i?(h++,p=-1):n>=0&&i==s.nodeValue.length?(d--,p=1):n<0?d--:h++,wp(oc(Ka(s,d,h),p),p<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Qi(s))){let d=s.childNodes[i-1];if(d.nodeType==1)return fS(d.getBoundingClientRect(),!1)}if(o==null&&i<Qi(s)){let d=s.childNodes[i];if(d.nodeType==1)return fS(d.getBoundingClientRect(),!0)}return fS(s.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Qi(s))){let d=s.childNodes[i-1],h=d.nodeType==3?Ka(d,Qi(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return wp(oc(h,1),!1)}if(o==null&&i<Qi(s)){let d=s.childNodes[i];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?Ka(d,0,l?0:1):d.nodeType==1?d:null:null;if(h)return wp(oc(h,-1),!0)}return wp(oc(s.nodeType==3?Ka(s):s,-n),n>=0)}function wp(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function fS(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function o_(e,t,n){let s=e.state,i=e.root.activeElement;s!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{s!=t&&e.updateState(s),i!=e.dom&&i&&i.focus()}}function Kue(e,t,n){let s=t.selection,i=n=="up"?s.$from:s.$to;return o_(e,t,()=>{let{node:o}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let u=e.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=i_(e,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Ka(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const Xue=/[\u0590-\u08ac]/;function Jue(e,t,n){let{$head:s}=t.selection;if(!s.parent.isTextblock)return!1;let i=s.parentOffset,o=!i,l=i==s.parent.content.size,u=e.domSelection();return u?!Xue.test(s.parent.textContent)||!u.modify?n=="left"||n=="backward"?o:l:o_(e,t,()=>{let{focusNode:d,focusOffset:h,anchorNode:p,anchorOffset:m}=e.domSelectionRange(),x=u.caretBidiLevel;u.modify("move",n,"character");let y=s.depth?e.docView.domAfterPos(s.before()):e.dom,{focusNode:b,focusOffset:C}=e.domSelectionRange(),S=b&&!y.contains(b.nodeType==1?b:b.parentNode)||d==b&&h==C;try{u.collapse(p,m),d&&(d!=p||h!=m)&&u.extend&&u.extend(d,h)}catch{}return x!=null&&(u.caretBidiLevel=x),S}):s.pos==s.start()||s.pos==s.end()}let IN=null,LN=null,_N=!1;function Que(e,t,n){return IN==t&&LN==n?_N:(IN=t,LN=n,_N=n=="up"||n=="down"?Kue(e,t,n):Jue(e,t,n))}const no=0,BN=1,Cu=2,da=3;class bg{constructor(t,n,s,i){this.parent=t,this.children=n,this.dom=s,this.contentDOM=i,this.dirty=no,s.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,s){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,s=this.posAtStart;;n++){let i=this.children[n];if(i==t)return s;s+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,s){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(s<0){let o,l;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(t==this.contentDOM)o=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>js(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??s>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let s=!0,i=t;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!n||o.node))if(s&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(t.nodeType==1?t:t.parentNode):l==t))s=!1;else return o}}getDesc(t){let n=t.pmViewDesc;for(let s=n;s;s=s.parent)if(s==this)return n}posFromDOM(t,n,s){for(let i=t;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(t,n,s)}return-1}descAt(t){for(let n=0,s=0;n<this.children.length;n++){let i=this.children[n],o=s+i.size;if(s==t&&o!=s){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let u=i.children[l];if(u.size){i=u;break}}return i}if(t<o)return i.descAt(t-s-i.border);s=o}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let s=0,i=0;for(let o=0;s<this.children.length;s++){let l=this.children[s],u=o+l.size;if(u>t||l instanceof l_){i=t-o;break}o=u}if(i)return this.children[s].domFromPos(i-this.children[s].border,n);for(let o;s&&!(o=this.children[s-1]).size&&o instanceof a_&&o.side>=0;s--);if(n<=0){let o,l=!0;for(;o=s?this.children[s-1]:null,!(!o||o.dom.parentNode==this.contentDOM);s--,l=!1);return o&&n&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?js(o.dom)+1:0}}else{let o,l=!0;for(;o=s<this.children.length?this.children[s]:null,!(!o||o.dom.parentNode==this.contentDOM);s++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?js(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,s=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=s,u=0;;u++){let d=this.children[u],h=l+d.size;if(i==-1&&t<=h){let p=l+d.border;if(t>=p&&n<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(t,n,p);t=l;for(let m=u;m>0;m--){let x=this.children[m-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){i=js(x.dom)+1;break}t-=x.size}i==-1&&(i=0)}if(i>-1&&(h>n||u==this.children.length-1)){n=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=js(m.dom);break}n+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:s}=this.domFromPos(t,0);if(n.nodeType!=1||s==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[s]}setSelection(t,n,s,i=!1){let o=Math.min(t,n),l=Math.max(t,n);for(let y=0,b=0;y<this.children.length;y++){let C=this.children[y],S=b+C.size;if(o>b&&l<S)return C.setSelection(t-b-C.border,n-b-C.border,s,i);b=S}let u=this.domFromPos(t,t?-1:1),d=n==t?u:this.domFromPos(n,n?-1:1),h=s.root.getSelection(),p=s.domSelectionRange(),m=!1;if((to||qs)&&t==n){let{node:y,offset:b}=u;if(y.nodeType==3){if(m=!!(b&&y.nodeValue[b-1]==`
`),m&&b==y.nodeValue.length)for(let C=y,S;C;C=C.parentNode){if(S=C.nextSibling){S.nodeName=="BR"&&(u=d={node:S.parentNode,offset:js(S)+1});break}let E=C.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let C=y.childNodes[b-1];m=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(to&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let y=p.focusNode.childNodes[p.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||m&&qs)&&rd(u.node,u.offset,p.anchorNode,p.anchorOffset)&&rd(d.node,d.offset,p.focusNode,p.focusOffset))return;let x=!1;if((h.extend||t==n)&&!(m&&to)){h.collapse(u.node,u.offset);try{t!=n&&h.extend(d.node,d.offset),x=!0}catch{}}if(!x){if(t>n){let b=u;u=d,d=b}let y=document.createRange();y.setEnd(d.node,d.offset),y.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(y)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let s=0,i=0;i<this.children.length;i++){let o=this.children[i],l=s+o.size;if(s==l?t<=l&&n>=s:t<l&&n>s){let u=s+o.border,d=l-o.border;if(t>=u&&n<=d){this.dirty=t==s||n==l?Cu:BN,t==u&&n==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=da:o.markDirty(t-u,n-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Cu:da}s=l}this.dirty=Cu}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let s=t==1?Cu:BN;n.dirty<s&&(n.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class a_ extends bg{constructor(t,n,s,i){let o,l=n.type.toDOM;if(typeof l=="function"&&(l=l(s,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(t,[],l,null),this.widget=n,this.widget=n,o=this}matchesWidget(t){return this.dirty==no&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Zue extends bg{constructor(t,n,s,i){super(t,[],n,null),this.textDOM=s,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class sd extends bg{constructor(t,n,s,i,o){super(t,[],s,i),this.mark=n,this.spec=o}static create(t,n,s,i){let o=i.nodeViews[n.type.name],l=o&&o(n,i,s);return(!l||!l.dom)&&(l=ud.renderSpec(document,n.type.spec.toDOM(n,s),null,n.attrs)),new sd(t,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&da||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=da&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=no){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=no}}slice(t,n,s){let i=sd.create(this.parent,this.mark,!0,s),o=this.children,l=this.size;n<l&&(o=cw(o,n,l,s)),t>0&&(o=cw(o,0,t,s));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Sc extends bg{constructor(t,n,s,i,o,l,u,d,h){super(t,[],o,l),this.node=n,this.outerDeco=s,this.innerDeco=i,this.nodeDOM=u}static create(t,n,s,i,o,l){let u=o.nodeViews[n.type.name],d,h=u&&u(n,o,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},s,i),p=h&&h.dom,m=h&&h.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=ud.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let x=p;return p=d_(p,s,n),h?d=new ede(t,n,s,i,p,m||null,x,h,o,l+1):n.isText?new Ib(t,n,s,i,p,x,o):new Sc(t,n,s,i,p,m||null,x,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let s=this.children[n];if(this.dom.contains(s.dom.parentNode)){t.contentElement=s.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Fe.empty)}return t}matchesNode(t,n,s){return this.dirty==no&&t.eq(this.node)&&fy(n,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let s=this.node.inlineContent,i=n,o=t.composing?this.localCompositionInfo(t,n):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,d=new nde(this,l&&l.node,t);ide(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?d.syncToMarks(h.spec.marks,s,t):h.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?Kn.none:this.node.child(p).marks,s,t),d.placeWidget(h,t,i)},(h,p,m,x)=>{d.syncToMarks(h.marks,s,t);let y;d.findNodeMatch(h,p,m,x)||u&&t.state.selection.from>i&&t.state.selection.to<i+h.nodeSize&&(y=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,p,m,y,t)||d.updateNextNode(h,p,m,t,x,i)||d.addNode(h,p,m,t,i),i+=h.nodeSize}),d.syncToMarks([],s,t),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Cu)&&(l&&this.protectLocalComposition(t,l),c_(this.contentDOM,this.children,t),Zh&&ode(this.dom))}localCompositionInfo(t,n){let{from:s,to:i}=t.state.selection;if(!(t.state.selection instanceof Bt)||s<n||i>n+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=ade(this.node.content,l,s-n,i-n);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:s,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new Zue(this,o,n,i);t.input.compositionNodes.push(l),this.children=cw(this.children,s,s+i.length,t,l)}update(t,n,s,i){return this.dirty==da||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,s,i),!0)}updateInner(t,n,s,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=s,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=no}updateOuterDeco(t){if(fy(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=u_(this.dom,this.nodeDOM,lw(this.outerDeco,this.node,n),lw(t,this.node,n)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function $N(e,t,n,s,i){d_(s,t,e);let o=new Sc(void 0,e,t,n,s,s,s,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Ib extends Sc{constructor(t,n,s,i,o,l,u){super(t,n,s,i,o,null,l,u,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,s,i){return this.dirty==da||this.dirty!=no&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=no||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=no,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,s){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,s)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,s){let i=this.node.cut(t,n),o=document.createTextNode(i.text);return new Ib(this.parent,i,this.outerDeco,this.innerDeco,o,o,s)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=da)}get domAtom(){return!1}isText(t){return this.node.text==t}}class l_ extends bg{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==no&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class ede extends Sc{constructor(t,n,s,i,o,l,u,d,h,p){super(t,n,s,i,o,l,u,h,p),this.spec=d}update(t,n,s,i){if(this.dirty==da)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let o=this.spec.update(t,n,s);return o&&this.updateInner(t,n,s,i),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,s,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,s,i){this.spec.setSelection?this.spec.setSelection(t,n,s.root):super.setSelection(t,n,s,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function c_(e,t,n){let s=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let l=t[o],u=l.dom;if(u.parentNode==e){for(;u!=s;)s=FN(s),i=!0;s=s.nextSibling}else i=!0,e.insertBefore(u,s);if(l instanceof sd){let d=s?s.previousSibling:e.lastChild;c_(l.contentDOM,l.children,n),s=d?d.nextSibling:e.firstChild}}for(;s;)s=FN(s),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const lm=function(e){e&&(this.nodeName=e)};lm.prototype=Object.create(null);const wu=[new lm];function lw(e,t,n){if(e.length==0)return wu;let s=n?wu[0]:new lm,i=[s];for(let o=0;o<e.length;o++){let l=e[o].type.attrs;if(l){l.nodeName&&i.push(s=new lm(l.nodeName));for(let u in l){let d=l[u];d!=null&&(n&&i.length==1&&i.push(s=new lm(t.isInline?"span":"div")),u=="class"?s.class=(s.class?s.class+" ":"")+d:u=="style"?s.style=(s.style?s.style+";":"")+d:u!="nodeName"&&(s[u]=d))}}}return i}function u_(e,t,n,s){if(n==wu&&s==wu)return t;let i=t;for(let o=0;o<s.length;o++){let l=s[o],u=n[o];if(o){let d;u&&u.nodeName==l.nodeName&&i!=e&&(d=i.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(i),u=wu[0]),i=d}tde(i,u||wu[0],l)}return i}function tde(e,t,n){for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&!(s in n)&&e.removeAttribute(s);for(let s in n)s!="class"&&s!="style"&&s!="nodeName"&&n[s]!=t[s]&&e.setAttribute(s,n[s]);if(t.class!=n.class){let s=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<s.length;o++)i.indexOf(s[o])==-1&&e.classList.remove(s[o]);for(let o=0;o<i.length;o++)s.indexOf(i[o])==-1&&e.classList.add(i[o]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=s.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function d_(e,t,n){return u_(e,e,wu,lw(t,n,e.nodeType!=1))}function fy(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function FN(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class nde{constructor(t,n,s){this.lock=n,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=rde(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let s=t;s<n;s++)this.top.children[s].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,s){let i=0,o=this.stack.length>>1,l=Math.min(o,t.length);for(;i<l&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=no,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let h=this.top.children[d];if(h.matchesMark(t[o])&&!this.isLocked(h.dom)){u=d;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let d=sd.create(this.top,t[o],n,s);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,s,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(t,n,s))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let h=this.top.children[u];if(h.matchesNode(t,n,s)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,n,s,i,o){let l=this.top.children[i];return l.dirty==da&&l.dom==l.contentDOM&&(l.dirty=Cu),l.update(t,n,s,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let s=t.pmViewDesc;if(s){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==s)return i}return-1}t=n}}updateNextNode(t,n,s,i,o,l){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof Sc){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let p=d.dom,m,x=this.isLocked(p)&&!(t.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==t.text&&d.dirty!=da&&fy(n,d.outerDeco));if(!x&&d.update(t,n,s,i))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!x&&(m=this.recreateWrapper(d,t,n,s,i,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Cu,m.updateChildren(i,l+1),m.dirty=no),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,s,i,o,l){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!fy(s,t.outerDeco)||!i.eq(t.innerDeco))return null;let u=Sc.create(this.top,n,s,i,o,l);if(u.contentDOM){u.children=t.children,t.children=[];for(let d of u.children)d.parent=u}return t.destroy(),u}addNode(t,n,s,i,o){let l=Sc.create(this.top,t,n,s,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(t,n,s){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new a_(this.top,t,n,s);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof sd;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof Ib)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((qs||Ns)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let s=document.createElement(t);t=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),t=="BR"&&(s.className="ProseMirror-trailingBreak");let i=new l_(this.top,[],s,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function rde(e,t){let n=t,s=n.children.length,i=e.childCount,o=new Map,l=[];e:for(;i>0;){let u;for(;;)if(s){let h=n.children[s-1];if(h instanceof sd)n=h,s=h.children.length;else{u=h,s--;break}}else{if(n==t)break e;s=n.parent.children.indexOf(n),n=n.parent}let d=u.node;if(d){if(d!=e.child(i-1))break;--i,o.set(u,i),l.push(u)}}return{index:i,matched:o,matches:l.reverse()}}function sde(e,t){return e.type.side-t.type.side}function ide(e,t,n,s){let i=t.locals(e),o=0;if(i.length==0){for(let h=0;h<e.childCount;h++){let p=e.child(h);s(p,i,t.forChild(o,p),h),o+=p.nodeSize}return}let l=0,u=[],d=null;for(let h=0;;){let p,m;for(;l<i.length&&i[l].to==o;){let S=i[l++];S.widget&&(p?(m||(m=[p])).push(S):p=S)}if(p)if(m){m.sort(sde);for(let S=0;S<m.length;S++)n(m[S],h,!!d)}else n(p,h,!!d);let x,y;if(d)y=-1,x=d,d=null;else if(h<e.childCount)y=h,x=e.child(h++);else break;for(let S=0;S<u.length;S++)u[S].to<=o&&u.splice(S--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);let b=o+x.nodeSize;if(x.isText){let S=b;l<i.length&&i[l].from<S&&(S=i[l].from);for(let E=0;E<u.length;E++)u[E].to<S&&(S=u[E].to);S<b&&(d=x.cut(S-o),x=x.cut(0,S-o),b=S,y=-1)}else for(;l<i.length&&i[l].to<b;)l++;let C=x.isInline&&!x.isLeaf?u.filter(S=>!S.inline):u.slice();s(x,C,t.forChild(o,x),y),o=b}}function ode(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function ade(e,t,n,s){for(let i=0,o=0;i<e.childCount&&o<=s;){let l=e.child(i++),u=o;if(o+=l.nodeSize,!l.isText)continue;let d=l.text;for(;i<e.childCount;){let h=e.child(i++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=n){if(o>=s&&d.slice(s-t.length-u,s-u)==t)return s-t.length;let h=u<s?d.lastIndexOf(t,s-u-1):-1;if(h>=0&&h+t.length+u>=n)return u+h;if(n==s&&d.length>=s+t.length-u&&d.slice(s-u,s-u+t.length)==t)return s}}return-1}function cw(e,t,n,s,i){let o=[];for(let l=0,u=0;l<e.length;l++){let d=e[l],h=u,p=u+=d.size;h>=n||p<=t?o.push(d):(h<t&&o.push(d.slice(0,t-h,s)),i&&(o.push(i),i=void 0),p>n&&o.push(d.slice(n-h,d.size,s)))}return o}function UE(e,t=null){let n=e.domSelectionRange(),s=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&i.size==0,l=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let u=s.resolve(l),d,h;if(zb(n)){for(d=l;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&At.isSelectable(m)&&i.parent&&!(m.isInline&&Nue(n.focusNode,n.focusOffset,i.dom))){let x=i.posBefore;h=new At(l==x?u:s.resolve(x))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,x=l;for(let y=0;y<n.rangeCount;y++){let b=n.getRangeAt(y);m=Math.min(m,e.docView.posFromDOM(b.startContainer,b.startOffset,1)),x=Math.max(x,e.docView.posFromDOM(b.endContainer,b.endOffset,-1))}if(m<0)return null;[d,l]=x==e.state.selection.anchor?[x,m]:[m,x],u=s.resolve(l)}else d=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let p=s.resolve(d);if(!h){let m=t=="pointer"||e.state.selection.head<u.pos&&!o?1:-1;h=WE(e,p,u,m)}return h}function h_(e){return e.editable?e.hasFocus():p_(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function ul(e,t=!1){let n=e.state.selection;if(f_(e,n),!!h_(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Ns){let s=e.domSelectionRange(),i=e.domObserver.currentSelection;if(s.anchorNode&&i.anchorNode&&rd(s.anchorNode,s.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)cde(e);else{let{anchor:s,head:i}=n,o,l;VN&&!(n instanceof Bt)&&(n.$from.parent.inlineContent||(o=HN(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=HN(e,n.to))),e.docView.setSelection(s,i,e,t),VN&&(o&&UN(o),l&&UN(l)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&lde(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const VN=qs||Ns&&e_<63;function HN(e,t){let{node:n,offset:s}=e.docView.domFromPos(t,0),i=s<n.childNodes.length?n.childNodes[s]:null,o=s?n.childNodes[s-1]:null;if(qs&&i&&i.contentEditable=="false")return pS(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return pS(i);if(o)return pS(o)}}function pS(e){return e.contentEditable="true",qs&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function UN(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function lde(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),s=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=s||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!h_(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function cde(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,s=n.nodeName=="IMG";s?t.collapse(n.parentNode,js(n)+1):t.collapse(n,0),!s&&!e.state.selection.visible&&li&&jc<=11&&(n.disabled=!0,n.disabled=!1)}function f_(e,t){if(t instanceof At){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(WN(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else WN(e)}function WN(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function WE(e,t,n,s){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Bt.between(t,n,s)}function qN(e){return e.editable&&!e.hasFocus()?!1:p_(e)}function p_(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function ude(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return rd(t.node,t.offset,n.anchorNode,n.anchorOffset)}function uw(e,t){let{$anchor:n,$head:s}=e.selection,i=t>0?n.max(s):n.min(s),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&qt.findFrom(o,t)}function ac(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function GN(e,t,n){let s=e.state.selection;if(s instanceof Bt)if(n.indexOf("s")>-1){let{$head:i}=s,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=e.state.doc.resolve(i.pos+o.nodeSize*(t<0?-1:1));return ac(e,new Bt(s.$anchor,l))}else if(s.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=uw(e.state,t);return i&&i instanceof At?ac(e,i):!1}else if(!(Xi&&n.indexOf("m")>-1)){let i=s.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let u=t<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=e.docView.descAt(u))&&!l.contentDOM?At.isSelectable(o)?ac(e,new At(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):yg?ac(e,new Bt(e.state.doc.resolve(t<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(s instanceof At&&s.node.isInline)return ac(e,new Bt(t>0?s.$to:s.$from));{let i=uw(e.state,t);return i?ac(e,i):!1}}}function py(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function cm(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function oh(e,t){return t<0?dde(e):hde(e)}function dde(e){let t=e.domSelectionRange(),n=t.focusNode,s=t.focusOffset;if(!n)return;let i,o,l=!1;for(to&&n.nodeType==1&&s<py(n)&&cm(n.childNodes[s],-1)&&(l=!0);;)if(s>0){if(n.nodeType!=1)break;{let u=n.childNodes[s-1];if(cm(u,-1))i=n,o=--s;else if(u.nodeType==3)n=u,s=n.nodeValue.length;else break}}else{if(m_(n))break;{let u=n.previousSibling;for(;u&&cm(u,-1);)i=n.parentNode,o=js(u),u=u.previousSibling;if(u)n=u,s=py(n);else{if(n=n.parentNode,n==e.dom)break;s=0}}}l?dw(e,n,s):i&&dw(e,i,o)}function hde(e){let t=e.domSelectionRange(),n=t.focusNode,s=t.focusOffset;if(!n)return;let i=py(n),o,l;for(;;)if(s<i){if(n.nodeType!=1)break;let u=n.childNodes[s];if(cm(u,1))o=n,l=++s;else break}else{if(m_(n))break;{let u=n.nextSibling;for(;u&&cm(u,1);)o=u.parentNode,l=js(u)+1,u=u.nextSibling;if(u)n=u,s=0,i=py(n);else{if(n=n.parentNode,n==e.dom)break;s=i=0}}}o&&dw(e,o,l)}function m_(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function fde(e,t){for(;e&&t==e.childNodes.length&&!xg(e);)t=js(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function pde(e,t){for(;e&&!t&&!xg(e);)t=js(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function dw(e,t,n){if(t.nodeType!=3){let o,l;(l=fde(t,n))?(t=l,n=0):(o=pde(t,n))&&(t=o,n=o.nodeValue.length)}let s=e.domSelection();if(!s)return;if(zb(s)){let o=document.createRange();o.setEnd(t,n),o.setStart(t,n),s.removeAllRanges(),s.addRange(o)}else s.extend&&s.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&ul(e)},50)}function YN(e,t){let n=e.state.doc.resolve(t);if(!(Ns||Iue)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let o=e.coordsAtPos(t-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(t<n.end()){let o=e.coordsAtPos(t+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function KN(e,t,n){let s=e.state.selection;if(s instanceof Bt&&!s.empty||n.indexOf("s")>-1||Xi&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=s;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let l=uw(e.state,t);if(l&&l instanceof At)return ac(e,l)}if(!i.parent.inlineContent){let l=t<0?i:o,u=s instanceof Ti?qt.near(l,t):qt.findFrom(l,t);return u?ac(e,u):!1}return!1}function XN(e,t){if(!(e.state.selection instanceof Bt))return!0;let{$head:n,$anchor:s,empty:i}=e.state.selection;if(!n.sameParent(s))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let l=e.state.tr;return t<0?l.delete(n.pos-o.nodeSize,n.pos):l.delete(n.pos,n.pos+o.nodeSize),e.dispatch(l),!0}return!1}function JN(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function mde(e){if(!qs||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let s=t.firstChild;JN(e,s,"true"),setTimeout(()=>JN(e,s,"false"),20)}return!1}function gde(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function xde(e,t){let n=t.keyCode,s=gde(t);if(n==8||Xi&&n==72&&s=="c")return XN(e,-1)||oh(e,-1);if(n==46&&!t.shiftKey||Xi&&n==68&&s=="c")return XN(e,1)||oh(e,1);if(n==13||n==27)return!0;if(n==37||Xi&&n==66&&s=="c"){let i=n==37?YN(e,e.state.selection.from)=="ltr"?-1:1:-1;return GN(e,i,s)||oh(e,i)}else if(n==39||Xi&&n==70&&s=="c"){let i=n==39?YN(e,e.state.selection.from)=="ltr"?1:-1:1;return GN(e,i,s)||oh(e,i)}else{if(n==38||Xi&&n==80&&s=="c")return KN(e,-1,s)||oh(e,-1);if(n==40||Xi&&n==78&&s=="c")return mde(e)||KN(e,1,s)||oh(e,1);if(s==(Xi?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function qE(e,t){e.someProp("transformCopied",y=>{t=y(t,e)});let n=[],{content:s,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&s.childCount==1&&s.firstChild.childCount==1;){i--,o--;let y=s.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),s=y.content}let l=e.someProp("clipboardSerializer")||ud.fromSchema(e.state.schema),u=j_(),d=u.createElement("div");d.appendChild(l.serializeFragment(s,{document:u}));let h=d.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=v_[h.nodeName.toLowerCase()]);){for(let y=p.length-1;y>=0;y--){let b=u.createElement(p[y]);for(;d.firstChild;)b.appendChild(d.firstChild);d.appendChild(b),m++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(n)}`);let x=e.someProp("clipboardTextSerializer",y=>y(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:d,text:x,slice:t}}function g_(e,t,n,s,i){let o=i.parent.type.spec.code,l,u;if(!n&&!t)return null;let d=!!t&&(s||o||!n);if(d){if(e.someProp("transformPastedText",x=>{t=x(t,o||s,e)}),o)return u=new it(Fe.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",x=>{u=x(u,e,!0)}),u;let m=e.someProp("clipboardTextParser",x=>x(t,i,s,e));if(m)u=m;else{let x=i.marks(),{schema:y}=e.state,b=ud.fromSchema(y);l=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(C=>{let S=l.appendChild(document.createElement("p"));C&&S.appendChild(b.serializeNode(y.text(C,x)))})}}else e.someProp("transformPastedHTML",m=>{n=m(n,e)}),l=jde(n),yg&&Sde(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let x=l.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;l=x}if(u||(u=(e.someProp("clipboardParser")||e.someProp("domParser")||vc.fromSchema(e.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:i,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!yde.test(x.parentNode.nodeName)?{ignore:!0}:null}})),p)u=Cde(QN(u,+p[1],+p[2]),p[4]);else if(u=it.maxOpen(bde(u.content,i),!0),u.openStart||u.openEnd){let m=0,x=0;for(let y=u.content.firstChild;m<u.openStart&&!y.type.spec.isolating;m++,y=y.firstChild);for(let y=u.content.lastChild;x<u.openEnd&&!y.type.spec.isolating;x++,y=y.lastChild);u=QN(u,m,x)}return e.someProp("transformPasted",m=>{u=m(u,e,d)}),u}const yde=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function bde(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),o,l=[];if(e.forEach(u=>{if(!l)return;let d=i.findWrapping(u.type),h;if(!d)return l=null;if(h=l.length&&o.length&&y_(d,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=b_(l[l.length-1],o.length));let p=x_(u,d);l.push(p),i=i.matchType(p.type),o=d}}),l)return Fe.from(l)}return e}function x_(e,t,n=0){for(let s=t.length-1;s>=n;s--)e=t[s].create(null,Fe.from(e));return e}function y_(e,t,n,s,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=y_(e,t,n,s.lastChild,i+1);if(o)return s.copy(s.content.replaceChild(s.childCount-1,o));if(s.contentMatchAt(s.childCount).matchType(i==e.length-1?n.type:e[i+1]))return s.copy(s.content.append(Fe.from(x_(n,e,i+1))))}}function b_(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,b_(e.lastChild,t-1)),s=e.contentMatchAt(e.childCount).fillBefore(Fe.empty,!0);return e.copy(n.append(s))}function hw(e,t,n,s,i,o){let l=t<0?e.firstChild:e.lastChild,u=l.content;return e.childCount>1&&(o=0),i<s-1&&(u=hw(u,t,n,s,i+1,o)),i>=n&&(u=t<0?l.contentMatchAt(0).fillBefore(u,o<=i).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(Fe.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,l.copy(u))}function QN(e,t,n){return t<e.openStart&&(e=new it(hw(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new it(hw(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const v_={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ZN=null;function j_(){return ZN||(ZN=document.implementation.createHTMLDocument("title"))}let mS=null;function vde(e){let t=window.trustedTypes;return t?(mS||(mS=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),mS.createHTML(e)):e}function jde(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=j_().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(e),i;if((i=s&&v_[s[1].toLowerCase()])&&(e=i.map(o=>"<"+o+">").join("")+e+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=vde(e),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function Sde(e){let t=e.querySelectorAll(Ns?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let s=t[n];s.childNodes.length==1&&s.textContent==""&&s.parentNode&&s.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),s)}}function Cde(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,s;try{s=JSON.parse(t)}catch{return e}let{content:i,openStart:o,openEnd:l}=e;for(let u=s.length-2;u>=0;u-=2){let d=n.nodes[s[u]];if(!d||d.hasRequiredAttrs())break;i=Fe.from(d.create(s[u+1],i)),o++,l++}return new it(i,o,l)}const Gs={},Ys={},wde={touchstart:!0,touchmove:!0};class Ede{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function kde(e){for(let t in Gs){let n=Gs[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=s=>{Tde(e,s)&&!GE(e,s)&&(e.editable||!(s.type in Ys))&&n(e,s)},wde[t]?{passive:!0}:void 0)}qs&&e.dom.addEventListener("input",()=>null),fw(e)}function mc(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Ade(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function fw(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=s=>GE(e,s))})}function GE(e,t){return e.someProp("handleDOMEvents",n=>{let s=n[t.type];return s?s(e,t)||t.defaultPrevented:!1})}function Tde(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Mde(e,t){!GE(e,t)&&Gs[t.type]&&(e.editable||!(t.type in Ys))&&Gs[t.type](e,t)}Ys.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!C_(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(sl&&Ns&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Zh&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let s=Date.now();e.input.lastIOSEnter=s,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==s&&(e.someProp("handleKeyDown",i=>i(e,gu(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",s=>s(e,n))||xde(e,n)?n.preventDefault():mc(e,"key")};Ys.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Ys.keypress=(e,t)=>{let n=t;if(C_(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Xi&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let s=e.state.selection;if(!(s instanceof Bt)||!s.$from.sameParent(s.$to)){let i=String.fromCharCode(n.charCode),o=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",l=>l(e,s.$from.pos,s.$to.pos,i,o))&&e.dispatch(o()),n.preventDefault()}};function Lb(e){return{left:e.clientX,top:e.clientY}}function Rde(e,t){let n=t.x-e.clientX,s=t.y-e.clientY;return n*n+s*s<100}function YE(e,t,n,s,i){if(s==-1)return!1;let o=e.state.doc.resolve(s);for(let l=o.depth+1;l>0;l--)if(e.someProp(t,u=>l>o.depth?u(e,n,o.nodeAfter,o.before(l),i,!0):u(e,n,o.node(l),o.before(l),i,!1)))return!0;return!1}function Lh(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let s=e.state.tr.setSelection(t);s.setMeta("pointer",!0),e.dispatch(s)}function Dde(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),s=n.nodeAfter;return s&&s.isAtom&&At.isSelectable(s)?(Lh(e,new At(n)),!0):!1}function Ode(e,t){if(t==-1)return!1;let n=e.state.selection,s,i;n instanceof At&&(s=n.node);let o=e.state.doc.resolve(t);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(At.isSelectable(u)){s&&n.$from.depth>0&&l>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(l);break}}return i!=null?(Lh(e,At.create(e.state.doc,i)),!0):!1}function Nde(e,t,n,s,i){return YE(e,"handleClickOn",t,n,s)||e.someProp("handleClick",o=>o(e,t,s))||(i?Ode(e,n):Dde(e,n))}function Pde(e,t,n,s){return YE(e,"handleDoubleClickOn",t,n,s)||e.someProp("handleDoubleClick",i=>i(e,t,s))}function zde(e,t,n,s){return YE(e,"handleTripleClickOn",t,n,s)||e.someProp("handleTripleClick",i=>i(e,t,s))||Ide(e,n,s)}function Ide(e,t,n){if(n.button!=0)return!1;let s=e.state.doc;if(t==-1)return s.inlineContent?(Lh(e,Bt.create(s,0,s.content.size)),!0):!1;let i=s.resolve(t);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(l.inlineContent)Lh(e,Bt.create(s,u+1,u+1+l.content.size));else if(At.isSelectable(l))Lh(e,At.create(s,u));else continue;return!0}}function KE(e){return my(e)}const S_=Xi?"metaKey":"ctrlKey";Gs.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let s=KE(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&Rde(n,e.input.lastClick)&&!n[S_]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?o="doubleClick":e.input.lastClick.type=="doubleClick"&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let l=e.posAtCoords(Lb(n));l&&(o=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Lde(e,l,n,!!s)):(o=="doubleClick"?Pde:zde)(e,l.pos,l.inside,n)?n.preventDefault():mc(e,"pointer"))};class Lde{constructor(t,n,s,i){this.view=t,this.pos=n,this.event=s,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!s[S_],this.allowDefault=s.shiftKey;let o,l;if(n.inside>-1)o=t.state.doc.nodeAt(n.inside),l=n.inside;else{let p=t.state.doc.resolve(n.pos);o=p.parent,l=p.depth?p.before():0}const u=i?null:s.target,d=u?t.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=t.state;(s.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof At&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&to&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),mc(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ul(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Lb(t))),this.updateAllowDefault(t),this.allowDefault||!n?mc(this.view,"pointer"):Nde(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||qs&&this.mightDrag&&!this.mightDrag.node.isAtom||Ns&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Lh(this.view,qt.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):mc(this.view,"pointer")}move(t){this.updateAllowDefault(t),mc(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Gs.touchstart=e=>{e.input.lastTouch=Date.now(),KE(e),mc(e,"pointer")};Gs.touchmove=e=>{e.input.lastTouch=Date.now(),mc(e,"pointer")};Gs.contextmenu=e=>KE(e);function C_(e,t){return e.composing?!0:qs&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const _de=sl?5e3:-1;Ys.compositionstart=Ys.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Bt&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),my(e,!0),e.markCursor=null;else if(my(e,!t.selection.empty),to&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let s=e.domSelectionRange();for(let i=s.focusNode,o=s.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=e.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}e.input.composing=!0}w_(e,_de)};Ys.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,w_(e,20))};function w_(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>my(e),t))}function E_(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=$de());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Bde(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Due(t.focusNode,t.focusOffset),s=Oue(t.focusNode,t.focusOffset);if(n&&s&&n!=s){let i=s.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||s==o)return o;if(!i||!i.isText(s.nodeValue))return s;if(e.input.compositionNode==s){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return s}}return n||s}function $de(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function my(e,t=!1){if(!(sl&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),E_(e),t||e.docView&&e.docView.dirty){let n=UE(e),s=e.state.selection;return n&&!n.eq(s)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function Fde(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),s.removeAllRanges(),s.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Vm=li&&jc<15||Zh&&Lue<604;Gs.copy=Ys.cut=(e,t)=>{let n=t,s=e.state.selection,i=n.type=="cut";if(s.empty)return;let o=Vm?null:n.clipboardData,l=s.content(),{dom:u,text:d}=qE(e,l);o?(n.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",d)):Fde(e,u),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Vde(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function Hde(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,s=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),s.parentNode&&s.parentNode.removeChild(s),n?Hm(e,s.value,null,i,t):Hm(e,s.textContent,s.innerHTML,i,t)},50)}function Hm(e,t,n,s,i){let o=g_(e,t,n,s,e.state.selection.$from);if(e.someProp("handlePaste",d=>d(e,i,o||it.empty)))return!0;if(!o)return!1;let l=Vde(o),u=l?e.state.tr.replaceSelectionWith(l,s):e.state.tr.replaceSelection(o);return e.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function k_(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ys.paste=(e,t)=>{let n=t;if(e.composing&&!sl)return;let s=Vm?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;s&&Hm(e,k_(s),s.getData("text/html"),i,n)?n.preventDefault():Hde(e,n)};class A_{constructor(t,n,s){this.slice=t,this.move=n,this.node=s}}const Ude=Xi?"altKey":"ctrlKey";function T_(e,t){let n=e.someProp("dragCopies",s=>!s(t));return n??!t[Ude]}Gs.dragstart=(e,t)=>{let n=t,s=e.input.mouseDown;if(s&&s.done(),!n.dataTransfer)return;let i=e.state.selection,o=i.empty?null:e.posAtCoords(Lb(n)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof At?i.to-1:i.to))){if(s&&s.mightDrag)l=At.create(e.state.doc,s.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=e.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=e.docView&&(l=At.create(e.state.doc,m.posBefore))}}let u=(l||e.state.selection).content(),{dom:d,text:h,slice:p}=qE(e,u);(!n.dataTransfer.files.length||!Ns||e_>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Vm?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",Vm||n.dataTransfer.setData("text/plain",h),e.dragging=new A_(p,T_(e,n),l)};Gs.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Ys.dragover=Ys.dragenter=(e,t)=>t.preventDefault();Ys.drop=(e,t)=>{let n=t,s=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Lb(n));if(!i)return;let o=e.state.doc.resolve(i.pos),l=s&&s.slice;l?e.someProp("transformPasted",b=>{l=b(l,e,!1)}):l=g_(e,k_(n.dataTransfer),Vm?null:n.dataTransfer.getData("text/html"),!1,o);let u=!!(s&&T_(e,n));if(e.someProp("handleDrop",b=>b(e,n,l||it.empty,u))){n.preventDefault();return}if(!l)return;n.preventDefault();let d=l?N5(e.state.doc,o.pos,l):o.pos;d==null&&(d=o.pos);let h=e.state.tr;if(u){let{node:b}=s;b?b.replace(h):h.deleteSelection()}let p=h.mapping.map(d),m=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,x=h.doc;if(m?h.replaceRangeWith(p,p,l.content.firstChild):h.replaceRange(p,p,l),h.doc.eq(x))return;let y=h.doc.resolve(p);if(m&&At.isSelectable(l.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(l.content.firstChild))h.setSelection(new At(y));else{let b=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((C,S,E,k)=>b=k),h.setSelection(WE(e,y,h.doc.resolve(b)))}e.focus(),e.dispatch(h.setMeta("uiEvent","drop"))};Gs.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&ul(e)},20))};Gs.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Gs.beforeinput=(e,t)=>{if(Ns&&sl&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:s}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=s||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",o=>o(e,gu(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Ys)Gs[e]=Ys[e];function Um(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class gy{constructor(t,n){this.toDOM=t,this.spec=n||$u,this.side=this.spec.side||0}map(t,n,s,i){let{pos:o,deleted:l}=t.mapResult(n.from+i,this.side<0?-1:1);return l?null:new Hs(o-s,o-s,this)}valid(){return!0}eq(t){return this==t||t instanceof gy&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Um(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Cc{constructor(t,n){this.attrs=t,this.spec=n||$u}map(t,n,s,i){let o=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-s,l=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-s;return o>=l?null:new Hs(o,l,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Cc&&Um(this.attrs,t.attrs)&&Um(this.spec,t.spec)}static is(t){return t.type instanceof Cc}destroy(){}}class XE{constructor(t,n){this.attrs=t,this.spec=n||$u}map(t,n,s,i){let o=t.mapResult(n.from+i,1);if(o.deleted)return null;let l=t.mapResult(n.to+i,-1);return l.deleted||l.pos<=o.pos?null:new Hs(o.pos-s,l.pos-s,this)}valid(t,n){let{index:s,offset:i}=t.content.findIndex(n.from),o;return i==n.from&&!(o=t.child(s)).isText&&i+o.nodeSize==n.to}eq(t){return this==t||t instanceof XE&&Um(this.attrs,t.attrs)&&Um(this.spec,t.spec)}destroy(){}}class Hs{constructor(t,n,s){this.from=t,this.to=n,this.type=s}copy(t,n){return new Hs(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,s){return this.type.map(t,this,n,s)}static widget(t,n,s){return new Hs(t,t,new gy(n,s))}static inline(t,n,s,i){return new Hs(t,n,new Cc(s,i))}static node(t,n,s,i){return new Hs(t,n,new XE(s,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Cc}get widget(){return this.type instanceof gy}}const ch=[],$u={};class mr{constructor(t,n){this.local=t.length?t:ch,this.children=n.length?n:ch}static create(t,n){return n.length?xy(n,t,0,$u):Ds}find(t,n,s){let i=[];return this.findInner(t??0,n??1e9,i,0,s),i}findInner(t,n,s,i,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=n&&u.to>=t&&(!o||o(u.spec))&&s.push(u.copy(u.from+i,u.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>t){let u=this.children[l]+1;this.children[l+2].findInner(t-u,n-u,s,i+u,o)}}map(t,n,s){return this==Ds||t.maps.length==0?this:this.mapInner(t,n,0,0,s||$u)}mapInner(t,n,s,i,o){let l;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(t,s,i);d&&d.type.valid(n,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?Wde(this.children,l||[],t,n,s,i,o):l?new mr(l.sort(Fu),ch):Ds}add(t,n){return n.length?this==Ds?mr.create(t,n):this.addInner(t,n,0):this}addInner(t,n,s){let i,o=0;t.forEach((u,d)=>{let h=d+s,p;if(p=R_(n,u,h)){for(i||(i=this.children.slice());o<i.length&&i[o]<d;)o+=3;i[o]==d?i[o+2]=i[o+2].addInner(u,p,h+1):i.splice(o,0,d,d+u.nodeSize,xy(p,u,h+1,$u)),o+=3}});let l=M_(o?D_(n):n,-s);for(let u=0;u<l.length;u++)l[u].type.valid(t,l[u])||l.splice(u--,1);return new mr(l.length?this.local.concat(l).sort(Fu):this.local,i||this.children)}remove(t){return t.length==0||this==Ds?this:this.removeInner(t,0)}removeInner(t,n){let s=this.children,i=this.local;for(let o=0;o<s.length;o+=3){let l,u=s[o]+n,d=s[o+1]+n;for(let p=0,m;p<t.length;p++)(m=t[p])&&m.from>u&&m.to<d&&(t[p]=null,(l||(l=[])).push(m));if(!l)continue;s==this.children&&(s=this.children.slice());let h=s[o+2].removeInner(l,u+1);h!=Ds?s[o+2]=h:(s.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<t.length;o++)if(l=t[o])for(let u=0;u<i.length;u++)i[u].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return s==this.children&&i==this.local?this:i.length||s.length?new mr(i,s):Ds}forChild(t,n){if(this==Ds)return this;if(n.isLeaf)return mr.empty;let s,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=t){this.children[u]==t&&(s=this.children[u+2]);break}let o=t+1,l=o+n.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<l&&d.to>o&&d.type instanceof Cc){let h=Math.max(o,d.from)-o,p=Math.min(l,d.to)-o;h<p&&(i||(i=[])).push(d.copy(h,p))}}if(i){let u=new mr(i.sort(Fu),ch);return s?new dc([u,s]):u}return s||Ds}eq(t){if(this==t)return!0;if(!(t instanceof mr)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return JE(this.localsInner(t))}localsInner(t){if(this==Ds)return ch;if(t.inlineContent||!this.local.some(Cc.is))return this.local;let n=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof Cc||n.push(this.local[s]);return n}forEachSet(t){t(this)}}mr.empty=new mr([],[]);mr.removeOverlap=JE;const Ds=mr.empty;class dc{constructor(t){this.members=t}map(t,n){const s=this.members.map(i=>i.map(t,n,$u));return dc.from(s)}forChild(t,n){if(n.isLeaf)return mr.empty;let s=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(t,n);o!=Ds&&(o instanceof dc?s=s.concat(o.members):s.push(o))}return dc.from(s)}eq(t){if(!(t instanceof dc)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,s=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(t);if(o.length)if(!n)n=o;else{s&&(n=n.slice(),s=!1);for(let l=0;l<o.length;l++)n.push(o[l])}}return n?JE(s?n:n.sort(Fu)):ch}static from(t){switch(t.length){case 0:return Ds;case 1:return t[0];default:return new dc(t.every(n=>n instanceof mr)?t:t.reduce((n,s)=>n.concat(s instanceof mr?s:s.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function Wde(e,t,n,s,i,o,l){let u=e.slice();for(let h=0,p=o;h<n.maps.length;h++){let m=0;n.maps[h].forEach((x,y,b,C)=>{let S=C-b-(y-x);for(let E=0;E<u.length;E+=3){let k=u[E+1];if(k<0||x>k+p-m)continue;let A=u[E]+p-m;y>=A?u[E+1]=x<=A?-2:-1:x>=p&&S&&(u[E]+=S,u[E+1]+=S)}m+=S}),p=n.maps[h].map(p,-1)}let d=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){d=!0,u[h+1]=-1;continue}let p=n.map(e[h]+o),m=p-i;if(m<0||m>=s.content.size){d=!0;continue}let x=n.map(e[h+1]+o,-1),y=x-i,{index:b,offset:C}=s.content.findIndex(m),S=s.maybeChild(b);if(S&&C==m&&C+S.nodeSize==y){let E=u[h+2].mapInner(n,S,p+1,e[h]+o+1,l);E!=Ds?(u[h]=m,u[h+1]=y,u[h+2]=E):(u[h+1]=-2,d=!0)}else d=!0}if(d){let h=qde(u,e,t,n,i,o,l),p=xy(h,s,0,l);t=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,x=0;m<p.children.length;m+=3){let y=p.children[m];for(;x<u.length&&u[x]<y;)x+=3;u.splice(x,0,p.children[m],p.children[m+1],p.children[m+2])}}return new mr(t.sort(Fu),u)}function M_(e,t){if(!t||!e.length)return e;let n=[];for(let s=0;s<e.length;s++){let i=e[s];n.push(new Hs(i.from+t,i.to+t,i.type))}return n}function qde(e,t,n,s,i,o,l){function u(d,h){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(s,i,h);m?n.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+h+1)}for(let d=0;d<e.length;d+=3)e[d+1]==-1&&u(e[d+2],t[d]+o+1);return n}function R_(e,t,n){if(t.isLeaf)return null;let s=n+t.nodeSize,i=null;for(let o=0,l;o<e.length;o++)(l=e[o])&&l.from>n&&l.to<s&&((i||(i=[])).push(l),e[o]=null);return i}function D_(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function xy(e,t,n,s){let i=[],o=!1;t.forEach((u,d)=>{let h=R_(e,u,d+n);if(h){o=!0;let p=xy(h,u,n+d+1,s);p!=Ds&&i.push(d,d+u.nodeSize,p)}});let l=M_(o?D_(e):e,-n).sort(Fu);for(let u=0;u<l.length;u++)l[u].type.valid(t,l[u])||(s.onRemove&&s.onRemove(l[u].spec),l.splice(u--,1));return l.length||i.length?new mr(l,i):Ds}function Fu(e,t){return e.from-t.from||e.to-t.to}function JE(e){let t=e;for(let n=0;n<t.length-1;n++){let s=t[n];if(s.from!=s.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from==s.from){o.to!=s.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,s.to),eP(t,i+1,o.copy(s.to,o.to)));continue}else{o.from<s.to&&(t==e&&(t=e.slice()),t[n]=s.copy(s.from,o.from),eP(t,i,s.copy(o.from,s.to)));break}}}return t}function eP(e,t,n){for(;t<e.length&&Fu(n,e[t])>0;)t++;e.splice(t,0,n)}function gS(e){let t=[];return e.someProp("decorations",n=>{let s=n(e.state);s&&s!=Ds&&t.push(s)}),e.cursorWrapper&&t.push(mr.create(e.state.doc,[e.cursorWrapper.deco])),dc.from(t)}const Gde={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Yde=li&&jc<=11;class Kde{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Xde{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Kde,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let i=0;i<s.length;i++)this.queue.push(s[i]);li&&jc<=11&&s.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Yde&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Gde)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(qN(this.view)){if(this.suppressingSelectionUpdates)return ul(this.view);if(li&&jc<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&rd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,s;for(let o=t.focusNode;o;o=Qh(o))n.add(o);for(let o=t.anchorNode;o;o=Qh(o))if(n.has(o)){s=o;break}let i=s&&this.view.docView.nearestDesc(s);if(i&&i.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let s=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&qN(t)&&!this.ignoreSelectionChange(s),o=-1,l=-1,u=!1,d=[];if(t.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(to&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,x]=p;m.parentNode&&m.parentNode.parentNode==x.parentNode?x.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let x of p){let y=x.parentNode;y&&y.nodeName=="LI"&&(!m||Zde(t,m)!=y)&&x.remove()}}}let h=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&zb(s)&&(h=UE(t))&&h.eq(qt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,ul(t),this.currentSelection.set(s),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,l),Jde(t)),this.handleDOMChange(o,l,u,d),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(s)||ul(t),this.currentSelection.set(s))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let s=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(s==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!s||s.ignoreMutation(t))return null;if(t.type=="childList"){for(let p=0;p<t.addedNodes.length;p++){let m=t.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(t.target))return{from:s.posBefore,to:s.posAfter};let i=t.previousSibling,o=t.nextSibling;if(li&&jc<=11&&t.addedNodes.length)for(let p=0;p<t.addedNodes.length;p++){let{previousSibling:m,nextSibling:x}=t.addedNodes[p];(!m||Array.prototype.indexOf.call(t.addedNodes,m)<0)&&(i=m),(!x||Array.prototype.indexOf.call(t.addedNodes,x)<0)&&(o=x)}let l=i&&i.parentNode==t.target?js(i)+1:0,u=s.localPosFromDOM(t.target,l,-1),d=o&&o.parentNode==t.target?js(o):t.target.childNodes.length,h=s.localPosFromDOM(t.target,d,1);return{from:u,to:h}}else return t.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=t.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let tP=new WeakMap,nP=!1;function Jde(e){if(!tP.has(e)&&(tP.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=to,nP)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),nP=!0}}function rP(e,t){let n=t.startContainer,s=t.startOffset,i=t.endContainer,o=t.endOffset,l=e.domAtPos(e.state.selection.anchor);return rd(l.node,l.offset,i,o)&&([n,s,i,o]=[i,o,n,s]),{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:o}}function Qde(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return rP(e,i)}let n;function s(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",s,!0),n?rP(e,n):null}function Zde(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let s=e.docView.nearestDesc(n,!0);if(s&&s.node.isBlock)return n}return null}function ehe(e,t,n){let{node:s,fromOffset:i,toOffset:o,from:l,to:u}=e.docView.parseRange(t,n),d=e.domSelectionRange(),h,p=d.anchorNode;if(p&&e.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],zb(d)||h.push({node:d.focusNode,offset:d.focusOffset})),Ns&&e.input.lastKeyCode===8)for(let S=o;S>i;S--){let E=s.childNodes[S-1],k=E.pmViewDesc;if(E.nodeName=="BR"&&!k){o=S;break}if(!k||k.size)break}let m=e.state.doc,x=e.someProp("domParser")||vc.fromSchema(e.state.schema),y=m.resolve(l),b=null,C=x.parse(s,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:o,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:the,context:y});if(h&&h[0].pos!=null){let S=h[0].pos,E=h[1]&&h[1].pos;E==null&&(E=S),b={anchor:S+l,head:E+l}}return{doc:C,sel:b,from:l,to:u}}function the(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(qs&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||qs&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const nhe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function rhe(e,t,n,s,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let $=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,W=UE(e,$);if(W&&!e.state.selection.eq(W)){if(Ns&&sl&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",re=>re(e,gu(13,"Enter"))))return;let te=e.state.tr.setSelection(W);$=="pointer"?te.setMeta("pointer",!0):$=="key"&&te.scrollIntoView(),o&&te.setMeta("composition",o),e.dispatch(te)}return}let l=e.state.doc.resolve(t),u=l.sharedDepth(n);t=l.before(u+1),n=e.state.doc.resolve(n).after(u+1);let d=e.state.selection,h=ehe(e,t,n),p=e.state.doc,m=p.slice(h.from,h.to),x,y;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(x=e.state.selection.to,y="end"):(x=e.state.selection.from,y="start"),e.input.lastKeyCode=null;let b=ohe(m.content,h.doc.content,h.from,x,y);if(b&&e.input.domChangeCount++,(Zh&&e.input.lastIOSEnter>Date.now()-225||sl)&&i.some($=>$.nodeType==1&&!nhe.test($.nodeName))&&(!b||b.endA>=b.endB)&&e.someProp("handleKeyDown",$=>$(e,gu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!b)if(s&&d instanceof Bt&&!d.empty&&d.$head.sameParent(d.$anchor)&&!e.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))b={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let $=sP(e,e.state.doc,h.sel);if($&&!$.eq(e.state.selection)){let W=e.state.tr.setSelection($);o&&W.setMeta("composition",o),e.dispatch(W)}}return}e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof Bt&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2&&e.state.selection.from>=h.from?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&e.state.selection.to<=h.to&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),li&&jc<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>h.from&&h.doc.textBetween(b.start-h.from-1,b.start-h.from+1)==" "&&(b.start--,b.endA--,b.endB--);let C=h.doc.resolveNoCache(b.start-h.from),S=h.doc.resolveNoCache(b.endB-h.from),E=p.resolve(b.start),k=C.sameParent(S)&&C.parent.inlineContent&&E.end()>=b.endA;if((Zh&&e.input.lastIOSEnter>Date.now()-225&&(!k||i.some($=>$.nodeName=="DIV"||$.nodeName=="P"))||!k&&C.pos<h.doc.content.size&&(!C.sameParent(S)||!C.parent.inlineContent)&&C.pos<S.pos&&!/\S/.test(h.doc.textBetween(C.pos,S.pos,"","")))&&e.someProp("handleKeyDown",$=>$(e,gu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>b.start&&ihe(p,b.start,b.endA,C,S)&&e.someProp("handleKeyDown",$=>$(e,gu(8,"Backspace")))){sl&&Ns&&e.domObserver.suppressSelectionUpdates();return}Ns&&b.endB==b.start&&(e.input.lastChromeDelete=Date.now()),sl&&!k&&C.start()!=S.start()&&S.parentOffset==0&&C.depth==S.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==b.endA&&(b.endB-=2,S=h.doc.resolveNoCache(b.endB-h.from),setTimeout(()=>{e.someProp("handleKeyDown",function($){return $(e,gu(13,"Enter"))})},20));let A=b.start,T=b.endA,M=$=>{let W=$||e.state.tr.replace(A,T,h.doc.slice(b.start-h.from,b.endB-h.from));if(h.sel){let te=sP(e,W.doc,h.sel);te&&!(Ns&&e.composing&&te.empty&&(b.start!=b.endB||e.input.lastChromeDelete<Date.now()-100)&&(te.head==A||te.head==W.mapping.map(T)-1)||li&&te.empty&&te.head==A)&&W.setSelection(te)}return o&&W.setMeta("composition",o),W.scrollIntoView()},D;if(k)if(C.pos==S.pos){li&&jc<=11&&C.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>ul(e),20));let $=M(e.state.tr.delete(A,T)),W=p.resolve(b.start).marksAcross(p.resolve(b.endA));W&&$.ensureMarks(W),e.dispatch($)}else if(b.endA==b.endB&&(D=she(C.parent.content.cut(C.parentOffset,S.parentOffset),E.parent.content.cut(E.parentOffset,b.endA-E.start())))){let $=M(e.state.tr);D.type=="add"?$.addMark(A,T,D.mark):$.removeMark(A,T,D.mark),e.dispatch($)}else if(C.parent.child(C.index()).isText&&C.index()==S.index()-(S.textOffset?0:1)){let $=C.parent.textBetween(C.parentOffset,S.parentOffset),W=()=>M(e.state.tr.insertText($,A,T));e.someProp("handleTextInput",te=>te(e,A,T,$,W))||e.dispatch(W())}else e.dispatch(M());else e.dispatch(M())}function sP(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:WE(e,t.resolve(n.anchor),t.resolve(n.head))}function she(e,t){let n=e.firstChild.marks,s=t.firstChild.marks,i=n,o=s,l,u,d;for(let p=0;p<s.length;p++)i=s[p].removeFromSet(i);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],l="add",d=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&o.length==1)u=o[0],l="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<t.childCount;p++)h.push(d(t.child(p)));if(Fe.from(h).eq(e))return{mark:u,type:l}}function ihe(e,t,n,s,i){if(n-t<=i.pos-s.pos||xS(s,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!s.parent.isTextblock){let u=o.nodeAfter;return u!=null&&n==t+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=e.resolve(xS(o,!0,!0));return!l.parent.isTextblock||l.pos>n||xS(l,!0,!1)<n?!1:s.parent.content.cut(s.parentOffset).eq(l.parent.content)}function xS(e,t,n){let s=e.depth,i=t?e.end():e.pos;for(;s>0&&(t||e.indexAfter(s)==e.node(s).childCount);)s--,i++,t=!1;if(n){let o=e.node(s).maybeChild(e.indexAfter(s));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function ohe(e,t,n,s,i){let o=e.findDiffStart(t,n);if(o==null)return null;let{a:l,b:u}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let d=Math.max(0,o-Math.min(l,u));s-=l+d-o}if(l<o&&e.size<t.size){let d=s<=o&&s>=l?o-s:0;o-=d,o&&o<t.size&&iP(t.textBetween(o-1,o+1))&&(o+=d?1:-1),u=o+(u-l),l=o}else if(u<o){let d=s<=o&&s>=u?o-s:0;o-=d,o&&o<e.size&&iP(e.textBetween(o-1,o+1))&&(o+=d?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function iP(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class O_{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ede,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(uP),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=lP(this),aP(this),this.nodeViews=cP(this),this.docView=$N(this.state.doc,oP(this),gS(this),this.dom,this),this.domObserver=new Xde(this,(s,i,o,l)=>rhe(this,s,i,o,l)),this.domObserver.start(),kde(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&fw(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(uP),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let s in this._props)n[s]=this._props[s];n.state=this.state;for(let s in t)n[s]=t[s];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var s;let i=this.state,o=!1,l=!1;t.storedMarks&&this.composing&&(E_(this),l=!0),this.state=t;let u=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=cP(this);lhe(y,this.nodeViews)&&(this.nodeViews=y,o=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&fw(this),this.editable=lP(this),aP(this);let d=gS(this),h=oP(this),p=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(t.doc,h,d);(m||!t.selection.eq(i.selection))&&(l=!0);let x=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&$ue(this);if(l){this.domObserver.stop();let y=m&&(li||Ns)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&ahe(i.selection,t.selection);if(m){let b=Ns?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Bde(this)),(o||!this.docView.update(t.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=$N(t.doc,h,d,this.dom,this)),b&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ude(this))?ul(this,y):(f_(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((s=this.dragging)===null||s===void 0)&&s.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():x&&Fue(x)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof At){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&PN(this,n.getBoundingClientRect(),t)}else PN(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let s=this.directPlugins[n];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let s=this.state.plugins[n];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let s=this.pluginViews[n];s.update&&s.update(this,t)}}updateDraggedNode(t,n){let s=t.node,i=-1;if(this.state.doc.nodeAt(s.from)==s.node)i=s.from;else{let o=s.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==s.node&&(i=o)}this.dragging=new A_(t.slice,t.move,i<0?void 0:At.create(this.state.doc,i))}someProp(t,n){let s=this._props&&this._props[t],i;if(s!=null&&(i=n?n(s):s))return i;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[t];if(u!=null&&(i=n?n(u):u))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[t];if(u!=null&&(i=n?n(u):u))return i}}hasFocus(){if(li){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Vue(this.dom),ul(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return Gue(this,t)}coordsAtPos(t,n=1){return i_(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,s=-1){let i=this.docView.posFromDOM(t,n,s);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return Que(this,n||this.state,t)}pasteHTML(t,n){return Hm(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Hm(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return qE(this,t)}destroy(){this.docView&&(Ade(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gS(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Mue())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Mde(this,t)}domSelectionRange(){let t=this.domSelection();return t?qs&&this.root.nodeType===11&&Pue(this.dom.ownerDocument)==this.dom&&Qde(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}O_.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function oP(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let s in n)s=="class"?t.class+=" "+n[s]:s=="style"?t.style=(t.style?t.style+";":"")+n[s]:!t[s]&&s!="contenteditable"&&s!="nodeName"&&(t[s]=String(n[s]))}),t.translate||(t.translate="no"),[Hs.node(0,e.state.doc.content.size,t)]}function aP(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Hs.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function lP(e){return!e.someProp("editable",t=>t(e.state)===!1)}function ahe(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function cP(e){let t=Object.create(null);function n(s){for(let i in s)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=s[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function lhe(e,t){let n=0,s=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)s++;return n!=s}function uP(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Mc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},yy={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},che=typeof navigator<"u"&&/Mac/.test(navigator.platform),uhe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ss=0;Ss<10;Ss++)Mc[48+Ss]=Mc[96+Ss]=String(Ss);for(var Ss=1;Ss<=24;Ss++)Mc[Ss+111]="F"+Ss;for(var Ss=65;Ss<=90;Ss++)Mc[Ss]=String.fromCharCode(Ss+32),yy[Ss]=String.fromCharCode(Ss);for(var yS in Mc)yy.hasOwnProperty(yS)||(yy[yS]=Mc[yS]);function dhe(e){var t=che&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||uhe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?yy:Mc)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const hhe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),fhe=typeof navigator<"u"&&/Win/.test(navigator.platform);function phe(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let s,i,o,l;for(let u=0;u<t.length-1;u++){let d=t[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))hhe?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function mhe(e){let t=Object.create(null);for(let n in e)t[phe(n)]=e[n];return t}function bS(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function ghe(e){return new Rr({props:{handleKeyDown:N_(e)}})}function N_(e){let t=mhe(e);return function(n,s){let i=dhe(s),o,l=t[bS(i,s)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(s.shiftKey){let u=t[bS(i,s,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(fhe&&s.ctrlKey&&s.altKey)&&(o=Mc[s.keyCode])&&o!=i){let u=t[bS(o,s)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var xhe=Object.defineProperty,QE=(e,t)=>{for(var n in t)xhe(e,n,{get:t[n],enumerable:!0})};function _b(e){const{state:t,transaction:n}=e;let{selection:s}=n,{doc:i}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return s},get doc(){return i},get tr(){return s=n.selection,i=n.doc,o=n.storedMarks,n}}}var Bb=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:s}=t,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([l,u])=>[l,(...h)=>{const p=u(...h)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:s,state:i}=this,{view:o}=s,l=[],u=!!e,d=e||i.tr,h=()=>(!u&&t&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),l.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,x])=>[m,(...b)=>{const C=this.buildProps(d,t),S=x(...b)(C);return l.push(S),p}])),run:h};return p}createCan(e){const{rawCommands:t,state:n}=this,s=!1,i=e||n.tr,o=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(t).map(([u,d])=>[u,(...h)=>d(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,t=!0){const{rawCommands:n,editor:s,state:i}=this,{view:o}=s,l={tr:e,editor:s,view:o,state:_b({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([u,d])=>[u,(...h)=>d(...h)(l)]))}};return l}},P_={};QE(P_,{blur:()=>yhe,clearContent:()=>bhe,clearNodes:()=>vhe,command:()=>jhe,createParagraphNear:()=>She,cut:()=>Che,deleteCurrentNode:()=>whe,deleteNode:()=>Ehe,deleteRange:()=>khe,deleteSelection:()=>Ahe,enter:()=>The,exitCode:()=>Mhe,extendMarkRange:()=>Rhe,first:()=>Dhe,focus:()=>Nhe,forEach:()=>Phe,insertContent:()=>zhe,insertContentAt:()=>_he,joinBackward:()=>Fhe,joinDown:()=>$he,joinForward:()=>Vhe,joinItemBackward:()=>Hhe,joinItemForward:()=>Uhe,joinTextblockBackward:()=>Whe,joinTextblockForward:()=>qhe,joinUp:()=>Bhe,keyboardShortcut:()=>Yhe,lift:()=>Khe,liftEmptyBlock:()=>Xhe,liftListItem:()=>Jhe,newlineInCode:()=>Qhe,resetAttributes:()=>Zhe,scrollIntoView:()=>efe,selectAll:()=>tfe,selectNodeBackward:()=>nfe,selectNodeForward:()=>rfe,selectParentNode:()=>sfe,selectTextblockEnd:()=>ife,selectTextblockStart:()=>ofe,setContent:()=>afe,setMark:()=>Efe,setMeta:()=>kfe,setNode:()=>Afe,setNodeSelection:()=>Tfe,setTextSelection:()=>Mfe,sinkListItem:()=>Rfe,splitBlock:()=>Dfe,splitListItem:()=>Ofe,toggleList:()=>Nfe,toggleMark:()=>Pfe,toggleNode:()=>zfe,toggleWrap:()=>Ife,undoInputRule:()=>Lfe,unsetAllMarks:()=>_fe,unsetMark:()=>Bfe,updateAttributes:()=>$fe,wrapIn:()=>Ffe,wrapInList:()=>Vfe});var yhe=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),bhe=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),vhe=()=>({state:e,tr:t,dispatch:n})=>{const{selection:s}=t,{ranges:i}=s;return n&&i.forEach(({$from:o,$to:l})=>{e.doc.nodesBetween(o.pos,l.pos,(u,d)=>{if(u.type.isText)return;const{doc:h,mapping:p}=t,m=h.resolve(p.map(d)),x=h.resolve(p.map(d+u.nodeSize)),y=m.blockRange(x);if(!y)return;const b=hf(y);if(u.type.isTextblock){const{defaultType:C}=m.parent.contentMatchAt(m.index());t.setNodeMarkup(y.start,C)}(b||b===0)&&t.lift(y,b)})}),!0},jhe=e=>t=>e(t),She=()=>({state:e,dispatch:t})=>K5(e,t),Che=(e,t)=>({editor:n,tr:s})=>{const{state:i}=n,o=i.doc.slice(e.from,e.to);s.deleteRange(e.from,e.to);const l=s.mapping.map(t);return s.insert(l,o.content),s.setSelection(new Bt(s.doc.resolve(Math.max(l-1,0)))),!0},whe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,s=n.$anchor.node();if(s.content.size>0)return!1;const i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s.type){if(t){const u=i.before(o),d=i.after(o);e.delete(u,d).scrollIntoView()}return!0}return!1};function Yr(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var Ehe=e=>({tr:t,state:n,dispatch:s})=>{const i=Yr(e,n.schema),o=t.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(s){const d=o.before(l),h=o.after(l);t.delete(d,h).scrollIntoView()}return!0}return!1},khe=e=>({tr:t,dispatch:n})=>{const{from:s,to:i}=e;return n&&t.delete(s,i),!0},Ahe=()=>({state:e,dispatch:t})=>_E(e,t),The=()=>({commands:e})=>e.keyboardShortcut("Enter"),Mhe=()=>({state:e,dispatch:t})=>pue(e,t);function ZE(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function by(e,t,n={strict:!0}){const s=Object.keys(t);return s.length?s.every(i=>n.strict?t[i]===e[i]:ZE(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function z_(e,t,n={}){return e.find(s=>s.type===t&&by(Object.fromEntries(Object.keys(n).map(i=>[i,s.attrs[i]])),n))}function dP(e,t,n={}){return!!z_(e,t,n)}function ek(e,t,n){var s;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===t)||(n=n||((s=i.node.marks[0])==null?void 0:s.attrs),!z_([...i.node.marks],t,n)))return;let l=i.index,u=e.start()+i.offset,d=l+1,h=u+i.node.nodeSize;for(;l>0&&dP([...e.parent.child(l-1).marks],t,n);)l-=1,u-=e.parent.child(l).nodeSize;for(;d<e.parent.childCount&&dP([...e.parent.child(d).marks],t,n);)h+=e.parent.child(d).nodeSize,d+=1;return{from:u,to:h}}function bl(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var Rhe=(e,t={})=>({tr:n,state:s,dispatch:i})=>{const o=bl(e,s.schema),{doc:l,selection:u}=n,{$from:d,from:h,to:p}=u;if(i){const m=ek(d,o,t);if(m&&m.from<=h&&m.to>=p){const x=Bt.create(l,m.from,m.to);n.setSelection(x)}}return!0},Dhe=e=>t=>{const n=typeof e=="function"?e(t):e;for(let s=0;s<n.length;s+=1)if(n[s](t))return!0;return!1};function I_(e){return e instanceof Bt}function Eu(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function L_(e,t=null){if(!t)return null;const n=qt.atStart(e),s=qt.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return s;const i=n.from,o=s.to;return t==="all"?Bt.create(e,Eu(0,i,o),Eu(e.content.size,i,o)):Bt.create(e,Eu(t,i,o),Eu(t,i,o))}function Ohe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function tk(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Nhe=(e=null,t={})=>({editor:n,view:s,tr:i,dispatch:o})=>{t={scrollIntoView:!0,...t};const l=()=>{(tk()||Ohe())&&s.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(s.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(s.hasFocus()&&e===null||e===!1)return!0;if(o&&e===null&&!I_(n.state.selection))return l(),!0;const u=L_(i.doc,e)||n.state.selection,d=n.state.selection.eq(u);return o&&(d||i.setSelection(u),d&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},Phe=(e,t)=>n=>e.every((s,i)=>t(s,{...n,index:i})),zhe=(e,t)=>({tr:n,commands:s})=>s.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),__=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const s=t[n];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?e.removeChild(s):s.nodeType===1&&__(s)}return e};function Qx(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return __(n)}function Wm(e,t,n){if(e instanceof bc||e instanceof Fe)return e;n={slice:!0,parseOptions:{},...n};const s=typeof e=="object"&&e!==null,i=typeof e=="string";if(s)try{if(Array.isArray(e)&&e.length>0)return Fe.fromArray(e.map(u=>t.nodeFromJSON(u)));const l=t.nodeFromJSON(e);return n.errorOnInvalidContent&&l.check(),l}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),Wm("",t,n)}if(i){if(n.errorOnInvalidContent){let l=!1,u="";const d=new S5({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(n.slice?vc.fromSchema(d).parseSlice(Qx(e),n.parseOptions):vc.fromSchema(d).parse(Qx(e),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=vc.fromSchema(t);return n.slice?o.parseSlice(Qx(e),n.parseOptions).content:o.parse(Qx(e),n.parseOptions)}return Wm("",t,n)}function Ihe(e,t,n){const s=e.steps.length-1;if(s<t)return;const i=e.steps[s];if(!(i instanceof cs||i instanceof ds))return;const o=e.mapping.maps[s];let l=0;o.forEach((u,d,h,p)=>{l===0&&(l=p)}),e.setSelection(qt.near(e.doc.resolve(l),n))}var Lhe=e=>!("type"in e),_he=(e,t,n)=>({tr:s,dispatch:i,editor:o})=>{var l;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const d=S=>{o.emit("contentError",{editor:o,error:S,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Wm(t,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(S){d(S)}try{u=Wm(t,o.schema,{parseOptions:h,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(S){return d(S),!1}let{from:p,to:m}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},x=!0,y=!0;if((Lhe(u)?u:[u]).forEach(S=>{S.check(),x=x?S.isText&&S.marks.length===0:!1,y=y?S.isBlock:!1}),p===m&&y){const{parent:S}=s.doc.resolve(p);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(p-=1,m+=1)}let C;if(x){if(Array.isArray(t))C=t.map(S=>S.text||"").join("");else if(t instanceof Fe){let S="";t.forEach(E=>{E.text&&(S+=E.text)}),C=S}else typeof t=="object"&&t&&t.text?C=t.text:C=t;s.insertText(C,p,m)}else{C=u;const S=s.doc.resolve(p),E=S.node(),k=S.parentOffset===0,A=E.isText||E.isTextblock,T=E.content.size>0;k&&A&&T&&(p=Math.max(0,p-1)),s.replaceWith(p,m,C)}n.updateSelection&&Ihe(s,s.steps.length-1,-1),n.applyInputRules&&s.setMeta("applyInputRules",{from:p,text:C}),n.applyPasteRules&&s.setMeta("applyPasteRules",{from:p,text:C})}return!0},Bhe=()=>({state:e,dispatch:t})=>due(e,t),$he=()=>({state:e,dispatch:t})=>hue(e,t),Fhe=()=>({state:e,dispatch:t})=>V5(e,t),Vhe=()=>({state:e,dispatch:t})=>q5(e,t),Hhe=()=>({state:e,dispatch:t,tr:n})=>{try{const s=Ob(e.doc,e.selection.$from.pos,-1);return s==null?!1:(n.join(s,2),t&&t(n),!0)}catch{return!1}},Uhe=()=>({state:e,dispatch:t,tr:n})=>{try{const s=Ob(e.doc,e.selection.$from.pos,1);return s==null?!1:(n.join(s,2),t&&t(n),!0)}catch{return!1}},Whe=()=>({state:e,dispatch:t})=>cue(e,t),qhe=()=>({state:e,dispatch:t})=>uue(e,t);function B_(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Ghe(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let s,i,o,l;for(let u=0;u<t.length-1;u+=1){const d=t[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))tk()||B_()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return s&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var Yhe=e=>({editor:t,view:n,tr:s,dispatch:i})=>{const o=Ghe(e).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=t.captureTransaction(()=>{n.someProp("handleKeyDown",h=>h(n,u))});return d?.steps.forEach(h=>{const p=h.map(s.mapping);p&&i&&s.maybeStep(p)}),!0};function Rc(e,t,n={}){const{from:s,to:i,empty:o}=e.selection,l=t?Yr(t,e.schema):null,u=[];e.doc.nodesBetween(s,i,(m,x)=>{if(m.isText)return;const y=Math.max(s,x),b=Math.min(i,x+m.nodeSize);u.push({node:m,from:y,to:b})});const d=i-s,h=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>by(m.node.attrs,n,{strict:!1}));return o?!!h.length:h.reduce((m,x)=>m+x.to-x.from,0)>=d}var Khe=(e,t={})=>({state:n,dispatch:s})=>{const i=Yr(e,n.schema);return Rc(n,i,t)?fue(n,s):!1},Xhe=()=>({state:e,dispatch:t})=>X5(e,t),Jhe=e=>({state:t,dispatch:n})=>{const s=Yr(e,t.schema);return Eue(s)(t,n)},Qhe=()=>({state:e,dispatch:t})=>Y5(e,t);function $b(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function hP(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((s,i)=>(n.includes(i)||(s[i]=e[i]),s),{})}var Zhe=(e,t)=>({tr:n,state:s,dispatch:i})=>{let o=null,l=null;const u=$b(typeof e=="string"?e:e.name,s.schema);return u?(u==="node"&&(o=Yr(e,s.schema)),u==="mark"&&(l=bl(e,s.schema)),i&&n.selection.ranges.forEach(d=>{s.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,p)=>{o&&o===h.type&&n.setNodeMarkup(p,void 0,hP(h.attrs,t)),l&&h.marks.length&&h.marks.forEach(m=>{l===m.type&&n.addMark(p,p+h.nodeSize,l.create(hP(m.attrs,t)))})})}),!0):!1},efe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),tfe=()=>({tr:e,dispatch:t})=>{if(t){const n=new Ti(e.doc);e.setSelection(n)}return!0},nfe=()=>({state:e,dispatch:t})=>U5(e,t),rfe=()=>({state:e,dispatch:t})=>G5(e,t),sfe=()=>({state:e,dispatch:t})=>xue(e,t),ife=()=>({state:e,dispatch:t})=>vue(e,t),ofe=()=>({state:e,dispatch:t})=>bue(e,t);function pw(e,t,n={},s={}){return Wm(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:s.errorOnInvalidContent})}var afe=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:s={}}={})=>({editor:i,tr:o,dispatch:l,commands:u})=>{const{doc:d}=o;if(s.preserveWhitespace!=="full"){const h=pw(e,i.schema,s,{errorOnInvalidContent:t??i.options.enableContentCheck});return l&&o.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!n),!0}return l&&o.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:d.content.size},e,{parseOptions:s,errorOnInvalidContent:t??i.options.enableContentCheck})};function $_(e,t){const n=bl(t,e.schema),{from:s,to:i,empty:o}=e.selection,l=[];o?(e.storedMarks&&l.push(...e.storedMarks),l.push(...e.selection.$head.marks())):e.doc.nodesBetween(s,i,d=>{l.push(...d.marks)});const u=l.find(d=>d.type.name===n.name);return u?{...u.attrs}:{}}function F_(e,t){const n=new _5(e);return t.forEach(s=>{s.steps.forEach(i=>{n.step(i)})}),n}function lfe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function cfe(e,t,n){const s=[];return e.nodesBetween(t.from,t.to,(i,o)=>{n(i)&&s.push({node:i,pos:o})}),s}function ufe(e,t){for(let n=e.depth;n>0;n-=1){const s=e.node(n);if(t(s))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:s}}}function Fb(e){return t=>ufe(t.$from,e)}function Et(e,t,n){return e.config[t]===void 0&&e.parent?Et(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?Et(e.parent,t,n):null}):e.config[t]}function nk(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},s=Et(t,"addExtensions",n);return s?[t,...nk(s())]:t}).flat(10)}function rk(e,t){const n=ud.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function V_(e){return typeof e=="function"}function _n(e,t=void 0,...n){return V_(e)?t?e.bind(t)(...n):e(...n):e}function dfe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function qm(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),s=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:s}}function H_(e){const t=[],{nodeExtensions:n,markExtensions:s}=qm(e),i=[...n,...s],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:i},d=Et(l,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([x,y])=>{t.push({type:m,name:x,attribute:{...o,...y}})})})})}),i.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},d=Et(l,"addAttributes",u);if(!d)return;const h=d();Object.entries(h).forEach(([p,m])=>{const x={...o,...m};typeof x?.default=="function"&&(x.default=x.default()),x?.isRequired&&x?.default===void 0&&delete x.default,t.push({type:l.name,name:p,attribute:x})})}),t}function xr(...e){return e.filter(t=>!!t).reduce((t,n)=>{const s={...t};return Object.entries(n).forEach(([i,o])=>{if(!s[i]){s[i]=o;return}if(i==="class"){const u=o?String(o).split(" "):[],d=s[i]?s[i].split(" "):[],h=u.filter(p=>!d.includes(p));s[i]=[...d,...h].join(" ")}else if(i==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=s[i]?s[i].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;d.forEach(p=>{const[m,x]=p.split(":").map(y=>y.trim());h.set(m,x)}),u.forEach(p=>{const[m,x]=p.split(":").map(y=>y.trim());h.set(m,x)}),s[i]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else s[i]=o}),s},{})}function vy(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,s)=>xr(n,s),{})}function hfe(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function fP(e,t){return"style"in e?e:{...e,getAttrs:n=>{const s=e.getAttrs?e.getAttrs(n):e.attrs;if(s===!1)return!1;const i=t.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(n):hfe(n.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...s,...i}}}}function pP(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&dfe(n)?!1:n!=null))}function ffe(e,t){var n;const s=H_(e),{nodeExtensions:i,markExtensions:o}=qm(e),l=(n=i.find(h=>Et(h,"topNode")))==null?void 0:n.name,u=Object.fromEntries(i.map(h=>{const p=s.filter(E=>E.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:t},x=e.reduce((E,k)=>{const A=Et(k,"extendNodeSchema",m);return{...E,...A?A(h):{}}},{}),y=pP({...x,content:_n(Et(h,"content",m)),marks:_n(Et(h,"marks",m)),group:_n(Et(h,"group",m)),inline:_n(Et(h,"inline",m)),atom:_n(Et(h,"atom",m)),selectable:_n(Et(h,"selectable",m)),draggable:_n(Et(h,"draggable",m)),code:_n(Et(h,"code",m)),whitespace:_n(Et(h,"whitespace",m)),linebreakReplacement:_n(Et(h,"linebreakReplacement",m)),defining:_n(Et(h,"defining",m)),isolating:_n(Et(h,"isolating",m)),attrs:Object.fromEntries(p.map(E=>{var k,A;return[E.name,{default:(k=E?.attribute)==null?void 0:k.default,validate:(A=E?.attribute)==null?void 0:A.validate}]}))}),b=_n(Et(h,"parseHTML",m));b&&(y.parseDOM=b.map(E=>fP(E,p)));const C=Et(h,"renderHTML",m);C&&(y.toDOM=E=>C({node:E,HTMLAttributes:vy(E,p)}));const S=Et(h,"renderText",m);return S&&(y.toText=S),[h.name,y]})),d=Object.fromEntries(o.map(h=>{const p=s.filter(S=>S.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:t},x=e.reduce((S,E)=>{const k=Et(E,"extendMarkSchema",m);return{...S,...k?k(h):{}}},{}),y=pP({...x,inclusive:_n(Et(h,"inclusive",m)),excludes:_n(Et(h,"excludes",m)),group:_n(Et(h,"group",m)),spanning:_n(Et(h,"spanning",m)),code:_n(Et(h,"code",m)),attrs:Object.fromEntries(p.map(S=>{var E,k;return[S.name,{default:(E=S?.attribute)==null?void 0:E.default,validate:(k=S?.attribute)==null?void 0:k.validate}]}))}),b=_n(Et(h,"parseHTML",m));b&&(y.parseDOM=b.map(S=>fP(S,p)));const C=Et(h,"renderHTML",m);return C&&(y.toDOM=S=>C({mark:S,HTMLAttributes:vy(S,p)})),[h.name,y]}));return new S5({topNode:l,nodes:u,marks:d})}function pfe(e){const t=e.filter((n,s)=>e.indexOf(n)!==s);return Array.from(new Set(t))}function sk(e){return e.sort((n,s)=>{const i=Et(n,"priority")||100,o=Et(s,"priority")||100;return i>o?-1:i<o?1:0})}function U_(e){const t=sk(nk(e)),n=pfe(t.map(s=>s.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}function W_(e,t,n){const{from:s,to:i}=t,{blockSeparator:o=`

`,textSerializers:l={}}=n||{};let u="";return e.nodesBetween(s,i,(d,h,p,m)=>{var x;d.isBlock&&h>s&&(u+=o);const y=l?.[d.type.name];if(y)return p&&(u+=y({node:d,pos:h,parent:p,index:m,range:t})),!1;d.isText&&(u+=(x=d?.text)==null?void 0:x.slice(Math.max(s,h)-h,i-h))}),u}function mfe(e,t){const n={from:0,to:e.content.size};return W_(e,n,t)}function q_(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function gfe(e,t){const n=Yr(t,e.schema),{from:s,to:i}=e.selection,o=[];e.doc.nodesBetween(s,i,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function G_(e,t){const n=$b(typeof t=="string"?t:t.name,e.schema);return n==="node"?gfe(e,t):n==="mark"?$_(e,t):{}}function xfe(e,t=JSON.stringify){const n={};return e.filter(s=>{const i=t(s);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function yfe(e){const t=xfe(e);return t.length===1?t:t.filter((n,s)=>!t.filter((o,l)=>l!==s).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function Y_(e){const{mapping:t,steps:n}=e,s=[];return t.maps.forEach((i,o)=>{const l=[];if(i.ranges.length)i.forEach((u,d)=>{l.push({from:u,to:d})});else{const{from:u,to:d}=n[o];if(u===void 0||d===void 0)return;l.push({from:u,to:d})}l.forEach(({from:u,to:d})=>{const h=t.slice(o).map(u,-1),p=t.slice(o).map(d),m=t.invert().map(h,-1),x=t.invert().map(p);s.push({oldRange:{from:m,to:x},newRange:{from:h,to:p}})})}),yfe(s)}function ik(e,t,n){const s=[];return e===t?n.resolve(e).marks().forEach(i=>{const o=n.resolve(e),l=ek(o,i.type);l&&s.push({mark:i,...l})}):n.nodesBetween(e,t,(i,o)=>{!i||i?.nodeSize===void 0||s.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),s}var bfe=(e,t,n,s=20)=>{const i=e.doc.resolve(n);let o=s,l=null;for(;o>0&&l===null;){const u=i.node(o);u?.type.name===t?l=u:o-=1}return[l,o]};function vS(e,t){return t.nodes[e]||t.marks[e]||null}function P0(e,t,n){return Object.fromEntries(Object.entries(n).filter(([s])=>{const i=e.find(o=>o.type===t&&o.name===s);return i?i.attribute.keepOnSplit:!1}))}var vfe=(e,t=500)=>{let n="";const s=e.parentOffset;return e.parent.nodesBetween(Math.max(0,s-t),s,(i,o,l,u)=>{var d,h;const p=((h=(d=i.type.spec).toText)==null?void 0:h.call(d,{node:i,pos:o,parent:l,index:u}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,s-o))}),n};function mw(e,t,n={}){const{empty:s,ranges:i}=e.selection,o=t?bl(t,e.schema):null;if(s)return!!(e.storedMarks||e.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>by(m.attrs,n,{strict:!1}));let l=0;const u=[];if(i.forEach(({$from:m,$to:x})=>{const y=m.pos,b=x.pos;e.doc.nodesBetween(y,b,(C,S)=>{if(!C.isText&&!C.marks.length)return;const E=Math.max(y,S),k=Math.min(b,S+C.nodeSize),A=k-E;l+=A,u.push(...C.marks.map(T=>({mark:T,from:E,to:k})))})}),l===0)return!1;const d=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>by(m.mark.attrs,n,{strict:!1})).reduce((m,x)=>m+x.to-x.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,x)=>m+x.to-x.from,0);return(d>0?d+h:d)>=l}function jfe(e,t,n={}){if(!t)return Rc(e,null,n)||mw(e,null,n);const s=$b(t,e.schema);return s==="node"?Rc(e,t,n):s==="mark"?mw(e,t,n):!1}var Sfe=(e,t)=>{const{$from:n,$to:s,$anchor:i}=e.selection;if(t){const o=Fb(u=>u.type.name===t)(e.selection);if(!o)return!1;const l=e.doc.resolve(o.pos+1);return i.pos+1===l.end()}return!(s.parentOffset<s.parent.nodeSize-2||n.pos!==s.pos)},Cfe=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function mP(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function gP(e,t){const{nodeExtensions:n}=qm(t),s=n.find(l=>l.name===e);if(!s)return!1;const i={name:s.name,options:s.options,storage:s.storage},o=_n(Et(s,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Vb(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var s;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((s=e.text)!=null?s:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(o=>{i!==!1&&(Vb(o,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function K_(e){return e instanceof At}function wfe(e,t,n){var s;const{selection:i}=t;let o=null;if(I_(i)&&(o=i.$cursor),o){const u=(s=e.storedMarks)!=null?s:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(h=>h.type.excludes(n)))}const{ranges:l}=i;return l.some(({$from:u,$to:d})=>{let h=u.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(u.pos,d.pos,(p,m,x)=>{if(h)return!1;if(p.isInline){const y=!x||x.type.allowsMarkType(n),b=!!n.isInSet(p.marks)||!p.marks.some(C=>C.type.excludes(n));h=y&&b}return!h}),h})}var Efe=(e,t={})=>({tr:n,state:s,dispatch:i})=>{const{selection:o}=n,{empty:l,ranges:u}=o,d=bl(e,s.schema);if(i)if(l){const h=$_(s,d);n.addStoredMark(d.create({...h,...t}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;s.doc.nodesBetween(p,m,(x,y)=>{const b=Math.max(y,p),C=Math.min(y+x.nodeSize,m);x.marks.find(E=>E.type===d)?x.marks.forEach(E=>{d===E.type&&n.addMark(b,C,d.create({...E.attrs,...t}))}):n.addMark(b,C,d.create(t))})});return wfe(s,n,d)},kfe=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),Afe=(e,t={})=>({state:n,dispatch:s,chain:i})=>{const o=Yr(e,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:u})=>DN(o,{...l,...t})(n)?!0:u.clearNodes()).command(({state:u})=>DN(o,{...l,...t})(u,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Tfe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:s}=t,i=Eu(e,0,s.content.size),o=At.create(s,i);t.setSelection(o)}return!0},Mfe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:s}=t,{from:i,to:o}=typeof e=="number"?{from:e,to:e}:e,l=Bt.atStart(s).from,u=Bt.atEnd(s).to,d=Eu(i,l,u),h=Eu(o,l,u),p=Bt.create(s,d,h);t.setSelection(p)}return!0},Rfe=e=>({state:t,dispatch:n})=>{const s=Yr(e,t.schema);return Tue(s)(t,n)};function xP(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const s=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(s)}}var Dfe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:s,editor:i})=>{const{selection:o,doc:l}=t,{$from:u,$to:d}=o,h=i.extensionManager.attributes,p=P0(h,u.node().type.name,u.node().attrs);if(o instanceof At&&o.node.isBlock)return!u.parentOffset||!cl(l,u.pos)?!1:(s&&(e&&xP(n,i.extensionManager.splittableMarks),t.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,x=u.depth===0?void 0:lfe(u.node(-1).contentMatchAt(u.indexAfter(-1)));let y=m&&x?[{type:x,attrs:p}]:void 0,b=cl(t.doc,t.mapping.map(u.pos),1,y);if(!y&&!b&&cl(t.doc,t.mapping.map(u.pos),1,x?[{type:x}]:void 0)&&(b=!0,y=x?[{type:x,attrs:p}]:void 0),s){if(b&&(o instanceof Bt&&t.deleteSelection(),t.split(t.mapping.map(u.pos),1,y),x&&!m&&!u.parentOffset&&u.parent.type!==x)){const C=t.mapping.map(u.before()),S=t.doc.resolve(C);u.node(-1).canReplaceWith(S.index(),S.index()+1,x)&&t.setNodeMarkup(t.mapping.map(u.before()),x)}e&&xP(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return b},Ofe=(e,t={})=>({tr:n,state:s,dispatch:i,editor:o})=>{var l;const u=Yr(e,s.schema),{$from:d,$to:h}=s.selection,p=s.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;const m=d.node(-1);if(m.type!==u)return!1;const x=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let E=Fe.empty;const k=d.index(-1)?1:d.index(-2)?2:3;for(let W=d.depth-k;W>=d.depth-3;W-=1)E=Fe.from(d.node(W).copy(E));const A=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,T={...P0(x,d.node().type.name,d.node().attrs),...t},M=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(T))||void 0;E=E.append(Fe.from(u.createAndFill(null,M)||void 0));const D=d.before(d.depth-(k-1));n.replace(D,d.after(-A),new it(E,4-k,0));let $=-1;n.doc.nodesBetween(D,n.doc.content.size,(W,te)=>{if($>-1)return!1;W.isTextblock&&W.content.size===0&&($=te+1)}),$>-1&&n.setSelection(Bt.near(n.doc.resolve($))),n.scrollIntoView()}return!0}const y=h.pos===d.end()?m.contentMatchAt(0).defaultType:null,b={...P0(x,m.type.name,m.attrs),...t},C={...P0(x,d.node().type.name,d.node().attrs),...t};n.delete(d.pos,h.pos);const S=y?[{type:u,attrs:b},{type:y,attrs:C}]:[{type:u,attrs:b}];if(!cl(n.doc,d.pos,2))return!1;if(i){const{selection:E,storedMarks:k}=s,{splittableMarks:A}=o.extensionManager,T=k||E.$to.parentOffset&&E.$from.marks();if(n.split(d.pos,2,S).scrollIntoView(),!T||!i)return!0;const M=T.filter(D=>A.includes(D.type.name));n.ensureMarks(M)}return!0},jS=(e,t)=>{const n=Fb(l=>l.type===t)(e.selection);if(!n)return!0;const s=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(s===void 0)return!0;const i=e.doc.nodeAt(s);return n.node.type===i?.type&&Lc(e.doc,n.pos)&&e.join(n.pos),!0},SS=(e,t)=>{const n=Fb(l=>l.type===t)(e.selection);if(!n)return!0;const s=e.doc.resolve(n.start).after(n.depth);if(s===void 0)return!0;const i=e.doc.nodeAt(s);return n.node.type===i?.type&&Lc(e.doc,s)&&e.join(s),!0},Nfe=(e,t,n,s={})=>({editor:i,tr:o,state:l,dispatch:u,chain:d,commands:h,can:p})=>{const{extensions:m,splittableMarks:x}=i.extensionManager,y=Yr(e,l.schema),b=Yr(t,l.schema),{selection:C,storedMarks:S}=l,{$from:E,$to:k}=C,A=E.blockRange(k),T=S||C.$to.parentOffset&&C.$from.marks();if(!A)return!1;const M=Fb(D=>gP(D.type.name,m))(C);if(A.depth>=1&&M&&A.depth-M.depth<=1){if(M.node.type===y)return h.liftListItem(b);if(gP(M.node.type.name,m)&&y.validContent(M.node.content)&&u)return d().command(()=>(o.setNodeMarkup(M.pos,y),!0)).command(()=>jS(o,y)).command(()=>SS(o,y)).run()}return!n||!T||!u?d().command(()=>p().wrapInList(y,s)?!0:h.clearNodes()).wrapInList(y,s).command(()=>jS(o,y)).command(()=>SS(o,y)).run():d().command(()=>{const D=p().wrapInList(y,s),$=T.filter(W=>x.includes(W.type.name));return o.ensureMarks($),D?!0:h.clearNodes()}).wrapInList(y,s).command(()=>jS(o,y)).command(()=>SS(o,y)).run()},Pfe=(e,t={},n={})=>({state:s,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,l=bl(e,s.schema);return mw(s,l,t)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,t)},zfe=(e,t,n={})=>({state:s,commands:i})=>{const o=Yr(e,s.schema),l=Yr(t,s.schema),u=Rc(s,o,n);let d;return s.selection.$anchor.sameParent(s.selection.$head)&&(d=s.selection.$anchor.parent.attrs),u?i.setNode(l,d):i.setNode(o,{...d,...n})},Ife=(e,t={})=>({state:n,commands:s})=>{const i=Yr(e,n.schema);return Rc(n,i,t)?s.lift(i):s.wrapIn(i,t)},Lfe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let s=0;s<n.length;s+=1){const i=n[s];let o;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){const l=e.tr,u=o.transform;for(let d=u.steps.length-1;d>=0;d-=1)l.step(u.steps[d].invert(u.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,e.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},_fe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:s,ranges:i}=n;return s||t&&i.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0},Bfe=(e,t={})=>({tr:n,state:s,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=t,{selection:u}=n,d=bl(e,s.schema),{$from:h,empty:p,ranges:m}=u;if(!i)return!0;if(p&&l){let{from:x,to:y}=u;const b=(o=h.marks().find(S=>S.type===d))==null?void 0:o.attrs,C=ek(h,d,b);C&&(x=C.from,y=C.to),n.removeMark(x,y,d)}else m.forEach(x=>{n.removeMark(x.$from.pos,x.$to.pos,d)});return n.removeStoredMark(d),!0},$fe=(e,t={})=>({tr:n,state:s,dispatch:i})=>{let o=null,l=null;const u=$b(typeof e=="string"?e:e.name,s.schema);return u?(u==="node"&&(o=Yr(e,s.schema)),u==="mark"&&(l=bl(e,s.schema)),i&&n.selection.ranges.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;let m,x,y,b;n.selection.empty?s.doc.nodesBetween(h,p,(C,S)=>{o&&o===C.type&&(y=Math.max(S,h),b=Math.min(S+C.nodeSize,p),m=S,x=C)}):s.doc.nodesBetween(h,p,(C,S)=>{S<h&&o&&o===C.type&&(y=Math.max(S,h),b=Math.min(S+C.nodeSize,p),m=S,x=C),S>=h&&S<=p&&(o&&o===C.type&&n.setNodeMarkup(S,void 0,{...C.attrs,...t}),l&&C.marks.length&&C.marks.forEach(E=>{if(l===E.type){const k=Math.max(S,h),A=Math.min(S+C.nodeSize,p);n.addMark(k,A,l.create({...E.attrs,...t}))}}))}),x&&(m!==void 0&&n.setNodeMarkup(m,void 0,{...x.attrs,...t}),l&&x.marks.length&&x.marks.forEach(C=>{l===C.type&&n.addMark(y,b,l.create({...C.attrs,...t}))}))}),!0):!1},Ffe=(e,t={})=>({state:n,dispatch:s})=>{const i=Yr(e,n.schema);return jue(i,t)(n,s)},Vfe=(e,t={})=>({state:n,dispatch:s})=>{const i=Yr(e,n.schema);return Sue(i,t)(n,s)},Hfe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(s=>s.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const n=(...s)=>{this.off(e,n),t.apply(this,s)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},Hb=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},Ufe=(e,t)=>{if(ZE(t))return t.exec(e);const n=t(e);if(!n)return null;const s=[n.text];return s.index=n.index,s.input=e,s.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(n.replaceWith)),s};function Zx(e){var t;const{editor:n,from:s,to:i,text:o,rules:l,plugin:u}=e,{view:d}=n;if(d.composing)return!1;const h=d.state.doc.resolve(s);if(h.parent.type.spec.code||(t=h.nodeBefore||h.nodeAfter)!=null&&t.marks.find(x=>x.type.spec.code))return!1;let p=!1;const m=vfe(h)+o;return l.forEach(x=>{if(p)return;const y=Ufe(m,x.find);if(!y)return;const b=d.state.tr,C=_b({state:d.state,transaction:b}),S={from:s-(y[0].length-o.length),to:i},{commands:E,chain:k,can:A}=new Bb({editor:n,state:C});x.handler({state:C,range:S,match:y,commands:E,chain:k,can:A})===null||!b.steps.length||(x.undoable&&b.setMeta(u,{transform:b,from:s,to:i,text:o}),d.dispatch(b),p=!0)}),p}function Wfe(e){const{editor:t,rules:n}=e,s=new Rr({state:{init(){return null},apply(i,o,l){const u=i.getMeta(s);if(u)return u;const d=i.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=rk(Fe.from(p),l.schema);const{from:m}=d,x=m+p.length;Zx({editor:t,from:m,to:x,text:p,rules:n,plugin:s})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,l,u){return Zx({editor:t,from:o,to:l,text:u,rules:n,plugin:s})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Zx({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:s})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?Zx({editor:t,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:s}):!1}},isInputRules:!0});return s}function qfe(e){return Object.prototype.toString.call(e).slice(8,-1)}function e0(e){return qfe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function X_(e,t){const n={...e};return e0(e)&&e0(t)&&Object.keys(t).forEach(s=>{e0(t[s])&&e0(e[s])?n[s]=X_(e[s],t[s]):n[s]=t[s]}),n}var ok=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{..._n(Et(this,"addOptions",{name:this.name}))||{}}}get storage(){return{..._n(Et(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>X_(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},vl=class J_ extends ok{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new J_(n)}static handleExit({editor:t,mark:n}){const{tr:s}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(h=>h?.type.name===n.name))return!1;const d=l.find(h=>h?.type.name===n.name);return d&&s.removeStoredMark(d),s.insertText(" ",i.pos),t.view.dispatch(s),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Gfe(e){return typeof e=="number"}var Yfe=class{constructor(e){this.find=e.find,this.handler=e.handler}},Kfe=(e,t,n)=>{if(ZE(t))return[...e.matchAll(t)];const s=t(e,n);return s?s.map(i=>{const o=[i.text];return o.index=i.index,o.input=e,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function Xfe(e){const{editor:t,state:n,from:s,to:i,rule:o,pasteEvent:l,dropEvent:u}=e,{commands:d,chain:h,can:p}=new Bb({editor:t,state:n}),m=[];return n.doc.nodesBetween(s,i,(y,b)=>{var C,S,E,k,A;if((S=(C=y.type)==null?void 0:C.spec)!=null&&S.code||!(y.isText||y.isTextblock||y.isInline))return;const T=(A=(k=(E=y.content)==null?void 0:E.size)!=null?k:y.nodeSize)!=null?A:0,M=Math.max(s,b),D=Math.min(i,b+T);if(M>=D)return;const $=y.isText?y.text||"":y.textBetween(M-b,D-b,void 0,"");Kfe($,o.find,l).forEach(te=>{if(te.index===void 0)return;const re=M+te.index+1,U=re+te[0].length,oe={from:n.tr.mapping.map(re),to:n.tr.mapping.map(U)},xe=o.handler({state:n,range:oe,match:te,commands:d,chain:h,can:p,pasteEvent:l,dropEvent:u});m.push(xe)})}),m.every(y=>y!==null)}var t0=null,Jfe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function Qfe(e){const{editor:t,rules:n}=e;let s=null,i=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:m,to:x,rule:y,pasteEvt:b})=>{const C=p.tr,S=_b({state:p,transaction:C});if(!(!Xfe({editor:t,state:S,from:Math.max(m-1,0),to:x.b-1,rule:y,pasteEvent:b,dropEvent:u})||!C.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return n.map(p=>new Rr({view(m){const x=b=>{var C;s=(C=m.dom.parentElement)!=null&&C.contains(b.target)?m.dom.parentElement:null,s&&(t0=t)},y=()=>{t0&&(t0=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(m,x)=>{if(o=s===m.dom.parentElement,u=x,!o){const y=t0;y?.isEditable&&setTimeout(()=>{const b=y.state.selection;b&&y.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(m,x)=>{var y;const b=(y=x.clipboardData)==null?void 0:y.getData("text/html");return l=x,i=!!b?.includes("data-pm-slice"),!1}}},appendTransaction:(m,x,y)=>{const b=m[0],C=b.getMeta("uiEvent")==="paste"&&!i,S=b.getMeta("uiEvent")==="drop"&&!o,E=b.getMeta("applyPasteRules"),k=!!E;if(!C&&!S&&!k)return;if(k){let{text:M}=E;typeof M=="string"?M=M:M=rk(Fe.from(M),y.schema);const{from:D}=E,$=D+M.length,W=Jfe(M);return d({rule:p,state:y,from:D,to:{b:$},pasteEvt:W})}const A=x.doc.content.findDiffStart(y.doc.content),T=x.doc.content.findDiffEnd(y.doc.content);if(!(!Gfe(A)||!T||A===T.b))return d({rule:p,state:y,from:A,to:T,pasteEvt:l})}}))}var Ub=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=U_(e),this.schema=ffe(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:vS(t.name,this.schema)},s=Et(t,"addCommands",n);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this;return sk([...this.extensions].reverse()).flatMap(s=>{const i={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:vS(s.name,this.schema)},o=[],l=Et(s,"addKeyboardShortcuts",i);let u={};if(s.type==="mark"&&Et(s,"exitable",i)&&(u.ArrowRight=()=>vl.handleExit({editor:e,mark:s})),l){const x=Object.fromEntries(Object.entries(l()).map(([y,b])=>[y,()=>b({editor:e})]));u={...u,...x}}const d=ghe(u);o.push(d);const h=Et(s,"addInputRules",i);if(mP(s,e.options.enableInputRules)&&h){const x=h();if(x&&x.length){const y=Wfe({editor:e,rules:x}),b=Array.isArray(y)?y:[y];o.push(...b)}}const p=Et(s,"addPasteRules",i);if(mP(s,e.options.enablePasteRules)&&p){const x=p();if(x&&x.length){const y=Qfe({editor:e,rules:x});o.push(...y)}}const m=Et(s,"addProseMirrorPlugins",i);if(m){const x=m();o.push(...x)}return o})}get attributes(){return H_(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=qm(this.extensions);return Object.fromEntries(t.filter(n=>!!Et(n,"addNodeView")).map(n=>{const s=this.attributes.filter(d=>d.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Yr(n.name,this.schema)},o=Et(n,"addNodeView",i);if(!o)return[];const l=o();if(!l)return[];const u=(d,h,p,m,x)=>{const y=vy(d,s);return l({node:d,view:h,getPos:p,decorations:m,innerDecorations:x,editor:e,extension:n,HTMLAttributes:y})};return[n.name,u]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=qm(this.extensions);return Object.fromEntries(t.filter(n=>!!Et(n,"addMarkView")).map(n=>{const s=this.attributes.filter(u=>u.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:bl(n.name,this.schema)},o=Et(n,"addMarkView",i);if(!o)return[];const l=(u,d,h)=>{const p=vy(u,s);return o()({mark:u,view:d,inline:h,editor:e,extension:n,HTMLAttributes:p,updateAttributes:m=>{fpe(u,e,m)}})};return[n.name,l]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:vS(t.name,this.schema)};t.type==="mark"&&((n=_n(Et(t,"keepOnSplit",s)))==null||n)&&this.splittableMarks.push(t.name);const i=Et(t,"onBeforeCreate",s),o=Et(t,"onCreate",s),l=Et(t,"onUpdate",s),u=Et(t,"onSelectionUpdate",s),d=Et(t,"onTransaction",s),h=Et(t,"onFocus",s),p=Et(t,"onBlur",s),m=Et(t,"onDestroy",s);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};Ub.resolve=U_;Ub.sort=sk;Ub.flatten=nk;var Zfe={};QE(Zfe,{ClipboardTextSerializer:()=>Z_,Commands:()=>e6,Delete:()=>t6,Drop:()=>n6,Editable:()=>r6,FocusEvents:()=>i6,Keymap:()=>o6,Paste:()=>a6,Tabindex:()=>l6,focusEventsPluginKey:()=>s6});var Xn=class Q_ extends ok{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new Q_(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},Z_=Xn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Rr({key:new fs("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:s,selection:i}=t,{ranges:o}=i,l=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),d=q_(n);return W_(s,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),e6=Xn.create({name:"commands",addCommands(){return{...P_}}}),t6=Xn.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,s,i;const o=()=>{var l,u,d,h;if((h=(d=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:d.call(u,e))!=null?h:e.getMeta("y-sync$"))return;const p=F_(e.before,[e,...t]);Y_(p).forEach(y=>{p.mapping.mapResult(y.oldRange.from).deletedAfter&&p.mapping.mapResult(y.oldRange.to).deletedBefore&&p.before.nodesBetween(y.oldRange.from,y.oldRange.to,(b,C)=>{const S=C+b.nodeSize-2,E=y.oldRange.from<=C&&S<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:b,from:C,to:S,newFrom:p.mapping.map(C),newTo:p.mapping.map(S),deletedRange:y.oldRange,newRange:y.newRange,partial:!E,editor:this.editor,transaction:e,combinedTransform:p})})});const x=p.mapping;p.steps.forEach((y,b)=>{var C,S;if(y instanceof Eo){const E=x.slice(b).map(y.from,-1),k=x.slice(b).map(y.to),A=x.invert().map(E,-1),T=x.invert().map(k),M=(C=p.doc.nodeAt(E-1))==null?void 0:C.marks.some($=>$.eq(y.mark)),D=(S=p.doc.nodeAt(k))==null?void 0:S.marks.some($=>$.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:A,to:T},newRange:{from:E,to:k},partial:!!(D||M),editor:this.editor,transaction:e,combinedTransform:p})}})};(i=(s=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:s.async)==null||i?setTimeout(o,0):o()}}),n6=Xn.create({name:"drop",addProseMirrorPlugins(){return[new Rr({key:new fs("tiptapDrop"),props:{handleDrop:(e,t,n,s)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:s})}}})]}}),r6=Xn.create({name:"editable",addProseMirrorPlugins(){return[new Rr({key:new fs("editable"),props:{editable:()=>this.editor.options.editable}})]}}),s6=new fs("focusEvents"),i6=Xn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Rr({key:s6,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const s=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(s),!1},blur:(t,n)=>{e.isFocused=!1;const s=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(s),!1}}}})]}}),o6=Xn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:d,doc:h}=u,{empty:p,$anchor:m}=d,{pos:x,parent:y}=m,b=m.parent.isTextblock&&x>0?u.doc.resolve(x-1):m,C=b.parent.type.spec.isolating,S=m.pos-m.parentOffset,E=C&&b.parent.childCount===1?S===m.pos:qt.atStart(h).from===x;return!p||!y.type.isTextblock||y.textContent.length||!E||E&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...s},o={...s,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return tk()||B_()?o:i},addProseMirrorPlugins(){return[new Rr({key:new fs("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(C=>C.getMeta("composition")))return;const s=e.some(C=>C.docChanged)&&!t.doc.eq(n.doc),i=e.some(C=>C.getMeta("preventClearDocument"));if(!s||i)return;const{empty:o,from:l,to:u}=t.selection,d=qt.atStart(t.doc).from,h=qt.atEnd(t.doc).to;if(o||!(l===d&&u===h)||!Vb(n.doc))return;const x=n.tr,y=_b({state:n,transaction:x}),{commands:b}=new Bb({editor:this.editor,state:y});if(b.clearNodes(),!!x.steps.length)return x}})]}}),a6=Xn.create({name:"paste",addProseMirrorPlugins(){return[new Rr({key:new fs("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),l6=Xn.create({name:"tabindex",addProseMirrorPlugins(){return[new Rr({key:new fs("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),epe=class uh{constructor(t,n,s=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:n,to:s},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new uh(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new uh(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new uh(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,s)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,l=this.pos+s+(o?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(l);if(!i&&u.depth<=this.depth)return;const d=new uh(u,this.editor,i,i?n:null);i&&(d.actualDepth=this.depth+1),t.push(new uh(u,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let s=null,i=this.parent;for(;i&&!s;){if(i.node.type.name===t)if(Object.keys(n).length>0){const o=i.node.attrs,l=Object.keys(n);for(let u=0;u<l.length;u+=1){const d=l[u];if(o[d]!==n[d])break}}else s=i;i=i.parent}return s}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},s=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(l=>{s&&i.length>0||(l.node.type.name===t&&o.every(d=>n[d]===l.node.attrs[d])&&i.push(l),!(s&&i.length>0)&&(i=i.concat(l.querySelectorAll(t,n,s))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},tpe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function npe(e,t,n){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var rpe=class extends Hfe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:i,moved:o})=>this.options.onDrop(s,i,o)),this.on("paste",({event:s,slice:i})=>this.options.onPaste(s,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=L_(t,this.options.autofocus);this.editorState=Eh.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=npe(tpe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=V_(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:n});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(l=>!l.key.startsWith(o))}),t.length===n.length)return;const s=this.state.reconfigure({plugins:n});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[r6,Z_.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),e6,i6,o6,l6,n6,a6,t6].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Ub(s,this)}createCommandManager(){this.commandManager=new Bb({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=pw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=pw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new O_(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),s=!this.state.selection.eq(t.selection),i=n.includes(e),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const l=n.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=l?.getMeta("focus"),d=l?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),d&&this.emit("blur",{editor:this,event:d.event,transaction:l}),!(e.getMeta("preventUpdate")||!n.some(h=>h.docChanged)||o.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return G_(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return jfe(this.state,n,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return rk(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return mfe(this.state.doc,{blockSeparator:t,textSerializers:{...q_(this.schema),...n}})}get isEmpty(){return Vb(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new epe(t,this)}get $doc(){return this.$pos(0)}};function id(e){return new Hb({find:e.find,handler:({state:t,range:n,match:s})=>{const i=_n(e.getAttributes,void 0,s);if(i===!1||i===null)return null;const{tr:o}=t,l=s[s.length-1],u=s[0];if(l){const d=u.search(/\S/),h=n.from+u.indexOf(l),p=h+l.length;if(ik(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(C=>C===e.type&&C!==y.mark.type)).filter(y=>y.to>h).length)return null;p<n.to&&o.delete(p,n.to),h>n.from&&o.delete(n.from+d,h);const x=n.from+d+l.length;o.addMark(n.from+d,x,e.type.create(i||{})),o.removeStoredMark(e.type)}},undoable:e.undoable})}function c6(e){return new Hb({find:e.find,handler:({state:t,range:n,match:s})=>{const i=_n(e.getAttributes,void 0,s)||{},{tr:o}=t,l=n.from;let u=n.to;const d=e.type.create(i);if(s[1]){const h=s[0].lastIndexOf(s[1]);let p=l+h;p>u?p=u:u=p+s[1].length;const m=s[0][s[0].length-1];o.insertText(m,l+s[0].length-1),o.replaceWith(p,u,d)}else if(s[0]){const h=e.type.isInline?l:l-1;o.insert(h,e.type.create(i)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()},undoable:e.undoable})}function gw(e){return new Hb({find:e.find,handler:({state:t,range:n,match:s})=>{const i=t.doc.resolve(n.from),o=_n(e.getAttributes,void 0,s)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)},undoable:e.undoable})}function ef(e){return new Hb({find:e.find,handler:({state:t,range:n,match:s,chain:i})=>{const o=_n(e.getAttributes,void 0,s)||{},l=t.tr.delete(n.from,n.to),d=l.doc.resolve(n.from).blockRange(),h=d&&IE(d,e.type,o);if(!h)return null;if(l.wrap(d,h),e.keepMarks&&e.editor){const{selection:m,storedMarks:x}=t,{splittableMarks:y}=e.editor.extensionManager,b=x||m.$to.parentOffset&&m.$from.marks();if(b){const C=b.filter(S=>y.includes(S.type.name));l.ensureMarks(C)}}if(e.keepAttributes){const m=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,o).run()}const p=l.doc.resolve(n.from-1).nodeBefore;p&&p.type===e.type&&Lc(l.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(s,p))&&l.join(n.from-1)},undoable:e.undoable})}var spe=e=>"touches"in e,ipe=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=l=>{if(!this.isResizing||!this.activeHandle)return;const u=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(u,d)},this.handleTouchMove=l=>{if(!this.isResizing||!this.activeHandle)return;const u=l.touches[0];if(!u)return;const d=u.clientX-this.startX,h=u.clientY-this.startY;this.handleResize(d,h)},this.handleMouseUp=()=>{if(!this.isResizing)return;const l=this.element.offsetWidth,u=this.element.offsetHeight;this.onCommit(l,u),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,n,s,i,o;this.node=e.node,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(n=e.options)!=null&&n.max&&(this.maxSize=e.options.max),(s=e?.options)!=null&&s.directions&&(this.directions=e.options.directions),(i=e.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(o=e.options)!=null&&o.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(e,t,n){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",e.style.justifyContent="flex-start",e.style.alignItems="flex-start",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const n=t.includes("top"),s=t.includes("bottom"),i=t.includes("left"),o=t.includes("right");n&&(e.style.top="0"),s&&(e.style.bottom="0"),i&&(e.style.left="0"),o&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{const t=this.createHandle(e);this.positionHandle(t,e),t.addEventListener("mousedown",n=>this.handleResizeStart(n,e)),t.addEventListener("touchstart",n=>this.handleResizeStart(n,e)),this.wrapper.appendChild(t)})}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,spe(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:s,height:i}=this.calculateNewDimensions(this.activeHandle,e,t),o=this.applyConstraints(s,i,n);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(e,t,n){let s=this.startWidth,i=this.startHeight;const o=e.includes("right"),l=e.includes("left"),u=e.includes("bottom"),d=e.includes("top");return o?s=this.startWidth+t:l&&(s=this.startWidth-t),u?i=this.startHeight+n:d&&(i=this.startHeight-n),(e==="right"||e==="left")&&(s=this.startWidth+(o?t:-t)),(e==="top"||e==="bottom")&&(i=this.startHeight+(u?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(s,i,e):{width:s,height:i}}applyConstraints(e,t,n){var s,i,o,l;if(!n){let h=Math.max(this.minSize.width,e),p=Math.max(this.minSize.height,t);return(s=this.maxSize)!=null&&s.width&&(h=Math.min(this.maxSize.width,h)),(i=this.maxSize)!=null&&i.height&&(p=Math.min(this.maxSize.height,p)),{width:h,height:p}}let u=e,d=t;return u<this.minSize.width&&(u=this.minSize.width,d=u/this.aspectRatio),d<this.minSize.height&&(d=this.minSize.height,u=d*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&u>this.maxSize.width&&(u=this.maxSize.width,d=u/this.aspectRatio),(l=this.maxSize)!=null&&l.height&&d>this.maxSize.height&&(d=this.maxSize.height,u=d*this.aspectRatio),{width:u,height:d}}applyAspectRatio(e,t,n){const s=n==="left"||n==="right",i=n==="top"||n==="bottom";return s?{width:e,height:e/this.aspectRatio}:i?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function ope(e,t){const{selection:n}=e,{$from:s}=n;if(n instanceof At){const o=s.index();return s.parent.canReplaceWith(o,o+1,t)}let i=s.depth;for(;i>=0;){const o=s.index(i);if(s.node(i).contentMatchAt(o).matchType(t))return!0;i-=1}return!1}var ape={};QE(ape,{createAtomBlockMarkdownSpec:()=>lpe,createBlockMarkdownSpec:()=>cpe,createInlineMarkdownSpec:()=>hpe,parseAttributes:()=>ak,parseIndentedBlocks:()=>xw,renderNestedMarkdownContent:()=>ck,serializeAttributes:()=>lk});function ak(e){if(!e?.trim())return{};const t={},n=[],s=e.replace(/["']([^"']*)["']/g,h=>(n.push(h),`__QUOTED_${n.length-1}__`)),i=s.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const h=i.map(p=>p.trim().slice(1));t.class=h.join(" ")}const o=s.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(t.id=o[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(s.matchAll(l)).forEach(([,h,p])=>{var m;const x=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),y=n[x];y&&(t[h]=y.slice(1,-1))});const d=s.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(t[p]=!0)}),t}function lk(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(s=>t.push(`.${s}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,s])=>{n==="class"||n==="id"||(s===!0?t.push(n):s!==!1&&s!=null&&t.push(`${n}="${String(s)}"`))}),t.join(" ")}function lpe(e){const{nodeName:t,name:n,parseAttributes:s=ak,serializeAttributes:i=lk,defaultAttributes:o={},requiredAttributes:l=[],allowedAttributes:u}=e,d=n||t,h=p=>{if(!u)return p;const m={};return u.forEach(x=>{x in p&&(m[x]=p[x])}),m};return{parseMarkdown:(p,m)=>{const x={...o,...p.attributes};return m.createNode(t,x,[])},markdownTokenizer:{name:t,level:"block",start(p){var m;const x=new RegExp(`^:::${d}(?:\\s|$)`,"m"),y=(m=p.match(x))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(p,m,x){const y=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),b=p.match(y);if(!b)return;const C=b[1]||"",S=s(C);if(!l.find(k=>!(k in S)))return{type:t,raw:b[0],attributes:S}}},renderMarkdown:p=>{const m=h(p.attrs||{}),x=i(m),y=x?` {${x}}`:"";return`:::${d}${y} :::`}}}function cpe(e){const{nodeName:t,name:n,getContent:s,parseAttributes:i=ak,serializeAttributes:o=lk,defaultAttributes:l={},content:u="block",allowedAttributes:d}=e,h=n||t,p=m=>{if(!d)return m;const x={};return d.forEach(y=>{y in m&&(x[y]=m[y])}),x};return{parseMarkdown:(m,x)=>{let y;if(s){const C=s(m);y=typeof C=="string"?[{type:"text",text:C}]:C}else u==="block"?y=x.parseChildren(m.tokens||[]):y=x.parseInline(m.tokens||[]);const b={...l,...m.attributes};return x.createNode(t,b,y)},markdownTokenizer:{name:t,level:"block",start(m){var x;const y=new RegExp(`^:::${h}`,"m"),b=(x=m.match(y))==null?void 0:x.index;return b!==void 0?b:-1},tokenize(m,x,y){var b;const C=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),S=m.match(C);if(!S)return;const[E,k=""]=S,A=i(k);let T=1;const M=E.length;let D="";const $=/^:::([\w-]*)(\s.*)?/gm,W=m.slice(M);for($.lastIndex=0;;){const te=$.exec(W);if(te===null)break;const re=te.index,U=te[1];if(!((b=te[2])!=null&&b.endsWith(":::"))){if(U)T+=1;else if(T-=1,T===0){const oe=W.slice(0,re);D=oe.trim();const xe=m.slice(0,M+re+te[0].length);let ie=[];if(D)if(u==="block")for(ie=y.blockTokens(oe),ie.forEach(H=>{H.text&&(!H.tokens||H.tokens.length===0)&&(H.tokens=y.inlineTokens(H.text))});ie.length>0;){const H=ie[ie.length-1];if(H.type==="paragraph"&&(!H.text||H.text.trim()===""))ie.pop();else break}else ie=y.inlineTokens(D);return{type:t,raw:xe,attributes:A,content:D,tokens:ie}}}}}},renderMarkdown:(m,x)=>{const y=p(m.attrs||{}),b=o(y),C=b?` {${b}}`:"",S=x.renderChildren(m.content||[],`

`);return`:::${h}${C}

${S}

:::`}}}function upe(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let s=n.exec(e);for(;s!==null;){const[,i,o,l]=s;t[i]=o||l,s=n.exec(e)}return t}function dpe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function hpe(e){const{nodeName:t,name:n,getContent:s,parseAttributes:i=upe,serializeAttributes:o=dpe,defaultAttributes:l={},selfClosing:u=!1,allowedAttributes:d}=e,h=n||t,p=x=>{if(!d)return x;const y={};return d.forEach(b=>{b in x&&(y[b]=x[b])}),y},m=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(x,y)=>{const b={...l,...x.attributes};if(u)return y.createNode(t,b);const C=s?s(x):x.content||"";return C?y.createNode(t,b,[y.createTextNode(C)]):y.createNode(t,b,[])},markdownTokenizer:{name:t,level:"inline",start(x){const y=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),b=x.match(y),C=b?.index;return C!==void 0?C:-1},tokenize(x,y,b){const C=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),S=x.match(C);if(!S)return;let E="",k="";if(u){const[,T]=S;k=T}else{const[,T,M]=S;k=T,E=M||""}const A=i(k.trim());return{type:t,raw:S[0],content:E.trim(),attributes:A}}},renderMarkdown:x=>{let y="";s?y=s(x):x.content&&x.content.length>0&&(y=x.content.filter(E=>E.type==="text").map(E=>E.text).join(""));const b=p(x.attrs||{}),C=o(b),S=C?` ${C}`:"";return u?`[${h}${S}]`:`[${h}${S}]${y}[/${h}]`}}}function xw(e,t,n){var s,i,o,l;const u=e.split(`
`),d=[];let h="",p=0;const m=t.baseIndentSize||2;for(;p<u.length;){const x=u[p],y=x.match(t.itemPattern);if(!y){if(d.length>0)break;if(x.trim()===""){p+=1;continue}else return}const b=t.extractItemData(y),{indentLevel:C,mainContent:S}=b;h=`${h}${x}
`;const E=[S];for(p+=1;p<u.length;){const M=u[p];if(M.trim()===""){const $=u.slice(p+1).findIndex(re=>re.trim()!=="");if($===-1)break;if((((i=(s=u[p+1+$].match(/^(\s*)/))==null?void 0:s[1])==null?void 0:i.length)||0)>C){E.push(M),h=`${h}${M}
`,p+=1;continue}else break}if((((l=(o=M.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:l.length)||0)>C)E.push(M),h=`${h}${M}
`,p+=1;else break}let k;const A=E.slice(1);if(A.length>0){const M=A.map(D=>D.slice(C+m)).join(`
`);M.trim()&&(t.customNestedParser?k=t.customNestedParser(M):k=n.blockTokens(M))}const T=t.createToken(b,k);d.push(T)}if(d.length!==0)return{items:d,raw:h.trim()}}function ck(e,t,n,s){if(!e||!Array.isArray(e.content))return"";const i=typeof n=="function"?n(s):n,[o,...l]=e.content,u=t.renderChildren([o]),d=[`${i}${u}`];return l&&l.length>0&&l.forEach(h=>{const p=t.renderChildren([h]);if(p){const m=p.split(`
`).map(x=>x?t.indent(x):"").join(`
`);d.push(m)}}),d.join(`
`)}function fpe(e,t,n={}){const{state:s}=t,{doc:i,tr:o}=s,l=e;i.descendants((u,d)=>{const h=o.mapping.map(d),p=o.mapping.map(d)+u.nodeSize;let m=null;if(u.marks.forEach(y=>{if(y!==l)return!1;m=y}),!m)return;let x=!1;if(Object.keys(n).forEach(y=>{n[y]!==m.attrs[y]&&(x=!0)}),x){const y=e.type.create({...e.attrs,...n});o.removeMark(h,p,e.type),o.addMark(h,p,y)}}),o.docChanged&&t.view.dispatch(o)}var di=class u6 extends ok{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new u6(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Dc(e){return new Yfe({find:e.find,handler:({state:t,range:n,match:s,pasteEvent:i})=>{const o=_n(e.getAttributes,void 0,s,i);if(o===!1||o===null)return null;const{tr:l}=t,u=s[s.length-1],d=s[0];let h=n.to;if(u){const p=d.search(/\S/),m=n.from+d.indexOf(u),x=m+u.length;if(ik(n.from,n.to,t.doc).filter(b=>b.mark.type.excluded.find(S=>S===e.type&&S!==b.mark.type)).filter(b=>b.to>m).length)return null;x<n.to&&l.delete(x,n.to),m>n.from&&l.delete(n.from+p,m),h=n.from+p+u.length,l.addMark(n.from+p,h,e.type.create(o||{})),l.removeStoredMark(e.type)}}})}var CS,yP;function ppe(){return yP||(yP=1,CS=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var s,i,o;if(Array.isArray(t)){if(s=t.length,s!=n.length)return!1;for(i=s;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(s=t.length,s!=n.length)return!1;for(i=s;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),s=o.length,s!==Object.keys(n).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=s;i--!==0;){var l=o[i];if(!(l==="_owner"&&t.$$typeof)&&!e(t[l],n[l]))return!1}return!0}return t!==t&&n!==n}),CS}var mpe=ppe();const gpe=tf(mpe);var wS={exports:{}},ES={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bP;function xpe(){if(bP)return ES;bP=1;var e=Km(),t=i5();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var s=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return ES.useSyncExternalStoreWithSelector=function(h,p,m,x,y){var b=o(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=u(function(){function E(D){if(!k){if(k=!0,A=D,D=x(D),y!==void 0&&C.hasValue){var $=C.value;if(y($,D))return T=$}return T=D}if($=T,s(A,D))return $;var W=x(D);return y!==void 0&&y($,W)?(A=D,$):(A=D,T=W)}var k=!1,A,T,M=m===void 0?null:m;return[function(){return E(p())},M===null?void 0:function(){return E(M())}]},[p,m,x,y]);var S=i(h,b[0],b[1]);return l(function(){C.hasValue=!0,C.value=S},[S]),d(S),S},ES}var vP;function ype(){return vP||(vP=1,wS.exports=xpe()),wS.exports}var bpe=ype(),vpe=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},jpe=({contentComponent:e})=>{const t=o5.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return r.jsx(r.Fragment,{children:Object.values(t)})};function Spe(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,s){t={...t,[n]:t8.createPortal(s.reactElement,s.element,n)},e.forEach(i=>i())},removeRenderer(n){const s={...t};delete s[n],t=s,e.forEach(i=>i())}}}var Cpe=class extends Lt.Component{constructor(e){var t;super(e),this.editorContentRef=Lt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=Spe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:vpe(t,this.editorContentRef),...n}),e?.contentComponent&&r.jsx(jpe,{contentComponent:e.contentComponent})]})}},wpe=j.forwardRef((e,t)=>{const n=Lt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Lt.createElement(Cpe,{key:n,innerRef:t,...e})}),Epe=Lt.memo(wpe),kpe=typeof window<"u"?j.useLayoutEffect:j.useEffect,Ape=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function Tpe(e){var t;const[n]=j.useState(()=>new Ape(e.editor)),s=bpe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:gpe);return kpe(()=>n.watch(e.editor),[e.editor,n]),j.useDebugValue(s),s}var Mpe=!1,yw=typeof window>"u",Rpe=yw||!!(typeof window<"u"&&window.next),Dpe=class d6{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?yw||Rpe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...s)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...s)},onBlur:(...s)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...s)},onCreate:(...s)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...s)},onDestroy:(...s)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...s)},onFocus:(...s)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...s)},onSelectionUpdate:(...s)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...s)},onTransaction:(...s)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...s)},onUpdate:(...s)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...s)},onContentError:(...s)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...s)},onDrop:(...s)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...s)},onPaste:(...s)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...s)},onDelete:(...s)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...s)}};return new rpe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,o)=>{var l;return i===((l=n.extensions)==null?void 0:l[o])}):t[s]===n[s])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?d6.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((s,i)=>s===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function Ope(e={},t=[]){const n=j.useRef(e);n.current=e;const[s]=j.useState(()=>new Dpe(n)),i=o5.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return j.useDebugValue(i),j.useEffect(s.onRender(t)),Tpe({editor:i,selector:({transactionNumber:o})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&o===0?0:o+1}),i}var Npe=j.createContext({editor:null});Npe.Consumer;var Ppe=j.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),zpe=()=>j.useContext(Ppe);Lt.forwardRef((e,t)=>{const{onDragStart:n}=zpe(),s=e.as||"div";return r.jsx(s,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Lt.createContext({markViewContentRef:()=>{}});var jy=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...s}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,s,n]},Ipe=/^\s*>\s$/,Lpe=di.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return jy("blockquote",{...xr(this.options.HTMLAttributes,e),children:jy("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=[];return e.content.forEach(i=>{const l=t.renderChildren(i).split(`
`).map(u=>`> ${u}`).join(`
`);n.push(l)}),n.flatMap(i=>[i,"> "]).slice(0,-1).join(`
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ef({find:Ipe,type:this.type})]}}),_pe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Bpe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,$pe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Fpe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Vpe=vl.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return jy("strong",{...xr(this.options.HTMLAttributes,e),children:jy("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[id({find:_pe,type:this.type}),id({find:$pe,type:this.type})]},addPasteRules(){return[Dc({find:Bpe,type:this.type}),Dc({find:Fpe,type:this.type})]}}),Hpe=/(^|[^`])`([^`]+)`(?!`)$/,Upe=/(^|[^`])`([^`]+)`(?!`)/g,Wpe=vl.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",xr(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[id({find:Hpe,type:this.type})]},addPasteRules(){return[Dc({find:Upe,type:this.type})]}}),kS=4,qpe=/^```([a-z]+)?[\s\n]$/,Gpe=/^~~~([a-z]+)?[\s\n]$/,Ype=di.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:kS,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",xr(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let s="";const i=((n=e.attrs)==null?void 0:n.language)||"";return e.content?s=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):s=`\`\`\`${i}

\`\`\``,s},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:kS,{state:s}=e,{selection:i}=s,{$from:o,empty:l}=i;if(o.parent.type!==this.type)return!1;const u=" ".repeat(n);return l?e.commands.insertContent(u):e.commands.command(({tr:d})=>{const{from:h,to:p}=i,y=s.doc.textBetween(h,p,`
`,`
`).split(`
`).map(b=>u+b).join(`
`);return d.replaceWith(h,p,s.schema.text(y)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:kS,{state:s}=e,{selection:i}=s,{$from:o,empty:l}=i;return o.parent.type!==this.type?!1:l?e.commands.command(({tr:u})=>{var d;const{pos:h}=o,p=o.start(),m=o.end(),y=s.doc.textBetween(p,m,`
`,`
`).split(`
`);let b=0,C=0;const S=h-p;for(let D=0;D<y.length;D+=1){if(C+y[D].length>=S){b=D;break}C+=y[D].length+1}const k=((d=y[b].match(/^ */))==null?void 0:d[0])||"",A=Math.min(k.length,n);if(A===0)return!0;let T=p;for(let D=0;D<b;D+=1)T+=y[D].length+1;return u.delete(T,T+A),h-T<=A&&u.setSelection(Bt.create(u.doc,T)),!0}):e.commands.command(({tr:u})=>{const{from:d,to:h}=i,x=s.doc.textBetween(d,h,`
`,`
`).split(`
`).map(y=>{var b;const C=((b=y.match(/^ */))==null?void 0:b[0])||"",S=Math.min(C.length,n);return y.slice(S)}).join(`
`);return u.replaceWith(d,h,s.schema.text(x)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type)return!1;const o=s.parentOffset===s.parent.nodeSize-2,l=s.parent.textContent.endsWith(`

`);return!o||!l?!1:e.chain().command(({tr:u})=>(u.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:s}=t,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:s.nodeAt(u)?e.commands.command(({tr:h})=>(h.setSelection(qt.near(s.resolve(u))),!0)):e.commands.exitCode()}}},addInputRules(){return[gw({find:qpe,type:this.type,getAttributes:e=>({language:e[1]})}),gw({find:Gpe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Rr({key:new fs("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),s=t.clipboardData.getData("vscode-editor-data"),i=s?JSON.parse(s):void 0,o=i?.mode;if(!n||!o)return!1;const{tr:l,schema:u}=e.state,d=u.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(Bt.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),e.dispatch(l),!0}}})]}}),Kpe=di.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),Xpe=di.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",xr(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:(e,t)=>t.indent(`
`),parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:s})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=s.extensionManager,d=o||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&l){const m=d.filter(x=>u.includes(x.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Jpe=di.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,xr(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const s=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,i="#".repeat(s);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>gw({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),Qpe=di.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",xr(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!ope(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:s}=n,i=e();return K_(n)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:l,dispatch:u})=>{if(u){const{$to:d}=l.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(Bt.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(At.create(l.doc,d.pos)):l.setSelection(Bt.create(l.doc,d.pos));else{const p=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,m=p?.create();m&&(l.insert(h,m),l.setSelection(Bt.create(l.doc,h+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[c6({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Zpe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,eme=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,tme=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,nme=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,rme=vl.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",xr(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[id({find:Zpe,type:this.type}),id({find:tme,type:this.type})]},addPasteRules(){return[Dc({find:eme,type:this.type}),Dc({find:nme,type:this.type})]}});const sme="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",ime="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",bw="numeric",vw="ascii",jw="alpha",um="asciinumeric",Wp="alphanumeric",Sw="domain",h6="emoji",ome="scheme",ame="slashscheme",AS="whitespace";function lme(e,t){return e in t||(t[e]=[]),t[e]}function ku(e,t,n){t[bw]&&(t[um]=!0,t[Wp]=!0),t[vw]&&(t[um]=!0,t[jw]=!0),t[um]&&(t[Wp]=!0),t[jw]&&(t[Wp]=!0),t[Wp]&&(t[Sw]=!0),t[h6]&&(t[Sw]=!0);for(const s in t){const i=lme(s,n);i.indexOf(e)<0&&i.push(e)}}function cme(e,t){const n={};for(const s in t)t[s].indexOf(e)>=0&&(n[s]=!0);return n}function ni(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}ni.groups={};ni.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let s=0;s<t.jr.length;s++){const i=t.jr[s][0],o=t.jr[s][1];if(o&&i.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,s){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,s)},tr(e,t,n,s){s=s||ni.groups;let i;return t&&t.j?i=t:(i=new ni(t),n&&s&&ku(t,n,s)),this.jr.push([e,i]),i},ts(e,t,n,s){let i=this;const o=e.length;if(!o)return i;for(let l=0;l<o-1;l++)i=i.tt(e[l]);return i.tt(e[o-1],t,n,s)},tt(e,t,n,s){s=s||ni.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const o=t;let l,u=i.go(e);if(u?(l=new ni,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new ni,o){if(s)if(l.t&&typeof l.t=="string"){const d=Object.assign(cme(l.t,s),n);ku(o,d,s)}else n&&ku(o,n,s);l.t=o}return i.j[e]=l,l}};const Wt=(e,t,n,s,i)=>e.ta(t,n,s,i),Er=(e,t,n,s,i)=>e.tr(t,n,s,i),jP=(e,t,n,s,i)=>e.ts(t,n,s,i),Ue=(e,t,n,s,i)=>e.tt(t,n,s,i),Ga="WORD",Cw="UWORD",f6="ASCIINUMERICAL",p6="ALPHANUMERICAL",Gm="LOCALHOST",ww="TLD",Ew="UTLD",z0="SCHEME",dh="SLASH_SCHEME",uk="NUM",kw="WS",dk="NL",dm="OPENBRACE",hm="CLOSEBRACE",Sy="OPENBRACKET",Cy="CLOSEBRACKET",wy="OPENPAREN",Ey="CLOSEPAREN",ky="OPENANGLEBRACKET",Ay="CLOSEANGLEBRACKET",Ty="FULLWIDTHLEFTPAREN",My="FULLWIDTHRIGHTPAREN",Ry="LEFTCORNERBRACKET",Dy="RIGHTCORNERBRACKET",Oy="LEFTWHITECORNERBRACKET",Ny="RIGHTWHITECORNERBRACKET",Py="FULLWIDTHLESSTHAN",zy="FULLWIDTHGREATERTHAN",Iy="AMPERSAND",Ly="APOSTROPHE",_y="ASTERISK",lc="AT",By="BACKSLASH",$y="BACKTICK",Fy="CARET",hc="COLON",hk="COMMA",Vy="DOLLAR",qo="DOT",Hy="EQUALS",fk="EXCLAMATION",Ki="HYPHEN",fm="PERCENT",Uy="PIPE",Wy="PLUS",qy="POUND",pm="QUERY",pk="QUOTE",m6="FULLWIDTHMIDDLEDOT",mk="SEMI",Go="SLASH",mm="TILDE",Gy="UNDERSCORE",g6="EMOJI",Yy="SYM";var x6=Object.freeze({__proto__:null,ALPHANUMERICAL:p6,AMPERSAND:Iy,APOSTROPHE:Ly,ASCIINUMERICAL:f6,ASTERISK:_y,AT:lc,BACKSLASH:By,BACKTICK:$y,CARET:Fy,CLOSEANGLEBRACKET:Ay,CLOSEBRACE:hm,CLOSEBRACKET:Cy,CLOSEPAREN:Ey,COLON:hc,COMMA:hk,DOLLAR:Vy,DOT:qo,EMOJI:g6,EQUALS:Hy,EXCLAMATION:fk,FULLWIDTHGREATERTHAN:zy,FULLWIDTHLEFTPAREN:Ty,FULLWIDTHLESSTHAN:Py,FULLWIDTHMIDDLEDOT:m6,FULLWIDTHRIGHTPAREN:My,HYPHEN:Ki,LEFTCORNERBRACKET:Ry,LEFTWHITECORNERBRACKET:Oy,LOCALHOST:Gm,NL:dk,NUM:uk,OPENANGLEBRACKET:ky,OPENBRACE:dm,OPENBRACKET:Sy,OPENPAREN:wy,PERCENT:fm,PIPE:Uy,PLUS:Wy,POUND:qy,QUERY:pm,QUOTE:pk,RIGHTCORNERBRACKET:Dy,RIGHTWHITECORNERBRACKET:Ny,SCHEME:z0,SEMI:mk,SLASH:Go,SLASH_SCHEME:dh,SYM:Yy,TILDE:mm,TLD:ww,UNDERSCORE:Gy,UTLD:Ew,UWORD:Cw,WORD:Ga,WS:kw});const Ua=/[a-z]/,Ep=new RegExp("\\p{L}","u"),TS=new RegExp("\\p{Emoji}","u"),Wa=/\d/,MS=/\s/,SP="\r",RS=`
`,ume="",dme="",DS="";let n0=null,r0=null;function hme(e=[]){const t={};ni.groups=t;const n=new ni;n0==null&&(n0=CP(sme)),r0==null&&(r0=CP(ime)),Ue(n,"'",Ly),Ue(n,"{",dm),Ue(n,"}",hm),Ue(n,"[",Sy),Ue(n,"]",Cy),Ue(n,"(",wy),Ue(n,")",Ey),Ue(n,"<",ky),Ue(n,">",Ay),Ue(n,"",Ty),Ue(n,"",My),Ue(n,"",Ry),Ue(n,"",Dy),Ue(n,"",Oy),Ue(n,"",Ny),Ue(n,"",Py),Ue(n,"",zy),Ue(n,"&",Iy),Ue(n,"*",_y),Ue(n,"@",lc),Ue(n,"`",$y),Ue(n,"^",Fy),Ue(n,":",hc),Ue(n,",",hk),Ue(n,"$",Vy),Ue(n,".",qo),Ue(n,"=",Hy),Ue(n,"!",fk),Ue(n,"-",Ki),Ue(n,"%",fm),Ue(n,"|",Uy),Ue(n,"+",Wy),Ue(n,"#",qy),Ue(n,"?",pm),Ue(n,'"',pk),Ue(n,"/",Go),Ue(n,";",mk),Ue(n,"~",mm),Ue(n,"_",Gy),Ue(n,"\\",By),Ue(n,"",m6);const s=Er(n,Wa,uk,{[bw]:!0});Er(s,Wa,s);const i=Er(s,Ua,f6,{[um]:!0}),o=Er(s,Ep,p6,{[Wp]:!0}),l=Er(n,Ua,Ga,{[vw]:!0});Er(l,Wa,i),Er(l,Ua,l),Er(i,Wa,i),Er(i,Ua,i);const u=Er(n,Ep,Cw,{[jw]:!0});Er(u,Ua),Er(u,Wa,o),Er(u,Ep,u),Er(o,Wa,o),Er(o,Ua),Er(o,Ep,o);const d=Ue(n,RS,dk,{[AS]:!0}),h=Ue(n,SP,kw,{[AS]:!0}),p=Er(n,MS,kw,{[AS]:!0});Ue(n,DS,p),Ue(h,RS,d),Ue(h,DS,p),Er(h,MS,p),Ue(p,SP),Ue(p,RS),Er(p,MS,p),Ue(p,DS,p);const m=Er(n,TS,g6,{[h6]:!0});Ue(m,"#"),Er(m,TS,m),Ue(m,ume,m);const x=Ue(m,dme);Ue(x,"#"),Er(x,TS,m);const y=[[Ua,l],[Wa,i]],b=[[Ua,null],[Ep,u],[Wa,o]];for(let C=0;C<n0.length;C++)nc(n,n0[C],ww,Ga,y);for(let C=0;C<r0.length;C++)nc(n,r0[C],Ew,Cw,b);ku(ww,{tld:!0,ascii:!0},t),ku(Ew,{utld:!0,alpha:!0},t),nc(n,"file",z0,Ga,y),nc(n,"mailto",z0,Ga,y),nc(n,"http",dh,Ga,y),nc(n,"https",dh,Ga,y),nc(n,"ftp",dh,Ga,y),nc(n,"ftps",dh,Ga,y),ku(z0,{scheme:!0,ascii:!0},t),ku(dh,{slashscheme:!0,ascii:!0},t),e=e.sort((C,S)=>C[0]>S[0]?1:-1);for(let C=0;C<e.length;C++){const S=e[C][0],k=e[C][1]?{[ome]:!0}:{[ame]:!0};S.indexOf("-")>=0?k[Sw]=!0:Ua.test(S)?Wa.test(S)?k[um]=!0:k[vw]=!0:k[bw]=!0,jP(n,S,S,k)}return jP(n,"localhost",Gm,{ascii:!0}),n.jd=new ni(Yy),{start:n,tokens:Object.assign({groups:t},x6)}}function y6(e,t){const n=fme(t.replace(/[A-Z]/g,u=>u.toLowerCase())),s=n.length,i=[];let o=0,l=0;for(;l<s;){let u=e,d=null,h=0,p=null,m=-1,x=-1;for(;l<s&&(d=u.go(n[l]));)u=d,u.accepts()?(m=0,x=0,p=u):m>=0&&(m+=n[l].length,x++),h+=n[l].length,o+=n[l].length,l++;o-=m,l-=x,h-=m,i.push({t:p.t,v:t.slice(o-h,o),s:o-h,e:o})}return i}function fme(e){const t=[],n=e.length;let s=0;for(;s<n;){let i=e.charCodeAt(s),o,l=i<55296||i>56319||s+1===n||(o=e.charCodeAt(s+1))<56320||o>57343?e[s]:e.slice(s,s+2);t.push(l),s+=l.length}return t}function nc(e,t,n,s,i){let o;const l=t.length;for(let u=0;u<l-1;u++){const d=t[u];e.j[d]?o=e.j[d]:(o=new ni(s),o.jr=i.slice(),e.j[d]=o),e=o}return o=new ni(n),o.jr=i.slice(),e.j[t[l-1]]=o,o}function CP(e){const t=[],n=[];let s=0,i="0123456789";for(;s<e.length;){let o=0;for(;i.indexOf(e[s+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let l=parseInt(e.substring(s,s+o),10);l>0;l--)n.pop();s+=o}else n.push(e[s]),s++}return t}const Ym={defaultProtocol:"http",events:null,format:wP,formatHref:wP,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function gk(e,t=null){let n=Object.assign({},Ym);e&&(n=Object.assign(n,e instanceof gk?e.o:e));const s=n.ignoreTags,i=[];for(let o=0;o<s.length;o++)i.push(s[o].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}gk.prototype={o:Ym,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const s=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Ym[e],typeof i=="function"&&s&&(i=i(t,n))):typeof i=="function"&&s&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let s=this.o[e];return typeof s=="function"&&t!=null&&(s=s(t,n.t,n)),s},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function wP(e){return e}function b6(e,t){this.t="token",this.v=e,this.tk=t}b6.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),s=e.get("format",t,this);return n&&s.length>n?s.substring(0,n)+"":s},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Ym.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),s=e.get("formatHref",n,this),i=e.get("tagName",n,t),o=this.toFormattedString(e),l={},u=e.get("className",n,t),d=e.get("target",n,t),h=e.get("rel",n,t),p=e.getObj("attributes",n,t),m=e.getObj("events",n,t);return l.href=s,u&&(l.class=u),d&&(l.target=d),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:i,attributes:l,content:o,eventListeners:m}}};function Wb(e,t){class n extends b6{constructor(i,o){super(i,o),this.t=e}}for(const s in t)n.prototype[s]=t[s];return n.t=e,n}const EP=Wb("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),kP=Wb("text"),pme=Wb("nl"),s0=Wb("url",{isLink:!0,toHref(e=Ym.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Gm&&e[1].t===hc}}),Wi=e=>new ni(e);function mme({groups:e}){const t=e.domain.concat([Iy,_y,lc,By,$y,Fy,Vy,Hy,Ki,uk,fm,Uy,Wy,qy,Go,Yy,mm,Gy]),n=[Ly,hc,hk,qo,fk,fm,pm,pk,mk,ky,Ay,dm,hm,Cy,Sy,wy,Ey,Ty,My,Ry,Dy,Oy,Ny,Py,zy],s=[Iy,Ly,_y,By,$y,Fy,Vy,Hy,Ki,dm,hm,fm,Uy,Wy,qy,pm,Go,Yy,mm,Gy],i=Wi(),o=Ue(i,mm);Wt(o,s,o),Wt(o,e.domain,o);const l=Wi(),u=Wi(),d=Wi();Wt(i,e.domain,l),Wt(i,e.scheme,u),Wt(i,e.slashscheme,d),Wt(l,s,o),Wt(l,e.domain,l);const h=Ue(l,lc);Ue(o,lc,h),Ue(u,lc,h),Ue(d,lc,h);const p=Ue(o,qo);Wt(p,s,o),Wt(p,e.domain,o);const m=Wi();Wt(h,e.domain,m),Wt(m,e.domain,m);const x=Ue(m,qo);Wt(x,e.domain,m);const y=Wi(EP);Wt(x,e.tld,y),Wt(x,e.utld,y),Ue(h,Gm,y);const b=Ue(m,Ki);Ue(b,Ki,b),Wt(b,e.domain,m),Wt(y,e.domain,m),Ue(y,qo,x),Ue(y,Ki,b);const C=Ue(y,hc);Wt(C,e.numeric,EP);const S=Ue(l,Ki),E=Ue(l,qo);Ue(S,Ki,S),Wt(S,e.domain,l),Wt(E,s,o),Wt(E,e.domain,l);const k=Wi(s0);Wt(E,e.tld,k),Wt(E,e.utld,k),Wt(k,e.domain,l),Wt(k,s,o),Ue(k,qo,E),Ue(k,Ki,S),Ue(k,lc,h);const A=Ue(k,hc),T=Wi(s0);Wt(A,e.numeric,T);const M=Wi(s0),D=Wi();Wt(M,t,M),Wt(M,n,D),Wt(D,t,M),Wt(D,n,D),Ue(k,Go,M),Ue(T,Go,M);const $=Ue(u,hc),W=Ue(d,hc),te=Ue(W,Go),re=Ue(te,Go);Wt(u,e.domain,l),Ue(u,qo,E),Ue(u,Ki,S),Wt(d,e.domain,l),Ue(d,qo,E),Ue(d,Ki,S),Wt($,e.domain,M),Ue($,Go,M),Ue($,pm,M),Wt(re,e.domain,M),Wt(re,t,M),Ue(re,Go,M);const U=[[dm,hm],[Sy,Cy],[wy,Ey],[ky,Ay],[Ty,My],[Ry,Dy],[Oy,Ny],[Py,zy]];for(let oe=0;oe<U.length;oe++){const[xe,ie]=U[oe],H=Ue(M,xe);Ue(D,xe,H),Ue(H,ie,M);const F=Wi(s0);Wt(H,t,F);const _=Wi();Wt(H,n),Wt(F,t,F),Wt(F,n,_),Wt(_,t,F),Wt(_,n,_),Ue(F,ie,M),Ue(_,ie,M)}return Ue(i,Gm,k),Ue(i,dk,pme),{start:i,tokens:x6}}function gme(e,t,n){let s=n.length,i=0,o=[],l=[];for(;i<s;){let u=e,d=null,h=null,p=0,m=null,x=-1;for(;i<s&&!(d=u.go(n[i].t));)l.push(n[i++]);for(;i<s&&(h=d||u.go(n[i].t));)d=null,u=h,u.accepts()?(x=0,m=u):x>=0&&x++,i++,p++;if(x<0)i-=p,i<s&&(l.push(n[i]),i++);else{l.length>0&&(o.push(OS(kP,t,l)),l=[]),i-=x,p-=x;const y=m.t,b=n.slice(i-p,i);o.push(OS(y,t,b))}}return l.length>0&&o.push(OS(kP,t,l)),o}function OS(e,t,n){const s=n[0].s,i=n[n.length-1].e,o=t.slice(s,i);return new e(o,n)}const xme=typeof console<"u"&&console&&console.warn||(()=>{}),yme="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",rr={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function bme(){return ni.groups={},rr.scanner=null,rr.parser=null,rr.tokenQueue=[],rr.pluginQueue=[],rr.customSchemes=[],rr.initialized=!1,rr}function AP(e,t=!1){if(rr.initialized&&xme(`linkifyjs: already initialized - will not register custom scheme "${e}" ${yme}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);rr.customSchemes.push([e,t])}function vme(){rr.scanner=hme(rr.customSchemes);for(let e=0;e<rr.tokenQueue.length;e++)rr.tokenQueue[e][1]({scanner:rr.scanner});rr.parser=mme(rr.scanner.tokens);for(let e=0;e<rr.pluginQueue.length;e++)rr.pluginQueue[e][1]({scanner:rr.scanner,parser:rr.parser});return rr.initialized=!0,rr}function xk(e){return rr.initialized||vme(),gme(rr.parser.start,e,y6(rr.scanner.start,e))}xk.scan=y6;function v6(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const s=new gk(n),i=xk(e),o=[];for(let l=0;l<i.length;l++){const u=i[l];u.isLink&&(!t||u.t===t)&&s.check(u)&&o.push(u.toFormattedObject(s))}return o}var yk="[\0- -\u2029]",jme=new RegExp(yk),Sme=new RegExp(`${yk}$`),Cme=new RegExp(yk,"g");function wme(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Eme(e){return new Rr({key:new fs("autolink"),appendTransaction:(t,n,s)=>{const i=t.some(h=>h.docChanged)&&!n.doc.eq(s.doc),o=t.some(h=>h.getMeta("preventAutolink"));if(!i||o)return;const{tr:l}=s,u=F_(n.doc,[...t]);if(Y_(u).forEach(({newRange:h})=>{const p=cfe(s.doc,h,y=>y.isTextblock);let m,x;if(p.length>1)m=p[0],x=s.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const y=s.doc.textBetween(h.from,h.to," "," ");if(!Sme.test(y))return;m=p[0],x=s.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&x){const y=x.split(jme).filter(Boolean);if(y.length<=0)return!1;const b=y[y.length-1],C=m.pos+x.lastIndexOf(b);if(!b)return!1;const S=xk(b).map(E=>E.toObject(e.defaultProtocol));if(!wme(S))return!1;S.filter(E=>E.isLink).map(E=>({...E,from:C+E.start+1,to:C+E.end+1})).filter(E=>s.schema.marks.code?!s.doc.rangeHasMark(E.from,E.to,s.schema.marks.code):!0).filter(E=>e.validate(E.value)).filter(E=>e.shouldAutoLink(E.value)).forEach(E=>{ik(E.from,E.to,s.doc).some(k=>k.mark.type===e.type)||l.addMark(E.from,E.to,e.type.create({href:E.href}))})}}),!!l.steps.length)return l}})}function kme(e){return new Rr({key:new fs("handleClickLink"),props:{handleClick:(t,n,s)=>{var i,o;if(s.button!==0||!t.editable)return!1;let l=null;if(s.target instanceof HTMLAnchorElement)l=s.target;else{let p=s.target;const m=[];for(;p.nodeName!=="DIV";)m.push(p),p=p.parentNode;l=m.find(x=>x.nodeName==="A")}if(!l)return!1;const u=G_(t.state,e.type.name),d=(i=l?.href)!=null?i:u.href,h=(o=l?.target)!=null?o:u.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),l&&d?(window.open(d,h),!0):!1}}})}function Ame(e){return new Rr({key:new fs("handlePasteLink"),props:{handlePaste:(t,n,s)=>{const{shouldAutoLink:i}=e,{state:o}=t,{selection:l}=o,{empty:u}=l;if(u)return!1;let d="";s.content.forEach(p=>{d+=p.textContent});const h=v6(d,{defaultProtocol:e.defaultProtocol}).find(p=>p.isLink&&p.value===d);return!d||!h||i!==void 0&&!i(h.href)?!1:e.editor.commands.setMark(e.type,{href:h.href})}}})}function du(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(s=>{const i=typeof s=="string"?s:s.scheme;i&&n.push(i)}),!e||e.replace(Cme,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var j6=vl.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){AP(e);return}AP(e.scheme,e.optionalSlashes)})},onDestroy(){bme()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!du(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!du(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!du(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",xr(this.options.HTMLAttributes,e),0]:["a",xr(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const s=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${s})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:s=>!!du(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:s=>!!du(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Dc({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:s}=this.options,i=v6(e).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!du(l,n),protocols:n,defaultProtocol:s}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&t.push({text:o.value,data:{href:o.href},index:o.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Eme({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:i=>!!du(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(kme({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(Ame({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),Tme=j6,Mme=Object.defineProperty,Rme=(e,t)=>{for(var n in t)Mme(e,n,{get:t[n],enumerable:!0})},Dme="listItem",TP="textStyle",MP=/^\s*([-+*])\s$/,S6=di.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",xr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Dme,this.editor.getAttributes(TP)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=ef({find:MP,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ef({find:MP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TP),editor:this.editor})),[e]}}),C6=di.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",xr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))n=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const l=e.tokens.slice(1),u=t.parseChildren(l);n.push(...u)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>ck(e,t,s=>s.parentType==="bulletList"?"- ":s.parentType==="orderedList"?`${s.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ome={};Rme(Ome,{findListItemPos:()=>vg,getNextListDepth:()=>bk,handleBackspace:()=>Aw,handleDelete:()=>Tw,hasListBefore:()=>w6,hasListItemAfter:()=>Nme,hasListItemBefore:()=>E6,listItemHasSubList:()=>k6,nextListIsDeeper:()=>A6,nextListIsHigher:()=>T6});var vg=(e,t)=>{const{$from:n}=t.selection,s=Yr(e,t.schema);let i=null,o=n.depth,l=n.pos,u=null;for(;o>0&&u===null;)i=n.node(o),i.type===s?u=o:(o-=1,l-=1);return u===null?null:{$pos:t.doc.resolve(l),depth:u}},bk=(e,t)=>{const n=vg(e,t);if(!n)return!1;const[,s]=bfe(t,e,n.$pos.pos+4);return s},w6=(e,t,n)=>{const{$anchor:s}=e.selection,i=Math.max(0,s.pos-2),o=e.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},E6=(e,t)=>{var n;const{$anchor:s}=t.selection,i=t.doc.resolve(s.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},k6=(e,t,n)=>{if(!n)return!1;const s=Yr(e,t.schema);let i=!1;return n.descendants(o=>{o.type===s&&(i=!0)}),i},Aw=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Rc(e.state,t)&&w6(e.state,t,n)){const{$anchor:u}=e.state.selection,d=e.state.doc.resolve(u.before()-1),h=[];d.node().descendants((x,y)=>{x.type.name===t&&h.push({node:x,pos:y})});const p=h.at(-1);if(!p)return!1;const m=e.state.doc.resolve(d.start()+p.pos+1);return e.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!Rc(e.state,t)||!Cfe(e.state))return!1;const s=vg(t,e.state);if(!s)return!1;const o=e.state.doc.resolve(s.$pos.pos-2).node(s.depth),l=k6(t,e.state,o);return E6(t,e.state)&&!l?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},A6=(e,t)=>{const n=bk(e,t),s=vg(e,t);return!s||!n?!1:n>s.depth},T6=(e,t)=>{const n=bk(e,t),s=vg(e,t);return!s||!n?!1:n<s.depth},Tw=(e,t)=>{if(!Rc(e.state,t)||!Sfe(e.state,t))return!1;const{selection:n}=e.state,{$from:s,$to:i}=n;return!n.empty&&s.sameParent(i)?!1:A6(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():T6(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},Nme=(e,t)=>{var n;const{$anchor:s}=t.selection,i=t.doc.resolve(s.pos-s.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},M6=Xn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Tw(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Tw(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:s})=>{e.state.schema.nodes[n]!==void 0&&Aw(e,n,s)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:s})=>{e.state.schema.nodes[n]!==void 0&&Aw(e,n,s)&&(t=!0)}),t}}}}),RP=/^(\s*)(\d+)\.\s+(.*)$/,Pme=/^\s/;function zme(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n],o=i.match(RP);if(!o)break;const[,l,u,d]=o,h=l.length;let p=d,m=n+1;const x=[i];for(;m<e.length;){const y=e[m];if(y.match(RP))break;if(y.trim()==="")x.push(y),p+=`
`,m+=1;else if(y.match(Pme))x.push(y),p+=`
${y.slice(h+2)}`,m+=1;else break}t.push({indent:h,number:parseInt(u,10),content:p.trim(),raw:x.join(`
`)}),s=m,n=m}return[t,s]}function R6(e,t,n){var s;const i=[];let o=0;for(;o<e.length;){const l=e[o];if(l.indent===t){const u=l.content.split(`
`),d=((s=u[0])==null?void 0:s.trim())||"",h=[];d&&h.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});const p=u.slice(1).join(`
`).trim();if(p){const y=n.blockTokens(p);h.push(...y)}let m=o+1;const x=[];for(;m<e.length&&e[m].indent>t;)x.push(e[m]),m+=1;if(x.length>0){const y=Math.min(...x.map(C=>C.indent)),b=R6(x,y,n);h.push({type:"list",ordered:!0,start:x[0].number,items:b,raw:x.map(C=>C.raw).join(`
`)})}i.push({type:"list_item",raw:l.raw,tokens:h}),o=m}else o+=1}return i}function Ime(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const s=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")s.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=t.parseChildren([i]);s.push({type:"paragraph",content:o})}else{const o=t.parseChildren([i]);o.length>0&&s.push(...o)}}),{type:"listItem",content:s}})}var Lme="listItem",DP="textStyle",OP=/^(\d+)\.\s$/,D6=di.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",xr(this.options.HTMLAttributes,n),0]:["ol",xr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,s=e.items?Ime(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:s}:{type:"orderedList",content:s}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t?.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var s;const i=e.split(`
`),[o,l]=zme(i);if(o.length===0)return;const u=R6(o,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((s=o[0])==null?void 0:s.number)||1,items:u,raw:i.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Lme,this.editor.getAttributes(DP)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=ef({find:OP,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ef({find:OP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(DP)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),_me=/^\s*(\[([( |x])?\])\s$/,Bme=di.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",xr(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const s=t.parseChildren(e.nestedTokens);n.push(...s)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const i=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return ck(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:s})=>{const i=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),d=document.createElement("div"),h=p=>{var m,x;u.ariaLabel=((x=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:x.call(m,p,u.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};return h(e),o.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",p=>p.preventDefault()),u.addEventListener("change",p=>{if(!s.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:m}=p.target;s.isEditable&&typeof n=="function"&&s.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:x})=>{const y=n();if(typeof y!="number")return!1;const b=x.doc.nodeAt(y);return x.setNodeMarkup(y,void 0,{...b?.attrs,checked:m}),!0}).run(),!s.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,m)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,m])=>{i.setAttribute(p,m)}),i.dataset.checked=e.attrs.checked,u.checked=e.attrs.checked,o.append(u,l),i.append(o,d),Object.entries(t).forEach(([p,m])=>{i.setAttribute(p,m)}),{dom:i,contentDOM:d,update:p=>p.type!==this.type?!1:(i.dataset.checked=p.attrs.checked,u.checked=p.attrs.checked,h(p),!0)}}},addInputRules(){return[ef({find:_me,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),$me=di.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",xr(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const s=o=>{const l=xw(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,d)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:d}),customNestedParser:s},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(o)},i=xw(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:s},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Xn.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(S6.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(C6.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(M6.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(D6.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Bme.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push($me.configure(this.options.taskList)),e}});var Fme=di.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",xr(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];return n.length===1&&n[0].type==="image"?t.parseChildren([n[0]]):t.createNode("paragraph",void 0,t.parseInline(n))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Vme=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Hme=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ume=vl.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",xr(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[id({find:Vme,type:this.type})]},addPasteRules(){return[Dc({find:Hme,type:this.type})]}}),Wme=di.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),qme=vl.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",xr(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Gme(e={}){return new Rr({view(t){return new Yme(t,e)}})}class Yme{constructor(t,n){var s;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=n.width)!==null&&s!==void 0?s:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return t.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,s,i=this.editorView.dom,o=i.getBoundingClientRect(),l=o.width/i.offsetWidth,u=o.height/i.offsetHeight;if(n){let m=t.nodeBefore,x=t.nodeAfter;if(m||x){let y=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(y){let b=y.getBoundingClientRect(),C=m?b.bottom:b.top;m&&x&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*u;s={left:b.left,right:b.right,top:C-S,bottom:C+S}}}}if(!s){let m=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*l;s={left:m.left-x,right:m.left+x,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let h,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),x=m.width/d.offsetWidth,y=m.height/d.offsetHeight;h=m.left-d.scrollLeft*x,p=m.top-d.scrollTop*y}this.element.style.left=(s.left-h)/l+"px",this.element.style.top=(s.top-p)/u+"px",this.element.style.width=(s.right-s.left)/l+"px",this.element.style.height=(s.bottom-s.top)/u+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),s=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=s&&s.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!o){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=N5(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Mr extends qt{constructor(t){super(t,t)}map(t,n){let s=t.resolve(n.map(this.head));return Mr.valid(s)?new Mr(s):qt.near(s)}content(){return it.empty}eq(t){return t instanceof Mr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Mr(t.resolve(n.pos))}getBookmark(){return new vk(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Kme(t)||!Xme(t))return!1;let s=n.type.spec.allowGapCursor;if(s!=null)return s;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,s=!1){e:for(;;){if(!s&&Mr.valid(t))return t;let i=t.pos,o=null;for(let l=t.depth;;l--){let u=t.node(l);if(n>0?t.indexAfter(l)<u.childCount:t.index(l)>0){o=u.child(n>0?t.indexAfter(l):t.index(l)-1);break}else if(l==0)return null;i+=n;let d=t.doc.resolve(i);if(Mr.valid(d))return d}for(;;){let l=n>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!At.isSelectable(o)){t=t.doc.resolve(i+o.nodeSize*n),s=!1;continue e}break}o=l,i+=n;let u=t.doc.resolve(i);if(Mr.valid(u))return u}return null}}}Mr.prototype.visible=!1;Mr.findFrom=Mr.findGapCursorFrom;qt.jsonID("gapcursor",Mr);class vk{constructor(t){this.pos=t}map(t){return new vk(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Mr.valid(n)?new Mr(n):qt.near(n)}}function O6(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function Kme(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),s=e.node(t);if(n==0){if(s.type.spec.isolating)return!0;continue}for(let i=s.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||O6(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Xme(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),s=e.node(t);if(n==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let i=s.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||O6(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Jme(){return new Rr({props:{decorations:tge,createSelectionBetween(e,t,n){return t.pos==n.pos&&Mr.valid(n)?new Mr(n):null},handleClick:Zme,handleKeyDown:Qme,handleDOMEvents:{beforeinput:ege}}})}const Qme=N_({ArrowLeft:i0("horiz",-1),ArrowRight:i0("horiz",1),ArrowUp:i0("vert",-1),ArrowDown:i0("vert",1)});function i0(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(s,i,o){let l=s.selection,u=t>0?l.$to:l.$from,d=l.empty;if(l instanceof Bt){if(!o.endOfTextblock(n)||u.depth==0)return!1;d=!1,u=s.doc.resolve(t>0?u.after():u.before())}let h=Mr.findGapCursorFrom(u,t,d);return h?(i&&i(s.tr.setSelection(new Mr(h))),!0):!1}}function Zme(e,t,n){if(!e||!e.editable)return!1;let s=e.state.doc.resolve(t);if(!Mr.valid(s))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&At.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Mr(s))),!0)}function ege(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Mr))return!1;let{$from:n}=e.state.selection,s=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!s)return!1;let i=Fe.empty;for(let l=s.length-1;l>=0;l--)i=Fe.from(s[l].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new it(i,0,0));return o.setSelection(Bt.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function tge(e){if(!(e.selection instanceof Mr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",mr.create(e.doc,[Hs.widget(e.selection.head,t,{key:"gapcursor"})])}var Ky=200,hs=function(){};hs.prototype.append=function(t){return t.length?(t=hs.from(t),!this.length&&t||t.length<Ky&&this.leafAppend(t)||this.length<Ky&&t.leafPrepend(this)||this.appendInner(t)):this};hs.prototype.prepend=function(t){return t.length?hs.from(t).append(this):this};hs.prototype.appendInner=function(t){return new nge(this,t)};hs.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?hs.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};hs.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};hs.prototype.forEach=function(t,n,s){n===void 0&&(n=0),s===void 0&&(s=this.length),n<=s?this.forEachInner(t,n,s,0):this.forEachInvertedInner(t,n,s,0)};hs.prototype.map=function(t,n,s){n===void 0&&(n=0),s===void 0&&(s=this.length);var i=[];return this.forEach(function(o,l){return i.push(t(o,l))},n,s),i};hs.from=function(t){return t instanceof hs?t:t&&t.length?new N6(t):hs.empty};var N6=(function(e){function t(s){e.call(this),this.values=s}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new t(this.values.slice(i,o))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,o,l,u){for(var d=o;d<l;d++)if(i(this.values[d],u+d)===!1)return!1},t.prototype.forEachInvertedInner=function(i,o,l,u){for(var d=o-1;d>=l;d--)if(i(this.values[d],u+d)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Ky)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Ky)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(hs);hs.empty=new N6([]);var nge=(function(e){function t(n,s){e.call(this),this.left=n,this.right=s,this.length=n.length+s.length,this.depth=Math.max(n.depth,s.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},t.prototype.forEachInner=function(s,i,o,l){var u=this.left.length;if(i<u&&this.left.forEachInner(s,i,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(s,Math.max(i-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(s,i,o,l){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(s,i-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(s,Math.min(i,u),o,l)===!1)return!1},t.prototype.sliceInner=function(s,i){if(s==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(s,i):s>=o?this.right.slice(s-o,i-o):this.left.slice(s,o).append(this.right.slice(0,i-o))},t.prototype.leafAppend=function(s){var i=this.right.leafAppend(s);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(s){var i=this.left.leafPrepend(s);if(i)return new t(i,this.right)},t.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new t(this.left,new t(this.right,s)):new t(this,s)},t})(hs);const rge=500;class wo{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let i,o;n&&(i=this.remapping(s,this.items.length),o=i.maps.length);let l=t.tr,u,d,h=[],p=[];return this.items.forEach((m,x)=>{if(!m.step){i||(i=this.remapping(s,x+1),o=i.maps.length),o--,p.push(m);return}if(i){p.push(new Yo(m.map));let y=m.step.map(i.slice(o)),b;y&&l.maybeStep(y).doc&&(b=l.mapping.maps[l.mapping.maps.length-1],h.push(new Yo(b,void 0,void 0,h.length+p.length))),o--,b&&i.appendMap(b,o)}else l.maybeStep(m.step);if(m.selection)return u=i?m.selection.map(i.slice(o)):m.selection,d=new wo(this.items.slice(0,s).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:u}}addTransform(t,n,s,i){let o=[],l=this.eventCount,u=this.items,d=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<t.steps.length;p++){let m=t.steps[p].invert(t.docs[p]),x=new Yo(t.mapping.maps[p],m,n),y;(y=d&&d.merge(x))&&(x=y,p?o.pop():u=u.slice(0,u.length-1)),o.push(x),n&&(l++,n=void 0),i||(d=x)}let h=l-s.depth;return h>ige&&(u=sge(u,h),l-=h),new wo(u.append(o),l)}remapping(t,n){let s=new $m;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=t?s.maps.length-i.mirrorOffset:void 0;s.appendMap(i.map,l)},t,n),s}addMaps(t){return this.eventCount==0?this:new wo(this.items.append(t.map(n=>new Yo(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let s=[],i=Math.max(0,this.items.length-n),o=t.mapping,l=t.steps.length,u=this.eventCount;this.items.forEach(x=>{x.selection&&u--},i);let d=n;this.items.forEach(x=>{let y=o.getMirror(--d);if(y==null)return;l=Math.min(l,y);let b=o.maps[y];if(x.step){let C=t.steps[y].invert(t.docs[y]),S=x.selection&&x.selection.map(o.slice(d+1,y));S&&u++,s.push(new Yo(b,C,S))}else s.push(new Yo(b))},i);let h=[];for(let x=n;x<l;x++)h.push(new Yo(o.maps[x]));let p=this.items.slice(0,i).append(h).append(s),m=new wo(p,u);return m.emptyItemCount()>rge&&(m=m.compress(this.items.length-s.length)),m}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),s=n.maps.length,i=[],o=0;return this.items.forEach((l,u)=>{if(u>=t)i.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(n.slice(s)),h=d&&d.getMap();if(s--,h&&n.appendMap(h,s),d){let p=l.selection&&l.selection.map(n.slice(s));p&&o++;let m=new Yo(h.invert(),d,p),x,y=i.length-1;(x=i.length&&i[y].merge(m))?i[y]=x:i.push(m)}}else l.map&&s--},this.items.length,0),new wo(hs.from(i.reverse()),o)}}wo.empty=new wo(hs.empty,0);function sge(e,t){let n;return e.forEach((s,i)=>{if(s.selection&&t--==0)return n=i,!1}),e.slice(n)}class Yo{constructor(t,n,s,i){this.map=t,this.step=n,this.selection=s,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Yo(n.getMap().invert(),n,this.selection)}}}class cc{constructor(t,n,s,i,o){this.done=t,this.undone=n,this.prevRanges=s,this.prevTime=i,this.prevComposition=o}}const ige=20;function oge(e,t,n,s){let i=n.getMeta(Vu),o;if(i)return i.historyState;n.getMeta(cge)&&(e=new cc(e.done,e.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(l&&l.getMeta(Vu))return l.getMeta(Vu).redo?new cc(e.done.addTransform(n,void 0,s,I0(t)),e.undone,NP(n.mapping.maps),e.prevTime,e.prevComposition):new cc(e.done,e.undone.addTransform(n,void 0,s,I0(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),d=e.prevTime==0||!l&&e.prevComposition!=u&&(e.prevTime<(n.time||0)-s.newGroupDelay||!age(n,e.prevRanges)),h=l?NS(e.prevRanges,n.mapping):NP(n.mapping.maps);return new cc(e.done.addTransform(n,d?t.selection.getBookmark():void 0,s,I0(t)),wo.empty,h,n.time,u??e.prevComposition)}else return(o=n.getMeta("rebased"))?new cc(e.done.rebased(n,o),e.undone.rebased(n,o),NS(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new cc(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),NS(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function age(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((s,i)=>{for(let o=0;o<t.length;o+=2)s<=t[o+1]&&i>=t[o]&&(n=!0)}),n}function NP(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((s,i,o,l)=>t.push(o,l));return t}function NS(e,t){if(!e)return null;let n=[];for(let s=0;s<e.length;s+=2){let i=t.map(e[s],1),o=t.map(e[s+1],-1);i<=o&&n.push(i,o)}return n}function lge(e,t,n){let s=I0(t),i=Vu.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,s);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,s),d=new cc(n?u:o.remaining,n?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Vu,{redo:n,historyState:d})}let PS=!1,PP=null;function I0(e){let t=e.plugins;if(PP!=t){PS=!1,PP=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){PS=!0;break}}return PS}const Vu=new fs("history"),cge=new fs("closeHistory");function uge(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Rr({key:Vu,state:{init(){return new cc(wo.empty,wo.empty,null,0,-1)},apply(t,n,s){return oge(n,s,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let s=n.inputType,i=s=="historyUndo"?z6:s=="historyRedo"?I6:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function P6(e,t){return(n,s)=>{let i=Vu.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(s){let o=lge(i,n,e);o&&s(t?o.scrollIntoView():o)}return!0}}const z6=P6(!1,!0),I6=P6(!0,!0);Xn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const s=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(s)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Rr({key:new fs("characterCount"),appendTransaction:(t,n,s)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const o=this.storage.characters({node:s.doc});if(o>i){const l=o-i,u=0,d=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const h=s.tr.deleteRange(u,d);return e=!0,h}e=!0},filterTransaction:(t,n)=>{const s=this.options.limit;if(!t.docChanged||s===0||s===null||s===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:t.doc});if(o<=s||i>s&&o>s&&o<=i)return!0;if(i>s&&o>s&&o>i||!t.getMeta("paste"))return!1;const u=t.selection.$head.pos,d=o-s,h=u-d,p=u;return t.deleteRange(h,p),!(this.storage.characters({node:t.doc})>s)}})]}});var dge=Xn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Gme(this.options)]}});Xn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Rr({key:new fs("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:s}=this.editor,{anchor:i}=t,o=[];if(!n||!s)return mr.create(e,[]);let l=0;this.options.mode==="deepest"&&e.descendants((d,h)=>{if(d.isText)return;if(!(i>=h&&i<=h+d.nodeSize-1))return!1;l+=1});let u=0;return e.descendants((d,h)=>{if(d.isText||!(i>=h&&i<=h+d.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";o.push(Hs.node(h,h+d.nodeSize,{class:this.options.className}))}),mr.create(e,o)}}})]}});var hge=Xn.create({name:"gapCursor",addProseMirrorPlugins(){return[Jme()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=_n(Et(e,"allowGapCursor",n)))!=null?t:null}}});Xn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Rr({key:new fs("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=t,i=[];if(!n)return null;const o=this.editor.isEmpty;return e.descendants((l,u)=>{const d=s>=u&&s<=u+l.nodeSize,h=!l.isLeaf&&Vb(l);if((d||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const m=Hs.node(u,u+l.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:u,hasAnchor:d}):this.options.placeholder});i.push(m)}return this.options.includeChildren}),mr.create(e,i)}}})]}});Xn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Rr({key:new fs("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||K_(n.selection)||e.view.dragging?null:mr.create(n.doc,[Hs.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function zP({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var fge=Xn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new fs(this.name),n=((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||this.options.node||"paragraph",s=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new Rr({key:t,appendTransaction:(i,o,l)=>{const{doc:u,tr:d,schema:h}=l,p=t.getState(l),m=u.content.size,x=h.nodes[n];if(p)return d.insert(m,x.create())},state:{init:(i,o)=>{const l=o.tr.doc.lastChild;return!zP({node:l,types:s})},apply:(i,o)=>{if(!i.docChanged)return o;const l=i.doc.lastChild;return!zP({node:l,types:s})}}})]}}),pge=Xn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>z6(e,t),redo:()=>({state:e,dispatch:t})=>I6(e,t)}},addProseMirrorPlugins(){return[uge(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),mge=Xn.create({name:"starterKit",addExtensions(){var e,t,n,s;const i=[];return this.options.bold!==!1&&i.push(Vpe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Lpe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(S6.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Wpe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Ype.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Kpe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(dge.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(hge.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Xpe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Jpe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(pge.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Qpe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(rme.configure(this.options.italic)),this.options.listItem!==!1&&i.push(C6.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(M6.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(j6.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(D6.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Fme.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Ume.configure(this.options.strike)),this.options.text!==!1&&i.push(Wme.configure(this.options.text)),this.options.underline!==!1&&i.push(qme.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(fge.configure((s=this.options)==null?void 0:s.trailingNode)),i}}),gge=mge,xge=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,yge=di.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",xr(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,n,s,i,o,l;const u=(n=(t=e.attrs)==null?void 0:t.src)!=null?n:"",d=(i=(s=e.attrs)==null?void 0:s.alt)!=null?i:"",h=(l=(o=e.attrs)==null?void 0:o.title)!=null?l:"";return h?`![${d}](${u} "${h}")`:`![${d}](${u})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u"||!this.editor.isEditable)return null;const{directions:e,minWidth:t,minHeight:n,alwaysPreserveAspectRatio:s}=this.options.resize;return({node:i,getPos:o,HTMLAttributes:l})=>{const u=document.createElement("img");Object.entries(l).forEach(([p,m])=>{if(m!=null)switch(p){case"width":case"height":break;default:u.setAttribute(p,m);break}}),u.src=l.src;const d=new ipe({element:u,node:i,getPos:o,onResize:(p,m)=>{u.style.width=`${p}px`,u.style.height=`${m}px`},onCommit:(p,m)=>{const x=o();x!==void 0&&this.editor.chain().setNodeSelection(x).updateAttributes(this.name,{width:p,height:m}).run()},onUpdate:(p,m,x)=>p.type===i.type,options:{directions:e,min:{width:t,height:n},preserveAspectRatio:s===!0}}),h=d.dom;return h.style.visibility="hidden",h.style.pointerEvents="none",u.onload=()=>{h.style.visibility="",h.style.pointerEvents=""},d}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[c6({find:xge,type:this.type,getAttributes:e=>{const[,,t,n,s]=e;return{src:n,alt:t,title:s}}})]}}),bge=yge,vge=20,L6=(e,t=0)=>{const n=[];return!e.children.length||t>vge||Array.from(e.children).forEach(s=>{s.tagName==="SPAN"?n.push(s):s.children.length&&n.push(...L6(s,t+1))}),n},jge=e=>{if(!e.children.length)return;const t=L6(e);t&&t.forEach(n=>{var s,i;const o=n.getAttribute("style"),l=(i=(s=n.parentElement)==null?void 0:s.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${l};${o}`)})},_6=vl.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:e=>e.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&jge(e),{}):!1}]},renderHTML({HTMLAttributes:e}){return["span",xr(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleTextStyle:e=>({commands:t})=>t.toggleMark(this.name,e),removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(n,s)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||e.removeMark(s,s+n.nodeSize,this.type)}),!0}}}}),Sge=Xn.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const s=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=s.length-1;i>=0;i-=1){const o=s[i].split(":");if(o.length>=2){const l=o[0].trim().toLowerCase(),u=o.slice(1).join(":").trim();if(l==="background-color")return u.replace(/['"]+/g,"")}}}return(t=e.style.backgroundColor)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:e=>({chain:t})=>t().setMark("textStyle",{backgroundColor:e}).run(),unsetBackgroundColor:()=>({chain:e})=>e().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),B6=Xn.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const s=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=s.length-1;i>=0;i-=1){const o=s[i].split(":");if(o.length>=2){const l=o[0].trim().toLowerCase(),u=o.slice(1).join(":").trim();if(l==="color")return u.replace(/['"]+/g,"")}}}return(t=e.style.color)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Cge=Xn.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:`font-family: ${e.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:e=>({chain:t})=>t().setMark("textStyle",{fontFamily:e}).run(),unsetFontFamily:()=>({chain:e})=>e().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),wge=Xn.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Ege=Xn.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight,renderHTML:e=>e.lineHeight?{style:`line-height: ${e.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:e=>({chain:t})=>t().setMark("textStyle",{lineHeight:e}).run(),unsetLineHeight:()=>({chain:e})=>e().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Xn.create({name:"textStyleKit",addExtensions(){const e=[];return this.options.backgroundColor!==!1&&e.push(Sge.configure(this.options.backgroundColor)),this.options.color!==!1&&e.push(B6.configure(this.options.color)),this.options.fontFamily!==!1&&e.push(Cge.configure(this.options.fontFamily)),this.options.fontSize!==!1&&e.push(wge.configure(this.options.fontSize)),this.options.lineHeight!==!1&&e.push(Ege.configure(this.options.lineHeight)),this.options.textStyle!==!1&&e.push(_6.configure(this.options.textStyle)),e}});var kge=B6,Age=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Tge=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Mge=vl.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",xr(this.options.HTMLAttributes,e),0]},renderMarkdown:(e,t)=>`==${t.renderChildren(e)}==`,parseMarkdown:(e,t)=>t.applyMark("highlight",t.parseInline(e.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:e=>e.indexOf("=="),tokenize(e,t,n){const i=/^(==)([^=]+)(==)/.exec(e);if(i){const o=i[2].trim(),l=n.inlineTokens(o);return{type:"highlight",raw:i[0],text:o,tokens:l}}}},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[id({find:Age,type:this.type})]},addPasteRules(){return[Dc({find:Tge,type:this.type})]}}),Rge=Mge,Dge=Xn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Oge=Dge;function Nge({value:e,onChange:t,minHeight:n="300px"}){const s=mn(),{isOpen:i,onOpen:o,onClose:l}=jt(),{isOpen:u,onOpen:d,onClose:h}=jt(),[p,m]=Lt.useState(""),[x,y]=Lt.useState(""),[b,C]=Lt.useState("#000000"),S=Ope({extensions:[gge.configure({paragraph:{HTMLAttributes:{class:"paragraph-class"}}}),Tme.configure({openOnClick:!1,HTMLAttributes:{class:"link-class"}}),bge.configure({HTMLAttributes:{class:"image-class",style:"max-width: 100%; height: auto;"}}),kge,_6,Oge.configure({types:["heading","paragraph"]}),Rge.configure({multicolor:!0})],content:e||"<p>Commencez  taper...</p>",onUpdate:({editor:T})=>{t(T.getHTML())}});if(!S)return null;const E=()=>{if(!p){s({status:"error",title:"URL requise"});return}S.chain().focus().extendMarkRange("link").setLink({href:p}).run(),m(""),l()},k=()=>{if(!x){s({status:"error",title:"URL image requise"});return}S.chain().focus().setImage({src:x}).run(),y(""),h()},A=T=>{S.chain().focus().setColor(T).run(),C(T)};return r.jsxs(Q,{align:"stretch",spacing:2,w:"100%",children:[r.jsxs(de,{borderWidth:"1px",borderRadius:"lg",p:2,bg:"gray.50",display:"flex",flexWrap:"wrap",gap:1,children:[r.jsx(Bn,{label:"Gras",placement:"top",children:r.jsx(et,{icon:r.jsx(Uae,{}),size:"sm",onClick:()=>S.chain().focus().toggleBold().run(),isActive:S.isActive("bold"),colorScheme:S.isActive("bold")?"blue":"gray",variant:S.isActive("bold")?"solid":"ghost"})}),r.jsx(Bn,{label:"Italique",placement:"top",children:r.jsx(et,{icon:r.jsx(Qae,{}),size:"sm",onClick:()=>S.chain().focus().toggleItalic().run(),isActive:S.isActive("italic"),colorScheme:S.isActive("italic")?"blue":"gray",variant:S.isActive("italic")?"solid":"ghost"})}),r.jsx(Bn,{label:"Soulign",placement:"top",children:r.jsx(et,{icon:r.jsx(ule,{}),size:"sm",onClick:()=>S.chain().focus().toggleStrike().run(),isActive:S.isActive("strike"),colorScheme:S.isActive("strike")?"blue":"gray",variant:S.isActive("strike")?"solid":"ghost"})}),r.jsx(Bn,{label:"Code",placement:"top",children:r.jsx(et,{icon:r.jsx(Wae,{}),size:"sm",onClick:()=>S.chain().focus().toggleCode().run(),isActive:S.isActive("code"),colorScheme:S.isActive("code")?"blue":"gray",variant:S.isActive("code")?"solid":"ghost"})}),r.jsx(rn,{orientation:"vertical",h:6}),r.jsx(Bn,{label:"Titre 1",placement:"top",children:r.jsx(et,{icon:r.jsx(Ux,{}),size:"sm",onClick:()=>S.chain().focus().toggleHeading({level:1}).run(),isActive:S.isActive("heading",{level:1}),colorScheme:S.isActive("heading",{level:1})?"blue":"gray",variant:S.isActive("heading",{level:1})?"solid":"ghost"})}),r.jsx(Bn,{label:"Titre 2",placement:"top",children:r.jsx(et,{icon:r.jsx(Ux,{}),size:"sm",onClick:()=>S.chain().focus().toggleHeading({level:2}).run(),isActive:S.isActive("heading",{level:2}),colorScheme:S.isActive("heading",{level:2})?"blue":"gray",variant:S.isActive("heading",{level:2})?"solid":"ghost"})}),r.jsx(Bn,{label:"Titre 3",placement:"top",children:r.jsx(et,{icon:r.jsx(Ux,{}),size:"sm",onClick:()=>S.chain().focus().toggleHeading({level:3}).run(),isActive:S.isActive("heading",{level:3}),colorScheme:S.isActive("heading",{level:3})?"blue":"gray",variant:S.isActive("heading",{level:3})?"solid":"ghost"})}),r.jsx(rn,{orientation:"vertical",h:6}),r.jsx(Bn,{label:"Liste  puces",placement:"top",children:r.jsx(et,{icon:r.jsx(RE,{}),size:"sm",onClick:()=>S.chain().focus().toggleBulletList().run(),isActive:S.isActive("bulletList"),colorScheme:S.isActive("bulletList")?"blue":"gray",variant:S.isActive("bulletList")?"solid":"ghost"})}),r.jsx(rn,{orientation:"vertical",h:6}),r.jsx(Bn,{label:"Aligner  gauche",placement:"top",children:r.jsx(et,{icon:r.jsx(Lae,{}),size:"sm",onClick:()=>S.chain().focus().setTextAlign("left").run(),isActive:S.isActive({textAlign:"left"}),colorScheme:S.isActive({textAlign:"left"})?"blue":"gray",variant:S.isActive({textAlign:"left"})?"solid":"ghost"})}),r.jsx(Bn,{label:"Centrer",placement:"top",children:r.jsx(et,{icon:r.jsx(Iae,{}),size:"sm",onClick:()=>S.chain().focus().setTextAlign("center").run(),isActive:S.isActive({textAlign:"center"}),colorScheme:S.isActive({textAlign:"center"})?"blue":"gray",variant:S.isActive({textAlign:"center"})?"solid":"ghost"})}),r.jsx(Bn,{label:"Aligner  droite",placement:"top",children:r.jsx(et,{icon:r.jsx(_ae,{}),size:"sm",onClick:()=>S.chain().focus().setTextAlign("right").run(),isActive:S.isActive({textAlign:"right"}),colorScheme:S.isActive({textAlign:"right"})?"blue":"gray",variant:S.isActive({textAlign:"right"})?"solid":"ghost"})}),r.jsx(rn,{orientation:"vertical",h:6}),r.jsx(Bn,{label:"Ajouter un lien",placement:"top",children:r.jsx(et,{icon:r.jsx(ele,{}),size:"sm",onClick:o,colorScheme:S.isActive("link")?"blue":"gray",variant:S.isActive("link")?"solid":"ghost"})}),r.jsx(Bn,{label:"Ajouter une image",placement:"top",children:r.jsx(et,{icon:r.jsx(Xae,{}),size:"sm",onClick:d})}),r.jsxs(lL,{placement:"bottom",children:[r.jsx(pL,{children:r.jsx(et,{icon:r.jsx(Ux,{}),size:"sm",_hover:{bg:"gray.200"}})}),r.jsxs(fL,{w:"auto",children:[r.jsx(uL,{}),r.jsx(dL,{children:r.jsx(ne,{spacing:2,flexWrap:"wrap",children:["#000000","#b91c1c","#1e40af","#15803d","#ea580c","#7c3aed","#ec4899"].map(T=>r.jsx(de,{w:6,h:6,bg:T,borderRadius:"md",cursor:"pointer",onClick:()=>A(T),border:b===T?"3px solid":"none",borderColor:"blue.500",_hover:{opacity:.8}},T))})})]})]}),r.jsx(rn,{orientation:"vertical",h:6}),r.jsx(Bn,{label:"Effacer la mise en forme",placement:"top",children:r.jsx(et,{icon:r.jsx(ao,{}),size:"sm",onClick:()=>S.chain().focus().clearNodes().unsetAllMarks().run()})}),r.jsx(Bn,{label:"Tout supprimer",placement:"top",children:r.jsx(et,{icon:r.jsx(Yn,{}),size:"sm",onClick:()=>S.chain().focus().clearContent().run(),colorScheme:"red",variant:"ghost"})})]}),r.jsx(de,{borderWidth:"1px",borderRadius:"lg",p:4,minH:n,bg:"white",css:{"& .ProseMirror":{outline:"none",minHeight:n,fontSize:"16px",lineHeight:"1.6"},"& .ProseMirror h1":{fontSize:"32px",fontWeight:"bold",marginTop:"16px",marginBottom:"8px"},"& .ProseMirror h2":{fontSize:"24px",fontWeight:"bold",marginTop:"12px",marginBottom:"6px"},"& .ProseMirror h3":{fontSize:"20px",fontWeight:"bold",marginTop:"10px",marginBottom:"4px"},"& .ProseMirror a":{color:"#1e40af",textDecoration:"underline",cursor:"pointer"},"& .ProseMirror code":{backgroundColor:"#f3f4f6",padding:"2px 6px",borderRadius:"4px",fontFamily:"monospace"},"& .ProseMirror pre":{backgroundColor:"#1f2937",color:"#f3f4f6",padding:"12px",borderRadius:"8px",overflow:"auto"},"& .ProseMirror ul, & .ProseMirror ol":{marginLeft:"24px"},"& .ProseMirror li":{marginBottom:"4px"}},children:r.jsx(Epe,{editor:S})}),r.jsxs(mt,{isOpen:i,onClose:l,isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Ajouter un lien"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(G,{children:[r.jsx(q,{children:"URL"}),r.jsx(pe,{placeholder:"https://example.com",value:p,onChange:T=>m(T.target.value),onKeyPress:T=>T.key==="Enter"&&E()})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:l,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:E,children:"Ajouter"})]})]})]}),r.jsxs(mt,{isOpen:u,onClose:h,isCentered:!0,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Ajouter une image"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(G,{children:[r.jsx(q,{children:"URL de l'image"}),r.jsx(pe,{placeholder:"https://example.com/image.jpg",value:x,onChange:T=>y(T.target.value),onKeyPress:T=>T.key==="Enter"&&k()})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:h,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:k,children:"Ajouter"})]})]})]})]})}const rc="https://attractive-kindness-rbe-serveurs.up.railway.app";function Pge(){const[e,t]=j.useState([]),[n,s]=j.useState(!1),[i,o]=j.useState(null),[l,u]=j.useState(null),[d,h]=j.useState({title:"",subject:"",content:"",scheduledAt:""}),[p,m]=j.useState(""),[x,y]=j.useState(null),[b,C]=j.useState(null),[S,E]=j.useState({}),{token:k}=Cs(),A=mn(),{isOpen:T,onOpen:M,onClose:D}=jt(),{isOpen:$,onOpen:W,onClose:te}=jt(),{isOpen:re,onOpen:U,onClose:oe}=jt(),xe=async()=>{s(!0);try{const ae=await fetch(`${rc}/newsletter/campaigns`,{headers:{Authorization:`Bearer ${k}`}});if(!ae.ok)throw new Error("Erreur chargement");const P=await ae.json();t(P)}catch{A({status:"error",title:"Erreur",description:"Impossible de charger les campagnes"})}finally{s(!1)}};j.useEffect(()=>{k&&xe()},[k]);const ie=async()=>{if(!d.title||!d.subject||!d.content){A({status:"error",title:"Erreur",description:"Tous les champs sont requis"});return}try{if(!(await fetch(`${rc}/newsletter/campaigns`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify(d)})).ok)throw new Error("Erreur cration");A({status:"success",title:"Succs",description:"Campagne cre avec succs"}),h({title:"",subject:"",content:"",scheduledAt:""}),D(),xe()}catch{A({status:"error",title:"Erreur",description:"Impossible de crer la campagne"})}},H=async ae=>{try{const P=await fetch(`${rc}/newsletter/campaigns/${ae}/preview`,{headers:{Authorization:`Bearer ${k}`}});if(!P.ok)throw new Error("Erreur prvisualisation");const R=await P.json();u(ae),y(R),W()}catch{A({status:"error",title:"Erreur",description:"Impossible de prvisualiser"})}},F=async ae=>{if(!p){A({status:"error",title:"Erreur",description:"Email de test requis"});return}try{if(!(await fetch(`${rc}/newsletter/campaigns/${ae}/test`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify({email:p})})).ok)throw new Error("Erreur envoi test");A({status:"success",title:"Test envoy",description:`Email de test envoy  ${p}`}),m("")}catch{A({status:"error",title:"Erreur",description:"Impossible d'envoyer le test"})}},_=async ae=>{if(confirm("tes-vous sr de vouloir envoyer cette campagne ? Cette action est irrversible.")){C(ae);try{const P=await fetch(`${rc}/newsletter/campaigns/${ae}/prepare`,{method:"POST",headers:{Authorization:`Bearer ${k}`}});if(!P.ok)throw new Error("Erreur prparation");const R=await P.json();A({status:"info",title:"Prparation termine",description:`${R.preparedSends} emails prpars. Envoi en cours...`});const N=await fetch(`${rc}/newsletter/campaigns/${ae}/send`,{method:"POST",headers:{Authorization:`Bearer ${k}`}});if(!N.ok)throw new Error("Erreur envoi");const Z=await N.json();A({status:"success",title:"Envoi termin",description:`${Z.success} emails envoys avec succs, ${Z.errors} erreurs`}),xe()}catch{A({status:"error",title:"Erreur",description:"Impossible d'envoyer la campagne"})}finally{C(null)}}},B=async ae=>{o(ae);try{const P=await fetch(`${rc}/newsletter/campaigns/${ae.id}/stats`,{headers:{Authorization:`Bearer ${k}`}});if(!P.ok)throw new Error("Erreur stats");const R=await P.json();E(R),U()}catch{A({status:"error",title:"Erreur",description:"Impossible de charger les statistiques"})}},fe=async(ae,P)=>{if(confirm(`Supprimer dfinitivement la campagne "${P}" ?`))try{if(!(await fetch(`${rc}/newsletter/campaigns/${ae}`,{method:"DELETE",headers:{Authorization:`Bearer ${k}`}})).ok)throw new Error("Erreur suppression");A({status:"success",title:"Supprim",description:"Campagne supprime avec succs"}),xe()}catch{A({status:"error",title:"Erreur",description:"Impossible de supprimer la campagne"})}},I=ae=>{const P={DRAFT:{color:"gray",text:"Brouillon"},SENDING:{color:"blue",text:"En cours"},SENT:{color:"green",text:"Envoy"},CANCELLED:{color:"red",text:"Annul"}},R=P[ae]||P.DRAFT;return r.jsx(Ge,{colorScheme:R.color,children:R.text})},ee={event:{title:"Nouvel vnement",subject:" Nouveau vnement RtroBus Essonne !",content:`
        <h2> Nouvel vnement  ne pas manquer !</h2>
        <p>Chers passionns de vhicules d'poque,</p>
        <p>Nous avons le plaisir de vous annoncer un nouvel vnement organis par l'association RtroBus Essonne :</p>
        
        <h3> [Nom de l'vnement]</h3>
        <p><strong>Date :</strong> [Date]<br>
        <strong>Lieu :</strong> [Lieu]<br>
        <strong>Heure :</strong> [Heure]</p>
        
        <p>[Description de l'vnement]</p>
        
        <a href="#" class="button">S'inscrire  l'vnement</a>
        
        <p>Au plaisir de vous retrouver nombreux !</p>
        <p><strong>L'quipe RtroBus Essonne</strong></p>
      `},news:{title:"Actualits du parc",subject:" Actualits RtroBus Essonne",content:`
        <h2> Les dernires nouvelles de notre parc</h2>
        <p>Bonjour  tous,</p>
        <p>Voici les dernires actualits de l'association RtroBus Essonne :</p>
        
        <h3> Nouveau vhicule au parc</h3>
        <p>[Informations sur le nouveau vhicule]</p>
        
        <h3> Travaux de restauration</h3>
        <p>[Avancement des travaux]</p>
        
        <h3> Retour en images</h3>
        <p>[Galerie photos rcente]</p>
        
        <a href="#" class="button">Voir toutes les actualits</a>
        
        <p>Merci pour votre soutien !</p>
        <p><strong>L'quipe RtroBus Essonne</strong></p>
      `}};return r.jsxs(de,{p:6,children:[r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"lg",children:" Campagnes Newsletter"}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Crez et grez vos campagnes d'emailing"})]}),r.jsxs(ne,{children:[r.jsx(Y,{leftIcon:r.jsx(ao,{}),onClick:xe,isLoading:n,variant:"outline",size:"sm",children:"Actualiser"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:M,children:"Nouvelle campagne"})]})]}),r.jsx(de,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",children:n?r.jsx(cn,{py:10,children:r.jsx(sn,{size:"lg"})}):e.length===0?r.jsx(cn,{py:10,children:r.jsxs(Q,{children:[r.jsx(O,{fontSize:"lg",children:""}),r.jsx(O,{color:"gray.500",children:"Aucune campagne cre"}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",size:"sm",onClick:M,children:"Crer votre premire campagne"})]})}):r.jsxs(Tr,{children:[r.jsx(Ir,{bg:"gray.50",children:r.jsxs($t,{children:[r.jsx(Ie,{children:"Campagne"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{children:"Cre le"}),r.jsx(Ie,{children:"Abonns"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:e.map(ae=>r.jsxs($t,{children:[r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"semibold",children:ae.title}),r.jsx(O,{fontSize:"sm",color:"gray.600",isTruncated:!0,maxW:"300px",children:ae.subject})]})}),r.jsx(Pe,{children:I(ae.status)}),r.jsx(Pe,{children:r.jsx(O,{fontSize:"sm",children:new Date(ae.createdAt).toLocaleDateString("fr-FR")})}),r.jsx(Pe,{children:r.jsx(O,{fontSize:"sm",children:ae.totalSent||ae._count?.sends||0})}),r.jsx(Pe,{children:r.jsxs(ne,{spacing:1,children:[r.jsx(et,{"aria-label":"Prvisualiser",icon:r.jsx(zm,{}),size:"sm",variant:"ghost",onClick:()=>H(ae.id)}),ae.status==="DRAFT"&&r.jsxs(r.Fragment,{children:[r.jsx(et,{"aria-label":"Envoyer",icon:r.jsx(ile,{}),size:"sm",colorScheme:"green",variant:"ghost",onClick:()=>_(ae.id),isLoading:b===ae.id}),r.jsx(et,{"aria-label":"Supprimer",icon:r.jsx(Yn,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>fe(ae.id,ae.title)})]}),ae.status==="SENT"&&r.jsx(et,{"aria-label":"Statistiques",icon:r.jsx(Fae,{}),size:"sm",colorScheme:"purple",variant:"ghost",onClick:()=>B(ae)})]})})]},ae.id))})]})})]}),r.jsxs(mt,{isOpen:T,onClose:D,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{maxH:"90vh",overflowY:"auto",children:[r.jsx(xt,{children:" Nouvelle campagne newsletter"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Titre de la campagne"}),r.jsx(pe,{placeholder:"ex: Newsletter mensuelle octobre 2025",value:d.title,onChange:ae=>h(P=>({...P,title:ae.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Sujet de l'email"}),r.jsx(pe,{placeholder:"ex:  Actualits RtroBus Essonne - Octobre 2025",value:d.subject,onChange:ae=>h(P=>({...P,subject:ae.target.value}))})]}),r.jsx(I3,{allowToggle:!0,w:"100%",children:r.jsxs(B3,{children:[r.jsxs(L3,{children:[r.jsx(de,{flex:"1",textAlign:"left",children:" Utiliser un template prdfini"}),r.jsx(_3,{})]}),r.jsx($3,{children:r.jsx(Q,{spacing:2,children:Object.entries(ee).map(([ae,P])=>r.jsx(Y,{size:"sm",variant:"outline",w:"100%",onClick:()=>h(R=>({...R,title:P.title,subject:P.subject,content:P.content})),children:P.title},ae))})})]})}),r.jsxs(G,{children:[r.jsx(q,{children:"Contenu de la newsletter"}),r.jsx(Nge,{value:d.content,onChange:ae=>h(P=>({...P,content:ae})),minHeight:"400px"}),r.jsx(O,{fontSize:"xs",color:"gray.500",mt:1,children:" Utilisez l'diteur visuel pour formater votre newsletter facilement"})]}),r.jsxs(Ft,{status:"info",fontSize:"sm",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"semibold",children:" Conseils"}),r.jsx(O,{children:" Utilisez des titres avec <h2> et <h3>"}),r.jsx(O,{children:' Ajoutez des liens avec <a href="#" class="button">Texte</a>'}),r.jsx(O,{children:" Sparez les sections avec des paragraphes <p>"})]})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:D,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:ie,children:"Crer la campagne"})]})]})]}),r.jsxs(mt,{isOpen:$,onClose:te,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{maxH:"90vh",children:[r.jsx(xt,{children:" Prvisualisation de la campagne"}),r.jsx(kt,{}),r.jsx(gt,{children:x&&r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Sujet"}),r.jsx(Q0,{p:2,w:"100%",children:x.subject})]}),r.jsx(rn,{}),r.jsxs(Q,{spacing:2,children:[r.jsx(O,{fontWeight:"semibold",children:"Aperu de l'email :"}),r.jsx(de,{border:"1px solid",borderColor:"gray.200",borderRadius:"md",h:"400px",w:"100%",overflow:"auto",children:r.jsx("iframe",{srcDoc:x.html,style:{width:"100%",height:"100%",border:"none"},title:"Prvisualisation email"})})]}),r.jsx(rn,{}),r.jsxs(G,{children:[r.jsx(q,{children:"Envoyer un test  :"}),r.jsxs(ne,{children:[r.jsx(pe,{placeholder:"votre-email@test.com",value:p,onChange:ae=>m(ae.target.value)}),r.jsx(Y,{leftIcon:r.jsx(Tc,{}),colorScheme:"orange",onClick:()=>F(l),isDisabled:!p||!l,children:"Envoyer le test"})]})]})]})}),r.jsx(Nt,{children:r.jsx(Y,{onClick:te,children:"Fermer"})})]})]}),r.jsxs(mt,{isOpen:re,onClose:oe,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:" Statistiques de la campagne"}),r.jsx(kt,{}),r.jsx(gt,{children:i&&r.jsxs(Q,{spacing:6,children:[r.jsxs(Q,{align:"start",w:"100%",children:[r.jsx(O,{fontWeight:"semibold",children:i.title}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:i.subject}),r.jsxs(O,{fontSize:"sm",color:"gray.500",children:["Envoye le ",new Date(i.sentAt).toLocaleDateString("fr-FR")]})]}),r.jsxs(wE,{w:"100%",children:[r.jsxs(dt,{children:[r.jsx(ht,{children:"Envoys"}),r.jsx(ft,{color:"blue.500",children:S.sent||0})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"checs"}),r.jsx(ft,{color:"red.500",children:S.failed||0})]}),r.jsxs(dt,{children:[r.jsx(ht,{children:"Ouvertures"}),r.jsx(ft,{color:"green.500",children:S.opened||0})]})]}),S.sent>0&&r.jsxs(de,{w:"100%",children:[r.jsx(O,{fontSize:"sm",mb:2,children:"Taux de russite"}),r.jsx(gc,{value:S.sent/(S.sent+S.failed)*100,colorScheme:"green",size:"lg"}),r.jsxs(O,{fontSize:"xs",color:"gray.500",mt:1,children:[Math.round(S.sent/(S.sent+S.failed)*100),"% des emails ont t envoys avec succs"]})]})]})}),r.jsx(Nt,{children:r.jsx(Y,{onClick:oe,children:"Fermer"})})]})]})]})}const zge=({label:e,value:t,change:n,icon:s,color:i="brand",loading:o=!1})=>{const l=ir("white","gray.800"),u=ir(`${i}.600`,`${i}.400`);return r.jsx(Me,{variant:"modern",bg:l,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsxs(ne,{justify:"space-between",align:"start",mb:2,children:[r.jsx(ht,{color:"gray.600",fontSize:"sm",fontWeight:"500",children:e}),s&&r.jsx(Wn,{as:s,color:u,boxSize:5})]}),r.jsx(ft,{color:u,fontSize:"2xl",fontWeight:"700",children:o?r.jsx(sn,{size:"sm"}):t}),n&&!o&&r.jsxs(Si,{mb:0,children:[r.jsx(Ch,{type:n.type}),n.value]})]})})})},Ige=({stats:e,loading:t=!1})=>r.jsx(tt,{columns:{base:1,md:2,lg:4},spacing:6,mb:8,children:e.map((n,s)=>r.jsx(zge,{...n,loading:t},s))}),ah={STANDARD:{label:"Standard",price:60,description:"Adhsion individuelle classique",color:"blue"},FAMILY:{label:"Famille",price:100,description:"2 adultes + enfants mineurs",color:"green"},STUDENT:{label:"tudiant",price:35,description:"Tarif rduit sur justificatif",color:"purple"},HONORARY:{label:"Honneur",price:0,description:"Membre d'honneur",color:"gold"},LIFETIME:{label:" vie",price:0,description:"Adhsion permanente",color:"red"}},o0={PENDING:{label:"En attente",color:"yellow",icon:YL,description:"Dossier en cours de traitement"},ACTIVE:{label:"Actif",color:"green",icon:kE,description:"Adhsion  jour"},EXPIRED:{label:"Expir",color:"red",icon:hle,description:"Adhsion expire"},SUSPENDED:{label:"Suspendu",color:"orange",icon:WL,description:"Adhsion suspendue"},CANCELLED:{label:"Annul",color:"gray",icon:ay,description:"Adhsion annule"}},a0={MEMBER:{label:"Adhrent",icon:wi,color:"blue",description:"Membre standard de l'association",permissions:["participate_events","access_newsletter"]},DRIVER:{label:"Conducteur",icon:yc,color:"green",description:"Autoris  conduire les vhicules",permissions:["drive_vehicles","access_myrbe"]},ADMIN:{label:"Administrateur",icon:JL,color:"red",description:"Accs complet aux fonctions d'administration",permissions:["admin_full_access"]},BUREAU:{label:"Bureau",icon:$ae,color:"purple",description:"Membre du bureau de l'association",permissions:["bureau_access","admin_events","admin_members"]}},Lge={CASH:{label:"Espces",icon:Zu,color:"green"},CHECK:{label:"Chque",icon:HC,color:"blue"},TRANSFER:{label:"Virement",icon:Za,color:"purple"},HELLOASSO:{label:"HelloAsso",icon:KL,color:"orange"},CARD:{label:"Carte bancaire",icon:HC,color:"teal"}},zS={IDENTITY_CARD:{label:"Pice d'identit",icon:QL,color:"green",required:!0,maxSizeMB:5,allowedTypes:["image/jpeg","image/png","application/pdf"]},DRIVING_LICENSE:{label:"Permis de conduire",icon:yc,color:"blue",required:!1,maxSizeMB:5,allowedTypes:["image/jpeg","image/png","application/pdf"]},INSURANCE_RECORD:{label:"Relev d'assurance",icon:JL,color:"orange",required:!0,maxSizeMB:3,allowedTypes:["application/pdf"]},MEMBERSHIP_FORM:{label:"Bulletin d'adhsion",icon:WC,color:"purple",required:!0,maxSizeMB:3,allowedTypes:["application/pdf"]},MEDICAL_CERTIFICATE:{label:"Certificat mdical",icon:kE,color:"teal",required:!1,maxSizeMB:3,allowedTypes:["application/pdf"]}};function _ge(){const[e,t]=j.useState([]),[n,s]=j.useState([]),[i,o]=j.useState(null),[l,u]=j.useState(!0),[d,h]=j.useState(!1),[p,m]=j.useState("table"),[x,y]=j.useState([]),[b,C]=j.useState({search:"",status:"ALL",role:"ALL",membershipType:"ALL",hasMyRBEAccess:"ALL",expiringOnly:!1}),{isOpen:S,onOpen:E,onClose:k}=jt(),{isOpen:A,onOpen:T,onClose:M}=jt(),{isOpen:D,onOpen:$,onClose:W}=jt(),{isOpen:te,onOpen:re,onClose:U}=jt(),[oe,xe]=j.useState(null),[ie,H]=j.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",birthDate:"",membershipType:"STANDARD",membershipStatus:"PENDING",joinDate:new Date().toISOString().split("T")[0],renewalDate:"",paymentAmount:"",paymentMethod:"HELLOASSO",role:"MEMBER",hasExternalAccess:!1,hasInternalAccess:!1,newsletter:!0,matricule:"",loginEnabled:!1,temporaryPassword:"",mustChangePassword:!1,driverLicense:"",licenseExpiryDate:"",medicalCertificateDate:"",emergencyContact:"",emergencyPhone:"",driverCertifications:[],vehicleAuthorizations:[],maxPassengers:"",driverNotes:"",notes:""}),[F,_]=j.useState([]),[B,fe]=j.useState({type:"IDENTITY_CARD",expiryDate:"",notes:""}),I=j.useRef(null),ee=mn();ir("white","gray.800");const ae=()=>{const X=new Date().getFullYear(),le=Math.floor(Math.random()*900)+100;return`${X}-${le}`},P=()=>{const X="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let le="";for(let Ve=0;Ve<8;Ve++)le+=X.charAt(Math.floor(Math.random()*X.length));return le},R=(X,le)=>{const Ve=new Date(X),at=new Date(Ve);return at.setFullYear(Ve.getFullYear()+1,11,31),at.toISOString().split("T")[0]},N=(X,le=60)=>{if(!X)return!1;const Ve=new Date(X),at=new Date(Date.now()+le*24*60*60*1e3);return Ve<=at},Z=j.useCallback(async()=>{try{if(u(!0),console.log(" Chargement des membres..."),!await nl.testConnectivity()){console.warn(" API non accessible, mode dgrad activ"),ee({status:"warning",title:"Mode dgrad",description:"L'API n'est pas accessible. Certaines fonctionnalits peuvent tre limites.",duration:5e3,isClosable:!0}),t([]);return}const le=await nl.getAll();console.log(" Rponse API membres:",le);let Ve=[];le?.members?Ve=Array.isArray(le.members)?le.members:[le.members]:le?.data?Ve=Array.isArray(le.data)?le.data:[le.data]:Array.isArray(le)?Ve=le:(console.warn(" Structure de rponse inattendue:",le),Ve=[]),t(Ve),console.log(` ${Ve.length} membres chargs avec succs`),Ve.length===0&&ee({status:"info",title:"Aucun membre",description:"Aucun membre trouv dans la base de donnes",duration:3e3,isClosable:!0})}catch(X){console.error(" Erreur chargement membres:",X);let le="Impossible de charger les membres",Ve="error";X.message.includes("404")?le="Endpoint membres non trouv. Vrifiez la configuration de l'API.":X.message.includes("401")?(le="Session expire. Veuillez vous reconnecter.",setTimeout(()=>{window.location.href="/login"},2e3)):X.message.includes("500")?le="Erreur serveur. Contactez l'administrateur.":X.message.includes("Network")&&(le="Problme de rseau. Vrifiez votre connexion.",Ve="warning"),ee({status:Ve,title:"Erreur de chargement",description:le,duration:8e3,isClosable:!0}),t([])}finally{u(!1)}},[ee]),ke=j.useCallback(async()=>{try{if(e.length===0)return;const X=new Date,le=new Date(X.getTime()-720*60*60*1e3),Ve={totalMembers:e.length,activeMembers:e.filter(at=>at.membershipStatus==="ACTIVE").length,expiredMembers:e.filter(at=>at.membershipStatus==="EXPIRED").length,pendingMembers:e.filter(at=>at.membershipStatus==="PENDING").length,driversCount:e.filter(at=>at.role==="DRIVER"||at.driverLicense).length,myRBEEnabled:e.filter(at=>at.loginEnabled).length,recentJoins:e.filter(at=>new Date(at.joinDate||at.createdAt)>le).length,expiringSoon:e.filter(at=>N(at.renewalDate)).length,totalRevenue:e.filter(at=>at.membershipStatus==="ACTIVE"&&at.paymentAmount).reduce((at,dn)=>at+(parseFloat(dn.paymentAmount)||0),0)};o(Ve)}catch(X){console.error(" Erreur calcul statistiques:",X)}},[e]),Te=j.useCallback(()=>{let X=[...e];if(b.search){const le=b.search.toLowerCase();X=X.filter(Ve=>`${Ve.firstName} ${Ve.lastName}`.toLowerCase().includes(le)||Ve.email?.toLowerCase().includes(le)||Ve.matricule?.toLowerCase().includes(le)||Ve.phone?.includes(le))}if(b.status!=="ALL"&&(X=X.filter(le=>le.membershipStatus===b.status)),b.role!=="ALL"&&(X=X.filter(le=>le.role===b.role)),b.membershipType!=="ALL"&&(X=X.filter(le=>le.membershipType===b.membershipType)),b.hasMyRBEAccess!=="ALL"){const le=b.hasMyRBEAccess==="true";X=X.filter(Ve=>!!Ve.loginEnabled===le)}b.expiringOnly&&(X=X.filter(le=>N(le.renewalDate))),s(X)},[e,b]);j.useEffect(()=>{Z()},[Z]),j.useEffect(()=>{ke()},[ke]),j.useEffect(()=>{Te()},[Te]);const je=()=>{H({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",birthDate:"",membershipType:"STANDARD",membershipStatus:"PENDING",joinDate:new Date().toISOString().split("T")[0],renewalDate:"",paymentAmount:ah.STANDARD.price.toString(),paymentMethod:"HELLOASSO",role:"MEMBER",hasExternalAccess:!1,hasInternalAccess:!1,newsletter:!0,matricule:"",loginEnabled:!1,temporaryPassword:"",mustChangePassword:!1,driverLicense:"",licenseExpiryDate:"",medicalCertificateDate:"",emergencyContact:"",emergencyPhone:"",driverCertifications:[],vehicleAuthorizations:[],maxPassengers:"",driverNotes:"",notes:""}),xe(null)},Ke=()=>{je(),E()},Xe=X=>{H({...X,joinDate:X.joinDate?X.joinDate.split("T")[0]:"",renewalDate:X.renewalDate?X.renewalDate.split("T")[0]:"",birthDate:X.birthDate?X.birthDate.split("T")[0]:"",licenseExpiryDate:X.licenseExpiryDate?X.licenseExpiryDate.split("T")[0]:"",medicalCertificateDate:X.medicalCertificateDate?X.medicalCertificateDate.split("T")[0]:"",paymentAmount:X.paymentAmount?.toString()||"",maxPassengers:X.maxPassengers?.toString()||"",driverCertifications:X.driverCertifications||[],vehicleAuthorizations:X.vehicleAuthorizations||[]}),xe(X),T()},He=async()=>{try{if(h(!0),!ie.firstName?.trim()||!ie.lastName?.trim()||!ie.email?.trim()){ee({status:"error",title:"Champs requis",description:"Nom, prnom et email sont obligatoires",duration:5e3,isClosable:!0});return}ie.joinDate&&!ie.renewalDate&&(ie.renewalDate=R(ie.joinDate,ie.membershipType)),ie.loginEnabled&&!ie.matricule&&(ie.matricule=ae()),ie.loginEnabled&&!ie.temporaryPassword&&(ie.temporaryPassword=P(),ie.mustChangePassword=!0);const X={...ie,paymentAmount:ie.paymentAmount?parseFloat(ie.paymentAmount):null,maxPassengers:ie.maxPassengers?parseInt(ie.maxPassengers):null};oe?(await nl.update(oe.id,X),ee({status:"success",title:"Membre mis  jour",description:`${ie.firstName} ${ie.lastName} a t modifi avec succs`,duration:5e3,isClosable:!0})):(await nl.create(X),ee({status:"success",title:"Membre cr",description:`${ie.firstName} ${ie.lastName} a t ajout avec succs`,duration:5e3,isClosable:!0})),k(),M(),je(),Z()}catch(X){console.error(" Erreur sauvegarde:",X),ee({status:"error",title:"Erreur de sauvegarde",description:X.message||"Impossible de sauvegarder le membre",duration:5e3,isClosable:!0})}finally{h(!1)}},pt=()=>i?[{label:"Total adhrents",value:i.totalMembers,icon:wi,color:"brand",change:i.recentJoins>0?{type:"increase",value:`+${i.recentJoins} ce mois`}:void 0},{label:"Membres actifs",value:i.activeMembers,icon:kE,color:"success",change:{type:"increase",value:`${Math.round(i.activeMembers/i.totalMembers*100)}% du total`}},{label:"Conducteurs habilits",value:i.driversCount,icon:yc,color:"blue"},{label:"Accs MyRBE",value:i.myRBEEnabled,icon:Lu,color:"purple"},{label:"Expirant bientt",value:i.expiringSoon,icon:WL,color:"warning"},{label:"Revenus adhsions",value:`${i.totalRevenue||0}`,icon:Zu,color:"green",change:{type:"increase",value:"Cotisations encaisses"}}]:[],De=X=>{const le=o0[X]||o0.PENDING;return r.jsx(Bn,{label:le.description,children:r.jsx(Ge,{colorScheme:le.color,variant:"subtle",children:r.jsxs(ne,{spacing:1,children:[r.jsx(Icon,{as:le.icon,size:"12px"}),r.jsx(O,{children:le.label})]})})})},Tt=X=>{const le=a0[X]||a0.MEMBER;return r.jsx(Bn,{label:le.description,children:r.jsx(Ge,{colorScheme:le.color,variant:"outline",children:r.jsxs(ne,{spacing:1,children:[r.jsx(Icon,{as:le.icon,size:"12px"}),r.jsx(O,{children:le.label})]})})})},ue=X=>{const le=ah[X]||ah.STANDARD;return r.jsx(Ge,{colorScheme:le.color,variant:"subtle",children:le.label})},Ee=X=>{console.log(`Action en masse: ${X} sur ${x.length} membres`)},nt=()=>{console.log("Export des donnes membres")};return l?r.jsx(Lm,{title:" Gestion des Adhsions",subtitle:"Chargement des donnes membres...",children:r.jsxs(Q,{spacing:8,py:16,children:[r.jsx(sn,{size:"xl",color:"brand.500",thickness:"4px"}),r.jsx(O,{color:"gray.600",children:"Synchronisation avec la base de donnes..."})]})}):r.jsxs(Lm,{title:" Gestion des Adhsions",subtitle:"Administration complte des membres de l'association RtroBus Essonne",breadcrumbs:[{label:"MyRBE",href:"/dashboard/myrbe"},{label:"Gestion des Adhsions",href:"/dashboard/members-management"}],headerActions:r.jsxs(ne,{spacing:3,children:[r.jsx(Y,{leftIcon:r.jsx(ml,{}),variant:"secondary",bg:"whiteAlpha.200",color:"white",borderColor:"whiteAlpha.300",onClick:nt,children:"Exporter"}),r.jsx(Y,{leftIcon:r.jsx(eN,{}),variant:"secondary",bg:"whiteAlpha.200",color:"white",borderColor:"whiteAlpha.300",onClick:Ke,children:"Nouvel adhrent"})]}),children:[r.jsxs(Q,{spacing:8,align:"stretch",children:[r.jsx(Ige,{stats:pt(),loading:!i}),r.jsx(el,{title:"Filtres et recherche",icon:Yae,color:"gray",children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(tt,{columns:{base:1,md:2,lg:4},spacing:4,children:[r.jsxs(Gu,{children:[r.jsx(Yu,{children:r.jsx(Rb,{color:"gray.400"})}),r.jsx(pe,{placeholder:"Rechercher un membre...",value:b.search,onChange:X=>C(le=>({...le,search:X.target.value}))})]}),r.jsxs(Qe,{value:b.status,onChange:X=>C(le=>({...le,status:X.target.value})),children:[r.jsx("option",{value:"ALL",children:"Tous les statuts"}),Object.entries(o0).map(([X,le])=>r.jsx("option",{value:X,children:le.label},X))]}),r.jsxs(Qe,{value:b.role,onChange:X=>C(le=>({...le,role:X.target.value})),children:[r.jsx("option",{value:"ALL",children:"Tous les rles"}),Object.entries(a0).map(([X,le])=>r.jsx("option",{value:X,children:le.label},X))]}),r.jsxs(Qe,{value:b.membershipType,onChange:X=>C(le=>({...le,membershipType:X.target.value})),children:[r.jsx("option",{value:"ALL",children:"Tous les types"}),Object.entries(ah).map(([X,le])=>r.jsx("option",{value:X,children:le.label},X))]})]}),r.jsxs(ne,{spacing:4,justify:"space-between",children:[r.jsxs(ne,{spacing:4,children:[r.jsx(Pu,{isChecked:b.expiringOnly,onChange:X=>C(le=>({...le,expiringOnly:X.target.checked})),children:"Expirant bientt"}),r.jsxs(Qe,{maxW:"200px",value:b.hasMyRBEAccess,onChange:X=>C(le=>({...le,hasMyRBEAccess:X.target.value})),children:[r.jsx("option",{value:"ALL",children:"Tous les accs"}),r.jsx("option",{value:"true",children:"Avec MyRBE"}),r.jsx("option",{value:"false",children:"Sans MyRBE"})]})]}),r.jsxs(ne,{spacing:2,children:[r.jsxs(O,{fontSize:"sm",color:"gray.600",children:[n.length," membre",n.length>1?"s":""," affich",n.length>1?"s":""]}),r.jsxs(CC,{size:"sm",isAttached:!0,variant:"outline",children:[r.jsx(Y,{leftIcon:r.jsx(rle,{}),onClick:()=>m("cards"),colorScheme:p==="cards"?"blue":"gray",children:"Cartes"}),r.jsx(Y,{leftIcon:r.jsx(Za,{}),onClick:()=>m("table"),colorScheme:p==="table"?"blue":"gray",children:"Tableau"})]})]})]})]})}),x.length>0&&r.jsxs(Ft,{status:"info",borderRadius:"lg",children:[r.jsx(Vt,{}),r.jsxs(ne,{justify:"space-between",w:"full",children:[r.jsxs(O,{children:[x.length," membre",x.length>1?"s":""," slectionn",x.length>1?"s":""]}),r.jsxs(CC,{size:"sm",children:[r.jsx(Y,{onClick:()=>Ee("enable_myrbe"),children:"Activer MyRBE"}),r.jsx(Y,{onClick:()=>Ee("send_renewal"),children:"Envoi renouvellement"}),r.jsx(Y,{colorScheme:"red",onClick:()=>Ee("archive"),children:"Archiver"})]})]})]}),n.length===0?r.jsx(el,{children:r.jsxs(Q,{spacing:4,py:12,children:[r.jsx(Icon,{as:wi,size:"48px",color:"gray.300"}),r.jsxs(Q,{spacing:2,children:[r.jsx(O,{fontSize:"lg",fontWeight:"600",color:"gray.500",children:"Aucun membre trouv"}),r.jsx(O,{fontSize:"sm",color:"gray.400",children:b.search||b.status!=="ALL"?"Aucun membre ne correspond aux critres de recherche":"Commencez par crer votre premier membre"})]}),r.jsx(Y,{leftIcon:r.jsx(eN,{}),colorScheme:"blue",onClick:Ke,children:"Crer un membre"})]})}):p==="cards"?r.jsx(tt,{columns:{base:1,md:2,lg:3},spacing:6,children:n.map(X=>r.jsx(el,{variant:"modern",color:"blue",onClick:()=>Xe(X),children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",align:"start",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsxs(O,{fontWeight:"600",fontSize:"lg",children:[X.firstName," ",X.lastName]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:X.email}),X.matricule&&r.jsx(Ge,{colorScheme:"purple",size:"sm",children:X.matricule})]}),r.jsxs(oa,{children:[r.jsx(aa,{as:et,icon:r.jsx(zh,{}),variant:"ghost",size:"sm"}),r.jsxs(la,{children:[r.jsx(Zt,{icon:r.jsx(us,{}),onClick:()=>Xe(X),children:"Modifier"}),r.jsx(Zt,{icon:r.jsx(WC,{}),onClick:()=>{xe(X),re()},children:"Documents"}),r.jsx(Zt,{icon:r.jsx(Lu,{}),children:"Rinitialiser mot de passe"}),r.jsx(Zt,{icon:r.jsx(Tc,{}),children:"Envoyer email"}),r.jsx(rn,{}),r.jsx(Zt,{icon:r.jsx(Yn,{}),color:"red.500",children:"Supprimer"})]})]})]}),r.jsxs(ne,{spacing:2,wrap:"wrap",children:[De(X.membershipStatus),Tt(X.role),ue(X.membershipType),X.loginEnabled&&r.jsx(Ge,{colorScheme:"green",variant:"outline",size:"sm",children:"MyRBE"})]}),r.jsxs(Q,{spacing:2,align:"stretch",fontSize:"sm",children:[X.phone&&r.jsxs(ne,{children:[r.jsx(Icon,{as:XL,color:"gray.400"}),r.jsx(O,{children:X.phone})]}),X.renewalDate&&r.jsxs(ne,{children:[r.jsx(Icon,{as:si,color:"gray.400"}),r.jsxs(O,{children:["Expire le ",new Date(X.renewalDate).toLocaleDateString("fr-FR"),N(X.renewalDate)&&r.jsx(Ge,{colorScheme:"orange",size:"sm",ml:2,children:"Bientt"})]})]}),X.paymentAmount&&r.jsxs(ne,{children:[r.jsx(Icon,{as:Zu,color:"gray.400"}),r.jsxs(O,{children:[X.paymentAmount,""]})]})]})]})},X.id))}):r.jsx(el,{children:r.jsx(de,{overflowX:"auto",children:r.jsxs(Tr,{variant:"simple",size:"sm",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:r.jsx(Pu,{isChecked:x.length===n.length,isIndeterminate:x.length>0&&x.length<n.length,onChange:X=>{X.target.checked?y(n.map(le=>le.id)):y([])}})}),r.jsx(Ie,{children:"Membre"}),r.jsx(Ie,{children:"Contact"}),r.jsx(Ie,{children:"Statut"}),r.jsx(Ie,{children:"Rle"}),r.jsx(Ie,{children:"Type"}),r.jsx(Ie,{children:"Renouvellement"}),r.jsx(Ie,{children:"MyRBE"}),r.jsx(Ie,{children:"Actions"})]})}),r.jsx(zr,{children:n.map(X=>r.jsxs($t,{_hover:{bg:"gray.50"},children:[r.jsx(Pe,{children:r.jsx(Pu,{isChecked:x.includes(X.id),onChange:le=>{le.target.checked?y(Ve=>[...Ve,X.id]):y(Ve=>Ve.filter(at=>at!==X.id))}})}),r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:0,children:[r.jsxs(O,{fontWeight:"600",children:[X.firstName," ",X.lastName]}),X.memberNumber&&r.jsxs(O,{fontSize:"xs",color:"gray.500",fontFamily:"mono",children:["#",X.memberNumber]})]})}),r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontSize:"sm",children:X.email}),X.phone&&r.jsx(O,{fontSize:"xs",color:"gray.500",children:X.phone})]})}),r.jsx(Pe,{children:De(X.membershipStatus)}),r.jsx(Pe,{children:Tt(X.role)}),r.jsx(Pe,{children:ue(X.membershipType)}),r.jsx(Pe,{children:r.jsxs(Q,{align:"start",spacing:0,children:[r.jsx(O,{fontSize:"sm",children:X.renewalDate?new Date(X.renewalDate).toLocaleDateString("fr-FR"):""}),N(X.renewalDate)&&r.jsx(Ge,{colorScheme:"orange",size:"sm",children:"Expire bientt"})]})}),r.jsx(Pe,{children:r.jsx(Q,{align:"start",spacing:1,children:X.loginEnabled?r.jsxs(r.Fragment,{children:[r.jsx(Ge,{colorScheme:"green",size:"sm",children:"Activ"}),X.matricule&&r.jsx(O,{fontSize:"xs",color:"gray.500",fontFamily:"mono",children:X.matricule}),X.mustChangePassword&&r.jsx(Ge,{colorScheme:"orange",size:"sm",children:"Changer MDP"})]}):r.jsx(Ge,{colorScheme:"gray",size:"sm",children:"Dsactiv"})})}),r.jsx(Pe,{children:r.jsxs(oa,{children:[r.jsx(aa,{as:et,icon:r.jsx(zh,{}),variant:"ghost",size:"sm"}),r.jsxs(la,{children:[r.jsx(Zt,{icon:r.jsx(us,{}),onClick:()=>Xe(X),children:"Modifier"}),r.jsx(Zt,{icon:r.jsx(WC,{}),onClick:()=>{xe(X),re()},children:"Documents"}),r.jsx(Zt,{icon:r.jsx(Lu,{}),children:"Rinitialiser MDP"}),r.jsx(Zt,{icon:r.jsx(Tc,{}),children:"Envoyer email"}),r.jsx(rn,{}),r.jsx(Zt,{icon:r.jsx(Yn,{}),color:"red.500",children:"Supprimer"})]})]})})]},X.id))})]})})})]}),r.jsxs(mt,{isOpen:S||A,onClose:()=>{k(),M(),je()},size:"6xl",children:[r.jsx(yt,{}),r.jsxs(vt,{maxH:"90vh",overflowY:"auto",children:[r.jsx(xt,{children:oe?`Modifier ${oe.firstName} ${oe.lastName}`:"Nouveau membre"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(gl,{variant:"enclosed",children:[r.jsxs(xl,{children:[r.jsx(an,{children:" Informations personnelles"}),r.jsx(an,{children:" Adhsion"}),r.jsx(an,{children:" Accs MyRBE"}),r.jsx(an,{children:" Conduite"}),r.jsx(an,{children:" Notes"})]}),r.jsxs(yl,{children:[r.jsx(ln,{children:r.jsxs(tt,{columns:{base:1,md:2},spacing:6,children:[r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Prnom"}),r.jsx(pe,{value:ie.firstName,onChange:X=>H(le=>({...le,firstName:X.target.value})),placeholder:"Prnom"})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nom"}),r.jsx(pe,{value:ie.lastName,onChange:X=>H(le=>({...le,lastName:X.target.value})),placeholder:"Nom"})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Email"}),r.jsx(pe,{type:"email",value:ie.email,onChange:X=>H(le=>({...le,email:X.target.value})),placeholder:"email@exemple.com"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Tlphone"}),r.jsx(pe,{type:"tel",value:ie.phone,onChange:X=>H(le=>({...le,phone:X.target.value})),placeholder:"06 12 34 56 78"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date de naissance"}),r.jsx(pe,{type:"date",value:ie.birthDate,onChange:X=>H(le=>({...le,birthDate:X.target.value}))})]})]}),r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Adresse"}),r.jsx(Gt,{value:ie.address,onChange:X=>H(le=>({...le,address:X.target.value})),placeholder:"Adresse complte",rows:3})]}),r.jsxs(ne,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Ville"}),r.jsx(pe,{value:ie.city,onChange:X=>H(le=>({...le,city:X.target.value})),placeholder:"Ville"})]}),r.jsxs(G,{maxW:"150px",children:[r.jsx(q,{children:"Code postal"}),r.jsx(pe,{value:ie.postalCode,onChange:X=>H(le=>({...le,postalCode:X.target.value})),placeholder:"91000"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Contact d'urgence"}),r.jsx(pe,{value:ie.emergencyContact,onChange:X=>H(le=>({...le,emergencyContact:X.target.value})),placeholder:"Nom et relation"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Tlphone d'urgence"}),r.jsx(pe,{type:"tel",value:ie.emergencyPhone,onChange:X=>H(le=>({...le,emergencyPhone:X.target.value})),placeholder:"06 12 34 56 78"})]})]})]})}),r.jsx(ln,{children:r.jsxs(tt,{columns:{base:1,md:2},spacing:6,children:[r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Type d'adhsion"}),r.jsx(Qe,{value:ie.membershipType,onChange:X=>{const le=X.target.value;H(Ve=>({...Ve,membershipType:le,paymentAmount:ah[le].price.toString()}))},children:Object.entries(ah).map(([X,le])=>r.jsxs("option",{value:X,children:[le.label," - ",le.price," (",le.description,")"]},X))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Statut d'adhsion"}),r.jsx(Qe,{value:ie.membershipStatus,onChange:X=>H(le=>({...le,membershipStatus:X.target.value})),children:Object.entries(o0).map(([X,le])=>r.jsx("option",{value:X,children:le.label},X))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Rle"}),r.jsx(Qe,{value:ie.role,onChange:X=>H(le=>({...le,role:X.target.value})),children:Object.entries(a0).map(([X,le])=>r.jsx("option",{value:X,children:le.label},X))})]}),r.jsxs(ne,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Date d'adhsion"}),r.jsx(pe,{type:"date",value:ie.joinDate,onChange:X=>{const le=X.target.value;H(Ve=>({...Ve,joinDate:le,renewalDate:R(le,Ve.membershipType)}))}})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Renouvellement"}),r.jsx(pe,{type:"date",value:ie.renewalDate,onChange:X=>H(le=>({...le,renewalDate:X.target.value}))})]})]})]}),r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(ne,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Montant pay"}),r.jsxs(Gu,{children:[r.jsx(pe,{type:"number",step:"0.01",value:ie.paymentAmount,onChange:X=>H(le=>({...le,paymentAmount:X.target.value})),placeholder:"60.00"}),r.jsx(Yu,{children:""})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Mthode de paiement"}),r.jsx(Qe,{value:ie.paymentMethod,onChange:X=>H(le=>({...le,paymentMethod:X.target.value})),children:Object.entries(Lge).map(([X,le])=>r.jsx("option",{value:X,children:le.label},X))})]})]}),r.jsx(rn,{}),r.jsxs(Q,{spacing:3,align:"stretch",children:[r.jsx(O,{fontWeight:"600",color:"gray.700",children:"Accs et prfrences"}),r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{mb:0,flex:1,children:"Accs site externe"}),r.jsx(sr,{isChecked:ie.hasExternalAccess,onChange:X=>H(le=>({...le,hasExternalAccess:X.target.checked}))})]}),r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{mb:0,flex:1,children:"Accs interne"}),r.jsx(sr,{isChecked:ie.hasInternalAccess,onChange:X=>H(le=>({...le,hasInternalAccess:X.target.checked}))})]}),r.jsxs(G,{display:"flex",alignItems:"center",children:[r.jsx(q,{mb:0,flex:1,children:"Newsletter"}),r.jsx(sr,{isChecked:ie.newsletter,onChange:X=>H(le=>({...le,newsletter:X.target.checked}))})]})]})]})]})}),r.jsx(ln,{children:r.jsxs(tt,{columns:{base:1,md:2},spacing:6,children:[r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Numro de permis de conduire"}),r.jsx(pe,{value:ie.driverLicense,onChange:X=>H(le=>({...le,driverLicense:X.target.value})),placeholder:"AB123456"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Catgories"}),r.jsxs(Qe,{multiple:!0,value:ie.driverCertifications,onChange:X=>H(le=>({...le,driverCertifications:Array.from(X.target.selectedOptions,Ve=>Ve.value)})),children:[r.jsx("option",{value:"B",children:"B"}),r.jsx("option",{value:"C",children:"C"}),r.jsx("option",{value:"D",children:"D"}),r.jsx("option",{value:"E",children:"E"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date d'expiration du permis"}),r.jsx(pe,{type:"date",value:ie.licenseExpiryDate,onChange:X=>H(le=>({...le,licenseExpiryDate:X.target.value}))})]})]}),r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Vhicules autoriss"}),r.jsxs(Qe,{multiple:!0,value:ie.vehicleAuthorizations,onChange:X=>H(le=>({...le,vehicleAuthorizations:Array.from(X.target.selectedOptions,Ve=>Ve.value)})),children:[r.jsx("option",{value:"VL",children:"Vhicule lger"}),r.jsx("option",{value:"PL",children:"Poids lourd"}),r.jsx("option",{value:"TC",children:"Transport en commun"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Nombre maximum de passagers"}),r.jsx(pe,{type:"number",value:ie.maxPassengers,onChange:X=>H(le=>({...le,maxPassengers:X.target.value})),placeholder:"4"})]})]})]})}),r.jsx(ln,{children:r.jsxs(G,{children:[r.jsx(q,{children:"Notes internes"}),r.jsx(Gt,{value:ie.notes,onChange:X=>H(le=>({...le,notes:X.target.value})),placeholder:"Remarques ou informations supplmentaires",rows:6})]})})]})]})}),r.jsx(Nt,{children:r.jsxs(ne,{spacing:4,children:[r.jsx(Y,{colorScheme:"blue",isLoading:d,onClick:He,children:oe?"Sauvegarder les modifications":"Crer le membre"}),r.jsx(Y,{variant:"outline",onClick:()=>{k(),M(),je()},children:"Annuler"})]})})]})]}),r.jsxs(mt,{isOpen:te,onClose:()=>{U(),xe(null)},size:"4xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsxs(xt,{children:["Documents de ",oe?.firstName," ",oe?.lastName]}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(de,{children:[r.jsx(O,{fontWeight:"600",mb:2,children:"Documents tlchargs"}),r.jsxs(jb,{spacing:3,children:[F.length===0&&r.jsx(O,{color:"gray.500",fontSize:"sm",children:"Aucun document trouv pour ce membre."}),F.map(X=>r.jsxs(O4,{p:3,borderWidth:"1px",borderRadius:"md",display:"flex",alignItems:"center",children:[r.jsxs(ne,{spacing:3,flex:1,children:[r.jsx(Icon,{as:zS[X.type]?.icon,boxSize:8,color:zS[X.type]?.color}),r.jsxs(Q,{align:"start",spacing:1,flex:1,children:[r.jsxs(O,{fontWeight:"500",children:[X.type==="IDENTITY_CARD"&&"Pice d'identit",X.type==="DRIVING_LICENSE"&&"Permis de conduire",X.type==="INSURANCE_RECORD"&&"Relev d'assurance",X.type==="MEMBERSHIP_FORM"&&"Bulletin d'adhsion",X.type==="MEDICAL_CERTIFICATE"&&"Certificat mdical"]}),r.jsxs(ne,{spacing:2,children:[r.jsxs(O,{fontSize:"sm",color:"gray.500",children:[X.size," Mo"]}),r.jsxs(Ge,{colorScheme:X.status==="VALIDATED"?"green":"yellow",variant:"outline",fontSize:"sm",children:[X.status==="VALIDATED"&&"Valid",X.status==="PENDING"&&"En attente"]})]})]})]}),r.jsxs(ne,{spacing:2,children:[r.jsx(Y,{size:"sm",variant:"outline",leftIcon:r.jsx(ml,{}),onClick:()=>{J1.download(X.id).then(()=>{ee({status:"success",title:"Tlchargement lanc",description:"Le document est en cours de tlchargement",duration:5e3,isClosable:!0})}).catch(le=>{console.error(" Erreur tlchargement document:",le),ee({status:"error",title:"Erreur de tlchargement",description:"Impossible de tlcharger le document",duration:5e3,isClosable:!0})})},children:"Tlcharger"}),r.jsx(Y,{size:"sm",variant:"outline",colorScheme:"red",leftIcon:r.jsx(Yn,{}),onClick:async()=>{if(window.confirm("tes-vous sr de vouloir supprimer ce document ?"))try{await J1.remove(X.id),_(le=>le.filter(Ve=>Ve.id!==X.id)),ee({status:"success",title:"Document supprim",description:"Le document a t supprim avec succs",duration:5e3,isClosable:!0})}catch(le){console.error(" Erreur suppression document:",le),ee({status:"error",title:"Erreur de suppression",description:"Impossible de supprimer le document",duration:5e3,isClosable:!0})}},children:"Supprimer"})]})]},X.id))]})]}),r.jsx(rn,{}),r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsx(O,{fontWeight:"600",children:"Tlcharger un nouveau document"}),r.jsxs(G,{children:[r.jsx(q,{children:"Type de document"}),r.jsx(Qe,{value:B.type,onChange:X=>fe(le=>({...le,type:X.target.value})),children:Object.entries(zS).map(([X,le])=>r.jsxs("option",{value:X,children:[le.label," (",le.maxSizeMB," Mo max)"]},X))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date d'expiration"}),r.jsx(pe,{type:"date",value:B.expiryDate,onChange:X=>fe(le=>({...le,expiryDate:X.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Notes"}),r.jsx(Gt,{value:B.notes,onChange:X=>fe(le=>({...le,notes:X.target.value})),placeholder:"Remarques ou informations supplmentaires",rows:3})]}),r.jsx(Y,{colorScheme:"blue",isLoading:d,onClick:async()=>{try{if(h(!0),!B.type||!B.expiryDate){ee({status:"error",title:"Champs requis",description:"Type de document et date d'expiration sont obligatoires",duration:5e3,isClosable:!0});return}const X=new FormData;X.append("file",I.current.files[0]),X.append("type",B.type),X.append("expiryDate",B.expiryDate),X.append("notes",B.notes);const le=await J1.upload(X,oe.id),Ve=le?.document||le?.data;_(at=>[...at,Ve]),fe({type:"IDENTITY_CARD",expiryDate:"",notes:""}),I.current.value=null,ee({status:"success",title:"Document tlcharg",description:"Le document a t ajout avec succs",duration:5e3,isClosable:!0})}catch(X){console.error(" Erreur upload document:",X),ee({status:"error",title:"Erreur de tlchargement",description:"Impossible de tlcharger le document",duration:5e3,isClosable:!0})}finally{h(!1)}},children:"Tlcharger le document"})]})]})})]})]})]})}const Bge={STANDARD:"Adhsion Standard",FAMILY:"Adhsion Famille",STUDENT:"Adhsion tudiant",HONORARY:"Membre d'Honneur",BIENFAITEUR:"Bienfaiteur"},$ge={PENDING:"En attente",ACTIVE:"Actif",EXPIRED:"Expir",SUSPENDED:"Suspendu"};function Fge({isOpen:e,onClose:t,onMemberCreated:n}){const[s,i]=j.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",birthDate:"",membershipType:"STANDARD",membershipStatus:"ACTIVE",paymentAmount:"",paymentMethod:"CASH",notes:"",newsletter:!0}),[o,l]=j.useState(!1),u=mn(),d=()=>i({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",birthDate:"",membershipType:"STANDARD",membershipStatus:"ACTIVE",paymentAmount:"",paymentMethod:"CASH",notes:"",newsletter:!0}),h=async()=>{if(!s.firstName.trim()||!s.lastName.trim()||!s.email.trim()){u({title:"Champs requis",description:"Prnom, nom et email sont requis",status:"error",duration:3e3});return}try{l(!0);const m={...s},x=await nl.create(m);u({title:"Adhrent cr",status:"success",duration:3e3}),n?.(x),d(),t()}catch(m){u({title:"Erreur",description:m.message,status:"error",duration:5e3})}finally{l(!1)}},p=()=>{d(),t()};return r.jsxs(mt,{isOpen:e,onClose:p,size:"xl",scrollBehavior:"inside",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Crer un adhrent"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Informations personnelles"})}),r.jsx(Ae,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(tt,{columns:2,spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Prnom"}),r.jsx(pe,{value:s.firstName,onChange:m=>i(x=>({...x,firstName:m.target.value}))})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nom"}),r.jsx(pe,{value:s.lastName,onChange:m=>i(x=>({...x,lastName:m.target.value}))})]})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Email"}),r.jsx(pe,{type:"email",value:s.email,onChange:m=>i(x=>({...x,email:m.target.value}))})]}),r.jsxs(tt,{columns:2,spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Tlphone"}),r.jsx(pe,{value:s.phone,onChange:m=>i(x=>({...x,phone:m.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date de naissance"}),r.jsx(pe,{type:"date",value:s.birthDate,onChange:m=>i(x=>({...x,birthDate:m.target.value}))})]})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Adresse"})}),r.jsx(Ae,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Adresse"}),r.jsx(pe,{value:s.address,onChange:m=>i(x=>({...x,address:m.target.value}))})]}),r.jsxs(tt,{columns:2,spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Code postal"}),r.jsx(pe,{value:s.postalCode,onChange:m=>i(x=>({...x,postalCode:m.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Ville"}),r.jsx(pe,{value:s.city,onChange:m=>i(x=>({...x,city:m.target.value}))})]})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Adhsion"})}),r.jsx(Ae,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(tt,{columns:2,spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Type d'adhsion"}),r.jsx(Qe,{value:s.membershipType,onChange:m=>i(x=>({...x,membershipType:m.target.value})),children:Object.entries(Bge).map(([m,x])=>r.jsx("option",{value:m,children:x},m))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Statut"}),r.jsx(Qe,{value:s.membershipStatus,onChange:m=>i(x=>({...x,membershipStatus:m.target.value})),children:Object.entries($ge).map(([m,x])=>r.jsx("option",{value:m,children:x},m))})]})]}),r.jsxs(tt,{columns:2,spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Montant cotisation ()"}),r.jsx(pe,{type:"number",value:s.paymentAmount,onChange:m=>i(x=>({...x,paymentAmount:m.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Mode de paiement"}),r.jsxs(Qe,{value:s.paymentMethod,onChange:m=>i(x=>({...x,paymentMethod:m.target.value})),children:[r.jsx("option",{value:"CASH",children:"Espces"}),r.jsx("option",{value:"CHECK",children:"Chque"}),r.jsx("option",{value:"BANK_TRANSFER",children:"Virement"}),r.jsx("option",{value:"CARD",children:"Carte"}),r.jsx("option",{value:"PAYPAL",children:"PayPal"}),r.jsx("option",{value:"HELLOASSO",children:"HelloAsso"})]})]})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Notes"})}),r.jsx(Ae,{children:r.jsxs(G,{children:[r.jsx(q,{children:"Notes administratives"}),r.jsx(Gt,{value:s.notes,onChange:m=>i(x=>({...x,notes:m.target.value})),placeholder:"Notes internes sur l'adhrent..."})]})})]})]})}),r.jsx(Nt,{children:r.jsxs(ne,{spacing:3,children:[r.jsx(Y,{variant:"ghost",onClick:p,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:h,isLoading:o,loadingText:"Cration...",children:"Crer l'adhrent"})]})})]})]})}const IP="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),l0=e=>IP?`${IP}${e}`:e,Mw={PENDING:{label:"En attente",color:"yellow",icon:YL},ACTIVE:{label:"Actif",color:"green",icon:QL},EXPIRED:{label:"Expir",color:"red",icon:ay},SUSPENDED:{label:"Suspendu",color:"orange",icon:ed},CANCELLED:{label:"Annul",color:"gray",icon:ay}},Rw={MEMBER:{label:"Adhrent",color:"blue",permissions:["VIEW_PROFILE"]},DRIVER:{label:"Conducteur",color:"green",permissions:["VIEW_PROFILE","DRIVE_VEHICLES"]},MODERATOR:{label:"Modrateur",color:"purple",permissions:["VIEW_PROFILE","MODERATE_CONTENT"]},ADMIN:{label:"Administrateur",color:"red",permissions:["FULL_ACCESS"]}};function Vge({member:e,onEdit:t,onLinkAccess:n,onTerminate:s,onDeleteMember:i}){const o=ir("white","gray.800"),l=Mw[e.membershipStatus]||Mw.PENDING,u=Rw[e.role]||Rw.MEMBER;return r.jsxs(Me,{bg:o,borderWidth:1,borderColor:"gray.200",children:[r.jsx(Ct,{pb:2,children:r.jsxs(qn,{justify:"space-between",align:"start",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsxs(ne,{children:[r.jsxs(O,{fontWeight:"bold",fontSize:"md",children:[e.firstName," ",e.lastName]}),r.jsx(Ge,{colorScheme:l.color,size:"sm",children:l.label}),r.jsx(Ge,{colorScheme:u.color,variant:"outline",size:"sm",children:u.label})]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:e.email}),e.matricule&&r.jsxs(ne,{spacing:2,children:[r.jsxs(Ge,{colorScheme:"blue",variant:"subtle",children:[" ",e.matricule]}),e.loginEnabled?r.jsx(Ge,{colorScheme:"green",size:"sm",children:" Accs activ"}):r.jsx(Ge,{colorScheme:"gray",size:"sm",children:" Accs dsactiv"})]})]}),r.jsxs(oa,{children:[r.jsx(aa,{as:et,icon:r.jsx(mg,{}),variant:"ghost",size:"sm"}),r.jsxs(la,{children:[r.jsx(Zt,{icon:r.jsx(us,{}),onClick:()=>t(e),children:"Modifier"}),r.jsx(Zt,{icon:r.jsx(ay,{}),onClick:()=>s(e),color:"red.500",children:"Terminer l'adhsion"}),r.jsx(Zt,{icon:r.jsx(Lu,{}),onClick:()=>n(e),children:"Associer  un accs existant"}),e.membershipStatus==="CANCELLED"&&r.jsx(Zt,{icon:r.jsx(Yn,{}),onClick:()=>i(e),color:"red.600",children:"Effacer l'adhrent"})]})]})]})}),r.jsx(Ae,{pt:0,children:r.jsxs(Q,{align:"start",spacing:2,children:[e.phone&&r.jsxs(O,{fontSize:"sm",children:[" ",e.phone]}),e.lastLoginAt&&r.jsxs(O,{fontSize:"xs",color:"gray.500",children:["Dernire connexion: ",new Date(e.lastLoginAt).toLocaleDateString("fr-FR")]}),e.mustChangePassword&&r.jsx(Ge,{colorScheme:"orange",size:"sm",children:" Doit changer le mot de passe"})]})})]})}function Hge(){const[e,t]=j.useState([]),[n,s]=j.useState(!0),[i,o]=j.useState(""),[l,u]=j.useState("ALL"),[d,h]=j.useState("ALL"),[p,m]=j.useState(!1),[x,y]=j.useState(null),[b,C]=j.useState({}),{isOpen:S,onOpen:E,onClose:k}=jt(),{isOpen:A,onOpen:T,onClose:M}=jt(),{isOpen:D,onOpen:$,onClose:W}=jt(),{isOpen:te,onOpen:re,onClose:U}=jt(),oe=mn(),xe=ir("white","gray.800"),[ie,H]=j.useState(null),[F,_]=j.useState(null),[B,fe]=j.useState({reason:"",notes:"",pv:null,resignation:null}),{isOpen:I,onOpen:ee,onClose:ae}=jt(),[P,R]=j.useState({username:"",email:""});j.useEffect(()=>{N()},[]);const N=async()=>{try{s(!0);const ue=await nl.getAll();t(ue.members||[]),Z(ue.members||[])}catch(ue){console.error("Erreur chargement membres:",ue),oe({title:"Erreur",description:"Impossible de charger les membres",status:"error",duration:5e3})}finally{s(!1)}},Z=ue=>{const Ee=ue.length,nt=ue.filter(Ve=>Ve.loginEnabled).length,X=ue.filter(Ve=>Ve.membershipStatus==="ACTIVE").length,le=ue.filter(Ve=>{if(!Ve.lastLoginAt)return!1;const at=new Date(Ve.lastLoginAt),dn=new Date;return dn.setMonth(dn.getMonth()-1),at>dn}).length;C({total:Ee,withLogin:nt,active:X,recentlyActive:le})},ke=e.filter(ue=>{const Ee=ue.firstName?.toLowerCase().includes(i.toLowerCase())||ue.lastName?.toLowerCase().includes(i.toLowerCase())||ue.email?.toLowerCase().includes(i.toLowerCase())||ue.matricule?.toLowerCase().includes(i.toLowerCase()),nt=l==="ALL"||ue.membershipStatus===l,X=d==="ALL"||ue.role===d,le=!p||ue.loginEnabled;return Ee&&nt&&X&&le}),Te=ue=>{y(ue),H({...ue}),$()},je=async()=>{try{if(!x)return;const ue=["firstName","lastName","email","phone","address","city","postalCode","membershipType","membershipStatus","paymentAmount","paymentMethod","newsletter","notes"],Ee={};for(const Ve of ue)Ve in ie&&(Ee[Ve]=ie[Ve]);const nt=await fetch(l0(`/api/members/${x.id}`),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(Ee)}),X=await nt.json().catch(()=>({}));if(!nt.ok)throw new Error(X?.error||"chec de la mise  jour");const le=X.member||X;t(Ve=>Ve.map(at=>at.id===x.id?{...at,...le}:at)),oe({title:"Membre mis  jour",status:"success"}),W()}catch(ue){oe({title:"Erreur",description:ue.message,status:"error"})}},Ke=ue=>{_(ue),fe({reason:"",notes:"",pv:null,resignation:null}),re()},Xe=async()=>{try{if(!F)return;if(!B.reason){oe({title:"Motif requis",status:"error"});return}if(B.reason==="EXCLUSION"&&!B.pv){oe({title:"PV obligatoire",status:"error"});return}if(B.reason==="DEMISSION"&&(!B.pv||!B.resignation)){oe({title:"PV et lettre obligatoires",status:"error"});return}const ue=new FormData;ue.append("reason",B.reason),B.notes&&ue.append("notes",B.notes),B.pv&&ue.append("pv",B.pv),B.resignation&&ue.append("resignation",B.resignation);const Ee=await fetch(l0(`/api/members/${F.id}/terminate`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:ue}),nt=await Ee.json().catch(()=>({}));if(!Ee.ok)throw new Error(nt?.error||"chec de la rsiliation");oe({title:"Adhsion termine",status:"success"}),await N(),U()}catch(ue){oe({title:"Erreur",description:ue.message,status:"error"})}},He=async ue=>{try{if(ue.membershipStatus!=="CANCELLED"){oe({title:"Rsiliez d'abord l'adhsion",status:"warning"});return}if(!window.confirm(`Effacer dfinitivement ${ue.firstName} ${ue.lastName} ?`))return;const Ee=await fetch(l0(`/api/members/${ue.id}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Ee.ok&&Ee.status!==204){const nt=await Ee.json().catch(()=>({}));throw new Error(nt?.error||"Suppression impossible")}oe({title:"Adhrent effac",status:"success"}),t(nt=>nt.filter(X=>X.id!==ue.id))}catch(Ee){oe({title:"Erreur",description:Ee.message,status:"error"})}},pt=ue=>{t(Ee=>[ue,...Ee]),Z([ue,...e]),k()},De=ue=>{y(ue),R({username:"",email:""}),ee()},Tt=async()=>{try{if(!x)return;if(!P.username&&!P.email){oe({title:"Renseignez matricule ou email",status:"warning"});return}const ue=await fetch(l0(`/api/members/${x.id}/link-access`),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({username:P.username||void 0,email:P.email||void 0})}),Ee=await ue.json().catch(()=>({}));if(!ue.ok)throw new Error(Ee?.error||"chec de lassociation");oe({title:"Accs associ",status:"success"}),await N(),ae()}catch(ue){oe({title:"Erreur",description:ue.message,status:"error"})}};return n?r.jsx(Ws,{maxW:"container.xl",py:8,children:r.jsxs(Q,{spacing:8,children:[r.jsx(sn,{size:"xl",color:"blue.500"}),r.jsx(O,{children:"Chargement des membres..."})]})}):r.jsxs(Ws,{maxW:"container.xl",py:8,fontFamily:"Montserrat, sans-serif",children:[r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsxs(we,{size:"xl",display:"flex",alignItems:"center",children:[r.jsx(wi,{style:{marginRight:"12px"}}),"Gestion des Adhsions"]}),r.jsx(O,{color:"gray.600",children:"Crer et grer les adhrents (les identifiants sont grs sparment)"})]}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",size:"lg",onClick:E,children:"Nouvel adhrent"})]}),r.jsxs(tt,{columns:{base:2,md:4},spacing:4,children:[r.jsx(Me,{bg:xe,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Total membres"}),r.jsx(ft,{color:"blue.500",children:b.total})]})})}),r.jsx(Me,{bg:xe,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Avec accs MyRBE"}),r.jsx(ft,{color:"green.500",children:b.withLogin}),r.jsxs(Si,{children:[b.total>0?Math.round(b.withLogin/b.total*100):0,"%"]})]})})}),r.jsx(Me,{bg:xe,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Adhsions actives"}),r.jsx(ft,{color:"purple.500",children:b.active})]})})}),r.jsx(Me,{bg:xe,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{children:"Connexions rcentes"}),r.jsx(ft,{color:"orange.500",children:b.recentlyActive}),r.jsx(Si,{children:"30 derniers jours"})]})})})]}),r.jsx(Me,{bg:xe,children:r.jsx(Ae,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(ne,{w:"full",spacing:4,children:[r.jsxs(Gu,{flex:2,children:[r.jsx(Yu,{children:r.jsx(Rb,{})}),r.jsx(pe,{placeholder:"Rechercher par nom, email ou matricule...",value:i,onChange:ue=>o(ue.target.value)})]}),r.jsxs(Qe,{value:l,onChange:ue=>u(ue.target.value),maxW:"200px",children:[r.jsx("option",{value:"ALL",children:"Tous statuts"}),Object.entries(Mw).map(([ue,Ee])=>r.jsx("option",{value:ue,children:Ee.label},ue))]}),r.jsxs(Qe,{value:d,onChange:ue=>h(ue.target.value),maxW:"200px",children:[r.jsx("option",{value:"ALL",children:"Tous rles"}),Object.entries(Rw).map(([ue,Ee])=>r.jsx("option",{value:ue,children:Ee.label},ue))]})]}),r.jsxs(ne,{children:[r.jsx(Pu,{isChecked:p,onChange:ue=>m(ue.target.checked),children:"Afficher seulement les membres avec accs MyRBE"}),r.jsx(Y,{leftIcon:r.jsx(ao,{}),size:"sm",onClick:N,children:"Actualiser"})]})]})})}),r.jsxs(O,{fontSize:"sm",color:"gray.600",children:[ke.length," membre(s) affich(s)"]}),r.jsx(tt,{columns:{base:1,md:2,lg:3},spacing:4,children:ke.map(ue=>r.jsx(Vge,{member:ue,onEdit:Te,onLinkAccess:De,onTerminate:Ke,onDeleteMember:He},ue.id))}),ke.length===0&&r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),"Aucun membre ne correspond aux critres de recherche"]})]}),r.jsx(Fge,{isOpen:S,onClose:k,onMemberCreated:pt}),r.jsxs(mt,{isOpen:I,onClose:ae,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Associer  un accs existant"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),'La cration daccs se fait dans "Gestion des accs". Ici, vous pouvez lier un accs existant (fusion).']}),r.jsxs(G,{children:[r.jsx(q,{children:"Matricule (username)"}),r.jsx(pe,{value:P.username,onChange:ue=>R(Ee=>({...Ee,username:ue.target.value})),placeholder:"ex: jd2025"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Email"}),r.jsx(pe,{type:"email",value:P.email,onChange:ue=>R(Ee=>({...Ee,email:ue.target.value})),placeholder:"utilisateur@domaine.fr"})]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Renseignez au moins lun des deux champs."})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:ae,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:Tt,children:"Associer"})]})]})]}),r.jsxs(mt,{isOpen:D,onClose:W,size:"xl",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Modifier le membre"}),r.jsx(kt,{}),r.jsx(gt,{children:ie&&r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Prnom"}),r.jsx(pe,{value:ie.firstName||"",onChange:ue=>H(Ee=>({...Ee,firstName:ue.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Nom"}),r.jsx(pe,{value:ie.lastName||"",onChange:ue=>H(Ee=>({...Ee,lastName:ue.target.value}))})]})]}),r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Email"}),r.jsx(pe,{type:"email",value:ie.email||"",onChange:ue=>H(Ee=>({...Ee,email:ue.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Tlphone"}),r.jsx(pe,{value:ie.phone||"",onChange:ue=>H(Ee=>({...Ee,phone:ue.target.value}))})]})]}),r.jsxs(tt,{columns:{base:1,md:2},spacing:4,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Statut"}),r.jsxs(Qe,{value:ie.membershipStatus||"ACTIVE",onChange:ue=>H(Ee=>({...Ee,membershipStatus:ue.target.value})),children:[r.jsx("option",{value:"PENDING",children:"En attente"}),r.jsx("option",{value:"ACTIVE",children:"Actif"}),r.jsx("option",{value:"EXPIRED",children:"Expir"}),r.jsx("option",{value:"SUSPENDED",children:"Suspendu"}),r.jsx("option",{value:"CANCELLED",children:"Annul"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Type d'adhsion"}),r.jsxs(Qe,{value:ie.membershipType||"STANDARD",onChange:ue=>H(Ee=>({...Ee,membershipType:ue.target.value})),children:[r.jsx("option",{value:"STANDARD",children:"Standard"}),r.jsx("option",{value:"FAMILY",children:"Famille"}),r.jsx("option",{value:"STUDENT",children:"tudiant"}),r.jsx("option",{value:"HONORARY",children:"Honneur"})]})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Notes"}),r.jsx(Gt,{value:ie.notes||"",onChange:ue=>H(Ee=>({...Ee,notes:ue.target.value}))})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:W,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:je,children:"Enregistrer"})]})]})]}),r.jsxs(mt,{isOpen:te,onClose:U,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Terminer l'adhsion"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(Ft,{status:"warning",children:[r.jsx(Vt,{}),"Cette action met fin  l'adhsion. L'accs site associ sera dsactiv."]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Motif"}),r.jsxs(Qe,{value:B.reason,onChange:ue=>fe(Ee=>({...Ee,reason:ue.target.value})),children:[r.jsx("option",{value:"",children:"Choisir un motif..."}),r.jsx("option",{value:"FIN",children:"Fin d'adhsion"}),r.jsx("option",{value:"NON_RECONDUITE",children:"Non reconduite"}),r.jsx("option",{value:"EXCLUSION",children:"Exclusion vote (joindre le PV)"}),r.jsx("option",{value:"DEMISSION",children:"Dmission (joindre PV et lettre de dmission)"}),r.jsx("option",{value:"INFORMATIQUE",children:"INFORMATIQUE"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Notes (optionnel)"}),r.jsx(Gt,{value:B.notes,onChange:ue=>fe(Ee=>({...Ee,notes:ue.target.value}))})]}),(B.reason==="EXCLUSION"||B.reason==="DEMISSION")&&r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Procs-verbal (PDF/Image)"}),r.jsx(pe,{type:"file",accept:"application/pdf,image/*",onChange:ue=>fe(Ee=>({...Ee,pv:ue.target.files?.[0]||null}))})]}),B.reason==="DEMISSION"&&r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Lettre de dmission (PDF/Image)"}),r.jsx(pe,{type:"file",accept:"application/pdf,image/*",onChange:ue=>fe(Ee=>({...Ee,resignation:ue.target.files?.[0]||null}))})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:U,children:"Annuler"}),r.jsx(Y,{colorScheme:"red",onClick:Xe,children:"Confirmer"})]})]})]})]})}function Uge({report:e,onUpdate:t,onComment:n,onStatusChange:s,onDelete:i}){const o=ir("white","gray.800"),l={low:"green",medium:"yellow",high:"orange",critical:"red"},u={open:"blue",in_progress:"orange",resolved:"green",closed:"gray"},d=j.useMemo(()=>{switch(e.priority){case"low":return" Faible";case"medium":return" Moyen";case"high":return" lev";default:return" Critique"}},[e.priority]),h=j.useMemo(()=>{switch(e.status){case"open":return"Ouvert";case"in_progress":return"En cours";case"resolved":return"Rsolu";default:return"Ferm"}},[e.status]),p=e.createdAt?new Date(e.createdAt):null;return r.jsxs(Me,{bg:o,borderLeftWidth:4,borderLeftColor:`${l[e.priority]||"gray"}.500`,children:[r.jsx(Ct,{pb:3,children:r.jsxs(qn,{justify:"space-between",align:"start",children:[r.jsxs(Q,{align:"start",spacing:2,children:[r.jsxs(ne,{children:[r.jsx(Ge,{colorScheme:l[e.priority]||"gray",variant:"solid",size:"sm",children:d}),r.jsx(Ge,{colorScheme:u[e.status]||"gray",variant:"subtle",children:h})]}),r.jsx(we,{size:"sm",children:e.title}),r.jsxs(O,{fontSize:"xs",color:"gray.500",children:["Cr par ",e.createdBy," ",p?`le ${p.toLocaleDateString("fr-FR")}`:""]})]}),r.jsxs(oa,{children:[r.jsx(aa,{as:et,icon:r.jsx(zh,{}),variant:"ghost",size:"sm"}),r.jsxs(la,{zIndex:10,position:"relative",children:[r.jsx(Zt,{icon:r.jsx(_p,{}),onClick:()=>t(e),children:"Modifier"}),r.jsx(Zt,{icon:r.jsx(nle,{}),onClick:()=>n(e),children:"Commenter"}),e.status==="open"&&r.jsx(Zt,{icon:r.jsx(ao,{}),onClick:()=>s(e.id,"in_progress"),children:"Marquer en cours"}),(e.status==="open"||e.status==="in_progress")&&r.jsx(Zt,{icon:r.jsx(sy,{}),onClick:()=>s(e.id,"resolved"),children:"Marquer comme rsolu"}),e.status==="resolved"&&r.jsx(Zt,{icon:r.jsx(Im,{}),onClick:()=>s(e.id,"closed"),children:"Fermer dfinitivement"}),e.status==="closed"&&r.jsx(Zt,{icon:r.jsx(ao,{}),onClick:()=>s(e.id,"open"),children:"Rouvrir"}),r.jsx(W4,{}),r.jsx(Zt,{icon:r.jsx(Yn,{}),onClick:()=>i(e.id),color:"red.500",children:"Supprimer"})]})]})]})}),r.jsx(Ae,{pt:0,children:r.jsxs(Q,{align:"start",spacing:3,children:[r.jsx(O,{fontSize:"sm",children:e.description}),e.category&&r.jsx(Xu,{size:"sm",variant:"subtle",children:r.jsx(Ju,{children:e.category})}),e.assignedTo&&r.jsxs(ne,{children:[r.jsx(W3,{size:"xs",name:e.assignedTo}),r.jsxs(O,{fontSize:"xs",children:["Assign  ",e.assignedTo]})]}),Array.isArray(e.comments)&&e.comments.length>0&&r.jsxs(Q,{align:"start",spacing:2,w:"full",children:[r.jsx(rn,{}),r.jsx(ne,{children:r.jsxs(O,{fontSize:"xs",fontWeight:"bold",children:[e.comments.length," commentaire(s)"]})}),r.jsxs(de,{bg:"gray.50",p:2,borderRadius:"md",w:"full",children:[r.jsx(O,{fontSize:"xs",children:e.comments[e.comments.length-1].message}),r.jsxs(O,{fontSize:"xs",color:"gray.500",mt:1,children:["Par ",e.comments[e.comments.length-1].author," - ",new Date(e.comments[e.comments.length-1].createdAt).toLocaleDateString("fr-FR")]})]})]})]})})]})}function Wge(){const{user:e}=Cs(),t=mn(),{isOpen:n,onOpen:s,onClose:i}=jt(),{isOpen:o,onOpen:l,onClose:u}=jt(),{isOpen:d,onOpen:h,onClose:p}=jt(),[m,x]=j.useState(!0),[y,b]=j.useState([]),[C,S]=j.useState(null),[E,k]=j.useState({title:"",description:"",category:"",priority:"medium",type:"bug"}),[A,T]=j.useState({title:"",description:"",category:"",priority:"medium",type:"bug"}),[M,D]=j.useState({message:"",status:""}),[$,W]=j.useState([]),te=ir("white","gray.800"),re=async()=>{try{const _="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),B=await fetch(`${_}/api/retro-reports`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!B.ok)throw new Error("load failed");const fe=await B.json();b(fe.reports||[])}catch(_){console.error("Erreur chargement rtroreports:",_)}};j.useEffect(()=>{(async()=>(x(!0),await re(),x(!1)))()},[]);const U=async()=>{if(!E.title||!E.description){t({title:"Erreur",description:"Veuillez remplir le titre et la description",status:"error",duration:3e3,isClosable:!0});return}try{const _="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),B=new FormData;B.append("title",E.title),B.append("description",E.description),B.append("category",E.category||""),B.append("priority",E.priority||"medium"),B.append("type",E.type||"bug"),$&&$.length>0&&$.forEach(I=>B.append("screenshots",I,I.name));const fe=await fetch(`${_}/api/retro-reports`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:B});if(!fe.ok){const I=await fe.json().catch(()=>({error:"create failed"}));throw new Error(I.error||"create failed")}await re(),k({title:"",description:"",category:"",priority:"medium",type:"bug"}),W([]),i(),t({title:"Succs",description:"RtroReport cr avec succs",status:"success",duration:3e3,isClosable:!0})}catch(_){t({title:"Erreur",description:_.message||"Impossible de crer le RtroReport",status:"error",duration:3e3})}},oe=async()=>{if(!M.message){t({title:"Erreur",description:"Veuillez crire un commentaire",status:"error",duration:3e3,isClosable:!0});return}try{const _="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),B={message:M.message,author:e?.name||"Administrateur",status:M.status||void 0};let fe=await fetch(`${_}/api/retro-reports/${C.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(B)});if(!fe.ok&&(fe=await fetch(`${_}/api/retro-reports/${C.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({appendComment:{message:B.message,author:B.author},status:B.status})}),!fe.ok))throw new Error("Impossible de persister le commentaire");await re(),D({message:"",status:""}),u(),t({title:"Succs",description:"Commentaire ajout avec succs",status:"success",duration:3e3,isClosable:!0})}catch(_){console.error(_),t({title:"Erreur",description:"Impossible d'ajouter le commentaire",status:"error",duration:3e3})}},xe=async(_,B)=>{try{const fe="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,"");let I=await fetch(`${fe}/api/retro-reports/${_}/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:B})});if(!I.ok&&(I=await fetch(`${fe}/api/retro-reports/${_}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:B})}),!I.ok))throw new Error("status failed");await re(),t({title:"Statut mis  jour",description:`RtroReport marqu comme ${{open:"Ouvert",in_progress:"En cours",resolved:"Rsolu",closed:"Ferm"}[B]?.toLowerCase()||B}`,status:"success",duration:3e3})}catch{t({title:"Erreur",description:"Impossible de changer le statut",status:"error",duration:3e3})}},ie=async _=>{if(window.confirm("tes-vous sr de vouloir supprimer ce RtroReport ?"))try{const B="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),fe=localStorage.getItem("token");if(!fe){t({title:"Erreur",description:"Token non trouv",status:"error",duration:3e3});return}const I=`${B}/api/retro-reports/${_}`;console.log(" Suppression ticket:",I);const ee=await fetch(I,{method:"DELETE",headers:{Authorization:`Bearer ${fe}`,"Content-Type":"application/json"}});if(console.log("Delete response status:",ee.status),!ee.ok){const P=await ee.text();throw console.error("Delete error:",P),new Error(`HTTP ${ee.status}: ${P}`)}const ae=await ee.json();console.log("Delete result:",ae),await re(),t({title:"RtroReport supprim",description:"Le ticket a t supprim avec succs",status:"success",duration:3e3})}catch(B){console.error(" Erreur suppression:",B),t({title:"Erreur",description:`Suppression impossible: ${B.message}`,status:"error",duration:5e3})}},H=_=>{S(_),T({title:_.title,description:_.description,category:_.category||"",priority:_.priority||"medium",type:_.type||"bug"}),h()},F=async()=>{if(!C?.id||!A.title||!A.description){t({title:"Erreur",description:"Titre et description requis",status:"error",duration:3e3,isClosable:!0});return}try{if(!(await fetch(`https://attractive-kindness-rbe-serveurs.up.railway.app/api/retro-reports/${C.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({title:A.title,description:A.description,category:A.category||"",priority:A.priority||"medium",type:A.type||"bug"})})).ok)throw new Error("update failed");await re(),p(),t({title:"Succs",description:"RtroReport mis  jour",status:"success",duration:3e3})}catch{t({title:"Erreur",description:"Mise  jour impossible",status:"error",duration:3e3})}};return m?r.jsx(Ws,{maxW:"container.xl",py:8,children:r.jsxs(Q,{spacing:8,children:[r.jsx(sn,{size:"xl",color:"green.500"}),r.jsx(O,{children:"Chargement du support"})]})}):r.jsxs(Ws,{maxW:"container.xl",py:8,children:[r.jsxs(de,{bgGradient:"linear(to-r, red.500, orange.500)",color:"white",p:8,borderRadius:"xl",mb:8,textAlign:"center",children:[r.jsx(we,{size:"xl",mb:2,children:" Support du site"}),r.jsx(O,{opacity:.9,children:"Tickets: incidents, bugs et amliorations"})]}),r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(ne,{justify:"space-between",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"md",children:"Systme de tickets"}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Signalez et suivez les incidents et demandes"})]}),r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"red",onClick:s,children:"Nouveau ticket"})]}),r.jsxs(tt,{columns:{base:1,md:4},spacing:4,children:[r.jsx(Me,{bg:te,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{fontSize:"xs",children:"Ouverts"}),r.jsx(ft,{color:"red.500",fontSize:"lg",children:y.filter(_=>_.status==="open").length})]})})}),r.jsx(Me,{bg:te,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{fontSize:"xs",children:"En cours"}),r.jsx(ft,{color:"orange.500",fontSize:"lg",children:y.filter(_=>_.status==="in_progress").length})]})})}),r.jsx(Me,{bg:te,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{fontSize:"xs",children:"Rsolus"}),r.jsx(ft,{color:"green.500",fontSize:"lg",children:y.filter(_=>_.status==="resolved").length})]})})}),r.jsx(Me,{bg:te,children:r.jsx(Ae,{children:r.jsxs(dt,{children:[r.jsx(ht,{fontSize:"xs",children:"Total"}),r.jsx(ft,{color:"blue.500",fontSize:"lg",children:y.length})]})})})]}),r.jsx(Q,{spacing:4,align:"stretch",children:y.length===0?r.jsxs(Ft,{status:"info",children:[r.jsx(Vt,{}),r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(O,{fontWeight:"bold",fontSize:"sm",children:"Aucun ticket"}),r.jsx(O,{fontSize:"xs",children:"Crez votre premier ticket."})]})]}):y.map(_=>r.jsx(Uge,{report:_,onUpdate:H,onComment:B=>{S(B),l()},onStatusChange:xe,onDelete:ie},_.id))})]}),r.jsxs(mt,{isOpen:n,onClose:i,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:" Nouveau ticket"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Titre"}),r.jsx(pe,{value:E.title,onChange:_=>k(B=>({...B,title:_.target.value})),placeholder:"Ex: Problme de connexion, Page lente..."})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{value:E.description,onChange:_=>k(B=>({...B,description:_.target.value})),rows:4,placeholder:"Dcrivez le problme..."})]}),r.jsxs(tt,{columns:2,spacing:4,w:"full",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Type"}),r.jsxs(Qe,{value:E.type,onChange:_=>k(B=>({...B,type:_.target.value})),children:[r.jsx("option",{value:"bug",children:" Bug"}),r.jsx("option",{value:"feature",children:" Amlioration"}),r.jsx("option",{value:"performance",children:" Performance"}),r.jsx("option",{value:"security",children:" Scurit"}),r.jsx("option",{value:"other",children:" Autre"})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Priorit"}),r.jsxs(Qe,{value:E.priority,onChange:_=>k(B=>({...B,priority:_.target.value})),children:[r.jsx("option",{value:"low",children:" Faible"}),r.jsx("option",{value:"medium",children:" Moyen"}),r.jsx("option",{value:"high",children:" lev"}),r.jsx("option",{value:"critical",children:" Critique"})]})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Catgorie"}),r.jsx(pe,{value:E.category,onChange:_=>k(B=>({...B,category:_.target.value})),placeholder:"Ex: Technique, Interface, Base de donnes..."})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Captures dcran (optionnel)"}),r.jsx(pe,{type:"file",accept:"image/*",multiple:!0,onChange:_=>W(Array.from(_.target.files||[]))})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:i,children:"Annuler"}),r.jsx(Y,{colorScheme:"red",onClick:U,leftIcon:r.jsx(Pn,{}),children:"Crer"})]})]})]}),r.jsxs(mt,{isOpen:o,onClose:u,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Ajouter un commentaire"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Commentaire"}),r.jsx(Gt,{value:M.message,onChange:_=>D(B=>({...B,message:_.target.value})),rows:3})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Changer le statut (optionnel)"}),r.jsxs(Qe,{value:M.status,onChange:_=>D(B=>({...B,status:_.target.value})),children:[r.jsx("option",{value:"",children:"Ne pas changer"}),r.jsx("option",{value:"open",children:"Ouvert"}),r.jsx("option",{value:"in_progress",children:"En cours"}),r.jsx("option",{value:"resolved",children:"Rsolu"}),r.jsx("option",{value:"closed",children:"Ferm"})]})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:u,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:oe,children:"Publier"})]})]})]}),r.jsxs(mt,{isOpen:d,onClose:p,children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:"Modifier le ticket"}),r.jsx(kt,{}),r.jsx(gt,{children:r.jsxs(Q,{spacing:4,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Titre"}),r.jsx(pe,{value:A.title,onChange:_=>T(B=>({...B,title:_.target.value}))})]}),r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{rows:4,value:A.description,onChange:_=>T(B=>({...B,description:_.target.value}))})]}),r.jsxs(tt,{columns:2,spacing:4,w:"full",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Catgorie"}),r.jsx(pe,{value:A.category,onChange:_=>T(B=>({...B,category:_.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Priorit"}),r.jsxs(Qe,{value:A.priority,onChange:_=>T(B=>({...B,priority:_.target.value})),children:[r.jsx("option",{value:"low",children:"Faible"}),r.jsx("option",{value:"medium",children:"Moyen"}),r.jsx("option",{value:"high",children:"lev"}),r.jsx("option",{value:"critical",children:"Critique"})]})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Type"}),r.jsxs(Qe,{value:A.type,onChange:_=>T(B=>({...B,type:_.target.value})),children:[r.jsx("option",{value:"bug",children:"Bug"}),r.jsx("option",{value:"feature",children:"Amlioration"}),r.jsx("option",{value:"performance",children:"Performance"}),r.jsx("option",{value:"security",children:"Scurit"}),r.jsx("option",{value:"other",children:"Autre"})]})]})]})}),r.jsxs(Nt,{children:[r.jsx(Y,{variant:"ghost",mr:3,onClick:p,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:F,children:"Enregistrer"})]})]})]})]})}function IS({p:e,onEdit:t,onDelete:n}){return r.jsxs(Me,{overflow:"hidden",children:[r.jsx(ui,{src:e.image||"/assets/fallback/_MG_1006.jpg",alt:e.name,w:"100%",h:"160px",objectFit:"cover"}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:2,children:[r.jsxs(ne,{justify:"space-between",align:"start",children:[r.jsxs(de,{children:[r.jsx(we,{size:"sm",children:e.name}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:e.category})]}),r.jsx(Xu,{size:"sm",colorScheme:e.active?"green":"gray",children:r.jsx(Ju,{children:e.active?"Actif":"Masqu"})})]}),r.jsxs(ne,{justify:"space-between",children:[r.jsxs(O,{fontWeight:"bold",children:[e.price.toFixed(2)," "]}),r.jsxs(ne,{children:[r.jsx(et,{"aria-label":"diter",size:"sm",icon:r.jsx(us,{}),onClick:()=>t(e)}),r.jsx(et,{"aria-label":"Supprimer",size:"sm",colorScheme:"red",icon:r.jsx(Yn,{}),onClick:()=>n(e)})]})]})]})})]})}function qge(){const e=mn(),[t,n]=j.useState(["Textiles","Goodies","Affiches"]),[s,i]=j.useState([{id:"tee-classic",name:"T-shirt RtroBus Classique",price:20,category:"Textiles",image:"",active:!0},{id:"mug-logo",name:"Mug Logo RBE",price:12,category:"Goodies",image:"",active:!0},{id:"poster-920",name:"Affiche R312 n920",price:15,category:"Affiches",image:"",active:!1}]),[o,l]=j.useState([]),[u,d]=j.useState("Toutes"),[h,p]=j.useState(null),[m,x]=j.useState({id:"",name:"",price:0,category:"Textiles",image:"",active:!0,description:""}),y=jt(),b=j.useMemo(()=>u==="Toutes"?s:s.filter(P=>P.category===u),[s,u]),C=()=>x({id:"",name:"",price:0,category:t[0]||"Textiles",image:"",active:!0,description:""}),S=()=>{p(null),C(),y.onOpen()},E=P=>{p(P),x({...P}),y.onOpen()},k=()=>{const P=(m.id||m.name||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-");if(!m.name||!P)return e({status:"warning",title:"Nom requis"});const R={...m,id:P};i(N=>h?N.map(Z=>Z.id===h.id?R:Z):[{...R},...N]),y.onClose(),e({status:"success",title:h?"Produit mis  jour":"Produit ajout"})},A=P=>{confirm(`Supprimer ${P.name} ?`)&&(i(R=>R.filter(N=>N.id!==P.id)),e({status:"info",title:"Produit supprim"}))},T=[{id:"hero-1",type:"banner",colSpan:12,data:{title:"Bienvenue sur RtroMerch",subtitle:"Slection spciale",image:"",ctaText:"Dcouvrir",ctaHref:"/retromerch"}},{id:"promo-1",type:"promo",colSpan:6,data:{label:"Promo",productId:"tee-classic",discount:20}},{id:"product-1",type:"product",colSpan:6,data:{productId:"mug-logo"}},{id:"grid-1",type:"grid",colSpan:12,data:{category:"Textiles",count:4}}],[M,D]=j.useState(()=>{try{const P=localStorage.getItem("retromerch_layout");return P?JSON.parse(P):T}catch{return T}}),[$,W]=j.useState(null),[te,re]=j.useState(!0);j.useEffect(()=>{try{localStorage.setItem("retromerch_layout",JSON.stringify(M))}catch{}},[M]);const U=P=>`${P}-${Date.now().toString(36)}`,oe=P=>{const R={colSpan:12,data:{}},N={id:U(P),type:P,...R};P==="banner"&&(N.data={title:"Titre",subtitle:"Sous-titre",image:"",ctaText:"Voir",ctaHref:"/retromerch"}),P==="promo"&&(N.data={label:"Promo",productId:s[0]?.id||"",discount:10}),P==="product"&&(N.data={productId:s[0]?.id||""}),P==="grid"&&(N.data={category:t[0]||"Textiles",count:4}),P==="text"&&(N.data={text:"Texte libre de prsentation"}),P==="spacer"&&(N.data={size:6}),D(Z=>[...Z,N]),W(N.id)},xe=P=>D(R=>R.filter(N=>N.id!==P)),ie=P=>{const R=M.find(Te=>Te.id===P);if(!R)return;const N={...R,id:U("copy")},Z=M.findIndex(Te=>Te.id===P),ke=[...M];ke.splice(Z+1,0,N),D(ke),W(N.id)},H=(P,R)=>D(N=>N.map(Z=>Z.id===P?{...Z,...R,data:{...Z.data,...R.data||{}}}:Z)),F=(P,R)=>{const N=M.findIndex(Te=>Te.id===P);if(N<0)return;const Z=[...M],ke=R==="up"?N-1:N+1;ke<0||ke>=Z.length||([Z[N],Z[ke]]=[Z[ke],Z[N]],D(Z))},_=(P,R)=>H(P,{colSpan:R}),[B,fe]=j.useState(null),I=P=>R=>{fe(P),R.dataTransfer.setData("text/plain",P)},ee=P=>{P.preventDefault()},ae=P=>R=>{R.preventDefault();const N=B||R.dataTransfer.getData("text/plain");if(!N||N===P)return;const Z=[...M],ke=Z.findIndex(Ke=>Ke.id===N),Te=Z.findIndex(Ke=>Ke.id===P);if(ke===-1||Te===-1)return;const[je]=Z.splice(ke,1);Z.splice(Te,0,je),D(Z),fe(null)};return r.jsxs(de,{p:6,maxW:"7xl",mx:"auto",children:[r.jsxs(Q,{align:"stretch",spacing:6,children:[r.jsxs(ne,{justify:"space-between",align:"center",children:[r.jsxs(we,{size:"lg",display:"flex",alignItems:"center",gap:2,children:[r.jsx(oy,{})," Administration RtroMerch"]}),r.jsxs(ne,{children:[r.jsx(Y,{leftIcon:r.jsx(Pn,{}),colorScheme:"blue",onClick:S,children:"Ajouter un produit"}),r.jsx(Y,{leftIcon:r.jsx(mg,{}),variant:"outline",children:"Paramtres"})]})]}),r.jsxs(gl,{colorScheme:"red",variant:"enclosed",children:[r.jsxs(xl,{children:[r.jsxs(an,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(oy,{})," Catalogue"]}),r.jsxs(an,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(ole,{})," Commandes"]}),r.jsx(an,{children:"Catgories"}),r.jsx(an,{children:"Mise en page"}),r.jsx(an,{children:"Paramtres"})]}),r.jsxs(yl,{children:[r.jsx(ln,{px:0,children:r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsxs(ne,{justify:"space-between",align:"center",children:[r.jsx(we,{size:"md",children:"Catalogue"}),r.jsxs(ne,{children:[r.jsxs(Qe,{size:"sm",value:u,onChange:P=>d(P.target.value),children:[r.jsx("option",{children:"Toutes"}),t.map(P=>r.jsx("option",{children:P},P))]}),r.jsx(Y,{size:"sm",onClick:S,leftIcon:r.jsx(Pn,{}),children:"Nouveau"})]})]})}),r.jsx(Ae,{children:b.length===0?r.jsx(cn,{py:10,children:r.jsx(O,{color:"gray.600",children:"Aucun produit pour linstant."})}):r.jsx(tt,{columns:{base:1,sm:2,md:3,xl:4},spacing:4,children:b.map(P=>r.jsx(IS,{p:P,onEdit:E,onDelete:A},P.id))})})]})}),r.jsx(ln,{px:0,children:r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:"Commandes"})}),r.jsx(Ae,{children:o.length===0?r.jsx(cn,{py:10,children:r.jsx(O,{color:"gray.600",children:"Aucune commande pour le moment."})}):r.jsxs(Tr,{size:"sm",children:[r.jsx(Ir,{children:r.jsxs($t,{children:[r.jsx(Ie,{children:"#"}),r.jsx(Ie,{children:"Date"}),r.jsx(Ie,{children:"Client"}),r.jsx(Ie,{children:"Montant"}),r.jsx(Ie,{children:"Statut"})]})}),r.jsx(zr,{children:o.map(P=>r.jsxs($t,{children:[r.jsx(Pe,{children:P.id}),r.jsx(Pe,{children:new Date(P.createdAt).toLocaleString("fr-FR")}),r.jsx(Pe,{children:P.customerName}),r.jsxs(Pe,{children:[P.total.toFixed(2)," "]}),r.jsx(Pe,{children:P.status})]},P.id))})]})})]})}),r.jsx(ln,{px:0,children:r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(ne,{justify:"space-between",children:r.jsx(we,{size:"md",children:"Catgories"})})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[t.map((P,R)=>r.jsxs(ne,{justify:"space-between",borderWidth:"1px",p:3,borderRadius:"md",children:[r.jsx(O,{children:P}),r.jsxs(ne,{children:[r.jsx(et,{"aria-label":"Renommer",size:"sm",icon:r.jsx(us,{}),onClick:()=>{const N=prompt("Nouveau nom de catgorie",P);N&&(n(Z=>Z.map(ke=>ke===P?N:ke)),i(Z=>Z.map(ke=>ke.category===P?{...ke,category:N}:ke)))}}),r.jsx(et,{"aria-label":"Supprimer",size:"sm",colorScheme:"red",icon:r.jsx(Yn,{}),onClick:()=>{confirm(`Supprimer la catgorie ${P} ?`)&&(n(N=>N.filter(Z=>Z!==P)),i(N=>N.map(Z=>Z.category===P?{...Z,category:"Autre"}:Z)))}})]})]},P)),r.jsxs(ne,{children:[r.jsx(pe,{placeholder:"Nouvelle catgorie",size:"sm",id:"newCat"}),r.jsx(Y,{size:"sm",onClick:()=>{const P=document.getElementById("newCat"),R=(P?.value||"").trim();if(R){if(t.includes(R))return e({status:"info",title:"Existe dj"});n(N=>[...N,R]),P.value=""}},children:"Ajouter"})]})]})})]})}),r.jsx(ln,{px:0,children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsxs(ne,{justify:"space-between",align:"center",children:[r.jsx(we,{size:"md",children:"Mise en page  diteur  puzzle "}),r.jsxs(ne,{children:[r.jsxs(Y,{size:"sm",leftIcon:r.jsx(zm,{}),onClick:()=>re(P=>!P),children:[te?"Masquer":"Afficher"," laperu"]}),r.jsx(Y,{size:"sm",variant:"outline",leftIcon:r.jsx(ZO,{}),onClick:()=>{navigator.clipboard.writeText(JSON.stringify(M,null,2)),e({status:"success",title:"Layout copi"})},children:"Exporter JSON"})]})]}),r.jsxs(tt,{columns:{base:1,xl:3},spacing:4,children:[r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Palette"})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:2,children:[r.jsx(Y,{onClick:()=>oe("banner"),children:"Bannire"}),r.jsx(Y,{onClick:()=>oe("promo"),children:"Produit en promo"}),r.jsx(Y,{onClick:()=>oe("product"),children:"Produit (slection)"}),r.jsx(Y,{onClick:()=>oe("grid"),children:"Grille par catgorie"}),r.jsx(Y,{onClick:()=>oe("text"),children:"Texte"}),r.jsx(Y,{onClick:()=>oe("spacer"),children:"Espace"})]})})]}),r.jsxs(Me,{gridColumn:{base:"auto",xl:"span 2"},children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"diteur"})}),r.jsx(Ae,{children:r.jsx(de,{borderWidth:"1px",borderRadius:"md",p:3,children:r.jsx(so,{templateColumns:"repeat(12, 1fr)",gap:3,gridAutoFlow:"row dense",children:M.map(P=>r.jsxs(de,{gridColumn:`span ${Math.min(12,Math.max(3,P.colSpan||12))}`,p:0,borderWidth:$===P.id?"2px":"1px",borderColor:$===P.id?"blue.400":"gray.200",borderRadius:"md",bg:$===P.id?"blue.50":"white",draggable:!0,onDragStart:I(P.id),onDragOver:ee,onDrop:ae(P.id),onClick:()=>W(P.id),children:[r.jsxs(ne,{justify:"space-between",p:2,bg:"gray.50",borderBottomWidth:"1px",borderTopRadius:"md",children:[r.jsxs(ne,{children:[r.jsx(Xu,{size:"sm",children:r.jsx(Ju,{children:P.type})}),r.jsx(Qe,{size:"xs",w:"auto",value:P.colSpan,onChange:R=>_(P.id,parseInt(R.target.value)),children:[12,8,6,4,3].map(R=>r.jsxs("option",{value:R,children:[R,"/12"]},R))})]}),r.jsxs(ne,{children:[r.jsx(et,{"aria-label":"Monter",size:"xs",icon:r.jsx(TE,{}),onClick:R=>{R.stopPropagation(),F(P.id,"up")}}),r.jsx(et,{"aria-label":"Descendre",size:"xs",icon:r.jsx(AE,{}),onClick:R=>{R.stopPropagation(),F(P.id,"down")}}),r.jsx(et,{"aria-label":"Dupliquer",size:"xs",icon:r.jsx(ZO,{}),onClick:R=>{R.stopPropagation(),ie(P.id)}}),r.jsx(et,{"aria-label":"Supprimer",size:"xs",colorScheme:"red",icon:r.jsx(Yn,{}),onClick:R=>{R.stopPropagation(),xe(P.id)}})]})]}),r.jsxs(de,{p:3,children:[P.type==="banner"&&r.jsxs(Q,{align:"stretch",spacing:2,children:[r.jsx(pe,{size:"sm",placeholder:"Titre",value:P.data.title||"",onChange:R=>H(P.id,{data:{title:R.target.value}})}),r.jsx(pe,{size:"sm",placeholder:"Sous-titre",value:P.data.subtitle||"",onChange:R=>H(P.id,{data:{subtitle:R.target.value}})}),r.jsx(pe,{size:"sm",placeholder:"Image URL",value:P.data.image||"",onChange:R=>H(P.id,{data:{image:R.target.value}})}),r.jsxs(ne,{children:[r.jsx(pe,{size:"sm",placeholder:"Texte du bouton",value:P.data.ctaText||"",onChange:R=>H(P.id,{data:{ctaText:R.target.value}})}),r.jsx(pe,{size:"sm",placeholder:"Lien",value:P.data.ctaHref||"",onChange:R=>H(P.id,{data:{ctaHref:R.target.value}})})]})]}),P.type==="promo"&&r.jsxs(tt,{columns:{base:1,md:2},spacing:2,children:[r.jsxs(G,{children:[r.jsx(q,{fontSize:"xs",children:"Produit"}),r.jsx(Qe,{size:"sm",value:P.data.productId||"",onChange:R=>H(P.id,{data:{productId:R.target.value}}),children:s.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))})]}),r.jsxs(G,{children:[r.jsx(q,{fontSize:"xs",children:"Label"}),r.jsx(pe,{size:"sm",value:P.data.label||"",onChange:R=>H(P.id,{data:{label:R.target.value}})})]}),r.jsxs(G,{children:[r.jsx(q,{fontSize:"xs",children:"Rduction (%)"}),r.jsx(Qn,{size:"sm",min:0,max:90,value:P.data.discount||0,onChange:(R,N)=>H(P.id,{data:{discount:isNaN(N)?0:N}}),children:r.jsx(Zn,{})})]})]}),P.type==="product"&&r.jsxs(G,{children:[r.jsx(q,{fontSize:"xs",children:"Produit"}),r.jsx(Qe,{size:"sm",value:P.data.productId||"",onChange:R=>H(P.id,{data:{productId:R.target.value}}),children:s.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))})]}),P.type==="grid"&&r.jsxs(tt,{columns:{base:1,md:2},spacing:2,children:[r.jsxs(G,{children:[r.jsx(q,{fontSize:"xs",children:"Catgorie"}),r.jsx(Qe,{size:"sm",value:P.data.category||"",onChange:R=>H(P.id,{data:{category:R.target.value}}),children:t.map(R=>r.jsx("option",{value:R,children:R},R))})]}),r.jsxs(G,{children:[r.jsx(q,{fontSize:"xs",children:"Nombre"}),r.jsx(Qn,{size:"sm",min:1,max:12,value:P.data.count||4,onChange:(R,N)=>H(P.id,{data:{count:isNaN(N)?4:N}}),children:r.jsx(Zn,{})})]})]}),P.type==="text"&&r.jsx(Gt,{size:"sm",rows:3,value:P.data.text||"",onChange:R=>H(P.id,{data:{text:R.target.value}})}),P.type==="spacer"&&r.jsxs(ne,{children:[r.jsx(O,{fontSize:"sm",color:"gray.600",children:"Espace (px)"}),r.jsx(Qn,{size:"sm",min:8,max:96,value:P.data.size||24,onChange:(R,N)=>H(P.id,{data:{size:isNaN(N)?24:N}}),children:r.jsx(Zn,{})})]})]})]},P.id))})})})]})]}),te&&r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"sm",children:"Aperu dynamique"})}),r.jsx(Ae,{children:r.jsx(de,{children:r.jsx(so,{templateColumns:{base:"1fr",md:"repeat(12, 1fr)"},gap:4,gridAutoFlow:"row dense",children:M.map(P=>r.jsxs(de,{gridColumn:{base:"auto",md:`span ${Math.min(12,Math.max(3,P.colSpan||12))}`},children:[P.type==="banner"&&r.jsx(qn,{bgImage:P.data.image||void 0,bgSize:"cover",bgPos:"center",borderRadius:"md",p:10,minH:"160px",align:"center",justify:"space-between",bg:P.data.image?void 0:"gray.100",children:r.jsxs(Q,{align:"start",spacing:2,children:[r.jsx(we,{size:"lg",children:P.data.title||"Titre"}),r.jsx(O,{color:"gray.700",children:P.data.subtitle||"Sous-titre"}),P.data.ctaText&&r.jsx(Y,{colorScheme:"blue",size:"sm",children:P.data.ctaText})]})}),P.type==="promo"&&(()=>{const R=s.find(N=>N.id===P.data.productId);return R?r.jsxs(Me,{overflow:"hidden",borderColor:"red.200",borderWidth:"1px",children:[r.jsx(ui,{src:R.image||"/assets/fallback/_MG_1006.jpg",alt:R.name,h:"160px",w:"100%",objectFit:"cover"}),r.jsxs(Ae,{children:[r.jsxs(ne,{justify:"space-between",align:"start",children:[r.jsxs(Q,{align:"start",spacing:1,children:[r.jsx(we,{size:"sm",children:R.name}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:R.category})]}),r.jsx(Xu,{colorScheme:"red",children:r.jsxs(Ju,{children:[P.data.label||"Promo"," -",P.data.discount||0,"%"]})})]}),r.jsxs(ne,{justify:"space-between",pt:2,children:[r.jsxs(O,{fontWeight:"bold",children:[(R.price*(1-(P.data.discount||0)/100)).toFixed(2),"  ",r.jsxs(O,{as:"span",color:"gray.500",textDecor:"line-through",ml:2,children:[R.price.toFixed(2)," "]})]}),r.jsx(Y,{size:"sm",colorScheme:"blue",children:"Voir"})]})]})]}):r.jsx(de,{borderWidth:"1px",p:3,borderRadius:"md",children:"Produit introuvable"})})(),P.type==="product"&&(()=>{const R=s.find(N=>N.id===P.data.productId);return R?r.jsx(IS,{p:R,onEdit:()=>{},onDelete:()=>{}}):r.jsx(de,{borderWidth:"1px",p:3,borderRadius:"md",children:"Produit introuvable"})})(),P.type==="grid"&&(()=>{const R=s.filter(N=>N.active&&(P.data.category?N.category===P.data.category:!0)).slice(0,P.data.count||4);return r.jsx(tt,{columns:{base:1,sm:2,md:2,lg:3,xl:4},spacing:4,children:R.map(N=>r.jsx(IS,{p:N,onEdit:()=>{},onDelete:()=>{}},N.id))})})(),P.type==="text"&&r.jsx(de,{p:3,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:r.jsx(O,{children:P.data.text||""})}),P.type==="spacer"&&r.jsx(de,{h:`${P.data.size||24}px`})]},P.id))})})})]})]})}),r.jsx(ln,{px:0,children:r.jsxs(Me,{children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:"Paramtres"})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:4,children:[r.jsxs(ne,{justify:"space-between",children:[r.jsx(O,{children:"Activer la boutique"}),r.jsx(sr,{defaultChecked:!0,isDisabled:!0})]}),r.jsxs(ne,{justify:"space-between",children:[r.jsx(O,{children:"Mode test (paiements simuls)"}),r.jsx(sr,{isDisabled:!0})]}),r.jsx(O,{color:"gray.600",children:"Connecteurs (HelloAsso/Stripe), TVA, frais de port, etc. seront configurables ici."})]})})]})})]})]})]}),y.isOpen&&r.jsx(de,{position:"fixed",inset:0,bg:"blackAlpha.600",zIndex:1e3,onClick:y.onClose,children:r.jsx(de,{as:"dialog",onClick:P=>P.stopPropagation(),style:{border:0},children:r.jsxs(Me,{position:"fixed",top:"10%",left:"50%",transform:"translateX(-50%)",w:{base:"95%",md:"560px"},children:[r.jsx(Ct,{children:r.jsx(we,{size:"md",children:h?"Modifier le produit":"Nouveau produit"})}),r.jsx(Ae,{children:r.jsxs(Q,{align:"stretch",spacing:3,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Nom"}),r.jsx(pe,{value:m.name,onChange:P=>x(R=>({...R,name:P.target.value}))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Identifiant (URL)"}),r.jsx(pe,{value:m.id,onChange:P=>x(R=>({...R,id:P.target.value})),placeholder:"auto depuis le nom"})]}),r.jsxs(tt,{columns:{base:1,md:2},spacing:3,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Prix ()"}),r.jsx(Qn,{min:0,value:m.price,onChange:(P,R)=>x(N=>({...N,price:isNaN(R)?0:R})),children:r.jsx(Zn,{})})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Catgorie"}),r.jsx(Qe,{value:m.category,onChange:P=>x(R=>({...R,category:P.target.value})),children:t.map(P=>r.jsx("option",{children:P},P))})]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Image (URL)"}),r.jsx(pe,{value:m.image,onChange:P=>x(R=>({...R,image:P.target.value})),placeholder:"https://"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{value:m.description,onChange:P=>x(R=>({...R,description:P.target.value})),rows:3})]}),r.jsxs(ne,{justify:"space-between",children:[r.jsx(O,{children:"Actif"}),r.jsx(sr,{isChecked:m.active,onChange:P=>x(R=>({...R,active:P.target.checked}))})]}),r.jsxs(ne,{justify:"flex-end",pt:2,children:[r.jsx(Y,{variant:"ghost",onClick:y.onClose,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:k,children:h?"Enregistrer":"Crer"})]})]})})]})})})]})}const Gge=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="5173"),Yge=(Gge?"https://attractive-kindness-rbe-serveurs.up.railway.app":"").replace(/\/$/,"");function Kge(){try{const e=localStorage.getItem("accessToken")||localStorage.getItem("token")||localStorage.getItem("jwt");return e?{Authorization:`Bearer ${e}`}:{}}catch{return{}}}const xu=async(e,t={})=>{const n=`${Yge}${e.startsWith("/")?"":"/"}${e}`,s={Accept:"application/json",...Kge(),...t.headers||{}},i=d=>{const h=d.toLowerCase();for(const p of Object.keys(s))if(p.toLowerCase()===h)return!0;return!1};let o=t.body;(d=>d&&typeof d=="object"&&!(d instanceof FormData)&&!(d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(d instanceof URLSearchParams))(o)?(o=JSON.stringify(o),i("Content-Type")||(s["Content-Type"]="application/json")):typeof o=="string"&&(i("Content-Type")||(s["Content-Type"]="application/json"));const u=await fetch(n,{credentials:"include",headers:s,...t,...o!==void 0?{body:o}:{}});if(u.status===404)return{notFound:!0};if(u.status===204)return null;if(!u.ok){const d=await u.text().catch(()=>"");throw new Error(`HTTP ${u.status} ${u.statusText} - ${d}`)}return u.json()},jk=[{value:"tournee",label:"Tourne",color:"orange"},{value:"campagne",label:"Campagne",color:"purple"},{value:"maintenance",label:"Maintenance",color:"red"},{value:"evenement",label:"vnement",color:"green"},{value:"livraison",label:"Livraison",color:"cyan"},{value:"cotisation",label:"Cotisation",color:"yellow"}];function Xge({events:e,currentDate:t,onDateClick:n,onPrevMonth:s,onNextMonth:i}){const o=t.getFullYear(),l=t.getMonth(),u=new Date(o,l,1).getDay(),d=new Date(o,l+1,0).getDate(),h=new Date(o,l,0).getDate(),p=[];for(let y=u-1;y>=0;y--)p.push({day:h-y,isCurrentMonth:!1});for(let y=1;y<=d;y++)p.push({day:y,isCurrentMonth:!0});const m=42-p.length;for(let y=1;y<=m;y++)p.push({day:y,isCurrentMonth:!1});const x=y=>e.filter(b=>{const C=new Date(b.startDate);return C.getDate()===y&&C.getMonth()===l&&C.getFullYear()===o});return r.jsx(Me,{mb:6,children:r.jsx(Ae,{children:r.jsxs(Q,{spacing:4,align:"stretch",children:[r.jsxs(qn,{justify:"space-between",align:"center",children:[r.jsx(we,{size:"md",children:t.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),r.jsxs(ne,{children:[r.jsx(et,{icon:r.jsx(zoe,{}),onClick:s,variant:"ghost","aria-label":"Mois prcdent"}),r.jsx(et,{icon:r.jsx(Ioe,{}),onClick:i,variant:"ghost","aria-label":"Mois suivant"})]})]}),r.jsxs(so,{templateColumns:"repeat(7, 1fr)",gap:2,children:[["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(y=>r.jsx(de,{textAlign:"center",fontWeight:"bold",fontSize:"sm",children:y},y)),p.map((y,b)=>{const C=y.isCurrentMonth?x(y.day):[];return r.jsxs(de,{p:2,border:"1px solid",borderColor:"gray.200",borderRadius:"md",minH:"100px",bg:y.isCurrentMonth?"white":"gray.50",cursor:y.isCurrentMonth?"pointer":"default",onClick:()=>y.isCurrentMonth&&n(y.day),_hover:y.isCurrentMonth?{bg:"blue.50"}:{},children:[r.jsx(O,{fontSize:"xs",fontWeight:"bold",mb:1,children:y.day}),r.jsx(Q,{spacing:1,align:"stretch",children:C.map(S=>r.jsx(Ge,{fontSize:"2xs",colorScheme:Dw(S.type),cursor:"pointer",title:S.title,noOfLines:1,children:S.title},S.id))})]},b)})]})]})})})}const Dw=e=>jk.find(n=>n.value===e)?.color||"gray",LP=e=>jk.find(n=>n.value===e)?.label||e,LS=e=>e?new Date(e).toLocaleDateString("fr-FR"):"";function Jge(){const e=mn(),{isOpen:t,onOpen:n,onClose:s}=jt(),{isOpen:i,onOpen:o,onClose:l}=jt(),[u,d]=j.useState([]),[h,p]=j.useState(null),[m,x]=j.useState(new Date),[y,b]=j.useState([]),[C,S]=j.useState(!0),[E,k]=j.useState([]),[A,T]=j.useState(!0),[M,D]=j.useState({title:"",description:"",type:"tournee",startDate:"",startTime:"08:00",endDate:"",endTime:"17:00",location:"",vehicleId:"",driverId:"",selectedMembers:[],externalEmails:""});j.useEffect(()=>{te(),$(),W()},[]);const $=async()=>{try{S(!0);const B=await xu("/api/members");if(Array.isArray(B)){const fe=B.map(I=>({id:I.id,name:`${I.firstName} ${I.lastName}`,email:I.email,membershipStatus:I.membershipStatus}));b(fe)}else console.warn("Unexpected members response format:",B),b([])}catch(B){console.error("Erreur chargement membres:",B),b([]),e({title:"Attention",description:"Impossible de charger la liste des membres",status:"warning",duration:3})}finally{S(!1)}},W=async()=>{try{T(!0);const B=await xu("/api/vehicles");Array.isArray(B)?k(B):(console.warn("Unexpected vehicles response format:",B),k([]))}catch(B){console.error("Erreur chargement vhicules:",B),k([])}finally{T(!1)}},te=async()=>{try{const B=await xu("/api/planning/events");Array.isArray(B)?d(B):B&&typeof B=="object"&&B.data&&Array.isArray(B.data)?d(B.data):(console.warn("Unexpected response format, using demo data:",B),d([{id:"1",title:"Tourne fvrier",type:"tournee",description:"Collecte standard fvrier",startDate:new Date().toISOString(),vehicleId:"bus-1",driverId:"driver-1"}]))}catch(B){console.error("Erreur chargement:",B),d([{id:"1",title:"Tourne fvrier",type:"tournee",description:"Collecte standard fvrier",startDate:new Date().toISOString(),vehicleId:"bus-1",driverId:"driver-1"}])}},re=B=>{const{name:fe,value:I}=B.target;D(ee=>({...ee,[fe]:I}))},U=B=>{D(fe=>({...fe,selectedMembers:B}))},oe=async()=>{if(!M.title||!M.startDate){e({title:"Erreur",description:"Veuillez remplir au minimum le titre et la date",status:"error",duration:3});return}try{const B={title:M.title,type:M.type,description:M.description,startDate:new Date(`${M.startDate}T${M.startTime||"08:00"}`).toISOString(),endDate:M.endDate?new Date(`${M.endDate}T${M.endTime||"17:00"}`).toISOString():null,startTime:M.startTime||"08:00",endTime:M.endTime||"17:00",location:M.location,vehicleId:M.vehicleId||null,driverId:M.driverId||null,selectedMembers:M.selectedMembers,externalEmails:M.externalEmails},fe=await xu("/api/planning/events",{method:"POST",body:JSON.stringify(B)});if(fe.success||fe.event)await te(),e({title:"Succs",description:`vnement cr et ${fe.emailsSent?.members||0} invitation(s) envoye(s)`,status:"success",duration:3}),D({title:"",description:"",type:"tournee",startDate:"",startTime:"08:00",endDate:"",endTime:"17:00",location:"",vehicleId:"",driverId:"",selectedMembers:[],externalEmails:""}),s();else throw new Error(fe.error||"Erreur inconnue")}catch(B){console.error("Erreur cration vnement:",B),e({title:"Erreur",description:B.message||"Impossible de crer l'vnement",status:"error",duration:3})}},xe=B=>{p(B),o()},ie=async B=>{try{const fe=await xu(`/api/planning/events/${B}`,{method:"DELETE"});if(fe.success)await te(),e({title:"Succs",description:"vnement supprim",status:"success",duration:3}),l();else throw new Error(fe.error||"Erreur inconnue")}catch(fe){console.error("Erreur suppression:",fe),e({title:"Erreur",description:fe.message||"Impossible de supprimer l'vnement",status:"error",duration:3})}},H=()=>{x(B=>new Date(B.getFullYear(),B.getMonth()-1,1))},F=()=>{x(B=>new Date(B.getFullYear(),B.getMonth()+1,1))},_=B=>{const fe=new Date(m.getFullYear(),m.getMonth(),B);D(I=>({...I,startDate:fe.toISOString().split("T")[0]})),n()};return r.jsx(Lm,{children:r.jsxs(Ws,{maxW:"container.xl",py:8,children:[r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(qn,{justify:"space-between",align:"center",children:[r.jsx(we,{as:"h1",size:"lg",children:" RtroPlanning"}),r.jsx(Y,{colorScheme:"blue",onClick:n,children:" Ajouter un vnement"})]}),r.jsx(Xge,{events:u,currentDate:m,onDateClick:_,onPrevMonth:H,onNextMonth:F}),r.jsxs(de,{children:[r.jsx(we,{size:"md",mb:4,children:" vnements prvus"}),!Array.isArray(u)||u.length===0?r.jsx(Me,{children:r.jsx(Ae,{children:r.jsx(O,{textAlign:"center",color:"gray.500",children:"Aucun vnement prvu pour le moment"})})}):r.jsx(so,{templateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:4,children:u.map(B=>r.jsx(Me,{cursor:"pointer",onClick:()=>xe(B),_hover:{shadow:"md",transform:"translateY(-2px)"},transition:"all 0.2s",children:r.jsx(Ae,{children:r.jsxs(Q,{align:"start",spacing:3,children:[r.jsxs(ne,{justify:"space-between",w:"full",children:[r.jsx(we,{size:"sm",children:B.title}),r.jsx(Ge,{colorScheme:Dw(B.type),children:LP(B.type)})]}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:B.description}),r.jsxs(ne,{fontSize:"xs",color:"gray.500",spacing:4,children:[r.jsxs(O,{children:[" ",LS(B.startDate)]}),B.vehicleId&&r.jsxs(O,{children:[" ",B.vehicleId]})]})]})})},B.id))})]})]}),r.jsxs(mt,{isOpen:t,onClose:s,size:"xl",scrollBehavior:"inside",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:" Crer un nouvel vnement"}),r.jsx(kt,{}),r.jsx(gt,{pb:6,children:r.jsxs(Q,{spacing:4,children:[r.jsxs(de,{w:"full",children:[r.jsx(we,{size:"sm",mb:3,children:" Dtails"}),r.jsxs(Q,{spacing:3,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Titre"}),r.jsx(pe,{name:"title",value:M.title,onChange:re,placeholder:"Titre de l'vnement"})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Type"}),r.jsx(Qe,{name:"type",value:M.type,onChange:re,children:jk.map(B=>r.jsx("option",{value:B.value,children:B.label},B.value))})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Description"}),r.jsx(Gt,{name:"description",value:M.description,onChange:re,placeholder:"Dtails de l'vnement",rows:3})]})]})]}),r.jsx(rn,{}),r.jsxs(de,{w:"full",children:[r.jsx(we,{size:"sm",mb:3,children:" Date et Heure"}),r.jsxs(so,{templateColumns:"repeat(2, 1fr)",gap:3,children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Date dbut"}),r.jsx(pe,{type:"date",name:"startDate",value:M.startDate,onChange:re})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Heure dbut"}),r.jsx(pe,{type:"time",name:"startTime",value:M.startTime,onChange:re})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Date fin"}),r.jsx(pe,{type:"date",name:"endDate",value:M.endDate,onChange:re})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Heure fin"}),r.jsx(pe,{type:"time",name:"endTime",value:M.endTime,onChange:re})]})]})]}),r.jsx(rn,{}),r.jsxs(de,{w:"full",children:[r.jsx(we,{size:"sm",mb:3,children:" Affectations"}),r.jsxs(Q,{spacing:3,children:[r.jsxs(G,{children:[r.jsx(q,{children:"Vhicule"}),A?r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Chargement des vhicules..."}):E.length===0?r.jsx(O,{fontSize:"sm",color:"red.500",children:"Aucun vhicule disponible"}):r.jsxs(Qe,{name:"vehicleId",value:M.vehicleId,onChange:re,children:[r.jsx("option",{value:"",children:"-- Slectionner un vhicule --"}),E.map(B=>r.jsxs("option",{value:B.id,children:[B.parc," - ",B.modele," (",B.marque,")"]},B.id))]})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Chauffeur (Membre)"}),C?r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Chargement des chauffeurs..."}):y.length===0?r.jsx(O,{fontSize:"sm",color:"red.500",children:"Aucun membre disponible"}):r.jsxs(Qe,{name:"driverId",value:M.driverId,onChange:re,children:[r.jsx("option",{value:"",children:"-- Slectionner un chauffeur --"}),y.map(B=>r.jsx("option",{value:B.id,children:B.name},B.id))]})]})]})]}),r.jsx(rn,{}),r.jsxs(de,{w:"full",children:[r.jsx(we,{size:"sm",mb:3,children:" Participants"}),r.jsxs(Q,{spacing:3,align:"start",children:[r.jsxs(G,{children:[r.jsx(q,{children:"Membres de l'association"}),C?r.jsx(O,{fontSize:"sm",color:"gray.500",children:"Chargement des membres..."}):y.length===0?r.jsx(O,{fontSize:"sm",color:"orange.500",children:"Aucun membre disponible"}):r.jsx(K3,{value:M.selectedMembers,onChange:U,children:r.jsx(pa,{spacing:2,children:y.map(B=>r.jsxs(Pu,{value:B.id,children:[B.name," (",B.email,")"]},B.id))})})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Invitations externes"}),r.jsx(Gt,{name:"externalEmails",value:M.externalEmails,onChange:re,placeholder:`Adresses emails spares par des virgules
exemple@mail.com, autre@mail.com`,rows:3}),r.jsx(O,{fontSize:"xs",color:"gray.500",mt:1,children:"Sparez les adresses par des virgules pour envoyer des invitations par email"})]})]})]}),r.jsx(rn,{}),r.jsxs(ne,{justify:"flex-end",w:"full",pt:4,children:[r.jsx(Y,{variant:"ghost",onClick:s,children:"Annuler"}),r.jsx(Y,{colorScheme:"blue",onClick:oe,children:" Crer l'vnement"})]})]})})]})]}),r.jsxs(mt,{isOpen:i,onClose:l,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:h?.title}),r.jsx(kt,{}),r.jsx(gt,{pb:6,children:h&&r.jsxs(Q,{spacing:4,align:"start",children:[r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",mb:1,children:"Type:"}),r.jsx(Ge,{colorScheme:Dw(h.type),children:LP(h.type)})]}),r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",mb:1,children:"Description:"}),r.jsx(O,{children:h.description||"-"})]}),r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",mb:1,children:"Date dbut:"}),r.jsx(O,{children:LS(h.startDate)})]}),h.endDate&&r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",mb:1,children:"Date fin:"}),r.jsx(O,{children:LS(h.endDate)})]}),h.vehicleId&&r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",mb:1,children:"Vhicule:"}),r.jsx(O,{children:h.vehicleId})]}),h.driverId&&r.jsxs(de,{children:[r.jsx(O,{fontWeight:"bold",mb:1,children:"Chauffeur:"}),r.jsx(O,{children:h.driverId})]}),r.jsxs(ne,{spacing:3,w:"full",pt:4,children:[r.jsx(Y,{colorScheme:"red",flex:1,onClick:()=>ie(h.id),children:" Supprimer"}),r.jsx(Y,{variant:"ghost",flex:1,onClick:l,children:"Fermer"})]})]})})]})]})]})})}const Qge="https://attractive-kindness-rbe-serveurs.up.railway.app";function Zge(){const{eventId:e,memberId:t}=Jy(),n=ha(),s=mn(),i=ir("white","gray.800"),[o,l]=j.useState(!0),[u,d]=j.useState(null),[h,p]=j.useState(null),[m,x]=j.useState(!1),[y,b]=j.useState(null);j.useEffect(()=>{C()},[e,t]);const C=async()=>{try{l(!0),d({id:e,title:"Tourne collecte fvrier",date:new Date(2025,1,15).toISOString(),description:"Tourne de collecte bi-mensuelle",type:"TOURNEE"}),p({id:t,prenom:"Jean",nom:"Dupont",email:"jean@retrobus.fr"})}catch(k){console.error("Fetch error:",k),b("Impossible de charger les informations")}finally{l(!1)}},S=async k=>{try{if(l(!0),!(await fetch(`${Qge}/api/planning/attendance/${e}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirmed:k})})).ok)throw new Error("Failed");x(!0),s({status:"success",title:k?"Prsence confirme !":"Absence enregistre",duration:3e3}),setTimeout(()=>n("/"),2e3)}catch(A){s({status:"error",title:"Erreur",description:A.message})}finally{l(!1)}};if(o)return r.jsx(cn,{p:6,children:r.jsx(sn,{size:"xl"})});if(y)return r.jsx(cn,{p:6,minH:"100vh",children:r.jsxs(Ft,{status:"error",borderRadius:"lg",children:[r.jsx(Vt,{}),y]})});if(m)return r.jsx(cn,{p:6,minH:"100vh",children:r.jsx(Me,{bg:i,maxW:"500px",w:"100%",children:r.jsxs(Ae,{textAlign:"center",py:10,children:[r.jsxs(de,{mb:4,children:[r.jsx(de,{fontSize:"60px",mb:4,children:""}),r.jsx(we,{size:"lg",mb:2,children:"Merci !"}),r.jsx(O,{color:"gray.600",children:"Votre rponse a t enregistre."})]}),r.jsx(Y,{mt:6,onClick:()=>n("/"),children:"Retourner  l'accueil"})]})})});const E=new Date(u.date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsx(cn,{p:6,minH:"100vh",bg:"gray.50",children:r.jsxs(Me,{bg:i,maxW:"600px",w:"100%",boxShadow:"xl",borderRadius:"xl",children:[r.jsx(Ct,{p:8,borderBottomWidth:"1px",children:r.jsxs(Q,{spacing:4,align:"center",children:[r.jsx(de,{fontSize:"48px",children:""}),r.jsx(we,{size:"lg",textAlign:"center",children:"Confirmation de prsence"}),r.jsxs(O,{color:"gray.600",textAlign:"center",children:["Bonjour ",h?.prenom," ",h?.nom]})]})}),r.jsx(Ae,{p:8,children:r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(de,{bg:"blue.50",p:4,borderRadius:"lg",borderLeft:"4px",borderLeftColor:"blue.500",children:[r.jsxs(ne,{spacing:3,mb:2,children:[r.jsx(si,{size:20,color:"#3b82f6"}),r.jsx(we,{size:"sm",children:u?.title})]}),r.jsx(O,{fontSize:"sm",color:"gray.600",mb:2,children:E}),u?.description&&r.jsx(O,{fontSize:"sm",children:u.description})]}),r.jsxs(Q,{spacing:3,pt:4,children:[r.jsx(O,{fontWeight:"600",textAlign:"center",children:"Confirmer votre prsence ?"}),r.jsxs(ne,{spacing:3,w:"100%",children:[r.jsx(Y,{leftIcon:r.jsx(sy,{}),colorScheme:"green",size:"lg",flex:"1",onClick:()=>S(!0),isLoading:o,children:" Je serai prsent"}),r.jsx(Y,{leftIcon:r.jsx(Im,{}),colorScheme:"red",size:"lg",flex:"1",variant:"outline",onClick:()=>S(!1),isLoading:o,children:" Je ne pourrai pas"})]})]}),r.jsx(de,{pt:4,borderTopWidth:"1px",children:r.jsxs(O,{fontSize:"xs",color:"gray.500",textAlign:"center",children:["Votre email: ",h?.email]})})]})})]})})}const _P={confirmed:{label:"Confirmer ma prsence",color:"green",icon:""},declined:{label:"Refuser",color:"red",icon:""},proposed_reschedule:{label:"Proposer un report",color:"orange",icon:""}};function exe(){const e=mn(),{isOpen:t,onOpen:n,onClose:s}=jt(),[i,o]=j.useState([]),[l,u]=j.useState(!0),[d,h]=j.useState(null),[p,m]=j.useState("confirmed"),[x,y]=j.useState(""),[b,C]=j.useState(""),[S,E]=j.useState(!1);j.useEffect(()=>{k()},[]);const k=async()=>{try{u(!0);const D=await xu("/api/planning/my-invitations");Array.isArray(D)?o(D):o([])}catch(D){console.error("Erreur chargement invitations:",D),e({title:"Erreur",description:"Impossible de charger les invitations",status:"error",duration:3}),o([])}finally{u(!1)}},A=async()=>{if(d)try{E(!0);const D={participantId:d.participantId,status:p,rescheduleProposal:p==="proposed_reschedule"?x:null,rescheduleReason:p==="proposed_reschedule"?b:null},$=await xu(`/api/planning/respond-invitation/${d.planningId}/${d.participantId}`,{method:"POST",body:JSON.stringify(D)});if($.success)e({title:"Succs",description:`Votre rponse a t enregistre: ${_P[p].label}`,status:"success",duration:3}),o(W=>W.map(te=>te.participantId===d.participantId?{...te,status:p}:te)),s();else throw new Error($.error||"Erreur lors de la soumission")}catch(D){console.error("Erreur rponse:",D),e({title:"Erreur",description:D.message||"Impossible de soumettre votre rponse",status:"error",duration:3})}finally{E(!1)}},T=D=>({pending:"yellow",confirmed:"green",declined:"red",proposed_reschedule:"orange"})[D]||"gray",M=D=>({pending:"En attente de rponse",confirmed:"Confirm",declined:"Refus",proposed_reschedule:"Report propos"})[D]||D;return r.jsx(Lm,{children:r.jsxs(Ws,{maxW:"container.lg",py:8,children:[r.jsxs(Q,{spacing:6,align:"stretch",children:[r.jsxs(de,{children:[r.jsx(we,{size:"lg",mb:2,children:" Mes Invitations"}),r.jsxs(O,{color:"gray.600",children:["Vous avez ",i.length," invitation",i.length!==1?"s":""]})]}),l?r.jsx(O,{children:"Chargement..."}):i.length===0?r.jsx(Me,{children:r.jsx(Ae,{children:r.jsx(O,{textAlign:"center",color:"gray.500",children:"Vous n'avez pas d'invitations en attente"})})}):r.jsx(Q,{spacing:4,children:i.map(D=>r.jsx(Me,{w:"full",children:r.jsx(Ae,{children:r.jsxs(Q,{align:"start",spacing:3,w:"full",children:[r.jsxs(qn,{w:"full",justify:"space-between",align:"start",children:[r.jsxs(Q,{align:"start",flex:1,spacing:2,children:[r.jsx(we,{size:"md",children:D.eventTitle}),r.jsx(O,{fontSize:"sm",color:"gray.600",children:D.eventType?`Type: ${D.eventType}`:""}),r.jsxs(ne,{spacing:4,fontSize:"sm",children:[r.jsxs(O,{children:[" ",new Date(D.eventDate).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]}),r.jsxs(O,{children:[" ",D.eventStartTime||"Heure non dfinie"]})]}),D.eventLocation&&r.jsxs(O,{fontSize:"sm",color:"gray.600",children:[" ",D.eventLocation]}),D.eventDescription&&r.jsx(O,{fontSize:"sm",color:"gray.600",noOfLines:2,children:D.eventDescription})]}),r.jsx(Ge,{colorScheme:T(D.status),ml:4,textTransform:"capitalize",children:M(D.status)})]}),D.status==="pending"&&r.jsxs(ne,{spacing:2,pt:2,borderTop:"1px solid",borderColor:"gray.200",w:"full",children:[r.jsx(Y,{size:"sm",colorScheme:"green",onClick:()=>{h(D),m("confirmed"),n()},children:" Confirmer"}),r.jsx(Y,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>{h(D),m("declined"),n()},children:" Refuser"}),r.jsx(Y,{size:"sm",colorScheme:"orange",variant:"outline",onClick:()=>{h(D),m("proposed_reschedule"),n()},children:" Reporter"})]}),D.status==="proposed_reschedule"&&D.rescheduleProposal&&r.jsxs(de,{fontSize:"sm",p:2,bg:"orange.50",borderRadius:"md",w:"full",children:[r.jsxs(O,{fontWeight:"bold",color:"orange.700",children:["Report propos au: ",new Date(D.rescheduleProposal).toLocaleDateString("fr-FR")]}),D.rescheduleReason&&r.jsx(O,{color:"orange.700",children:D.rescheduleReason})]})]})})},D.participantId))})]}),r.jsxs(mt,{isOpen:t,onClose:s,size:"lg",children:[r.jsx(yt,{}),r.jsxs(vt,{children:[r.jsx(xt,{children:d&&`Rpondre : ${d.eventTitle}`}),r.jsx(kt,{}),r.jsx(gt,{pb:6,children:r.jsxs(Q,{spacing:4,children:[p==="proposed_reschedule"&&r.jsxs(r.Fragment,{children:[r.jsxs(G,{isRequired:!0,children:[r.jsx(q,{children:"Date propose"}),r.jsx(pe,{type:"date",value:x,onChange:D=>y(D.target.value)})]}),r.jsxs(G,{children:[r.jsx(q,{children:"Raison du report"}),r.jsx(Gt,{value:b,onChange:D=>C(D.target.value),placeholder:"Expliquez pourquoi vous proposez ce report...",rows:4})]})]}),p==="declined"&&r.jsxs(G,{children:[r.jsx(q,{children:"Motif du refus (optionnel)"}),r.jsx(Gt,{value:b,onChange:D=>C(D.target.value),placeholder:"Expliquez pourquoi vous refusez cette invitation...",rows:4})]}),r.jsxs(ne,{w:"full",pt:4,children:[r.jsx(Y,{flex:1,colorScheme:p==="confirmed"?"green":p==="declined"?"red":"orange",isLoading:S,onClick:A,children:_P[p].label}),r.jsx(Y,{flex:1,variant:"outline",onClick:s,isDisabled:S,children:"Annuler"})]})]})})]})]})]})})}function txe(){const{isAuthenticated:e}=Cs(),t=Mo();console.log(" Current route:",t.pathname);const n=e&&t.pathname!=="/login";return r.jsxs(r.Fragment,{children:[n&&r.jsx(xae,{}),r.jsxs(vF,{children:[r.jsx(Nn,{path:"/login",element:r.jsx(dce,{})}),r.jsx(Nn,{path:"/dashboard/home",element:r.jsx(pr,{children:r.jsx(q1,{})})}),r.jsx(Nn,{path:"/dashboard/myrbe",element:r.jsx(pr,{children:r.jsx(Ele,{})})}),r.jsx(Nn,{path:"/dashboard/myrbe/:parc",element:r.jsx(pr,{children:r.jsx(Ale,{})})}),r.jsx(Nn,{path:"/admin/finance",element:r.jsx(pr,{children:r.jsx(Nle,{})})}),r.jsx(Nn,{path:"/dashboard/vehicules",element:r.jsx(pr,{children:r.jsx(fle,{})})}),r.jsx(Nn,{path:"/dashboard/vehicules/ajouter",element:r.jsx(pr,{children:r.jsx(yae,{children:r.jsx(vle,{})})})}),r.jsx(Nn,{path:"/dashboard/vehicules/:parc",element:r.jsx(pr,{children:r.jsx(wle,{})})}),r.jsx(Nn,{path:"/dashboard/evenements",element:r.jsx(pr,{children:r.jsx(Ple,{})})}),r.jsx(Nn,{path:"/dashboard/events-management",element:r.jsx(pr,{children:r.jsx(Lle,{})})}),r.jsx(Nn,{path:"/dashboard/events-creation",element:r.jsx(pr,{children:r.jsx(Ble,{})})}),r.jsx(Nn,{path:"/dashboard/test-events",element:r.jsx(pr,{children:r.jsx($le,{})})}),r.jsx(Nn,{path:"/dashboard/site-management",element:r.jsx(Hx,{resource:Pr.SITE_MANAGEMENT,children:r.jsx(nce,{})})}),r.jsx(Nn,{path:"/dashboard/flash-management",element:r.jsx(pr,{children:r.jsx(ice,{})})}),r.jsx(Nn,{path:"/dashboard/retromerch",element:r.jsx(pr,{children:r.jsx(qge,{})})}),r.jsx(Nn,{path:"/dashboard/stock-management",element:r.jsx(pr,{children:r.jsx(sce,{})})}),r.jsx(Nn,{path:"/dashboard/members-management",element:r.jsx(pr,{children:r.jsx(Hge,{})})}),r.jsx(Nn,{path:"/members",element:r.jsx(pr,{children:r.jsx(_ge,{})})}),r.jsx(Nn,{path:"/adhesion",element:r.jsx(pr,{children:r.jsx(ace,{})})}),r.jsx(Nn,{path:"/dashboard/newsletter",element:r.jsx(pr,{children:r.jsx(hce,{})})}),r.jsx(Nn,{path:"/dashboard/newsletter-campaigns",element:r.jsx(pr,{children:r.jsx(Pge,{})})}),r.jsx(Nn,{path:"/dashboard/retroplanning",element:r.jsx(Hx,{resource:Pr.RETROPLANNING,children:r.jsx(Jge,{})})}),r.jsx(Nn,{path:"/planning/attendance/:eventId/:memberId",element:r.jsx(Zge,{})}),r.jsx(Nn,{path:"/planning/my-invitations",element:r.jsx(Hx,{resource:Pr.RETROPLANNING_RESPOND,children:r.jsx(exe,{})})}),r.jsx(Nn,{path:"/dashboard/support",element:r.jsx(Hx,{resource:Pr.RETROSUPPORT,children:r.jsx(Wge,{})})}),r.jsx(Nn,{path:"/retromail",element:r.jsx(pr,{children:r.jsx(Dle,{})})}),r.jsx(Nn,{path:"/mobile/v/:parc",element:r.jsx(pr,{children:r.jsx(xle,{})})}),r.jsx(Nn,{path:"/",element:r.jsx(pr,{children:r.jsx(q1,{})})}),r.jsx(Nn,{path:"*",element:r.jsx(pr,{children:r.jsx(q1,{})})})]})]})}R$.createRoot(document.getElementById("root")).render(r.jsx(Lt.StrictMode,{children:r.jsx(HZ,{theme:koe,children:r.jsx(UF,{children:r.jsx(_oe,{children:r.jsx(txe,{})})})})}));
